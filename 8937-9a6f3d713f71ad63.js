"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8937],{25427:function(e,n,t){var r=t(72006),i=t(4405),o=t(4541),a=t(52035),l=t(78890),c=t(81995),u=t(87545),s=t(28793);a.kL.register(a.uw,a.f$,a.od,a.jn,a.u);n.Z=function(e){var n=e.labels,t=e.datasets,a=(0,s.F)().values,d={labels:n.map((function(e){return e.toISOString()})),datasets:t.map((function(e){return(0,i.Z)((0,r.Z)({},e),{data:e.data.map((function(e){var n=e.x,t=e.y;return{x:n.toISOString(),y:t}})),pointRadius:1,tension:.1})}))};return(0,o.tZ)(u.x1,{options:{responsive:!0,plugins:{tooltip:{callbacks:{title:function(e){var n=new Date(e[0].label);return(0,l.Z)(n,"MMM d, HH:mm (z)")}}}},scales:{y:{grid:{borderColor:a.global.backgroundHigher,color:a.global.backgroundHigher},ticks:{color:a.global.foregroundDimmer},min:0},x:{grid:{borderColor:a.global.backgroundHighest,color:a.global.backgroundHighest},ticks:{color:a.global.foregroundDimmer,callback:function(e,t){var r=n[t];if(r.toISOString()===(0,c.Z)(r).toISOString())return(0,l.Z)(r,"MMM d")}}}}},data:d})}},31716:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(4541),i=t(86306),o=t(50959),a=t(22167),l=t(65001),c=t(55544),u=t(25776),s=t(28793),d=t(97774),f=t(72006),p=t(43119),h=t(71440),v=t(67216);function m(){var e=(0,p.Z)(["\n  fragment ReplAnalyticsPageViewDataPoint on ReplAnalyticsPageViewsData {\n    __typename\n    timestamp\n    success\n    failure\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,p.Z)(["\n  fragment ReplAnalyticsPageViews on ReplAnalyticsPageViews {\n    __typename\n    uniques\n    results {\n      ...ReplAnalyticsPageViewDataPoint\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function y(){var e=(0,p.Z)(["\n  query ReplAnalyticsPageViews(\n    $id: String!\n    $input: ReplAnalyticsPageViewsInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsPageViews(input: $input) {\n          ... on ReplAnalyticsPageViews {\n            ...ReplAnalyticsPageViews\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}var Z={},b=(0,h.Ps)(m()),w=(0,h.Ps)(g(),b),x=(0,h.Ps)(y(),w);var C=t(25427),k=function(e){var n=e.data,t=e.start,o=e.hours,a=(0,s.F)().values,l=new Array(o).fill(0).map((function(e,n){return(0,i.Z)(t,n)})),c=n.results.reduce((function(e,n){return e.set(n.timestamp,n),e}),new Map),u=[{label:"Connected",data:l.map((function(e){var n;return{y:(null!==(n=c.get(e.toISOString()))&&void 0!==n?n:{success:0}).success,x:e}})),borderColor:a.global.accentPrimaryDefault,backgroundColor:a.global.accentPrimaryDefault},{label:"Failed",data:l.map((function(e){var n;return{y:(null!==(n=c.get(e.toISOString()))&&void 0!==n?n:{failure:0}).failure,x:e}})),borderColor:a.global.accentNegativeDefault,backgroundColor:a.global.accentNegativeDefault}];return(0,r.tZ)(C.Z,{labels:l,datasets:u})},S=function(e){var n,t,i=e.replId,s=e.start,p=e.hours,h=e.deployment,m=(0,o.useState)(void 0),g=m[0],y=m[1],b=function(e){var n=(0,f.Z)({},Z,e);return v.a(x,n)}({variables:{id:i,input:{start:s,hours:p,deployment:h}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsPageViews.__typename){case"UserError":case"NotFoundError":y(new Error(e.repl.analyticsPageViews.message))}}}),w=b.data,C=b.loading,S=b.error,T="Repl"===(null===w||void 0===w||null===(n=w.repl)||void 0===n?void 0:n.__typename)&&"ReplAnalyticsPageViews"===(null===(t=w.repl.analyticsPageViews)||void 0===t?void 0:t.__typename)?w.repl.analyticsPageViews:void 0,E=T?T.uniques:void 0;return S&&y(S),(0,r.BX)(u.G,{css:[a.l0.colWithGap(8)],children:[(0,r.BX)(u.G,{css:[a.l0.flex.row,a.l0.align.center,a.l0.justify.spaceBetween],children:[(0,r.tZ)(c.xv,{variant:"subheadDefault",children:"Requests"}),E?(0,r.BX)(c.xv,{children:[(0,r.tZ)("strong",{children:E})," unique visitors"]}):null]}),(0,r.BX)(u.G,{children:[C?(0,r.tZ)(d.Z,{}):null,g?(0,r.tZ)(l.E,{text:g.message,colorway:"negative"}):null,T?(0,r.tZ)(k,{data:T,start:s,hours:p}):null]})]})}},1033:function(e,n,t){t.d(n,{Z:function(){return I}});var r=t(4541),i=t(50959),o=t(52035),a=t(22167),l=t(65001),c=t(55544),u=t(25776),s=t(97774),d=t(8354),f=t(87545),p=t(72006),h=t(43119),v=t(71440),m=t(67216);function g(){var e=(0,h.Z)(["\n  fragment ReplAnalyticsTopListResult on ReplAnalyticsTopList {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return g=function(){return e},e}function y(){var e=(0,h.Z)(["\n  query ReplAnalyticsTopList($id: String!, $input: ReplAnalyticsTopInput!) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTopList(input: $input) {\n          ... on ReplAnalyticsTopList {\n            ...ReplAnalyticsTopListResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}var Z={},b=(0,v.Ps)(g()),w=(0,v.Ps)(y(),b);var x=t(28793),C=t(70041),k=t.n(C),S=function(e){var n=e.data,t=e.variant;if(0===n.results.length)return(0,r.tZ)(c.xv,{children:"No results"});switch(t){case"map":return(0,r.tZ)(R,{data:n});case"pie":return(0,r.tZ)(E,{data:n});case"table":return(0,r.tZ)(T,{data:n})}},T=function(e){var n=e.data;return o.kL.register(o.qi),(0,r.tZ)(u.G,{children:n.results.map((function(e){return(0,r.BX)(u.G,{css:[a.l0.rowWithGap(16),a.l0.py(8),{borderBottom:"1px solid ".concat(a.TV.outlineDimmest)},{"&:last-of-type":{borderBottom:"none"}}],children:[(0,r.tZ)(u.G,{css:[a.l0.flex.grow(1),a.l0.maxWidth("90%")],children:(0,r.tZ)(c.xv,{title:e.value,children:e.value})}),(0,r.tZ)(u.G,{children:(0,r.tZ)(c.xv,{children:e.count})})]})}))})},E=function(e){var n=e.data,t=(0,x.F)().values,i=[t.global.blueDefault,t.global.blurpleDefault,t.global.greenDefault,t.global.limeDefault,t.global.magentaDefault,t.global.orangeDefault,t.global.pinkDefault,t.global.purpleDefault,t.global.redDefault,t.global.tealDefault,t.global.yellowDefault];return(0,r.tZ)(f.by,{options:{radius:"80%"},data:{labels:n.results.map((function(e){return e.value})),datasets:[{hoverOffset:20,borderWidth:2,data:n.results.map((function(e){return e.count})),backgroundColor:Array(n.results.length).fill(0).map((function(e,n){return i[n%i.length]}))}]}})},R=function(e){var n=e.data,i=k()((function(){return Promise.all([t.e(5381),t.e(4096),t.e(2738),t.e(1743)]).then(t.bind(t,92973))}),{loadableGenerated:{webpack:function(){return[92973]}},ssr:!1}),o=n.results.map((function(e){return{country:e.value,numHits:e.count}}));return(0,r.tZ)(u.G,{css:[a.l0.maxWidth(450)],children:(0,r.tZ)(i,{countries:o})})},I=function(e){var n,t,o=e.replId,f=e.start,h=e.hours,v=e.metric,g=e.deployment,y=e.count,b=e.variant,x=void 0===b?"table":b,C=(0,d.CZ)(v),k=(0,i.useState)(void 0),T=k[0],E=k[1],R=function(e){var n=(0,p.Z)({},Z,e);return m.a(w,n)}({variables:{id:o,input:{metric:v,start:f,hours:h,deployment:g,count:y}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsTopList.__typename){case"UserError":case"NotFoundError":E(new Error(e.repl.analyticsTopList.message))}}}),I=R.data,G=R.loading,D=R.error;return D&&E(D),(0,r.BX)(u.G,{css:a.l0.colWithGap(8),children:[(0,r.BX)(c.xv,{variant:"subheadDefault",children:["Top ",C]}),(0,r.BX)(u.G,{children:[G?(0,r.tZ)(s.Z,{}):null,T?(0,r.tZ)(l.E,{text:T.message,colorway:"negative"}):null,"Repl"===(null===I||void 0===I||null===(n=I.repl)||void 0===n?void 0:n.__typename)&&"ReplAnalyticsTopList"===(null===(t=I.repl.analyticsTopList)||void 0===t?void 0:t.__typename)?(0,r.tZ)(S,{variant:x,data:I.repl.analyticsTopList}):null]})]})}},32099:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(4541),i=t(95980),o=t.n(i),a=(t(50959),t(97754)),l=t.n(a);function c(e){var n=e.unreadDot,t=e.size,i=void 0===t?12:t,a=e.count,c=void 0===a?null:a,u=c&&c>99,s=u?"99+":null===c||void 0===c?void 0:c.toString();return(0,r.BX)("span",{className:"jsx-1c7f3b9066c4c334",children:[(0,r.tZ)("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",className:"jsx-1c7f3b9066c4c334",children:(0,r.tZ)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-1c7f3b9066c4c334"})}),n?(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 unread-indicator"}):null,Boolean(c)&&(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 "+(l()("count",{overflow:u})||""),children:s}),(0,r.tZ)(o(),{id:"1c7f3b9066c4c334",children:"span.jsx-1c7f3b9066c4c334{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.unread-indicator.jsx-1c7f3b9066c4c334{width:5px;height:5px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-red-default);-webkit-transform:translate(8px,-1px);-moz-transform:translate(8px,-1px);-ms-transform:translate(8px,-1px);-o-transform:translate(8px,-1px);transform:translate(8px,-1px);position:absolute}.count.jsx-1c7f3b9066c4c334{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-negative-default);-webkit-transform:translate(50%,-50%);-moz-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);-o-transform:translate(50%,-50%);transform:translate(50%,-50%);position:absolute;min-width:16px;padding:2px 3px;height:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;color:white;font-size:var(--font-size-small)}.overflow.jsx-1c7f3b9066c4c334{-webkit-transform:translate(25%,-50%);-moz-transform:translate(25%,-50%);-ms-transform:translate(25%,-50%);-o-transform:translate(25%,-50%);transform:translate(25%,-50%)}"})]})}},39159:function(e,n,t){t.d(n,{AS:function(){return R},Hj:function(){return B},Rp:function(){return G},Tt:function(){return U},gE:function(){return _},j7:function(){return k},xT:function(){return T},yi:function(){return S}});var r=t(72006),i=t(43119),o=t(71440),a=t(67216),l=t(59187),c=t(94969);function u(){var e=(0,i.Z)(["\n  fragment AnnotationsUser on User {\n    id\n    username\n    image\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment AnnotationMessageContent on MessageContentType {\n    __typename\n    ... on TextMessageContentType {\n      text\n    }\n    ... on PreviewMessageContentType {\n      preview\n    }\n    ... on StatusMessageContentType {\n      status\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment AnnotationsUIMessage on AnnotationMessage {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    anchor {\n      id\n    }\n    timeCreated\n    content {\n      __typename\n      ...AnnotationMessageContent\n    }\n    currentUserIsAuthor\n    seen\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  fragment AnnotationsUIAnchor on AnnotationAnchor {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    path\n    otVersion\n    indexStart\n    indexEnd\n    isResolved\n    isGeneral\n    messages {\n      id\n      ...AnnotationsUIMessage\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  query AnnotationAnchorsByRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        annotationAnchors {\n          id\n          ...AnnotationsUIAnchor\n        }\n      }\n    }\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation CreateAnnotationAnchor(\n    $annotationAnchor: AnnotationAnchorInput!\n    $annotationMessage: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationAnchor(\n      annotationAnchor: $annotationAnchor\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation UpdateAnnotationAnchor(\n    $id: String!\n    $changes: AnnotationAnchorChangesInput!\n  ) {\n    updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation CreateAnnotationMessage(\n    $replId: String!\n    $anchorId: String!\n    $annotationMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationMessage(\n      replId: $replId\n      anchorId: $anchorId\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i.Z)(["\n  mutation updateThreadPreview(\n    $threadId: String!\n    $messageId: String!\n    $message: String\n  ) {\n    updateThreadPreview(\n      threadId: $threadId\n      messageId: $messageId\n      message: $message\n    )\n  }\n"]);return g=function(){return e},e}function y(){var e=(0,i.Z)(["\n  subscription AnnotationUpdates($replId: String!) {\n    updatedAnnotation: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  subscription MessagePreview($threadId: String!) {\n    threadPreview(threadId: $threadId) {\n      userId\n      messageId\n      message\n    }\n  }\n"]);return Z=function(){return e},e}var b={},w=(0,o.Ps)(u()),x=(0,o.Ps)(s()),C=(0,o.Ps)(d(),w,x),k=(0,o.Ps)(f(),w,C),S=(0,o.Ps)(p(),k);function T(e){var n=(0,r.Z)({},b,e);return a.a(S,n)}var E=(0,o.Ps)(h(),k);function R(e){var n=(0,r.Z)({},b,e);return l.D(E,n)}var I=(0,o.Ps)(v(),k);function G(e){var n=(0,r.Z)({},b,e);return l.D(I,n)}var D=(0,o.Ps)(m(),k);function _(e){var n=(0,r.Z)({},b,e);return l.D(D,n)}var P=(0,o.Ps)(g());function B(e){var n=(0,r.Z)({},b,e);return l.D(P,n)}var A=(0,o.Ps)(y(),k);function U(e){var n=(0,r.Z)({},b,e);return c.m(A,n)}Z()},18556:function(e,n,t){t.d(n,{Ft:function(){return f},Vy:function(){return v},kL:function(){return h}});var r=t(57135),i=t(2272),o=t(96583),a=t(50959),l=t(88254),c=t(14806);function u(e,n,t){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)((function(e,n,t){var r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return e.path&&"number"===typeof e.indexStart&&"number"===typeof e.indexEnd&&e.otVersion?t===e.otVersion?[2,{path:e.path,indexStart:e.indexStart,indexEnd:e.indexEnd,otVersion:e.otVersion}]:[4,n({indexStart:e.indexStart,indexEnd:e.indexEnd,versionFrom:e.otVersion,versionTo:t})]:[2];case 1:return r=i.sent(),[2,{path:e.path,indexStart:r.indexStart,indexEnd:r.indexEnd,otVersion:t}]}}))}))).apply(this,arguments)}var d=t(8189);function f(e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)((function(e){var n,t,r,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.anchor,t=e.version,r=e.transformSelection,i=e.content,n.path?[4,u(n,r,t)]:[2,null];case 1:return(a=o.sent())?[2,{anchor:n,newSelection:a,newPosition:undefined,getHighlight:function(){if(a){var e=a.indexStart,n=a.indexEnd;try{var t=c.xv.of(i.split("\n")),r=t.lineAt(e),o=t.lineAt(n),u=t.sliceString(t.line(Math.max(r.number-2,1)).from,e),s=t.sliceString(n,t.line(Math.min(o.number+2,t.lines)).to);return{precode:u,code:t.sliceString(e,n),postcode:s}}catch(d){l.Tb(d)}}},getSnippet:function(){try{for(var e=c.xv.of(i.split("\n")),n=e.lineAt(a.indexStart),t=e.lineAt(a.indexEnd),r=[],o=n.number===t.number?Math.max(0,n.number-1):n.number,u=Math.min(e.lines,t.number+1),s=o;s<=u;s++)r.push(e.line(s).text);return{startLineNumber:o,lines:r}}catch(d){l.Tb(d)}}}]:[2,null]}}))}))).apply(this,arguments)}function h(e){var n=(0,d.Z)().fs,t=a.useRef(null),r=a.useRef(null),o=(0,i.Z)(a.useState(!1),2),l=o[0],c=o[1];return a.useEffect((function(){if(e){var i=function(){r.current=null,c(!1)},o=n.watchTextFile(e,{onReady:function(e){var n=e.transformSelection,i=e.initialContent;t.current=i.toString(),r.current=n,c(!0)},onMoveOrDelete:function(){i()},onError:function(){i()},onChange:function(e){var n=e.latestContent;t.current=n}});return function(){i(),o()}}}),[e,n]),{contentRef:t,transformSelectionRef:r,loadedFile:l}}function v(e){var n=(0,d.Z)().fs,t=(0,i.Z)(a.useState(null),2),r=t[0],o=t[1],l=h(null===e||void 0===e?void 0:e.path),c=l.contentRef,u=l.loadedFile,s=l.transformSelectionRef;return a.useEffect((function(){(null===e||void 0===e?void 0:e.path)&&u&&s.current&&null!==c.current&&f({anchor:e,version:n.getOTVersion(e.path),transformSelection:s.current,content:c.current}).then((function(e){o(e)})).catch((function(){o(null)}))}),[n,e,u]),r}},32556:function(e,n,t){t.d(n,{Q:function(){return r}});var r=(0,t(47236).cn)(null)},75040:function(e,n,t){t.d(n,{n:function(){return s}});var r=t(72006),i=t(43119),o=t(71440),a=t(59187);function l(){var e=(0,i.Z)(["\n  mutation MarkMessagesAsSeen(\n    $replId: String!\n    $threadId: String\n    $messageIds: [String!]\n  ) {\n    markMessagesAsSeen(\n      replId: $replId\n      threadId: $threadId\n      messageIds: $messageIds\n    ) {\n      ... on AnnotationMessageList {\n        messages {\n          id\n          seen\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},u=(0,o.Ps)(l());function s(e){var n=(0,r.Z)({},c,e);return a.D(u,n)}},91523:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(2272),i=t(50959),o=t(30241),a=t(75040);function l(e){var n=(0,o.Z)(),t=(0,r.Z)((0,a.n)(),1)[0];i.useEffect((function(){if(e){var r=e.messages.filter((function(e){return!e.seen})).map((function(e){return e.id}));0!==r.length&&t({variables:{replId:n,threadId:e.id,messageIds:r},optimisticResponse:{__typename:"RootMutationType",markMessagesAsSeen:{messages:r.map((function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}})),__typename:"AnnotationMessageList"}}})}}),[n,e,t])}},79315:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(72006),i=t(43119),o=t(71440),a=t(67216);function l(){var e=(0,i.Z)(["\n  query ThreadReplCollaborators($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on User {\n            id\n            username\n            image\n          }\n          ... on Team {\n            id\n            username\n            image\n          }\n        }\n        permissions {\n          id\n          user {\n            id\n            username\n            image\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},u=(0,o.Ps)(l());var s=t(30241);function d(){var e,n=function(e){var n=(0,r.Z)({},c,e);return a.a(u,n)}({variables:{replId:(0,s.Z)()}}).data;if("Repl"!==(null===n||void 0===n?void 0:n.repl.__typename))return[];var t=[];(null===(e=n.repl.owner)||void 0===e?void 0:e.username)&&"User"===n.repl.owner.__typename&&t.push(n.repl.owner);var i=!0,o=!1,l=void 0;try{for(var d,f=n.repl.permissions[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){var p,h=d.value;(null===(p=h.user)||void 0===p?void 0:p.username)&&t.push(h.user)}}catch(v){o=!0,l=v}finally{try{i||null==f.return||f.return()}finally{if(o)throw l}}return t}},81415:function(e,n,t){t.d(n,{s:function(){return w},t:function(){return C}});var r=t(4541),i=t(73691),o=t(366),a=t(29399),l=(t(78457),t(10422)),c=new WeakMap;function u(e){for(var n=null,t=e;t;){var r=c.get(t);if(r){n=r;break}if(t.classList.contains("cm-editor")){if(!(n=i.tk.findFromDOM(t)))throw new Error("cm-editor element found without editor view");break}t=t.parentElement}if(!n)throw new Error("no editor view found for given DOM element");var o=n.plugin(a.pL);if(!o)throw new Error("no root plugin found for given DOM element");return o}var s=t(472),d=t(3397),f=t(20373),p=t(31230),h=t(50773),v=t(3259),m=t(98057),g=t(55889),y=t(68608),Z=t(16698),b=t(47493),w=(0,t(52662)._C)({keyword:m.Z,constant:f.Z,class:d.Z,interface:s.Z,function:h.Z,method:h.Z,variable:b.Z,file:p.Z,field:p.Z,property:y.Z,type:Z.Z,namespace:g.Z});function x(e){var n=e.size;return(0,r.tZ)(v.Z,{size:n,children:"\xa0"})}var C={render:function(e){var n,t=null!==(n=w.get(e.type))&&void 0!==n?n:x,i=function(e){var n=null;return new o.f({mount:function(t){var r=u(t),i=(0,l.createPortal)(e,t);n=r.mount(i)},unmount:function(){n&&(n(),n=null)}})}((0,r.tZ)("span",{className:"cm-autocomplete-replit-icon",children:(0,r.tZ)(t,{size:12})}));return i.style.display="inline-block",i},position:20}},93446:function(e,n,t){t.d(n,{S:function(){return o}});var r=t(70059),i=t(7225);function o(e,n,t){if(i.Command.is(e))n.request.executeCommand(e.command,e.arguments);else{var o=e.edit,a=e.command;if(o&&(0,r.w)({edit:o,fs:t,client:n}),a&&"java.apply.workspaceEdit"===a.command&&a.arguments){var l=!0,c=!1,u=void 0;try{for(var s,d=a.arguments[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;i.WorkspaceEdit.is(f)&&(0,r.w)({edit:f,fs:t,client:n})}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}a&&n.request.executeCommand(a.command,a.arguments)}}},35427:function(e,n,t){t.d(n,{p:function(){return W},O:function(){return N}});var r=t(66091),i=t(5683),o=t(72006),a=t(4405),l=t(2272),c=t(45347),u=t(4541),s=t(50959),d=t(10422),f=t(73691),p=t(14806),h=t(22167),v=t(95185),m=t(55544),g=t(72402),y=t(8189),Z=t(71206),b=t(79345),w=t(93446);function x(e){var n=e.containerProps,t=e.codeActions,r=e.onExecuted,i=e.path,l=(0,y.Z)().fs,c=(0,g.Z)(i);return t.length&&c?(0,u.tZ)(Z.XZ,(0,a.Z)((0,o.Z)({},n),{children:t.map((function(e,n){return(0,u.tZ)(b.Z,{onClick:function(n){n.stopPropagation(),(0,w.S)(e,c,l),r()},children:(0,u.tZ)(Z.sN,{isFirst:0===n,isLast:n===t.length-1,children:(0,u.tZ)(m.xv,{children:e.title})})},n)}))})):null}var C=t(57135),k=t(96583),S=t(9970),T=t(86763),E=t.n(T),R=t(7247);var I=new Map;var G="undefined"===typeof WeakRef?function(e){return{deref:function(){return e}}}:WeakRef,D=t(33229);function _(e){var n=e.path,t=e.range,r=e.lspClient;t=function(e){var n,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify)(e),r=null===(n=I.get(t))||void 0===n?void 0:n.deref();return null!=r?r:(I.set(t,new G(e)),e)}(t);var i=(0,D.Z)(),o=s.useRef(null),a=(0,l.Z)(function(e,n){var t=s.useRef(),r=(0,R.Z)((function(){return E()((function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(void 0,(0,S.Z)(r)).then((function(e){var n;null===(n=t.current)||void 0===n||n.call(t,e)}))}),n)}),[e,n]);return[r,s.useCallback((function(e){t.current=e}),[])]}(s.useCallback(function(){var e=(0,C.Z)((function(e,n){return(0,k.__generator)(this,(function(t){return r.isOpen(e)?(o.current={requestPath:e,requestRange:n},[2,r.request.codeActions(e,n)]):[2,{result:null}]}))}));return function(n,t){return e.apply(this,arguments)}}(),[r]),1e3),2),c=a[0],u=a[1],d=(0,l.Z)(s.useState([]),2),f=d[0],p=d[1],h=s.useCallback((0,C.Z)((function(){return(0,k.__generator)(this,(function(e){return r&&n?(u((function(e){i.current&&("error"in e||null===e.result||0===e.result.length?p([]):p(e.result))})),c(n,t),[2]):[2]}))})),[r,n,c,t,u,i]);return s.useEffect((function(){return h(),function(){c.cancel()}}),[h,c]),[f,h]}var P=t(25928),B=t(98491),A=t(78457),U=t(50260),N=p.Py.define();function L(e){var n=e.state,t=n.doc,r=n.selection.main,i=r.from,o=r.to;return{start:(0,P.s)(t,i),end:(0,P.s)(t,o)}}var X=function(e){var n=e.view,t=e.path,r=e.lspClient,i=e.visible,o=e.coords,a=(0,l.Z)(s.useState({x:0,y:0}),2),c=a[0],d=a[1],f=(0,l.Z)(_({path:t,lspClient:r,range:L(n)}),2),p=f[0],h=f[1],m=(0,A.Z)(i),g=(0,A.Z)(o),y=s.useCallback((function(){i.current=!1,n.focus()}),[n,i]);if(s.useEffect((function(){g&&d({x:g.left,y:g.top})}),[g]),s.useEffect((function(){var e=function(e){"Escape"===e.key&&y()};if(c)return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[y,c]),!p.length)return null;var b=p.some((function(e){return"kind"in e&&"quickfix"===e.kind}))?"#75bdff":"#ffcc00";return(0,u.BX)("div",{role:"presentation",onMouseDown:function(e){m||(e.stopPropagation(),e.preventDefault(),d({x:e.nativeEvent.pageX,y:e.nativeEvent.pageY}),i.current=!m)},children:[(0,u.tZ)(v.Z,{css:{fill:b,color:b,cursor:"pointer"},className:"lightbulb"}),m?(0,u.tZ)(x,{path:t,containerProps:{view:n,verticalOffset:Z.R$*p.length,closeMenu:y,width:"auto",coords:c},onExecuted:function(){y(),h()},codeActions:p}):null]})},M=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;return(0,r.Z)(this,t),(e=n.apply(this,arguments)).visible=(0,B.u)(!1),e.coords=(0,B.u)(null),e.container=s.createRef(),e}var l=t.prototype;return l.toDOM=function(e){var n=document.createElement("div");return n.setAttribute("aria-hidden","true"),n.className="cm-code-action",this.visible.current=!1,this.props.setDecoration(d.createPortal((0,u.tZ)("span",{ref:this.container,children:(0,u.tZ)(X,(0,a.Z)((0,o.Z)({},this.props),{view:e,visible:this.visible,coords:this.coords}))}),n)),n},l.contains=function(e){var n;return(null===(n=this.container.current)||void 0===n?void 0:n.contains(e))||!1},l.updateDOM=function(){return!0},t}(f.l9);var O=function(e){return f.lg.fromClass(function(){function n(t){(0,r.Z)(this,n),this.widget=new M,this.widget.props=e,this.decoration=f.p.widget({widget:this.widget,side:0}),this.updateDecorations(t)}var t=n.prototype;return t.update=function(e){var n=this;(e.docChanged||e.selectionSet)&&this.updateDecorations(e.view),(0,U.j)(e,N,(function(t){var r=t.value;n.widget.visible.current=!0,n.widget.coords.current=r,n.updateDecorations(e.view)}))},t.updateDecorations=function(e){var n,t=e.state,r=t.doc,i=t.selection,o=r.lineAt(i.main.from);n=function(e){return/^( {2}|\u3000|\t)/.test(e)}(o.text)||1===o.number&&1===r.lines?o.from:1===o.number?Math.min(r.length,o.to+1):r.lineAt(o.from-1).from,this.decorations=f.p.set([this.decoration.range(n)])},n}(),{decorations:function(e){return e.decorations},eventHandlers:{scroll:function(){this.widget.visible.current=!1}}})},F=f.tk.baseTheme({".cm-code-action":{position:"absolute",zIndex:101,top:"calc(50% - 8px)",left:"0",height:"16px",width:"16px",background:"transparent",fontFamily:h.TV.fontFamilyDefault,"& svg":{display:"block"}}});function W(e){return[F,O(e)]}},71206:function(e,n,t){t.d(n,{R$:function(){return ne},Wo:function(){return J},D2:function(){return j},XZ:function(){return re},JJ:function(){return Q},sN:function(){return oe},ZP:function(){return ie},s3:function(){return ee}});var r=t(57389),i=t(72006),o=t(4405),a=t(2272),l=t(4541),c=t(50959),u=t(22167),s=t(55544),d=t(25776),f=t(44867),p=t(67884),h=t(47274),v=t(47923),m=t(35238),g=t(75149),y=t(84561),Z=t(27509),b=t(2884),w=t(34592),x=t(25969),C=t(83871),k=t(37676),S=t(75201),T=t(59228),E=t(95185),R=t(67044),I=t(83500),G=t(88254),D=t(91355),_=t(38231),P=t(72402),B=t(8189),A=t(97774),U=t(3668),N=t(80567),L=t(74330),X=t(25928),M=t(46598),O=t(63260),F=t(79345),W=t(7579),H=t(93446),z=t(44863);function V(e){var n=e.view,t=e.metadata,r=e.closeMenu,i=t.text,o=t.icon,f=(0,M.Z)().showError,p=c.useRef(!1),h=(0,a.Z)(c.useState(!1),2),v=h[0],m=h[1],g=(0,a.Z)(c.useState(null),2),y=g[0],Z=g[1],b=(0,B.Z)().fs,w=n.state.facet(z.Yp),x=(0,P.Z)(w||""),C=(0,W.H)(),k=C("label"),S=C("menu"),T=c.useRef(null),E=(0,a.Z)((0,O.XZ)(T,!1),4),R=(E[0],E[1]),I=E[2],V=E[3];return(0,O.Ym)(R,T),c.useEffect((function(){if(x&&w&&v&&x.isOpen(w)&&!p.current){var e=n.state,t=e.selection.main,r={start:(0,X.s)(e.doc,t.from),end:(0,X.s)(e.doc,t.to)};p.current=!0,x.request.codeActions(w,r).then((function(e){if((0,D.j)(D.U3.EDITOR_CONTEXT_MENU_CODE_ACTIONS_REQUESTED,{success:!("error"in e),numActions:"result"in e&&e.result?e.result.length:null}),"error"in e)return p.current=!1,Z([]),f("Something went wrong fetching code actions"),void G.Tb(new Error(e.error.message));null!==e.result&&0!==e.result.length?Z(e.result):Z([])}))}}),[x,v,w,y,n,f]),(0,l.BX)(d.G,{tag:"li",onClick:function(e){e.stopPropagation(),m((function(e){return!e}))},children:[(0,l.BX)(d.G,{css:[_.gU.listItem,u.l0.p(8),u.l0.flex.row,u.l0.align.center],children:[o,(0,l.tZ)(d.G,{css:[u.l0.pl(8)],children:(0,l.tZ)(s.xv,{id:k,children:i})}),(0,l.tZ)(d.G,{css:[u.l0.position.absolute,u.l0.right(4)],children:(0,l.tZ)(U.h,{alt:"Toggle Code Actions",tooltipHidden:!0,"aria-expanded":v,"aria-controls":S,onClick:function(){V(),m((function(e){return!e}))},innerRef:T,onKeyDown:I,children:(0,l.tZ)(L.Z,{rotate:v?90:0,style:{transition:"200ms ease"}})})})]}),v&&!y?(0,l.BX)(d.G,{css:[u.l0.p(8),u.l0.flex.row,u.l0.align.center],children:[(0,l.tZ)(s.xv,{color:"dimmer",children:"Loading actions..."}),(0,l.tZ)(d.G,{css:[u.l0.align.center,u.l0.justify.center,u.l0.position.absolute,u.l0.right(4),u.l0.width(24),u.l0.height(24)],children:(0,l.tZ)(A.Z,{})})]}):null,v&&y&&x?(0,l.BX)(d.G,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-labelledby":k,id:S,children:[y.map((function(e,n){return(0,l.tZ)(F.Z,{onClick:function(){(0,H.S)(e,x,b),r()},children:(0,l.tZ)(d.G,{css:[_.gU.listItem,u.l0.p(8),u.l0.flex.row,u.l0.align.center],children:(0,l.BX)(d.G,{css:[u.l0.flex.row,u.l0.justify.spaceBetween,u.l0.align.center,u.l0.width("100%")],children:[(0,l.tZ)(s.xv,{css:[u.l0.maxWidth("90%")],children:e.title}),(0,l.tZ)(d.G,{tag:"span",children:(0,l.tZ)(N.Z,{size:12})})]})})},n)})),0===y.length?(0,l.tZ)(d.G,{css:[u.l0.p(8),u.l0.flex.row,u.l0.align.center],children:(0,l.tZ)(s.xv,{color:"dimmer",children:"No actions available"})}):null]}):null]})}var j,q,$=t(25028),Y=t(63555),K=t(42964),Q="Divider";!function(e){e.Cut="Cut",e.Copy="Copy",e.Paste="Paste",e.JumpToDefinition="JumpToDefinition",e.JumpToTypeDefinition="JumpToTypeDefinition",e.JumpToImplementation="JumpToImplementation",e.FindReferences="FindReferences",e.Rename="Rename",e.SelectAllOccurrences="SelectAllOccurrences",e.CodeActions="CodeActions",e.CopyLinkToPos="CopyLinkToPos",e.ToggleBreakpoint="ToggleBreakpoint",e.StartThread="StartThread",e.ExplainCode="ExplainCode",e.GenerateCode="GenerateCode",e.TransformCode="TransformCode",e.SearchCode="SearchCode"}(j||(j={}));var J=(q={},(0,r.Z)(q,j.Cut,{text:"Cut",icon:(0,l.tZ)(Z.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"X"}}),(0,r.Z)(q,j.Copy,{text:"Copy",icon:(0,l.tZ)(b.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"C"}}),(0,r.Z)(q,j.Paste,{text:"Paste",icon:(0,l.tZ)(w.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"V"}}),(0,r.Z)(q,j.JumpToDefinition,{text:"Jump to definition",icon:(0,l.tZ)(x.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"F12"}}),(0,r.Z)(q,j.JumpToTypeDefinition,{text:"Jump to type definition",icon:(0,l.tZ)(R.Z,{})}),(0,r.Z)(q,j.JumpToImplementation,{text:"Jump to implementation",icon:(0,l.tZ)(I.Z,{})}),(0,r.Z)(q,j.FindReferences,{text:"Find references",icon:(0,l.tZ)(h.Z,{}),keyboardShortcut:{shiftKey:!0,key:"F12"}}),(0,r.Z)(q,j.Rename,{text:"Rename all occurrences",icon:(0,l.tZ)(v.Z,{}),keyboardShortcut:{key:"F2"}}),(0,r.Z)(q,j.SelectAllOccurrences,{text:"Select all occurrences",icon:(0,l.tZ)(p.Z,{}),keyboardShortcut:{key:"F2",cmdOrCtrlKey:!0}}),(0,r.Z)(q,j.CodeActions,{text:"Code actions",icon:(0,l.tZ)(E.Z,{}),keyboardShortcut:{key:".",cmdOrCtrlKey:!0}}),(0,r.Z)(q,j.CopyLinkToPos,{text:"Copy link to position",icon:(0,l.tZ)(m.Z,{})}),(0,r.Z)(q,j.ToggleBreakpoint,{text:"Toggle breakpoint",icon:(0,l.tZ)(g.Z,{})}),(0,r.Z)(q,j.StartThread,{text:"Start thread",icon:(0,l.tZ)(y.Z,{}),keyboardShortcut:{key:"/",altKey:!0}}),(0,r.Z)(q,j.ExplainCode,{text:"Explain code",icon:(0,l.tZ)(T.Z,{})}),(0,r.Z)(q,j.GenerateCode,{text:"Generate code",icon:(0,l.tZ)($.Z,{}),keyboardShortcut:{key:"g",altKey:!0}}),(0,r.Z)(q,j.TransformCode,{text:"Transform code",icon:(0,l.tZ)(Y.Z,{}),keyboardShortcut:{key:"t",altKey:!0}}),(0,r.Z)(q,j.SearchCode,{text:"Search code",icon:(0,l.tZ)(h.Z,{})}),q);function ee(e){return e===Q}var ne=35;function te(e){var n=e.dom,t=e.verticalOffset,r=e.coords,i=r.x,o=r.y,a=n.getBoundingClientRect().bottom,l=document.documentElement.clientWidth;if(i+275>l&&(i=l-275-5),o+t>a){var c=o-t;return c<0?{x:i+5,y:0}:{x:i,y:c}}return{x:i,y:o}}function re(e){var n=e.view,t=e.coords,r=e.closeMenu,i=e.verticalOffset,o=e.children,s=e.width,p=void 0===s?275:s,h=n.dom,v=(0,f.Z)(r,[]),m=(0,a.Z)(c.useState((function(){return te({dom:h,verticalOffset:i,coords:t})})),2),g=m[0],y=g.x,Z=g.y,b=m[1];return c.useEffect((function(){b(te({dom:h,verticalOffset:i,coords:t}))}),[t,i,h]),(0,l.tZ)(k.T,{innerRef:v,background:"higher",className:"cm-custom-context-menu",css:[u.l0.position.fixed,u.l0.flex.column,u.l0.justify.center,u.l0.borderRadius(8),u.l0.shadow(1),u.l0.width(p),u.l0.zIndex(101),{border:"1px solid ".concat(u.TV.outlineDimmest)},{left:y,top:Z}],children:(0,l.tZ)(K.ZP,{children:(0,l.tZ)(O.uP,{options:{direction:"vertical"},children:(0,l.tZ)(d.G,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-label":"Context",children:o})})})})}function ie(e){var n=e.view,t=e.closeMenu,r=e.actions,a=e.onAction,c=r.filter((function(e){switch(e){case j.TransformCode:case j.ExplainCode:return!n.state.selection.main.empty;case j.StartThread:return 0!==n.state.doc.length;default:return!0}})),u=c.map((function(e){return ee(e)?1:ne})).reduce((function(e,n){return e+n}),0);return(0,l.tZ)(re,(0,o.Z)((0,i.Z)({verticalOffset:u},e),{children:c.map((function(e,r){return ee(e)?(0,l.tZ)(d.G,{css:[{borderBottom:"1px solid var(--background-highest)"}]},r):e===j.CodeActions?(0,l.tZ)(V,{view:n,closeMenu:t,metadata:J[e]},e):(0,l.tZ)(F.Z,{onClick:function(n){var r=(0,C.j)(n);a(e,{isCmdOrCtrl:r}),t()},isFirst:0===r,isLast:r===c.length-1,children:(0,l.tZ)(ae,{item:e,isFirst:0===r,isLast:r===c.length-1})},e)}))}))}function oe(e){var n=e.children,t=e.isFirst,r=e.isLast,i=e.item;return(0,l.tZ)(d.G,{"data-cy":i?"context-menu-".concat(i):null,css:[u.l0.p(8),u.l0.flex.row,u.l0.align.center,t&&{borderRadius:"inherit"},r&&{borderRadius:"inherit"}],children:n})}function ae(e){var n=e.item,t=e.isFirst,r=e.isLast,i=J[n],o=i.text,a=i.icon,c=i.keyboardShortcut;return(0,l.BX)(oe,{item:n,isFirst:t,isLast:r,children:[a,(0,l.tZ)(d.G,{css:[u.l0.px(8)],children:(0,l.tZ)(s.xv,{children:o})}),c?(0,l.tZ)(d.G,{css:[u.l0.position.absolute,u.l0.right(4)],children:(0,l.tZ)(S.ZP,{shortcut:c,size:"small",css:[u.l0.color.foregroundDimmest]})}):null]})}},79345:function(e,n,t){var r=t(2272),i=t(4541),o=t(63260),a=t(25776),l=t(38231),c=t(22167),u=t(50959),s=a.K.button;n.Z=function(e){var n=e.onClick,t=e.children,a=e.isFirst,d=e.isLast,f=u.useRef(null),p=(0,r.Z)((0,o.XZ)(f,!1),4),h=p[0],v=p[1],m=p[2],g=p[3];return(0,o.Ym)(v,f),(0,i.tZ)(s,{ref:f,role:"menuitem",css:[c.l0.reset.button,l.gU.listItem,a&&{borderTopLeftRadius:4,borderTopRightRadius:4},d&&{borderBottomLeftRadius:4,borderBottomRightRadius:4}],onClick:function(e){g(),n(e)},onKeyDown:m,tabIndex:h,children:t})}},72532:function(e,n,t){t.d(n,{q:function(){return I},J:function(){return R}});var r=t(72006),i=t(77637),o=t(2272),a=t(4541),l=t(66091),c=t(5683),u=t(45347),s=t(14806),d=t(73691),f=t(59660),p=d.tk.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),h=d.p.line({attributes:{class:"cm-diff-inserted"}}),v=d.p.line({attributes:{class:"cm-diff-deleted"}}),m=s.Py.define({map:function(e,n){return e.map(n)}}),g=function(e){(0,c.Z)(t,e);var n=(0,u.Z)(t);function t(){return(0,l.Z)(this,t),n.apply(this,arguments)}var r=t.prototype;return r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},r.ignoreEvent=function(){return!1},t}(d.l9);function y(e){var n=new s.f_,t=new g;e.sort((function(e,n){return e.character-n.character}));var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var c=a.value,u=c.character,f=c.padding,p=0;p<f;p++)n.add(u,u,d.p.widget({widget:t,side:-1,block:!0}))}catch(h){i=!0,o=h}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.finish()}function Z(e){var n=e.coloredLines,t=e.colorDecoration,r=d.lg.fromClass((function e(r){(0,l.Z)(this,e);var i=new s.f_,o=!0,a=!1,c=void 0;try{for(var u,d=n[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var f=u.value,p=r.state.doc.line(f);i.add(p.from,p.from,t)}}catch(h){a=!0,c=h}finally{try{o||null==d.return||d.return()}finally{if(a)throw c}}this.decorations=i.finish()}),{decorations:function(e){return e.decorations}}),i=s.QQ.define({create:function(){return d.p.none},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(m))return l.value}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.docChanged?e.map(n.changes):e},provide:function(e){return d.tk.decorations.from(e)}});return[p,r,i]}var b=function(){var e=function(e,n){return d.tk.domEventHandlers({scroll:function(t,r){if(r===e&&t.target){var i=t.target;if(i.scrollTop){var o=i.scrollTop;n.scrollDOM.scrollTo({top:o})}}}})},n=new s.F6,t=new s.F6;return{extensions:function(){return{right:n.of([]),left:t.of([])}},setup:function(r,i){r.dispatch({effects:t.reconfigure(e(r,i))}),i.dispatch({effects:n.reconfigure(e(i,r))})}}},w=t(82400),x=t(50959),C=t(54369),k=t(30202),S=b(),T=S.extensions,E=S.setup;function R(e){var n=e.left,t=e.right,a=e.showDiffDecorations,l=void 0===a||a,c=n.code,u=(0,i.Z)(n,["code"]),d=t.code,p=(0,i.Z)(t,["code"]),g=(0,C.Z)((0,r.Z)({readOnly:!0,lineWrapping:!1,initialDoc:c,extensions:[T().left]},u)),b=g.view,w=g.ref,k=(0,C.Z)((0,r.Z)({readOnly:!0,lineWrapping:!1,initialDoc:d,extensions:[T().right]},p)),S=k.view,R=k.ref,I=(0,o.Z)(x.useState(!1),2),G=I[0],D=I[1],_=(0,o.Z)(x.useState(!1),2),P=_[0],B=_[1];return x.useEffect((function(){if(b&&S&&G&&P&&l){var e=setTimeout((function(){E(b,S),function(e,n){var t=(0,f.Bz)(e.state.doc.sliceString(0),n.state.doc.sliceString(0));e.dispatch({effects:[s.Py.appendConfig.of(Z({coloredLines:t.leftColored.sort((function(e,n){return e-n})),colorDecoration:v})),m.of(y(t.leftPadded))]}),n.dispatch({effects:[s.Py.appendConfig.of(Z({coloredLines:t.rightColored.sort((function(e,n){return e-n})),colorDecoration:h})),m.of(y(t.rightPadded))]})}(b,S)}));return function(){return clearTimeout(e)}}}),[b,S,G,P,l]),x.useEffect((function(){b&&(b.dispatch({changes:{from:0,to:b.state.doc.length,insert:c}}),D(!0))}),[c,b]),x.useEffect((function(){S&&(S.dispatch({changes:{from:0,to:S.state.doc.length,insert:d}}),B(!0))}),[d,S]),{left:{view:b,ref:w,code:c,options:u,ready:G},right:{view:S,ref:R,code:d,options:p,ready:P}}}function I(e){var n=e.diffViewer,t=(0,i.Z)(e,["diffViewer"]),o=(0,r.Z)({},n.options,t);return(0,a.BX)(a.HY,{children:[(0,a.tZ)(w.Z,{ref:n.ref,view:n.view,css:{height:n.ready?0:"auto"}}),!n.ready&&(0,a.tZ)(k.Z,{code:n.code,language:o.language,filePath:o.filePath,lineNumbers:!o.hideGutter,fontSize:o.fontSize})]})}},59660:function(e,n,t){t.d(n,{Bz:function(){return v},PO:function(){return m}});var r=t(66091),i=t(2272),o=t(96583),a=t(85386),l=t.n(a),c=l().DIFF_DELETE,u=l().DIFF_INSERT,s=l().DIFF_EQUAL;function d(e,n){var t=new(l()),r=t.diff_linesToChars_(e,n),i=r.chars1,o=r.chars2,a=r.lineArray,c=t.diff_main(i,o,!1);return t.diff_charsToLines_(c,a),c}function f(e){return e.split("\n").length-1}function p(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===n)return 0;var r=e.indexOf("\n",t);return-1===r?null:1===n?r+1:p(e,n-1,r+1)}function h(e,n,t){if(e>0){var r=p(t,n);if(null!==r)return{lineNumber:n,character:r,padding:e}}return null}function v(e,n){for(var t,r,o=d(e+((t="\n"===e[e.length-1])?"":"\n"),n+((r="\n"===n[n.length-1])?"":"\n")),a=0,l=0,p=[],v=[],m=[],g=[],y=0,Z=0,b=0;b<o.length;b++){var w=(0,i.Z)(o[b],2),x=w[0],C=f(w[1]);switch(x){case c:var k,S=(0,i.Z)(null!==(k=o[b+1])&&void 0!==k?k:[],2),T=S[0],E=S[1];a+=C;for(var R=0;R<C;R++)p.push(a-R);var I=C;T===u&&(I-=f(E));var G=h(I,l,n);G&&g.push(G);break;case u:var D,_=(0,i.Z)(null!==(D=o[b-1])&&void 0!==D?D:[],2),P=_[0],B=_[1];l+=C;for(var A=0;A<C;A++)v.push(l-A);var U=C;P===c&&(U-=f(B));var N=h(U,a,e);N&&m.push(N);break;case s:l>Z&&(Z=l),a>y&&(y=a),a+=C,l+=C}}var L=m.filter((function(e){return e.lineNumber<Z})),X=g.filter((function(e){return e.lineNumber<y}));return{leftPadded:L,rightPadded:X,leftColored:p,rightColored:v,changedTrailingNewline:t!==r,leftTrailingNewline:t,rightTrailingNewline:r}}var m=function(){function e(n,t){(0,r.Z)(this,e),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===n[n.length-1],this.otherTrailingNewline="\n"===t[t.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var o=d(n,t),a=[],l=!0,f=!1,p=void 0;try{for(var h,v=o[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){var m=(0,i.Z)(h.value,2),g=m[0],y=m[1].split("\n");""===y[y.length-1]&&y.pop();var Z=!0,b=!1,w=void 0;try{for(var x,C=y[Symbol.iterator]();!(Z=(x=C.next()).done);Z=!0){var k=x.value;a.push([g,k])}}catch(L){b=!0,w=L}finally{try{Z||null==C.return||C.return()}finally{if(b)throw w}}}}catch(L){f=!0,p=L}finally{try{l||null==v.return||v.return()}finally{if(f)throw p}}this.currentTrailingNewline&&!this.otherTrailingNewline?a.push([c,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?a.push([u,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&a.push([s,""]);var S=1,T=0,E=1,R=!0,I=!1,G=void 0;try{for(var D,_=a[Symbol.iterator]();!(R=(D=_.next()).done);R=!0){var P=(0,i.Z)(D.value,2),B=P[0],A=P[1];switch(B){case c:this.linePositions.set(S,T),this.lineLengths.set(S,A.length),this.deleted.add(S),T+=A.length+1,S++;break;case u:var U=S-1,N=this.inserted.get(U);N||(N=[],this.inserted.set(U,N)),N.push({number:E,content:A}),E++;break;case s:this.linePositions.set(S,T),this.lineLengths.set(S,A.length),T+=A.length+1,S++,E++}}}catch(L){I=!0,G=L}finally{try{R||null==_.return||_.return()}finally{if(I)throw G}}}var n=e.prototype;return n.startInsertions=function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null},n.lineIsDeleted=function(e){return this.deleted.has(e)},n.lineInsertions=function(e){var n=this.inserted.get(e);return n&&0!==n.length?n:null},n.lineInsertedContent=function(e){var n=this.lineInsertions(e);return n?n.map((function(e){return e.content})).join("\n"):null},n.offsetFor=function(e){var n,t,r=0;r+=null!==(t=null===(n=this.inserted.get(0))||void 0===n?void 0:n.length)&&void 0!==t?t:0;for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var o=this.lineInsertions(i);o&&(r+=o.length)}return r},n.linePosition=function(e){var n;return null!==(n=this.linePositions.get(e))&&void 0!==n?n:null},n.lineLength=function(e){var n;return null!==(n=this.lineLengths.get(e))&&void 0!==n?n:null},n.line=function(e){var n=this.linePosition(e),t=this.lineLength(e);return null===n||null===t?null:{number:e,from:n,to:n+t,length:t,offset:this.offsetFor(e),isDeleted:this.lineIsDeleted(e),insertions:this.lineInsertions(e)}},n.lines=function(){var e,n,t,r,a,l,c,u,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:e=!0,n=!1,t=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),r=this.linePositions[Symbol.iterator](),o.label=2;case 2:if(e=(a=r.next()).done)return[3,5];if(l=(0,i.Z)(a.value,1),c=l[0],!(u=this.line(c)))throw new Error("line should not be null");return[4,u];case 3:o.sent(),o.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return s=o.sent(),n=!0,t=s,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 8:return[2]}}))},e}()},16829:function(e,n,t){t.d(n,{v:function(){return p}});var r=t(31518),i=t(52993),o=t(33165),a=t(72006),l=t(43119),c=t(71440),u=t(67216);function s(){var e=(0,l.Z)(['\n  query ChatEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-chat-engine")\n      hasOverride: gate(feature: "flag-ghostwriter-chat-engine-override")\n    }\n  }\n']);return s=function(){return e},e}var d={},f=(0,c.Ps)(s());function p(){var e,n,t=(0,r.Z)().preferences,l=function(e){var n=(0,a.Z)({},d,e);return u.a(f,n)}().data,c=null===l||void 0===l||null===(e=l.currentUser)||void 0===e?void 0:e.hasOverride,s=null===t||void 0===t?void 0:t.chatEngine,p=null===l||void 0===l||null===(n=l.currentUser)||void 0===n?void 0:n.defaultEngine;return c&&s&&(0,i.uL)(s)?s:(0,i.uL)(p)?p:o.Fp}},40951:function(e,n,t){t.d(n,{L:function(){return f}});var r=t(31518),i=t(85599),o=t(72006),a=t(43119),l=t(71440),c=t(67216);function u(){var e=(0,a.Z)(['\n  query CompleteCodeEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-complete-engine")\n      hasOverride: gate(feature: "flag-code-suggestion-engine")\n    }\n  }\n']);return u=function(){return e},e}var s={},d=(0,l.Ps)(u());function f(){var e,n,t,a=(0,r.Z)().preferences,l=function(e){var n=(0,o.Z)({},s,e);return c.a(d,n)}().data,u=null===a||void 0===a?void 0:a.completeCodeEngine;if(u&&(null===l||void 0===l||null===(e=l.currentUser)||void 0===e?void 0:e.hasOverride)&&i.vw.has(u))return{engine:u,settings:i.Uw[u]};var f=null!==(t=null===l||void 0===l||null===(n=l.currentUser)||void 0===n?void 0:n.defaultEngine)&&void 0!==t?t:i.OO;return{engine:f,settings:i.Uw[f]}}},75242:function(e,n,t){t.d(n,{Z:function(){return Te},S:function(){return Se}});var r=t(88733),i=t(73012),o=t(72006),a=t(11858),l=t(96583),c=t(75030),u=t(31518),s=t(30241),d=t(7247),f=t(47843),p=t(31533),h=t(8189),v=t(56139),m=t(50959),g=t(83886),y=t(66091),Z=t(57988),b=function e(n,t){(0,y.Z)(this,e),this.next=null,this.prev=null,this.key=n,this.data=t},w=function(){function e(){(0,y.Z)(this,e),this.size_=0,this.head=null,this.tail=null}var n=e.prototype;return n.addFront=function(e){this.tail||(this.tail=e),this.head&&(this.head.prev=e),e.next=this.head,this.head=e,this.size_++},n.popBack=function(){if(!this.tail)return null;var e=this.tail;return this.tail=e.prev,this.size_--,e.prev&&(e.prev.next=null,e.prev=null),e},n.moveToFront=function(e){this.head!==e&&(this.tail===e&&(this.tail=e.prev),e.next&&(e.next.prev=e.prev,e.next=null),e.prev&&(e.prev.next=e.next,e.prev=null),this.size_--,this.addFront(e))},(0,Z.Z)(e,[{key:"size",get:function(){return this.size_}}]),e}(),x=function(){function e(n){(0,y.Z)(this,e),this.items=Object.create(null),this.evictList=new w,this.maxSize=n}var n=e.prototype;return n.update=function(e,n){var t=this.items[e];if(t)return this.evictList.moveToFront(t),t.data=n(t.data),t.data;for(;this.evictList.size>=this.maxSize;){var r=this.evictList.popBack();if(!r)throw new Error("invariant violation: could not pop back of the list");delete this.items[r.key]}var i=new b(e,n());return this.evictList.addFront(i),this.items[e]=i,i.data},n.getOrAdd=function(e,n){return this.update(e,(function(e){return null!==e&&void 0!==e?e:n}))},n.set=function(e,n){this.update(e,(function(){return n}))},n.get=function(e){var n=this.items[e];return n?n.data:null},n.has=function(e){return e in this.items},(0,Z.Z)(e,[{key:"size",get:function(){return this.evictList.size}}]),e}(),C=t(82711),k=function(){function e(){(0,y.Z)(this,e),this.cache=new x(C.vq)}var n=e.prototype;return n.has=function(e){return this.cache.has(e)},n.get=function(e){return this.cache.get(e)},n.set=function(e,n){this.cache.set(e,n)},n.setSuggestion=function(e,n){this.cache.set(e,JSON.stringify({text:n})+"\n")},e}(),S=t(57135),T=t(4405),E=t(88254),R=t(73691),I=t(14806),G=t(12417),D=t(86763),_=t.n(D),P=t(91355);var B=t(611),A=t(50260);function U(e){var n=e.onComplete,t=e.onEscape,r=null,i=null;return R.tk.domEventHandlers({touchstart:function(e){i=null,r=e.targetTouches[0].clientX},touchmove:function(e){i=e.targetTouches[0].clientX},touchend:function(e,o){if(r&&i)return r-i<-50&&n(o),t(o),!0}})}var N,L=t(98171),X=t(18629),M=t(71394),O=t(57300),F=t(2272),W=t(4541),H=t(13172),z=t(31078),V=t(46598),j=t(79151),q=t(35021),$=t(22167),Y=t(25776),K=t(55544),Q=t(51609),J=function(e){var n=e.onClose,t=(0,V.Z)(),r=t.showNotice,i=t.hideMessage,o=(0,F.Z)(m.useState(!1),2),a=o[0],l=o[1];return(0,m.useEffect)((function(){var e=function(){l(!0),i(n)},n=r((0,W.BX)(Y.G,{css:[$.l0.rowWithGap(4),$.l0.align.center],children:[(0,W.tZ)(Q.Z,{}),(0,W.BX)(K.xv,{css:{fontSize:"calc(".concat($.TV.fontSizeSubheadDefault," - 1px)"),"@media (max-width: 768px)":$.l0.fontSize(14)},children:["Thanks for trying Ghostwriter!",(0,W.tZ)("a",{role:"button",tabIndex:0,css:{color:"inherit",textDecoration:"underline",marginLeft:"3px"},onKeyPress:function(n){"Enter"!==n.key&&" "!==n.key||(n.preventDefault(),e())},onClick:function(n){n.preventDefault(),e()},children:"Give feedback"})]})]}),0,{color:$.TV.accentPrimaryStrongest,fontWeight:$.TV.fontWeightRegular})}),[i,r,n]),(0,W.tZ)(z.b5,{children:(0,W.tZ)(q.u,{isOpen:a,onRequestClose:function(){l(!1)},children:(0,W.tZ)(H.Z,{setFeedbackFormOpen:l,feature:H.l.GhostWriter})})})};!function(e){e.Acceptance="ghostWriter.acceptance",e.Rejection="ghostWriter.rejection"}(N||(N={}));var ee=t(47308),ne=t(49500);function te(e,n){var t=null,r=function(){};return{queue:function(i){t&&clearTimeout(t);var a=function(){(0,P.j)(P.U3.CODE_SUGGESTION_USED,(0,o.Z)({type:e},i))};t=setTimeout(a,n),r=a},flush:function(){t&&clearTimeout(t),r()},cancel:function(){t&&clearTimeout(t)}}}function re(e){var n=e.language,t=e.infill,i=e.completeCode,a=e.decorations,c=e.metadata,u=e.keybindings,s=function(){var e;return{abort:function(){null===e||void 0===e||e.abort()},requestSignal:function(){var n=new AbortController;return null===e||void 0===e||e.abort(),e=n,n.signal}}}(),d=te("suggestionPresented",500),f=te("suggestionCompletelyPresented",500),p=null,h=_()(function(){var e=(0,S.Z)((function(e){var a,u,h,v,m,g,y,Z,b,w,x,k,S,R,I,D,_,P,A,U;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:if(u=e.state,h=u.doc,v=u.selection,0===(m=v.main.head))return[2];if(g=h.sliceString(m-1,m),[";",")","}","]","{"].includes(g))return[2];if(!(y=h.sliceString(Math.max(0,m-C.ed),m))||y.length<C.jr)return[2];p=y.length,y=e.state.facet(G.c)+"\n"+y,Z=t?function(e){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e.split("\n"),r=0;r<t.length;r++){var i=t[r];if(i[0]&&i[0].match(/\S/))return n?t.slice(0,r).join("\n")+"\n":t.slice(0,r+1).join("\n")}return e}(h.sliceString(m),C.NX.has(n)):void 0,b=(0,O.i)(e.state)?C.Pz:C._7,w=null===(a=y.match(/[^\s]([ \t]+)$/))||void 0===a?void 0:a[1],l.label=1;case 1:l.trys.push([1,14,,15]),x=!0,k=!1,S=!1,l.label=2;case 2:l.trys.push([2,7,8,13]),I=(0,r.Z)(i({code:w?y.slice(0,-w.length):y,suffix:Z,maxTokens:b,signal:s.requestSignal()})),l.label=3;case 3:return[4,I.next()];case 4:if(!(k=!(D=l.sent()).done))return[3,6];if(_=D.value,P=_,"active"===(0,B.LR)(e.state))return s.abort(),[3,6];if(x&&w){if(!P.startsWith(w))return s.abort(),[3,6];P=P.slice(w.length)}x&&(E.n_({category:"ghostwriter",message:"Suggestion presented",level:"debug"}),d.queue((0,T.Z)((0,o.Z)({},c),{prefixLength:p}))),e.dispatch({effects:x?M.t8.of({code:P,language:n,infill:t}):M.R3.of(P)}),x=!1,l.label=5;case 5:return k=!1,[3,3];case 6:return[3,13];case 7:return A=l.sent(),S=!0,R=A,[3,13];case 8:return l.trys.push([8,,11,12]),k&&null!=I.return?[4,I.return()]:[3,10];case 9:l.sent(),l.label=10;case 10:return[3,12];case 11:if(S)throw R;return[7];case 12:return[7];case 13:return!1!==x?(E.n_({category:"ghostwriter",message:"Exited completeCode iteration with no suggestion.",level:"info"}),e.dispatch({effects:M.t8.of(null)}),[2]):(E.n_({category:"ghostwriter",message:"Suggestion completely presented",level:"debug"}),f.queue((0,T.Z)((0,o.Z)({},c),{prefixLength:p})),e.dispatch({effects:M.dp.of(!0)}),[3,15]);case 14:return"AbortError"===(null===(U=l.sent())||void 0===U?void 0:U.name)?[2]:(E.$e((function(e){e.setExtra("prefix",y),e.setExtra("maxTokens",b),e.setExtra("language",n),e.setExtra("selection-head",m),e.setExtra("previous-character",g),e.setExtras(c),e.setTag("ghostwriter",!0),E.Tb(U)})),ne.error("CodeSuggestionExtension"),ne.error(U),[3,15]);case 15:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),C.co),v=function(e){var n=function(){e.update((function(e){return e.delete("feedback")}))},t=function(){var t,r,i=(null!==(t=j.Z.get("ghostWriter.acceptance","number"))&&void 0!==t?t:0)+(null!==(r=j.Z.get("ghostWriter.rejection","number"))&&void 0!==r?r:0);C.B2.includes(i)?e.update((function(e){return e.set("feedback",(0,W.tZ)(J,{onClose:n}))})):n()};return{recordAccept:function(){j.Z.update("ghostWriter.acceptance","number",(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1})),t()},recordReject:function(){j.Z.update("ghostWriter.rejection","number",(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1})),t()}}}(a),m=function(e){var n=(0,L.$o)(e);if(n){var t=n.texts.reduce((function(e,n){return e+n.text.length}),0);return d.flush(),f.flush(),(0,P.j)(P.U3.CODE_SUGGESTION_USED,(0,T.Z)((0,o.Z)({type:"suggestionAccepted"},c),{prefixLength:p,suggestionLength:t})),E.n_({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),v.recordAccept(),(0,B._B)(e),!0}return!1};return[I.Wl.high(R.$f.of([{key:(0,ee.cU)(u.acceptPrimaryCompletion),run:m},{key:(0,ee.cU)(u.cancelCompletion),run:function(e){return!!(0,L._n)(e)&&(s.abort(),d.flush(),f.flush(),(0,P.j)(P.U3.CODE_SUGGESTION_USED,(0,T.Z)((0,o.Z)({type:"suggestionDismissed"},c),{prefixLength:p})),E.n_({category:"ghostwriter",message:"Suggestion explicitly dismissed",level:"info"}),v.recordReject(),!0)}},{key:"Enter",run:L.gT}])),R.tk.domEventHandlers({blur:function(e,n){setTimeout((function(){n.dispatch({effects:M.t8.of(null)})}),100),d.cancel(),f.cancel(),s.abort()}}),R.tk.updateListener.of((function(e){(0,A.j)(e,M.he,(function(n){var t,r;n.value!==X.z.Stop?(t=e.view,r=n.value,d.cancel(),f.cancel(),s.abort(),h(t),r===X.z.Now&&h.flush()):(d.cancel(),f.cancel(),s.abort())}))})),(0,L.G0)(),U({onComplete:m,onEscape:L._n})]}var ie=t(50660),oe=t(43119),ae=t(71440),le=t(67216);function ce(){var e=(0,oe.Z)(['\n  query CompleteCode {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n      hasKillswitch: gate(feature: "flag-killswitch-ghostwriter")\n    }\n  }\n']);return ce=function(){return e},e}var ue={},se=(0,ae.Ps)(ce());var de=t(40951),fe=t(12018),pe=t(37248);function he(e,n,t){var r=(0,g.Sf)(n),i=e.split("\n");return{code:i.slice(Math.max(0,i.length-t)).join("\n"),language:r,filePath:n}}var ve=t(77542);function me(e,n,t){var r=(0,m.useState)([]),i=r[0],o=r[1],a=(0,m.useState)(!1),c=a[0],u=a[1];return(0,m.useEffect)((function(){e&&(u(!0),(0,S.Z)((function(){var r;return(0,l.__generator)(this,(function(i){switch(i.label){case 0:return[4,Promise.all(e.map(function(){var e=(0,S.Z)((function(e){var r,i;return(0,l.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t(e)];case 1:return(r=o.sent()).error?[2,!1]:(i=r.content.toString(),[2,n(i,e)]);case 2:return o.sent(),[2,!1];case 3:return[2]}}))}));return function(n){return e.apply(this,arguments)}}()))];case 1:return r=i.sent().filter(Boolean),u(!1),o(r),[2]}}))}))())}),[e,t,n]),{cachedFiles:i,loading:c}}var ge={javascript:["javascript","typescript"],python:["python","python3"],python3:["python","python3"],typescript:["javascript","typescript"]},ye=["json"];function Ze(e,n){var t=e.toLowerCase(),r=n.toLowerCase();return t===r||(!!ye.includes(t)||!!ge[t]&&ge[t].includes(r))}function be(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=(0,fe.P5)({controlName:"flag-ghostwriter-neighboring-context"}),i=(0,ve.Bx)(),o=(0,m.useState)(null),a=o[0],l=o[1];return(0,m.useEffect)((function(){l(r?i.filter((function(t){return Ze((0,g.Sf)(t),e)&&t!==n&&(0,pe.Mb)(t)})).slice(0,t):null)}),[e,n,r,t,i]),a}var we=t(31747),xe=t(20324),Ce=t(13302);function ke(){var e,n,t,r=function(e){var n=(0,o.Z)({},ue,e);return le.a(se,n)}().data,i=Se();return!("UserPowerUpsTypes"!==(null===r||void 0===r||null===(e=r.currentUser)||void 0===e||null===(n=e.userPowerUpsByType)||void 0===n?void 0:n.__typename)||!(null===r||void 0===r?void 0:r.currentUser.userPowerUpsByType.ghostwriter.active))&&(!(null===r||void 0===r||null===(t=r.currentUser)||void 0===t?void 0:t.hasKillswitch)&&i)}function Se(){var e=(0,h.Z)().presence,n=(0,p.Z)({presence:e});return!!(0,fe.P5)({controlName:"flag-code-suggestion-multiplayer"})||n.length<=1}function Te(e){var n,t=e.filePath,p=e.view,y=e.decorations,Z=(0,s.Z)(),b=(0,g.Sf)(t),w=(0,u.Z)().preferences,x=(0,de.L)(),T=x.engine,R=x.settings,I=null!==(n=null===R||void 0===R?void 0:R.infill)&&void 0!==n&&n,G=(0,xe.gf)(Ce.CN.acceptPrimaryCompletion.id),D=(0,xe.gf)(Ce.CN.cancelCompletion.id),_=ke(),P=(0,fe.P5)({controlName:"flag-code-suggestion-markdown"}),B="markdown"===b&&P,A=(0,c.Z)({view:p}),U=(0,d.Z)((function(){return new k}),[b,t,Z,T]);(0,m.useEffect)((function(){v.YX.toggle(Boolean(w.codeSuggestion))}),[w.codeSuggestion]);var N=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,i=(0,h.Z)().fs,o=me(be(e,n,r),(0,m.useCallback)((function(e,n){return he(e,n,t)}),[t]),(0,m.useCallback)(function(){var e=(0,S.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return[4,i.readFile(e)];case 1:return[2,n.sent()]}}))}));return function(n){return e.apply(this,arguments)}}(),[i])).cachedFiles;return null!==o&&void 0!==o?o:[]}(b,t);(0,m.useEffect)((function(){if(p&&_){if(w.codeSuggestion&&(C.PE.has(b)||B)){var e=function(){var e=(0,a.Z)((function(e){var n,c,u,s,d,p,h,m,g,y,w,x,C,k,S,R,G,D,_,P,A,L,X,M,O,F,W,H,z,V,j,q;return(0,l.__generator)(this,(function($){switch($.label){case 0:return n=e.code,c=e.suffix,u=e.signal,s=e.maxTokens,n?(E.n_({category:"ghostwriter",message:"Called completeCode: "+T,level:"debug"}),d=f.kg.timeStart({language:b,engine:T,replid:Z,codeLength:n.length}),p=B?{maxTokens:75,stop:[]}:{},h=(0,o.Z)({language:b,code:n,suffix:I?c:void 0,replId:Z,filePath:t,engine:T,maxTokens:s,additionalContext:N,stop:["\n\n","```"]},p),m=v.YX.add(h),u.addEventListener("abort",(function(){v.YX.abort(m)})),null==(y=U.get(n))?[3,1]:(g=(0,a.Z)((function(){return(0,l.__generator)(this,(function(e){switch(e.label){case 0:return[4,y];case 1:return e.sent(),[2]}}))})),[3,5])):[2];case 1:return[4,(0,i.Z)(fetch("/ai/complete",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},signal:u,body:JSON.stringify(h)}))];case 2:return w=$.sent(),x=w.body,200===(C=w.status)?[3,4]:(k=Error.bind,R=(S="Error (".concat(C,") response from /ai/complete: ")).concat,[4,(0,i.Z)(w.text())]);case 3:throw new(k.apply(Error,[void 0,R.apply(S,[$.sent()])]));case 4:if(!x)throw new Error("No body in response");g=function(){return(0,we.n)(x)},$.label=5;case 5:G="",D="",_=!0,P=!1,A=!1,L=!1,$.label=6;case 6:$.trys.push([6,14,15,20]),M=(0,r.Z)(g()),$.label=7;case 7:return[4,(0,i.Z)(M.next())];case 8:if(!(A=!(O=$.sent()).done))return[3,13];F=O.value,D+=F,W=void 0,$.label=9;case 9:return-1===(W=D.indexOf("\n"))?[3,12]:(H=JSON.parse(D.substring(0,W)),z=H.text,D=D.substring(W+1),V=(0,ie.Hy)(z,b),j=V.replacementSuggestion,G+=j,P?[3,11]:[4,j]);case 10:$.sent(),$.label=11;case 11:return _&&(E.n_({category:"ghostwriter",message:"Suggestion emitted: "+j,level:"debug"}),d("code suggestion",{type:"success"}),_=!1),(0,ie.cx)(G).haltAfter&&(P=!0),[3,9];case 12:return A=!1,[3,7];case 13:return[3,20];case 14:return q=$.sent(),L=!0,X=q,[3,20];case 15:return $.trys.push([15,,18,19]),A&&null!=M.return?[4,M.return()]:[3,17];case 16:$.sent(),$.label=17;case 17:return[3,19];case 18:if(L)throw X;return[7];case 19:return[7];case 20:return G.trim().length&&!U.has(n)&&U.setSuggestion(n,G),P||!D?[3,22]:[4,D];case 21:$.sent(),$.label=22;case 22:return v.YX.complete(m,{__typename:"CompleteCodeResult",id:Date.now().toString(),code:G}),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),n={filePath:t,language:b,engine:T,additionalContextCount:N.length,additionalContextLength:N.reduce((function(e,n){return e+n.code.length}),0)};return p.dispatch({effects:A.reconfigure(re({language:b,infill:I,completeCode:e,decorations:y,metadata:n,keybindings:{acceptPrimaryCompletion:G,cancelCompletion:D}}))}),function(){p.dispatch({effects:A.reconfigure([])})}}E.n_({category:"ghostwriter",message:"Explicitly skipped useCompleteCode effect.",level:"info"})}}),[p,U,_,A,t,b,Z,y,T,w.codeSuggestion,I,N,G,D,B])}},92705:function(e,n,t){t.d(n,{Ut:function(){return Re},Ou:function(){return We},W2:function(){return ze},x9:function(){return Fe}});var r,i,o=t(57135),a=t(66091),l=t(96583),c=t(73691),u=t(14806),s=t(24496);function d(e){switch(e){case r.A:return r.B;case r.B:return r.A}}function f(e,n,t){switch(n){case r.A:return t?{from:e.fromA+t.fromA,to:e.toA+t.fromA}:{from:e.fromA,to:e.toA};case r.B:return t?{from:e.fromB+t.fromB,to:e.toB+t.fromB}:{from:e.fromB,to:e.toB}}}function p(e,n,t,r){for(var o=0,a=t.length-1,l=null;o<=a;){var c=o+a>>>1,u=t[c],s=f(u,n,r);if(r){if(1===r.changes.length){var p=f(r,n);p.from>0&&s.from===p.from&&s.to===p.to&&(s.from-=1,s.to-=1)}}else{var h=f(u,d(n));h.from===h.to&&(s.from+=1)}if(s.from<=e.to&&s.to>=e.from&&(s.from===s.to&&s.from===e.to||(l=c),s.from<=e.from))break;s.from>=e.from?a=c-1:s.to<=e.from&&(o=c+1)}if(null===l)return i.UNCHANGED;var v=f(t[l],n,r);if(v.from<=e.from&&v.to>=e.to)return i.COVERED;if(v.from>e.from||l===t.length-1)return i.MODIFIED;for(var m=e.from,g=l;g<t.length;g++){var y=f(t[g],n,r);if(y.to<=e.to&&y.from>m)return i.MODIFIED;if(y.to>=e.to)break;m=y.to}return i.COVERED}function h(e,n){if(0===e.length)return u.n0.fromJSON([n,-1]);for(var t=[],r=0,i=0;i<e.length;i++)for(var o=e[i],a=0;a<o.changes.length;a++){var l=o.changes[a],c=o.fromA+l.fromA,s=o.fromA+l.toA,d=o.fromB+l.fromB,f=o.fromB+l.toB;1===o.changes.length&&o.fromA>0&&c===o.fromA&&s===o.toA&&(c-=1,s-=1),1===o.changes.length&&o.fromB>0&&d===o.fromB&&f===o.toB&&(d-=1,f-=1),c>r&&t.push(c-r,-1),t.push(s-c,f-d),r=s}return r<n&&t.push(n-r,-1),u.n0.fromJSON(t)}function v(e){var n=[];return e.iterChangedRanges((function(e,t,r,i){n.push({fromA:e,toA:t,fromB:r,toB:i})}),!0),n}function m(e,n,t){try{if(t){if(!t.changesA&&!t.changesB)throw new Error("cannot update chunks without changes");var r=t.chunks;return t.changesA&&(r=s.z.updateA(r,e,n,t.changesA)),t.changesB&&(r=s.z.updateB(r,e,n,t.changesB)),r}return s.z.build(e,n)}catch(o){var i=[new s.RI(0,e.length,0,n.length)];return[new s.z(i,0,e.length,0,n.length)]}}function g(e,n,t){if(!t)return{desc:e,pending:n};try{n=n?n.composeDesc(t):t,e=e.composeDesc(t)}catch(r){n=null,e=u.n0.fromJSON([e.length,t.newLength])}return{desc:e,pending:n}}function y(e,n,t){for(var r=new Map,i=0,o=!1,a=1,l=1;l<=n.lines;l++){var c=t[i],u=n.line(l);if(c){if(c.fromB===u.from){if(o=!0,c.fromA!==c.toA)for(var s=e.lineAt(c.endA).number;a<=s;a++)r.set(-a,null);c.fromB!==c.toB?r.set(u.number,null):(r.set(-a,u.number),r.set(u.number,a),a++);continue}if(c.fromB<=u.from&&c.endB>=u.from){r.set(u.number,null);continue}o&&(i++,o=!1)}r.set(-a,u.number),r.set(u.number,a),a++}if(a<=e.lines)for(var d=a;d<=e.lines;d++)r.set(-d,null);return r}!function(e){e.A="A",e.B="B"}(r||(r={})),function(e){e.COVERED="COVERED",e.MODIFIED="MODIFIED",e.UNCHANGED="UNCHANGED"}(i||(i={}));var Z,b=function(){function e(n,t,r,i,o,l){(0,a.Z)(this,e),this.original=n,this.current=t,this.chunks=r,this.desc=i,this.pending=o,this.ranges=l}var n=e.prototype;return n.hasChanges=function(){return this.ranges.length>0},n.update=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.original,o=this.chunks,a=this.desc,l=this.pending,c=this.ranges,s=this.pending?this.pending.length:this.current.length,d=Math.abs(s-n.length);if(d>=250||r){var f=g(a,l,t),p=f.pending;l=null,c=v(a=h(o=m(i,n,{chunks:o,changesB:p}),i.length))}else{var y;l=(y=g(a,l,t)).pending,c=v(a=y.desc)}return l&&n.eq(i)&&(o=[],a=u.as.empty(i.length),l=null,c=[]),new e(i,n,o,a,l,c)},n.isAccurate=function(){return null===this.pending},n.getLineChangeType=function(e){var n=this.current.line(e);return 0===this.original.length&&this.current.length>0?i.COVERED:p(n,r.B,this.ranges)},n.iterRanges=function(){return(0,l.__generator)(this,(function(e){switch(e.label){case 0:return[5,(0,l.__values)(this.ranges)];case 1:return e.sent(),[2]}}))},e.create=function(n,t){var r=m(n,t),i=h(r,n.length);return new e(n,t,r,i,null,v(i))},e}(),w=u.r$.define({combine:function(e){return null!==(Z=e.filter(Boolean)[0])&&void 0!==Z?Z:null}});var x,C,k=u.QQ.define({create:function(){return null},update:function(e,n){var t=n.state.facet(w);return t?(e&&e.original.eq(t)?n.docChanged&&(e=e.update(n.newDoc,n.changes,function(e){return!(e.isUserEvent("input.type")||e.isUserEvent("delete.forward")||e.isUserEvent("delete.backward"))}(n))):e=b.create(t,n.newDoc),e):null}}),S=t(57389),T=t(5683),E=t(45347),R=t(22167),I=R.TV.space2,G="cm-diff-gutter",D="".concat(G,"-element"),_="".concat(D,"-insertion"),P="".concat(D,"-modified"),B="".concat(D,"-deleted"),A="".concat(D,"-file-added"),U=R.TV.greenDefault,N=R.TV.greenStronger,L=R.TV.blueDefault,X=R.TV.blueStronger,M=R.TV.redDefault,O=R.TV.redStronger,F=R.TV.greenDimmer,W=R.TV.greenDefault,H=c.tk.theme((x={},(0,S.Z)(x,".".concat(D),{width:I}),(0,S.Z)(x,".".concat(_),{backgroundColor:U,"&.cm-activeLineGutter":{backgroundColor:N}}),(0,S.Z)(x,".".concat(P),{backgroundColor:L,"&.cm-activeLineGutter":{backgroundColor:X}}),(0,S.Z)(x,".".concat(B),{backgroundColor:M,"&.cm-activeLineGutter":{backgroundColor:O}}),(0,S.Z)(x,".".concat(A),{backgroundColor:F,"&.cm-activeLineGutter":{backgroundColor:W}}),x)),z=new(function(e){(0,T.Z)(t,e);var n=(0,E.Z)(t);function t(){var e;return(0,a.Z)(this,t),(e=n.apply(this,arguments)).elementClass="".concat(D," ").concat(_),e}return t}(c.SJ)),V=new(function(e){(0,T.Z)(t,e);var n=(0,E.Z)(t);function t(){var e;return(0,a.Z)(this,t),(e=n.apply(this,arguments)).elementClass="".concat(D," ").concat(B),e}return t}(c.SJ)),j=new(function(e){(0,T.Z)(t,e);var n=(0,E.Z)(t);function t(){var e;return(0,a.Z)(this,t),(e=n.apply(this,arguments)).elementClass="".concat(D," ").concat(P),e}return t}(c.SJ)),q=new(function(e){(0,T.Z)(t,e);var n=(0,E.Z)(t);function t(){var e;return(0,a.Z)(this,t),(e=n.apply(this,arguments)).elementClass="".concat(D," ").concat(A),e}return t}(c.SJ)),$=new(function(e){(0,T.Z)(t,e);var n=(0,E.Z)(t);function t(){return(0,a.Z)(this,t),n.apply(this,arguments)}return t}(c.SJ)),Y=(0,c.v5)({class:G,renderEmptyElements:!0,lineMarker:function(e,n){var t=e.state.field(k,!1);if(!t||!t.hasChanges())return null;if(0===t.original.length)return q;var r=e.state.doc.lineAt(n.from);switch(t.getLineChangeType(r.number)){case i.COVERED:return z;case i.MODIFIED:return j;default:return null}},initialSpacer:function(e){return e.state.field(k,!1)?q:$},updateSpacer:function(e,n){var t=n.state.field(k,!1)?q:$;return e===t?e:t}}),K=u.r$.define({enables:function(e){return[w.computeN([e],(function(n){return n.facet(e)})),H,k,u.Wl.highest(Y)]}}),Q=t(57988),J=t(81962),ee=t(12417),ne=t(57600),te=function(){function e(n,t,r,i){(0,a.Z)(this,e),this.a=n,this.b=t,this.chunks=r,this.map=i}var n=e.prototype;return n.line=function(e,n){return n===r.A?this.a.line(e):this.b.line(e)},n.hasChanges=function(){return this.chunks.length>0},n.updateA=function(n,t){var r=this.b,i=m(n,r,{chunks:this.chunks,changesA:t});return new e(n,r,i,y(n,r,i))},n.updateB=function(n,t){var r=this.a,i=m(r,n,{chunks:this.chunks,changesB:t});return new e(r,n,i,y(r,n,i))},n.getContainingChunk=function(e,n){for(var t=0,r=this.chunks.length-1;t<=r;){var i=t+r>>>1,o=this.chunks[i],a=f(o,n);if(e>=a.from&&e<=a.to)return o;e<a.from?r=i-1:e>a.to&&(t=i+1)}return null},n.getCorrespondingLine=function(e,n){var t=this.map.get(n===r.A?-e:e);return t?this.line(t,d(n)):null},n.getLineChangeType=function(e,n){if(this.map.get(n===r.A?-e:e))return i.UNCHANGED;var t=this.line(e,n),o=this.getContainingChunk(t.from,n);return o?p(t,n,o.changes,o):i.UNCHANGED},n.iterLines=function(e){var n,t,i,o;return(0,l.__generator)(this,(function(a){switch(a.label){case 0:n=e===r.A?this.a:this.b,t=1,a.label=1;case 1:return t<=n.lines?(i=n.line(t),o=this.getCorrespondingLine(i.number,e),[4,{line:i,correspondingLine:o}]):[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[2]}}))},n.iterRanges=function(){var e,n,t,r,i;return(0,l.__generator)(this,(function(o){switch(o.label){case 0:e=0,o.label=1;case 1:if(!(e<this.chunks.length))return[3,6];n=this.chunks[e].fromA,t=this.chunks[e].fromB,r=0,o.label=2;case 2:return r<this.chunks[e].changes.length?(i=this.chunks[e].changes[r],[4,{fromA:n+i.fromA,toA:n+i.toA,fromB:t+i.fromB,toB:t+i.toB}]):[3,5];case 3:o.sent(),o.label=4;case 4:return r++,[3,2];case 5:return e++,[3,1];case 6:return[2]}}))},e.create=function(n,t){var r=m(n,t);return new e(n,t,r,y(n,t,r))},e}(),re=t(47027);var ie,oe=u.r$.define({combine:function(e){return null!==(C=e.filter(Boolean)[0])&&void 0!==C?C:null}}),ae=u.QQ.define({create:function(){return{diff:null,tree:ne.mp.empty}},update:function(e,n){var t,r,i=n.state.facet(oe),o=null===(t=n.state.facet(ee.dK))||void 0===t?void 0:t.parser;if(!i)return null===e.diff&&e.tree===ne.mp.empty?e:{diff:null,tree:ne.mp.empty};var a=e.diff,l=e.tree;return a&&a.a.eq(i)?n.docChanged&&(a=a.updateB(n.newDoc,n.changes)):(a=te.create(i,n.newDoc),l=ne.mp.empty),(null===(r=n.startState.facet(ee.dK))||void 0===r?void 0:r.parser)!==o&&(l=ne.mp.empty),o&&l.length!==a.a.length?(l=function(e){var n=e.text,t=e.parser,r=e.changes,i=e.base,o=e.upTo,a=e.maxTime,l=Date.now(),c=void 0;if(i&&(Array.isArray(i)?i.length&&(c=i):c=(0,J.Z)(i,ne.mp)?ne.i9.addTree(i):ne.i9.addTree((0,ee.qz)(i)),c&&r)){var u=[];r.iterChangedRanges((function(e,n,t,r){u.push({fromA:e,toA:n,fromB:t,toB:r})})),c=ne.i9.applyChanges(c,u)}var s=new re.R(n),d=t.startParse(s,c);void 0!==o&&d.parsedPos<=o&&d.stopAt(o);for(var f=d.advance(),p=!1;!f&&!(f=d.advance());)if(!p&&void 0!==a){if(null!==d.stoppedAt&&d.stoppedAt<=d.parsedPos){p=!0;continue}Date.now()-l>a&&(p=!0,d.stopAt(d.parsedPos))}return f}({parser:o,text:a.a,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),le="cm-inline-diff-line-deletion-base",ce="cm-inline-diff-line-deletion",ue="cm-inline-diff-text-deletion",se="cm-inline-diff-line-insertion-base",de="cm-inline-diff-line-insertion",fe="cm-inline-diff-text-insertion",pe="rgba(180, 0, 0, 0.075)",he="rgba(180, 0, 0, 0.1)",ve="rgba(180, 0, 0, 0.125)",me="rgba(0, 180, 0, 0.075)",ge="rgba(0, 180, 0, 0.1)",ye="rgba(0, 180, 0, 0.125)",Ze="cm-inline-diff-marker",be="cm-inline-diff-marker-left",we="cm-inline-diff-marker-right";function xe(e,n){var t="linear-gradient(to right, ".concat(e,", ").concat(e,")");return n&&(t+=", linear-gradient(to right, ".concat(n,", ").concat(n,")")),t}var Ce=c.tk.theme((ie={},(0,S.Z)(ie,".".concat(le,", .").concat(ce),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(R.TV.accentPrimaryDimmest," !important")}}),(0,S.Z)(ie,".".concat(le),{background:xe(pe),"&.cm-activeLine":{background:xe(he)}}),(0,S.Z)(ie,".".concat(ce),{background:xe(pe,ve),"&.cm-activeLine":{background:xe(he,ve)}}),(0,S.Z)(ie,".".concat(se),{background:xe(me),"&.cm-activeLine":{background:xe(ge)}}),(0,S.Z)(ie,".".concat(de),{background:xe(me,ye),"&.cm-activeLine":{background:xe(ge,ye)}}),(0,S.Z)(ie,".".concat(fe),{display:"inline-block",background:ye,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(ye),paddingLeft:"3px",marginLeft:"-6px"}}),(0,S.Z)(ie,".".concat(ue),{display:"inline-block",background:ve,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(ve),paddingLeft:"3px",marginLeft:"-6px"}}),(0,S.Z)(ie,".".concat(Ze),{display:"flex",width:"100%",justifyContent:"space-between"}),(0,S.Z)(ie,".".concat(be),{width:"calc(50% - 1ch)",textAlign:"right"}),(0,S.Z)(ie,".".concat(we),{width:"50%",textAlign:"right"}),ie)),ke=t(57685),Se=t(3341),Te=t.n(Se);function Ee(e,n,t,r){var i=[],o=!0,a=!1,l=void 0;try{for(var c,u=n.changes[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=f(c.value,t,n),d=s.from,p=s.to;(d=Math.max(d,e.from))>=(p=Math.min(p,e.to))||(r&&(d-=e.from,p-=e.from),i.push({from:d,to:p}))}}catch(h){a=!0,l=h}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return i}var Re,Ie=function(e){(0,T.Z)(t,e);var n=(0,E.Z)(t);function t(e,r,i){var o;return(0,a.Z)(this,t),(o=n.call(this)).line=e,o.index=r,o.changed=i,o}var r=t.prototype;return r.toDOM=function(){var e=this,n=document.createElement("div");if(n.className=this.changed?"cm-line ".concat(le):"cm-line ".concat(ce),!this.changed||!this.changed.length){var t=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=l.text,u=l.tags,s=document.createElement("span");s.textContent=c||"\xa0",s.className=null!==u&&void 0!==u?u:"",n.appendChild(s)}}catch(k){r=!0,i=k}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}for(var d=0,f=0,p=null,h=null,v=function(n,t){if(!p)throw new Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-p.from,t-p.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!==o&&void 0!==o?o:"",n.appendChild(l),d+=a.length};f<this.line.length;){if(!p){var m=this.line[f].text;p={from:d,to:d+m.length}}if(!h){var g=!0,y=!1,Z=void 0;try{for(var b,w=this.changed[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var x=b.value;if(!(x.from>=p.to||x.to<=d)){var C=document.createElement("span");C.className=ue,h={from:x.from,to:x.to,dom:C},d<h.from&&v(n,h.from),n.appendChild(C);break}}}catch(k){y=!0,Z=k}finally{try{g||null==w.return||w.return()}finally{if(y)throw Z}}}h?(d<h.to&&v(h.dom,h.to),d>=h.to&&(h=null)):v(n,p.to),d>=p.to&&(p=null,f++)}return n},r.eq=function(e){var n,r;return(0,J.Z)(e,t)&&this.index===e.index&&this.line.length===e.line.length&&(null===(n=this.changed)||void 0===n?void 0:n.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&Te()(this.line,e.line)&&Te()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,Q.Z)(t,[{key:"estimatedHeight",get:function(){return 21}}]),t}(c.l9),Ge=c.p.line({class:se}),De=c.p.line({class:de}),_e=c.p.mark({class:fe}),Pe=c.tk.decorations.compute([ae],(function(e){var n=function(e,n){if(o.getLineChangeType(e.number,r.B)===i.COVERED)l.push(De.range(e.from));else{l.push(Ge.range(e.from));var t=!0,a=!1,c=void 0;try{for(var u,s=Ee(e,n,r.B,!1)[Symbol.iterator]();!(t=(u=s.next()).done);t=!0){var d=u.value;l.push(_e.range(d.from,d.to))}}catch(f){a=!0,c=f}finally{try{t||null==s.return||s.return()}finally{if(a)throw c}}}},t=e.field(ae,!1);if(!t||!t.diff)return c.p.none;var o=t.diff,a=t.tree,l=[],u=!0,s=!1,d=void 0;try{for(var f,p=o.chunks[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;if(h.fromB!==h.endB)for(var v=o.b.lineAt(h.fromB),m=o.b.lineAt(h.endB),g=v.number;g<=m.number;g++)n(o.b.line(g),h);else h.fromA===h.endA&&n(o.b.lineAt(h.fromB),h);if(h.fromA!==h.toA)for(var y=o.a.lineAt(h.fromA),Z=(0,ke.C)(a,o.a,e,h.fromA,h.endA),b=0;b<Z.length;b++){var w=Z[b],x=o.a.line(y.number+b),C=o.getLineChangeType(x.number,r.A)===i.COVERED?null:Ee(x,h,r.A,!0),k=c.p.widget({widget:new Ie(w,x.number,C),block:!0,side:-(Z.length-b)});l.push(k.range(h.fromB))}}}catch(S){s=!0,d=S}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}return c.p.set(l,!0)})),Be=(0,c.v5)({class:G,renderEmptyElements:!0,lineMarker:function(e,n){var t=e.state.field(ae,!1);if(!t||!t.diff||!t.diff.hasChanges())return null;if(0===t.diff.a.length)return z;var o=e.state.doc.lineAt(n.from);switch(t.diff.getLineChangeType(o.number,r.B)){case i.COVERED:case i.MODIFIED:return z;default:return null}},widgetMarker:function(e,n){if(!(0,J.Z)(n,Ie))return null;var t=e.state.field(ae,!1);if(!t||!t.diff||!t.diff.hasChanges())return null;switch(t.diff.getLineChangeType(n.index,r.A)){case i.COVERED:case i.MODIFIED:return V;default:return null}},initialSpacer:function(e){var n=e.state.field(ae,!1);return(null===n||void 0===n?void 0:n.diff)?z:$},updateSpacer:function(e,n){var t=n.state.field(ae,!1),r=(null===t||void 0===t?void 0:t.diff)?z:$;return e===r?e:r}}),Ae=t(60458),Ue=function(e){(0,T.Z)(t,e);var n=(0,E.Z)(t);function t(e,r){var i;return(0,a.Z)(this,t),(i=n.call(this)).left=e,i.right=r,i}var r=t.prototype;return r.toDOM=function(e){var n=e.state.doc.lines.toString().length,t=document.createElement("div"),r=document.createElement("span"),i=document.createElement("span");return t.className=Ze,r.className=be,i.className=we,t.style.width="".concat(2*n+1,"ch"),null!==this.left&&(r.textContent=this.left.toString()),null!==this.right&&(i.textContent=this.right.toString()),t.appendChild(r),t.appendChild(i),t},r.eq=function(e){return(0,J.Z)(e,t)&&this.left===e.left&&this.right===e.right},t}(c.SJ),Ne=Ae.X4.of((function(e,n){if((0,J.Z)(n,Ie))return new Ue(n.index,null)})),Le=Ae.gy.of((function(e,n){var t=e.state.field(ae,!1);if(t&&t.diff&&t.diff.hasChanges()){var i,o=e.state.doc.lineAt(n.from),a=t.diff.getCorrespondingLine(o.number,r.B);return new Ue(null!==(i=null===a||void 0===a?void 0:a.number)&&void 0!==i?i:null,o.number)}})),Xe=[Le,Ne],Me=u.r$.define({enables:function(e){return[oe.computeN([e],(function(n){return n.facet(e)})),H,ae,Ce,Pe,Xe,Be]}});!function(e){e.GUTTER_DIFF="GUTTER_DIFF",e.INLINE_DIFF="INLINE_DIFF"}(Re||(Re={}));var Oe=u.Py.define(),Fe=u.Py.define(),We=u.QQ.define({create:function(){return{head:null,mode:Re.GUTTER_DIFF}},update:function(e,n){var t=e.head,r=e.mode,i=!0,o=!1,a=void 0;try{for(var l,c=n.effects[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u.is(Oe)?t=u.value:u.is(Fe)&&(r=u.value)}}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return t!==e.head||r!==e.mode?{head:t,mode:r}:e},provide:function(e){return[K.from(e,(function(e){return e.mode===Re.GUTTER_DIFF?e.head:null})),Me.from(e,(function(e){return e.mode===Re.INLINE_DIFF?e.head:null}))]}}),He=function(){function e(n,t,r){var i=this;(0,a.Z)(this,e),this.view=n,this.git=t,this.path=r,this.disposed=!1,this.dispose=t.onRefresh((function(){return i.fetchThenUpdateState()})),this.fetchThenUpdateState()}var n=e.prototype;return n.fetchThenUpdateState=function(){var e=this;return(0,o.Z)((function(){var n,t,r,i,o;return(0,l.__generator)(this,(function(a){switch(a.label){case 0:return[4,e.git.getFileContents({path:e.path,revision:"HEAD"})];case 1:return n=a.sent(),e.disposed?[2]:(t=e.view.state.field(We,!1))?(i=n.error?null:null!==(r=n.content)&&void 0!==r?r:"",(!(o=null===i?null:e.view.state.toText(i))!==!t.head||o&&t.head&&!o.eq(t.head))&&e.view.dispatch({effects:Oe.of(o)}),[2]):[2]}}))}))()},n.destroy=function(){this.dispose(),this.disposed=!0},e}();function ze(e,n){if(!n)return[];var t=c.lg.define((function(t){return new He(t,e,n)}));return[We,t]}},7681:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(94370),i=t(50959),o=t(611),a=t(81415),l=t(75030),c=t(30265),u=t(31518);function s(e){var n=e.view,t=(0,r.useRouter)(),s=(0,u.Z)().preferences.codeIntelligence,d=(0,c.Vg)(t)||!s,f=(0,l.Z)({view:n});(0,i.useEffect)((function(){if(n&&!d)return n.dispatch({effects:f.reconfigure([(0,o.ys)({defaultKeymap:!1,icons:!1,addToOptions:[a.t]})])}),function(){n.dispatch({effects:f.reconfigure([])})}}),[n,f,d])}},9093:function(e,n,t){t.d(n,{S:function(){return l},Z:function(){return c}});var r=t(50959),i=t(14806),o=t(8189),a=t(73691);function l(e){var n=e.view,t=e.line,r=e.col,o=n.state.doc,l=Math.max(1,Math.min(t,o.lines)),c=o.line(l),u=c.to,s=c.from,d=r||0,f=Math.min(s+d,u),p=i.jT.cursor(f);n.dispatch({selection:p,effects:[a.tk.scrollIntoView(f,{x:"center",y:"center"})]}),n.focus()}function c(e){var n=e.filePath,t=e.view,i=e.isLoading,a=e.deeplink,c=e.onDeeplinkUpdated,u=(0,o.Z)().session;r.useEffect((function(){if(t&&!i&&a){var e=a.line,n=a.col;void 0!==e&&(l({view:t,line:e,col:n}),c&&c())}}),[t,i,a,c]),r.useEffect((function(){if(t&&!i)return u.onDeeplinkUpdated((function(e){var r=e.path,i=e.line,o=e.col;r===n&&i&&l({view:t,line:i,col:o})}))}),[u,t,n,i])}},30361:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(73691),i=t(14806),o=t(13834),a=t(50959);function l(e){var n=e.view,t=e.onUpdate,l=(0,a.useRef)(0);(0,o.M)((function(){return t?r.tk.updateListener.of((function(e){var n=!0,r=!1,o=void 0;try{for(var a,c=e.transactions[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var u=a.value;if(!(l.current>0)&&(!u.annotation(i.YW.remote)&&(u.isUserEvent("input")||u.isUserEvent("delete"))))return void(t&&(l.current+=1,setTimeout(t)))}}catch(s){r=!0,o=s}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}})):null}),[t],n,"useDidUpdateOnce")}},13834:function(e,n,t){t.d(n,{M:function(){return c}});var r=t(9970),i=t(50959),o=t(98689),a=t(14806),l=t(1237);function c(e,n,t,c){var u=(0,i.useState)((function(){return new a.F6}))[0],s=(0,o.Z)(e);(0,i.useEffect)((function(){if(t){var e=s.current();if(e){var n=void 0===u.get(t.state)?a.Py.appendConfig.of(u.of(e)):u.reconfigure(e);try{t.dispatch({effects:n})}catch(r){throw l.Z.wrap(r).setExtras({callsiteForBSODs:c})}return function(){try{t.dispatch({effects:u.reconfigure([])})}catch(r){throw l.Z.wrap(r).setExtras({callsiteForBSODs:c})}}}}}),[t,u,s,c].concat((0,r.Z)(n)))}},42464:function(e,n,t){t.d(n,{EE:function(){return h},Gj:function(){return a},ZF:function(){return v},_j:function(){return l},f3:function(){return f},fI:function(){return p},gm:function(){return d},yK:function(){return u}});var r=t(2272),i=t(47453),o=t(94635),a={regexp:/-?\b\d+\.?\d*\b/g,cursor:"ew-resize",onDrag:function(e,n,t){var r=Number(e)+t.movementX;isNaN(r)||n(r.toString())}},l={regexp:/true|false/g,cursor:"pointer",onClick:function(e,n){switch(e){case"true":return n("false");case"false":return n("true")}}};function c(e){var n=new RegExp("".concat(e,"\\(-?\\b\\d+\\.?\\d*\\b\\s*(,\\s*-?\\b\\d+\\.?\\d*\\b)?"),"g"),t=new RegExp("".concat(e,"\\((?<x>-?\\b\\d+\\.?\\d*\\b)\\s*(,\\s*(?<y>-?\\b\\d+\\.?\\d*\\b))?"));return{regexp:n,cursor:"move",onDrag:function(n,r,i){var o,a,l=t.exec(n),c=Number(null===l||void 0===l||null===(o=l.groups)||void 0===o?void 0:o.x),u=Number(null===l||void 0===l||null===(a=l.groups)||void 0===a?void 0:a.y);isNaN(c)||(isNaN(u)&&(u=c),r("".concat(e,"(").concat(c+i.movementX,", ").concat(u+i.movementY)))}}}var u=c("vec2");c("ellipse"),c("circle"),c("point"),c("rect"),c("square"),c("vertex");function s(e){var n=new RegExp("".concat(e,"\\(.*\\)"),"g"),t=new RegExp("".concat(e,"\\((?<r>\\d+)\\s*,\\s*(?<g>\\d+)\\s*,\\s*(?<b>\\d+)\\)"));return{regexp:n,cursor:"pointer",onClick:function(n,o){var a,l,c,u=t.exec(n),s=Number(null===u||void 0===u||null===(a=u.groups)||void 0===a?void 0:a.r),d=Number(null===u||void 0===u||null===(l=u.groups)||void 0===l?void 0:l.g),f=Number(null===u||void 0===u||null===(c=u.groups)||void 0===c?void 0:c.b),p=document.createElement("input");p.type="color",isNaN(s+d+f)||(p.value=(0,i.C)(s,d,f)),p.addEventListener("input",(function(n){var t=n.target;if(t.value){var a=(0,r.Z)((0,i.w)(t.value),3),l=a[0],c=a[1],u=a[2];o("".concat(e,"(").concat(l,", ").concat(c,", ").concat(u,")"))}})),p.click()}}}var d=s("rgb"),f=s("background"),p=s("fill"),h=s("stroke"),v={regexp:/https?:\/\/[^\s)"]+/g,cursor:"pointer",onClick:function(e){(0,o.Z)(e)&&window.open(e,"_blank")}}},45167:function(e,n,t){t.d(n,{Z:function(){return k}});var r=t(2272),i=t(9970),o=t(4541),a=t(95980),l=t.n(a),c=t(50959),u=t(41347),s=t(25776),d=t(22167),f=t(96536),p=t(63228),h=t(74376),v=t(86763),m=t.n(v),g=t(31296),y=t(47799),Z=t(92079),b=function(e){var n=e.buttons,t=e.onClick,r=e.onUndo,i=e.onRedo;return(0,o.BX)("nav",{className:"jsx-43582faf24448cbd",children:[n.map((function(e){return(0,o.tZ)("button",{onClick:function(n){n.stopPropagation(),n.preventDefault(),t(e)},className:"jsx-43582faf24448cbd",children:void 0!==e.label?e.label:e.value},e.value)})),(0,o.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),r()},className:"jsx-43582faf24448cbd",children:(0,o.tZ)(f.Z,{})}),(0,o.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),i()},className:"jsx-43582faf24448cbd",children:(0,o.tZ)(p.Z,{})}),(0,o.tZ)(l(),{id:"43582faf24448cbd",children:'nav.jsx-43582faf24448cbd{font-family:Monaco,Menlo,"Ubuntu Mono",Consolas,source-code-pro,monospace;height:48px;background-color:var(--background-root);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}button.jsx-43582faf24448cbd{color:var(--foreground-default);padding:10px;font-family:inherit;font-size:16px;background-color:transparent;border:0 none;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}'})]})},w=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],x=function(e){var n=e.path,t=(0,i.Z)(w).concat([{value:"= ",cursorOffset:2}]);return n.endsWith(".html")&&(t.unshift({value:"<>",cursorOffset:1}),t.unshift({label:"div",value:"<div></div>",cursorOffset:5})),t},C="visualViewport"in window;function k(e){var n=e.filePath,t=e.isLoading,i=(0,y.uN)(),a=(0,Z.d)({tablet:!1}),l=(0,u.Z)();c.useEffect((function(){l&&i&&i.requestMeasure({read:function(){return{cursor:i.coordsAtPos(i.state.selection.main.head),scroller:i.scrollDOM.getBoundingClientRect()}},write:function(e){var n=e.cursor,t=e.scroller;if(n){var r=(n.top+n.bottom)/2,o=(t.top+t.bottom)/2;Math.abs(r-o)>5&&(i.scrollDOM.scrollTop+=r-o+(g.gn?50:0))}}})}),[l,i]);var f=(0,r.Z)(c.useState(0),2),p=f[0],v=f[1];if(c.useEffect((function(){if(g.gn){var e=window.visualViewport;if(C&&e){var n=m()((function(){v(window.innerHeight-e.height-e.offsetTop)}),100);return e.addEventListener("scroll",n),e.addEventListener("resize",n),function(){e.removeEventListener("scroll",n),e.removeEventListener("resize",n)}}}}),[]),!l||t)return null;if(!a)return null;var w=(0,o.tZ)(b,{onUndo:function(){i&&((0,h.Yw)(i),i.focus())},onRedo:function(){i&&((0,h.KX)(i),i.focus())},onClick:function(e){if(i){var n,t=null!==(n=i.state.selection.ranges[0].from)&&void 0!==n?n:0;i.dispatch({changes:{from:t,insert:e.value},selection:{anchor:t+e.cursorOffset}}),i.focus()}},buttons:x({path:n})});return!g.gn||C?(0,o.tZ)(s.G,{css:[d.l0.position.fixed,d.l0.width("100%"),d.l0.zIndex(100),d.l0.bottom(p),d.l0.left(0)],children:w}):w}},27614:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(12417);function i(e){var n=e.facet(r.dK);return null===n||void 0===n?void 0:n.name}},43064:function(e,n,t){t.d(n,{Iq:function(){return s},Lh:function(){return u}});var r=t(2272),i=t(4541),o=t(50959),a=t(98491),l=t(78457),c=t(7247);t(70134),t(3652);function u(){var e=o.useRef((0,a.u)(new Map)).current,n=o.useCallback((function(n){var t=new Map(e.current);n(t),e.current=t}),[e]),t=o.useCallback((function(){e.current=new Map}),[e]);return(0,c.Z)((function(){return{observable:e,update:n,unmount:t}}),[n,e,t])}var s=function(e){var n=e.source,t=(0,l.Z)(n);return(0,i.tZ)(i.HY,{children:Array.from(t,(function(e){var n=(0,r.Z)(e,2),t=n[0],a=n[1];return(0,i.tZ)(o.Fragment,{children:a},t)}))})}},73297:function(e,n,t){t.d(n,{A:function(){return f},e:function(){return v}});var r=t(57135),i=t(96583),o=t(14806),a=t(73691),l=t(57934),c=t(50260),u=t(60043),s=t(13834),d=o.Py.define(),f=o.QQ.define({create:function(){return null},update:function(e,n){var t=e;return(0,c.j)(n,d,(function(e){t=e.value})),t}});function p(e,n){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)((function(e,n){var t,r,o,a,l,c,u,s,d;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.request.documentSymbol(n)];case 1:if(!(t=i.sent())||t.cancelled)return[2,null];if(!(r="result"in t&&!t.cancelled?t.result:null))return[2,null];o=[],a=!0,l=!1,c=void 0;try{for(u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)(d=s.value)&&"range"in d&&o.push(d)}catch(f){l=!0,c=f}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return[2,o.length?o:null]}}))}))).apply(this,arguments)}function v(e){var n=e.view,t=e.filePath,o=e.lspClient;(0,s.M)((function(){if(!n||!t||!o)return null;if(!(0,u.Z)(o).isDocumentSymbolSupported)return null;var e=(0,l.Z)((0,r.Z)((function(){var e;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,p(o,t)];case 1:return e=r.sent(),n.dispatch({effects:d.of(e)}),[2]}}))})),{wait:200}),c=a.tk.updateListener.of((function(n){n.docChanged&&e()}));return e(),[c,f]}),[n,t,o],n,"useDocumentSymbols")}},84869:function(e,n,t){t.d(n,{Fq:function(){return s},_c:function(){return d},wB:function(){return f}});var r=t(81962),i=t(7624),o=t(73691),a=t(88254),l=t(25928),c=t(73551),u=t(7225);function s(e){var n=e.lspClient,t=e.path,s=e.askGhostwriter;return[o.lg.define((function(e){var n=function(e){var n=e.target;(0,r.Z)(n,HTMLElement)&&n.classList.contains("cm-diagnosticAction")&&e.stopPropagation()};return e.dom.addEventListener("mousedown",n),{destroy:function(){e.dom.removeEventListener("mousedown",n)}}})),o.lg.define((function(e){var r=n.onDiagnostics((function(n){if(n.path===t){var r=function(e,n,t){var r=[],i=!0,o=!1,s=void 0;try{for(var d,f=function(){var e=d.value,i=(0,l.R)(n.doc,e.range.start),o=(0,l.R)(n.doc,e.range.end);if(i===o){var s=n.wordAt(o);if(s)i=s.from,o=s.to;else if(o<n.doc.length)o+=1;else{if(!(i>0))return"continue";i-=1}}if(i>=o)return a.$e((function(n){n.setExtra("diagnostic",e),n.setExtra("range",{from:i,to:o}),a.Tb(new Error("Expected diagnostic range to not be empty"))})),"continue";var f="info";switch(e.severity){case u.DiagnosticSeverity.Error:f="error";break;case u.DiagnosticSeverity.Warning:f="warning";break;case u.DiagnosticSeverity.Hint:case u.DiagnosticSeverity.Information:f="info"}var p=[];t&&p.push({name:"\ud83d\udd2e Debug",apply:function(){return t({text:(0,c.Vh)(e.message,"lsp"),type:"debugger",errorType:"lsp"})}}),r.push({from:i,to:o,severity:f,message:e.message,source:e.source,actions:p})},p=e[Symbol.iterator]();!(i=(d=p.next()).done);i=!0)f()}catch(v){o=!0,s=v}finally{try{i||null==p.return||p.return()}finally{if(o)throw s}}var h={error:1,warning:2,info:3};return r.sort((function(e,n){return h[n.severity]-h[e.severity]}))}(n.diagnostics,e.state,s);e.dispatch((0,i.p0)(e.state,r))}}));return{destroy:function(){r()}}}))]}function d(e){return(0,i.p0)(e,[])}function f(){return[o.tk.updateListener.of((function(e){e.docChanged&&(0,i.KS)(e.state)>0&&e.view.dispatch(d(e.startState))}))]}},61523:function(e,n,t){t.d(n,{B:function(){return g},j:function(){return Z}});var r=t(57135),i=t(2272),o=t(96583),a=t(25928),l=t(83871),c=t(60043),u=t(73691),s=t(76204),d=t(44863),f=t(52321),p=t(47843),h=t(27614),v=t(9093),m={current:null};function g(e){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)((function(e){var n,t,r,l,u,g,y,Z,b,w,x,C,k,S,T,E,R,I;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.offset,t=e.lspClient,r=e.openFile,l=e.view,u=e.newPane,(g=l.state.facet(d.Yp))?(0,c.Z)(t).isFindDefinitionSupported?(m.current&&t.notify.cancelRequest(m.current),m.current=t.generateId(),y=(0,a.s)(l.state.doc,n),Z=setTimeout((function(){var e;m.current&&t.notify.cancelRequest(m.current);var r=null!==(e=(0,h.Z)(l.state))&&void 0!==e?e:"unknown";p.kg.warn("Timed out looking for definition",{filePath:g,offset:n,language:r}),(0,f.J)(l,{message:"Timed out looking for your definition. Try again",offset:n})}),12e3),[4,t.request.findDefinitions(g,y,{id:m.current,tap:(0,s.M)(l)})]):[2]:[2];case 1:if(b=o.sent(),clearTimeout(Z),m.current=null,"error"in b)throw new Error("Something went wrong fetching definition location: ".concat(b.error.message));return w=b.result,b.cancelled?[2]:w&&0!==w.length?(x=(0,i.Z)(w,1),C=x[0],k=C.uri,S=C.range,T=S.start,E=t.documentUriToPath(k),R=T.line+1,I=T.character,E!==g||u?(r({path:E,line:R,col:I,newPane:u,newPaneEdge:"right"}),[2]):((0,v.S)({view:l,line:R,col:I}),[2])):((0,f.J)(l,{message:"No definition found",offset:n}),[2])}}))}))).apply(this,arguments)}function Z(e){var n=e.lspClient,t=e.openFile;return u.tk.domEventHandlers({click:function(e,r){var i=r.state.selection.main;if(i.from!==i.to)return!1;if((0,l.j)(e)){var o=e.clientX,a=e.clientY,c=r.posAtCoords({x:o,y:a});if(null!==c){var u=e.altKey;return g({offset:c,lspClient:n,openFile:t,view:r,newPane:u}),!1}}}})}},70134:function(e,n,t){t.d(n,{w:function(){return U},h:function(){return A}});var r,i=t(57135),o=t(72006),a=t(4405),l=t(2272),c=t(9970),u=t(96583),s=t(4541),d=t(14806),f=t(73691),p=t(25928),h=t(60043),v=t(57389),m=t(77637),g=t(92559),y=t(95784),Z=t(44867),b=t(55544),w=t(22167),x=t(25776),C=t(72402),k=t(8189),S=t(26568),T=t(24403),E=t(97774),R=t(50959),I=t(10422);function G(e){var n=e.dom,t=(0,m.Z)(e,["dom"]);return I.createPortal((0,s.tZ)(_,(0,o.Z)({},t)),n)}function D(e){var n=e.matchesMap,t=e.fileToContents,i=e.type,o=e.onClose,a=e.currentFile,c=Object.keys(n),u=(0,k.Z)().session;if(0===c.length){var d=i===r.REFERENCES?"No references found":"No definitions found";return(0,s.tZ)(b.xv,{color:"dimmer",css:[w.l0.pl(4),w.l0.py(8)],children:d})}return(0,s.tZ)(x.G,{children:c.map((function(e){var r=function(n,t){e===a?u.updateDeeplink({path:e,line:n,col:t}):u.openFile(e,{line:n,col:t})},i=n[e],d=t[e],f=(0,g.Z)(i,d);return(0,s.tZ)(x.G,{css:[w.l0.p(4)],children:(0,s.tZ)(y.V,{path:e,extensions:[f],doc:d,numMatches:i.length,initiallyExpanded:1===c.length,onNavigateToCode:function(e){if(null!==e)r(e.line+1,e.character);else{var n=(0,l.Z)(i,1)[0],t=d.lineAt(n.from),a=n.from-t.from;r(t.number,a)}o()}})},e)}))})}function _(e){var n=e.files,t=e.onClose,a=e.references,f=e.definitions,p=e.currentFile,h=e.currentFileContents,m=function(e,n){if(!y)throw new Error("Expected LSP Client");var t=y.documentUriToPath(e.uri),r=e.range,i=r.start,o=r.end;t in n||(n[t]=[]);var a=_[t],l=a.line(i.line+1),c=a.line(o.line+1);n[t].push({from:l.from+i.character,to:c.from+o.character})},g=(0,k.Z)().fs,y=(0,C.Z)(p),I=(0,Z.Z)(t,[]),G=(0,l.Z)(R.useState((0,v.Z)({},p,d.xv.of(h.split("\n")))),2),_=G[0],P=G[1];R.useEffect((function(){if(n.length){var e=!1;return function(){t.apply(this,arguments)}(),function(){e=!0}}function t(){return t=(0,i.Z)((function(){var t;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return t={},[4,Promise.all(n.map(function(){var e=(0,i.Z)((function(e){var n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return[4,g.readFile(e)];case 1:if((n=r.sent()).error)throw new Error("Something went wrong reading file with path ".concat(e,". Received error: ").concat(n.error));return t[e]=d.xv.of(n.content.toString().split("\n")),[2]}}))}));return function(n){return e.apply(this,arguments)}}()))];case 1:return r.sent(),e?[2]:(P((function(e){return(0,o.Z)({},e,t)})),[2])}}))})),t.apply(this,arguments)}}),[g,n]);var B=(0,c.Z)(a).concat((0,c.Z)(f));if(!y||B.some((function(e){return!(y.documentUriToPath(e.uri)in _)})))return(0,s.tZ)(x.G,{style:{width:w.TV.space128,height:w.TV.space128,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.tZ)(E.Z,{size:32})});var A={},U={};return a.forEach((function(e){m(e,A)})),f.forEach((function(e){m(e,U)})),(0,s.BX)(x.G,{innerRef:I,css:[w.l0.minWidth("375px"),w.l0.maxWidth("500px"),w.l0.pt(4),w.l0.maxHeight("100%"),{overflowY:"scroll"}],children:[(0,s.tZ)(x.G,{css:{borderBottom:"1px solid var(--background-highest)"},children:(0,s.BX)(x.G,{css:[w.l0.p(4)],children:[(0,s.BX)(x.G,{css:[w.l0.flex.row,w.l0.justify.spaceBetween,w.l0.align.center,w.l0.pr(4)],children:[(0,s.tZ)(b.h4,{level:2,variant:"subheadDefault",css:[w.l0.p(4),w.l0.pl(8)],children:"Definitions"}),(0,s.tZ)(S.Z,{filled:!1,border:!1,onClick:t,children:(0,s.tZ)(T.Z,{})})]}),(0,s.tZ)(D,{matchesMap:U,fileToContents:_,type:r.DEFINITION,onClose:t,currentFile:p})]})}),(0,s.tZ)(x.G,{children:(0,s.BX)(x.G,{css:[w.l0.p(4)],children:[(0,s.tZ)(b.h4,{level:2,variant:"subheadDefault",css:[w.l0.p(4),w.l0.pl(8)],children:"References"}),(0,s.tZ)(D,{matchesMap:A,fileToContents:_,type:r.REFERENCES,onClose:t,currentFile:p})]})})]})}!function(e){e.DEFINITION="DEFINITION",e.REFERENCES="REFERENCES"}(r||(r={}));var P=t(52321),B=t(76204),A=d.Py.define();function U(e){var n=e.setDecoration,t=e.lspClient,r=e.path,v=d.Py.define(),m=d.Py.define(),g=f.tk.updateListener.of(function(){var e=(0,i.Z)((function(e){var n,i,o,a,s,d,f,g,y,Z,b,w,x,C,k,S,T,E,R,I,G,D,_,U,N,L,X,M,O,F,W;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:n=null,i=!0,o=!1,a=void 0;try{for(s=e.transactions[Symbol.iterator]();!(i=(d=s.next()).done);i=!0){f=d.value,g=!0,y=!1,Z=void 0;try{for(b=f.effects[Symbol.iterator]();!(g=(w=b.next()).done);g=!0)(x=w.value).is(A)&&(n=x.value)}catch(H){y=!0,Z=H}finally{try{g||null==b.return||b.return()}finally{if(y)throw Z}}}}catch(H){o=!0,a=H}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return n?(C=(0,h.Z)(t),k=e.state.doc,S=(0,p.s)(k,n),T=Promise.all([C.isFindReferencesSupported?t.request.findReferences(r,S,{includeDeclaration:!1}):{result:null},C.isFindDefinitionSupported?t.request.findDefinitions(r,S):{result:null}]),(0,B.M)(e.view)(T),[4,T]):[2];case 1:if(E=l.Z.apply(void 0,[u.sent(),2]),R=E[0],I=E[1],"error"in R)throw new Error("Something went wrong fetching references: ".concat(R.error.message));if("error"in I)throw new Error("Something went wrong fetching definition: ".concat(I.error.message));return G=R.result,D=I.result,_=G&&G.length>0,U=D&&D.length>0,_||U?(N=[],L=[],G&&G.length>0&&(X=N).push.apply(X,(0,c.Z)(G)),D&&D.length>0&&(M=L).push.apply(M,(0,c.Z)(D)),O=(0,c.Z)(N).concat((0,c.Z)(L)).map((function(e){return t.documentUriToPath(e.uri)})).filter((function(e){return e!==r})),F=(0,c.Z)(new Set(O)),W=k.toJSON().join("\n"),e.view.dispatch({effects:v.of({references:N,definitions:L,currentFile:r,currentFileContents:W,files:F})}),[2]):((0,P.J)(e.view,{message:"No references found",offset:n}),e.view.dispatch({effects:m.of(null)}),[2])}}))}));return function(n){return e.apply(this,arguments)}}());return[g,d.QQ.define({create:function(){return null},update:function(e,n){var t=e,r=!0,i=!1,o=void 0;try{for(var a,l=n.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.is(v)&&(t=c.value),c.is(m)&&(t=null)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t},provide:function(e){return f.hJ.compute([e],(function(t){var r=t.field(e);if(!r)return n(null),null;var i=t.selection.asSingle().main;return{pos:i.from,end:i.to,create:function(e){var t=document.createElement("div");return t.classList.add("cm-lsp-tooltip"),t.classList.add("replit-tooltip"),t.style.padding="0",n((0,s.tZ)(G,(0,a.Z)((0,o.Z)({},r),{onClose:function(){e.dispatch({effects:m.of(null)})},dom:t}))),{dom:t}}}}))}})]}},3652:function(e,n,t){t.d(n,{J:function(){return C},n:function(){return x}});var r=t(4541),i=t(14806),o=t(73691),a=t(72006),l=t(77637),c=t(50959),u=t(10422),s=t(22167),d=t(25776),f=t(44867),p=t(59645),h=t(30249),v=t(98260),m=t(3668),g=t(55544),y=t(24403),Z=t(75916);function b(e){var n=e.dom,t=(0,l.Z)(e,["dom"]);return u.createPortal((0,r.tZ)(w,(0,a.Z)({},t)),n)}function w(e){var n=e.onRename,t=e.closeInput,i=e.variable,o=(0,f.Z)(t,[]),a=c.useRef(null),l=(0,h.Y)(i,(function(e){return e?e===i?{message:"Must pick a new name"}:void 0:{message:"New name can't be empty"}}));return c.useEffect((function(){var e=function(e){"Escape"===e.key&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]),(0,r.tZ)(d.G,{innerRef:o,css:[s.l0.flex.column,s.l0.justify.center,s.l0.borderRadius(4),s.l0.shadow(2),s.l0.width(200)],children:(0,r.tZ)("form",{onSubmit:function(e){e.preventDefault(),l.error||(t(),n(l.value))},children:(0,r.BX)(d.G,{css:[s.l0.justify.center],children:[(0,r.BX)(d.G,{css:[s.l0.flex.row,s.l0.align.center,s.l0.pr(4)],children:[(0,r.tZ)(g.h4,{level:2,variant:"subheadDefault",css:[s.l0.p(4),s.l0.pl(8)],children:"Rename"}),(0,r.tZ)(g.h4,{level:2,variant:"subheadDefault",color:"dimmer",css:[s.l0.maxWidth(100),s.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}],children:i}),(0,r.tZ)(m.h,{alt:"Close rename input",tooltipHidden:!0,onClick:t,css:[s.l0.position.absolute,s.l0.top(4),s.l0.right(4)],children:(0,r.tZ)(y.Z,{})})]}),(0,r.tZ)(d.G,{css:[s.l0.justify.center,s.l0.align.center,s.l0.p(8),s.l0.pt(4)],children:(0,r.tZ)(p.ZP,{name:"rename",ref:a,onBlur:l.handleBlur,onChange:function(e){return l.setValue(e.target.value)},value:l.value,placeholder:"New name",autoFocus:!0,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off",validationResults:l.error?[{message:l.error.message,state:"error"}]:void 0,style:{padding:s.TV.space4,borderRadius:s.TV.borderRadius4}})}),(0,r.tZ)(d.G,{css:[s.l0.flex.rowReverse,s.l0.p(8),s.l0.pt(0)],children:(0,r.tZ)(v.zx,{type:"submit",text:"Rename",colorway:"primary",iconLeft:(0,r.tZ)(Z.Z,{}),disabled:Boolean(l.error)||!l.value})})]})})})}var x=i.Py.define();function C(e){var n=e.setDecoration,t=e.hook;return i.QQ.define({create:function(){return null},update:function(e,n){var t=e,r=!0,i=!1,o=void 0;try{for(var a,l=n.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.is(x)&&(t=c.value)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t},provide:function(e){return o.hJ.compute([e],(function(i){var o=i.field(e);if(null===o)return n(null),null;if(o>i.doc.length)return null;var a=i.wordAt(o);return a?{pos:o,create:function(){var e=document.createElement("div");e.classList.add("cm-lsp-rename-tooltip"),e.classList.add("replit-tooltip"),e.style.padding="0";var l=i.sliceDoc(a.from,a.to);return n((0,r.tZ)(b,{variable:l,dom:e,onRename:function(e){return t.onRename(e,o)},closeInput:t.closeRenameInput})),{dom:e}}}:null}))}})}},64400:function(e,n,t){t.d(n,{sn:function(){return vn},hI:function(){return an.h},nD:function(){return ln.n}});var r=t(60043),i=t(57135),o=t(72006),a=t(4405),l=t(2272),c=t(96583),u=t(4541),s=t(50959),d=t(10422),f=t(86763),p=t.n(f),h=t(14806),v=t(611),m=t(73691),g=t(25928),y=t(22167),Z=t(52934),b=t(50260),w=t(25776),x=t(55544),C=t(69526),k=t(7225),S=t(18853),T={p:{padding:"".concat(y.TV.space2," ").concat(y.TV.space8),lineHeight:1.4,marginBottom:"".concat(y.TV.space8," !important")},"p:first-of-type":{marginTop:"".concat(y.TV.space4," !important")},"p:last-of-type":{marginBottom:"".concat(y.TV.space4," !important")},pre:{margin:"".concat(y.TV.space2," ").concat(y.TV.space8)},"pre + p":{borderTop:"1px solid ".concat(y.TV.outlineDimmest),paddingTop:y.TV.space4},"h1, h2, h3":{margin:"".concat(y.TV.space8," !important"),marginTop:"".concat(y.TV.space12," !important"),padding:"0 !important",paddingBottom:"".concat(y.TV.space4," !important"),fontSize:"100% !important",borderBottom:"1px solid ".concat(y.TV.backgroundHighest," !important"),lineHeight:1},"h1:first-of-type, h2:first-of-type, h3:first-of-type":{marginTop:"".concat(y.TV.space4," !important")},hr:{margin:"".concat(y.TV.space8," !important"),borderTop:"2px solid ".concat(y.TV.backgroundHighest," !important")},li:{margin:"".concat(y.TV.space2," ").concat(y.TV.space8)},".lsp-completion-detail":{borderBottom:"1px solid ".concat(y.TV.backgroundHighest),marginBottom:y.TV.space4},".cm-line":{paddingLeft:y.TV.space4,paddingRight:y.TV.space4},".cm-content":{paddingLeft:y.TV.space4,paddingRight:y.TV.space4}},E=s.memo((function(e){var n=e.content,t=e.className;return(0,u.tZ)(w.G,{css:T,children:(0,u.tZ)(C.ZP,{className:t,components:{code:function(e){return(0,u.tZ)(S.Z,(0,o.Z)({minimal:!0,disableCopy:!0},e))}},children:n})})}));function R(e){var n=e.content,t=e.className;return"string"===typeof n?(0,u.tZ)(E,{css:[{p:{whiteSpace:"pre-wrap"}}],className:t,content:n}):n.kind===k.MarkupKind.PlainText?(0,u.tZ)(w.G,{children:(0,u.tZ)(x.xv,{className:t,multiline:!0,children:n.value})}):(0,u.tZ)(E,{className:t,content:n.value})}var I=(0,Z.B)(),G=h.Py.define(),D=h.QQ.define({create:function(){return null},update:function(e,n){if(n.isUserEvent("select")||n.isUserEvent("undo")||n.isUserEvent("redo"))return null;if(!n.isUserEvent("input.type"))return e;if(n.changes.empty)return e;var t="";return n.changes.iterChanges((function(e,n,r,i,o){t=o.sliceString(0,1)})),t||null}});function _(e){var n=e.lspClient,t=e.path,r=e.setDecoration,l=function(e){return d.createPortal((0,u.tZ)(P,(0,o.Z)({},e)),s)},s=document.createElement("div"),f={};function g(e,n){return y.apply(this,arguments)}function y(){return(y=(0,i.Z)((function(e,r){var i,o,a,l,u,s,d;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return(l=(null===(i=n.getServerCapabilities())||void 0===i||null===(o=i.signatureHelpProvider)||void 0===o?void 0:o.triggerCharacters)||[])?(u=e.field(Z,!1),s=e.field(D,!1),u||null!=s&&l.includes(s)?[4,A(e,r,n,t)]:[2,null]):[2,null];case 1:return(null===(d=c.sent())||void 0===d||null===(a=d.signatures)||void 0===a?void 0:a.length)?[2,d]:[2,null]}}))}))).apply(this,arguments)}var Z=h.QQ.define({create:function(){return null},update:function(e,n){return n.isUserEvent("select.pointer")?null:(e&&n.newSelection.main.from!==e.pos&&(e=(0,a.Z)((0,o.Z)({},e),{pos:n.newSelection.main.from})),(0,b.j)(n,I.effect,(function(t){var i=t.value;e=i?{pos:n.newSelection.main.from,create:function(){return function(e){var n=0,t=function(t){r((0,u.tZ)(l,{help:e,index:n,onLayout:t}))};return t(),f.dom=s,f.update=function(r){(0,b.j)(r,G,(function(i){var o=n+i.value;o>e.signatures.length-1||o<0?setTimeout((function(){r.view.dispatch({effects:I.effect.of(null)})})):n=o,t((function(){(0,m.E2)(r.view)}))}))},f}(i)},above:!0}:null})),e)},provide:function(e){return m.hJ.from(e)}}),w=m.lg.define((function(){var e=p()(function(){var e=(0,i.Z)((function(e){var n,t,r;return(0,c.__generator)(this,(function(i){switch(i.label){case 0:return(n=e.state.selection.main).empty?(t=e.state.field(I.state,!1),[4,g(e.state,n.from)]):[3,2];case 1:(r=i.sent())&&!t&&(0,v._B)(e),e.dispatch({effects:I.effect.of(r)}),i.label=2;case 2:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),0);return{update:function(n){n.transactions.some((function(e){return e.selection}))&&n.state.selection.main.empty&&e(n.view)}}})),x=function(e){return function(n){return!!function(e){var n=e.state.field(I.state,!1);return null!=n&&n.signatures.length>1}(n)&&(n.dispatch({effects:G.of(e)}),!0)}},C=[{key:"ArrowDown",run:x(1)},{key:"ArrowUp",run:x(-1)},{key:"Escape",run:function(e){return!!e.state.field(I.state,!1)&&(e.dispatch({effects:I.effect.of(null)}),!0)}}];return[Z,I.state,D,w,h.Wl.high(m.$f.of(C))]}var P=function(e){var n,t,r=e.help,i=e.index,o=e.onLayout,a="1px solid ".concat(y.TV.outlineDimmer),l="min(425px, 80vw)";s.useLayoutEffect((function(){return null===o||void 0===o?void 0:o()}),[o]);var c=r.signatures[i],d=r.signatures.length>1;if(!c)return null;var f=c.documentation,p=null!=r.activeParameter&&(null===(n=c.parameters)||void 0===n||null===(t=n[r.activeParameter])||void 0===t?void 0:t.documentation);return(0,u.BX)(w.G,{css:[y.l0.flex.row,y.l0.backgroundColor.backgroundHigher,{width:"max-content"}],children:[d?(0,u.tZ)(w.G,{css:[y.l0.flex.row,y.l0.pl(4),{borderRight:a,paddingBottom:5}],children:(0,u.BX)("span",{css:[{alignSelf:"flex-end"},y.l0.p(4)],children:[i+1,"/",r.signatures.length]})}):null,(0,u.BX)(w.G,{children:[(0,u.tZ)(w.G,{css:[y.l0.py(4),y.l0.pl(d?4:8),y.l0.pr(8),y.l0.maxHeight(100),y.l0.overflowY("scroll"),y.l0.font.code,{lineHeight:y.TV.lineHeightSmall,maxWidth:l}],children:(0,u.tZ)(B,{signature:c,activeParameter:r.activeParameter})}),Boolean(f||p)&&(0,u.BX)(w.G,{css:[y.l0.px(d?4:8),y.l0.py(2),y.l0.maxHeight(200),y.l0.overflow("scroll"),{borderTop:a,maxWidth:l}],children:[p?(0,u.tZ)(R,{content:p}):null,f?(0,u.tZ)(R,{content:f}):null]})]})]})};function B(e){var n,t=e.signature,r=t.label,i=t.parameters,o=e.activeParameter;if(null==o||!i)return(0,u.tZ)("span",{children:r});var a=null===(n=i[o])||void 0===n?void 0:n.label;if(!a)return(0,u.tZ)("span",{children:r});var c=(0,l.Z)("string"===typeof a?[r.indexOf(a),r.indexOf(a)+a.length]:a,2),s=c[0],d=c[1];return(0,u.BX)("div",{children:[(0,u.tZ)("span",{children:r.slice(0,s)}),(0,u.tZ)("strong",{children:a}),(0,u.tZ)("span",{children:r.slice(d)})]})}function A(e,n,t,r){return U.apply(this,arguments)}function U(){return(U=(0,i.Z)((function(e,n,t,r){var i;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:return[4,t.request.signatureHelp(r,(0,g.s)(e.doc,n))];case 1:return"error"in(i=o.sent())?[2,null]:[2,i.result]}}))}))).apply(this,arguments)}var N=t(9970),L=t(48592),X=t(92674),M=t.n(X),O=t(490),F=new Map;function W(e){var n=e.lspClient,t=e.path,r=e.view,i=M().v4();return function(){var e,o=null!==(e=F.get(t))&&void 0!==e?e:[];F.set(t,(0,N.Z)(o).concat([i])),n.notify.didOpen(t,r.state.doc.toString())}(),{id:i,destroy:function(){var e,r=(null!==(e=F.get(t))&&void 0!==e?e:[]).filter((function(e){return e!==i}));n.getServerState()===O.a.INITIALIZED&&n.isOpen(t)&&n.notify.didClose(t),0===r.length?F.delete(t):F.set(t,r)},update:function(e){var r;if(function(){var e;return(null!==(e=F.get(t))&&void 0!==e?e:[])[0]===i}()&&e.docChanged){var o=null===(r=n.getServerCapabilities())||void 0===r?void 0:r.textDocumentSync;if(o!==L.TextDocumentSyncKind.None&&n.isOpen(t))if(o!==L.TextDocumentSyncKind.Full)n.notify.didChange(t,function(e,n){var t=[],r=n;return e.iterChanges((function(e,n,i,o,a){var l=a.sliceString(0),c=n-e,u=c+i;t.push({range:{start:(0,g.s)(r,i),end:(0,g.s)(r,u)},rangeLength:c,text:l}),r=r.replace(i,u,a)})),t}(e.changes,e.startState.doc));else{var a=e.view.state.doc.toString();n.notify.didChange(t,[{text:a}])}}}}}function H(e){var n=e.lspClient,t=e.path;return m.lg.define((function(e){return W({lspClient:n,path:t,view:e})}))}var z,V,j=t(84869),q=t(57389),$=t(44478),Y=t(25736),K=t(66091),Q=t(5683),J=t(77637),ee=t(45347),ne=t(12417),te=t(57988),re=t(98539),ie=t(7742),oe=t(81962);!function(e){e[e.Dollar=0]="Dollar",e[e.Colon=1]="Colon",e[e.Comma=2]="Comma",e[e.CurlyOpen=3]="CurlyOpen",e[e.CurlyClose=4]="CurlyClose",e[e.Backslash=5]="Backslash",e[e.Forwardslash=6]="Forwardslash",e[e.Pipe=7]="Pipe",e[e.Int=8]="Int",e[e.VariableName=9]="VariableName",e[e.Format=10]="Format",e[e.Plus=11]="Plus",e[e.Dash=12]="Dash",e[e.QuestionMark=13]="QuestionMark",e[e.EOF=14]="EOF"}(z||(z={})),function(e){e[e.DollarSign=36]="DollarSign",e[e.Plus=43]="Plus",e[e.Comma=44]="Comma",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Digit0=48]="Digit0",e[e.Digit9=57]="Digit9",e[e.Colon=58]="Colon",e[e.QuestionMark=63]="QuestionMark",e[e.A=65]="A",e[e.Z=90]="Z",e[e.Backslash=92]="Backslash",e[e.Underline=95]="Underline",e[e.a=97]="a",e[e.z=122]="z",e[e.OpenCurlyBrace=123]="OpenCurlyBrace",e[e.Pipe=124]="Pipe",e[e.CloseCurlyBrace=125]="CloseCurlyBrace"}(V||(V={}));var ae,le=function(){function e(){(0,K.Z)(this,e),this.value="",this.pos=0}var n=e.prototype;return n.text=function(e){this.value=e,this.pos=0},n.tokenText=function(e){return this.value.substr(e.pos,e.len)},n.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var n,t=this.pos,r=0,i=this.value.charCodeAt(t);if("number"===typeof(n=e._table[i]))return this.pos+=1,{type:n,pos:t,len:1};if(e.isDigitCharacter(i)){n=8;do{r+=1,i=this.value.charCodeAt(t+r)}while(e.isDigitCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}}if(e.isVariableCharacter(i)){n=9;do{i=this.value.charCodeAt(t+ ++r)}while(e.isVariableCharacter(i)||e.isDigitCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}}n=10;do{r+=1,i=this.value.charCodeAt(t+r)}while(!isNaN(i)&&"undefined"===typeof e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();le._table=(ae={},(0,q.Z)(ae,36,0),(0,q.Z)(ae,58,1),(0,q.Z)(ae,44,2),(0,q.Z)(ae,123,3),(0,q.Z)(ae,125,4),(0,q.Z)(ae,92,5),(0,q.Z)(ae,47,6),(0,q.Z)(ae,124,7),(0,q.Z)(ae,43,11),(0,q.Z)(ae,45,12),(0,q.Z)(ae,63,13),ae);var ce=function(){function e(){var n;(0,K.Z)(this,e),this._children=[],n=this,["parent"].forEach((function(e){Object.defineProperty(n,e,{enumerable:!1,writable:!0})}))}var n=e.prototype;return n.appendChild=function(e){return(0,oe.Z)(e,ue)&&(0,oe.Z)(this._children[this._children.length-1],ue)?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},n.replace=function(e,n){var t,r=e.parent,i=r.children.indexOf(e),o=r.children.slice(0);(t=o).splice.apply(t,[i,1].concat((0,N.Z)(n))),r._children=o,function e(n,t){var r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.parent=t,e(c.children,c)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(n,r)},n.toString=function(){return this.children.reduce((function(e,n){return e+n.toString()}),"")},n.len=function(){return 0},n.match=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=Object.entries(Ze)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,l.Z)(i.value,2),c=a[0],u=a[1];if((0,oe.Z)(this,u)&&c in e)return e[c](this)}}catch(s){t=!0,r=s}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}},(0,te.Z)(e,[{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if((0,oe.Z)(e,ge))return e;e=e.parent}}}]),e}(),ue=function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(e){var r;return(0,K.Z)(this,t),(r=n.call(this)).value=e,r}var r=t.prototype;return r.toString=function(){return this.value},r.toTextmateString=function(){return t.escape(this.value)},r.len=function(){return this.value.length},r.clone=function(){return new t(this.value)},t.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},t}(ce),se=function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(){return(0,K.Z)(this,t),n.apply(this,arguments)}return t}(ce),de=function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(e){var r;return(0,K.Z)(this,t),(r=n.call(this)).index=e,r}var r=t.prototype;return r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}"):"$".concat(this.index)},r.clone=function(){var e=new t(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},t.compareByIndex=function(e,n){return e.index===n.index?0:e.isFinalTabstop?1:n.isFinalTabstop||e.index<n.index?-1:e.index>n.index?1:0},(0,te.Z)(t,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&(0,oe.Z)(this._children[0],fe)?this._children[0]:void 0}}]),t}(se),fe=function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(){var e;return(0,K.Z)(this,t),(e=n.apply(this,arguments)).options=[],e}var r=t.prototype;return r.appendChild=function(e){return(0,oe.Z)(e,ue)&&(e.parent=this,this.options.push(e)),this},r.toString=function(){return this.options[0].value},r.toTextmateString=function(){return this.options.map((function(e){return e.value.replace(/\||,|\\/g,"\\$&")})).join(",")},r.len=function(){return this.options[0].len()},r.clone=function(){var e=new t;return this.options.forEach(e.appendChild,e),e},t}(ce),pe=function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(){var e;return(0,K.Z)(this,t),(e=n.apply(this,arguments)).regexp=new RegExp(""),e}var r=t.prototype;return r.resolve=function(e){var n=this,t=!1,r=e.replace(this.regexp,(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=!0,n._replace(r.slice(0,-2))}));return!t&&this._children.some((function(e){return(0,oe.Z)(e,he)&&Boolean(e.elseValue)}))&&(r=this._replace([])),r},r._replace=function(e){var n="",t=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if((0,oe.Z)(l,he)){var c=e[l.index]||"";n+=c=l.resolve(c)}else n+=l.toString()}}catch(u){r=!0,i=u}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n},r.toString=function(){return""},r.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map((function(e){return e.toTextmateString()})),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},r.clone=function(){var e=new t;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map((function(e){return e.clone()})),e},t}(ce),he=function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(e,r,i,o){var a;return(0,K.Z)(this,t),(a=n.call(this)).index=e,a.shorthandName=r,a.ifValue=i,a.elseValue=o,a}var r=t.prototype;return r.resolve=function(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":"camelcase"===this.shorthandName?e?this._toCamelCase(e):"":Boolean(e)&&"string"===typeof this.ifValue?this.ifValue:e||"string"!==typeof this.elseValue?e||"":this.elseValue},r._toPascalCase=function(e){var n=e.match(/[a-z0-9]+/gi);return n?n.map((function(e){return e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r._toCamelCase=function(e){var n=e.match(/[a-z0-9]+/gi);return n?n.map((function(e,n){return 0===n?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},r.clone=function(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)},t}(ce),ve=function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(e){var r;return(0,K.Z)(this,t),(r=n.call(this)).name=e,r}var r=t.prototype;return r.resolve=function(e){var n=e.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),void 0!==n&&(this._children=[new ue(n)],!0)},r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0===this.children.length?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}")},r.clone=function(){var e=new t(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},t}(se);function me(e,n){for(var t=(0,N.Z)(e);t.length>0;){var r,i=t.shift();if(!n(i))break;(r=t).unshift.apply(r,(0,N.Z)(i.children))}}var ge=function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(){return(0,K.Z)(this,t),n.apply(this,arguments)}var r=t.prototype;return r.offset=function(e){var n=0,t=!1;return this.walk((function(r){return r===e?(t=!0,!1):(n+=r.len(),!0)})),t?n:-1},r.fullLen=function(e){var n=0;return me([e],(function(e){return n+=e.len(),!0})),n},r.enclosingPlaceholders=function(e){for(var n=[],t=e.parent;t;)(0,oe.Z)(t,de)&&n.push(t),t=t.parent;return n},r.resolveVariables=function(e){var n=this;return this.walk((function(t){return(0,oe.Z)(t,ve)&&t.resolve(e)&&delete n._placeholders,!0})),this},r.appendChild=function(e){return delete this._placeholders,(0,re.Z)((0,ie.Z)(t.prototype),"appendChild",this).call(this,e)},r.replace=function(e,n){return delete this._placeholders,(0,re.Z)((0,ie.Z)(t.prototype),"replace",this).call(this,e,n)},r.toTextmateString=function(){return this.children.reduce((function(e,n){return e+n.toTextmateString()}),"")},r.clone=function(){var e=new t;return this._children=this.children.map((function(e){return e.clone()})),e},r.walk=function(e){me(this.children,e)},(0,te.Z)(t,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,n=[];this.walk((function(t){return(0,oe.Z)(t,de)&&(n.push(t),e=!e||e.index<t.index?t:e),!0})),this._placeholders={all:n,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),t}(ce),ye=function(){function e(){(0,K.Z)(this,e),this._scanner=new le,this._token={type:14,pos:0,len:0}}var n=e.prototype;return n.text=function(e){return this.parse(e).toString()},n.parse=function(e,n,t){var r=new ge;return this.parseFragment(e,r),this.ensureFinalTabstop(r,null!==t&&void 0!==t&&t,null!==n&&void 0!==n&&n),r},n.parseFragment=function(e,n){var t=n.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(n););var r=new Map,i=[];n.walk((function(e){return(0,oe.Z)(e,de)&&(e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):i.push(e)),!0}));var o=function(e,t){var i=r.get(e.index);if(i){var a=new de(e.index);a.transform=e.transform;var l=!0,c=!1,u=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value.clone();a.appendChild(f),(0,oe.Z)(f,de)&&r.has(f.index)&&!t.has(f.index)&&(t.add(f.index),o(f,t),t.delete(f.index))}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}n.replace(e,[a])}},a=new Set,l=!0,c=!1,u=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;o(f,a)}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return n.children.slice(t)},n.ensureFinalTabstop=function(e,n,t){(n||t&&e.placeholders.length>0)&&(e.placeholders.find((function(e){return 0===e.index}))||e.appendChild(new de(0)))},n._accept=function(e,n){if(void 0===e||this._token.type===e){var t=!n||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),t}return!1},n._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},n._until=function(e){for(var n=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var t=this._scanner.next();if(0!==t.type&&4!==t.type&&5!==t.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(n.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},n._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},n._parseEscaped=function(e){var n;return!!(n=this._accept(5,!0))&&(n=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||n,e.appendChild(new ue(n)),!0)},n._parseTabstopOrVariableName=function(e){var n,t=this._token;return this._accept(0)&&(n=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(n)?new de(Number(n)):new ve(n)),!0):this._backTo(t)},n._parseComplexPlaceholder=function(e){var n,t=this._token;if(!(this._accept(0)&&this._accept(3)&&(n=this._accept(8,!0))))return this._backTo(t);var r=new de(Number(n));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new ue("${"+n+":")),r.children.forEach(e.appendChild,e),!0}else{if(!(r.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(t),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(t);for(var i=new fe;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(t),!1}}},n._parseChoiceElement=function(e){for(var n=this._token,t=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(n),!1;t.push(r)}return 0===t.length?(this._backTo(n),!1):(e.appendChild(new ue(t.join(""))),!0)},n._parseComplexVariable=function(e){var n,t=this._token;if(!(this._accept(0)&&this._accept(3)&&(n=this._accept(9,!0))))return this._backTo(t);var r=new ve(n);if(!this._accept(1))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(t),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(t);for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new ue("${"+n+":")),r.children.forEach(e.appendChild,e),!0}},n._parseTransform=function(e){for(var n=new pe,t="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0))t+=i=this._accept(6,!0)||i;else{if(14===this._token.type)return!1;t+=this._accept(void 0,!0)}}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0))o=this._accept(5,!0)||this._accept(6,!0)||o,n.appendChild(new ue(o));else if(!this._parseFormatString(n)&&!this._parseAnything(n))return!1}for(;!this._accept(4);){if(14===this._token.type)return!1;r+=this._accept(void 0,!0)}try{n.regexp=new RegExp(t,r)}catch(a){return!1}return e.transform=n,!0},n._parseFormatString=function(e){var n=this._token;if(!this._accept(0))return!1;var t=!1;this._accept(3)&&(t=!0);var r=this._accept(8,!0);if(!r)return this._backTo(n),!1;if(!t)return e.appendChild(new he(Number(r))),!0;if(this._accept(4))return e.appendChild(new he(Number(r))),!0;if(!this._accept(1))return this._backTo(n),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new he(Number(r),i)),!0):(this._backTo(n),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new he(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new he(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var l=this._until(1);if(l){var c=this._until(4);if(c)return e.appendChild(new he(Number(r),void 0,l,c)),!0}}else{var u=this._until(4);if(u)return e.appendChild(new he(Number(r),void 0,void 0,u)),!0}return this._backTo(n),!1},n._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new ue(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.asInsertText=function(n){return(new e).parse(n).toString()},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),Ze={Text:ue,Placeholder:de,Variable:ve,FormatString:he,Choice:fe};function be(e,n){var t=n.mapPos(e.from,-1,h.gc.TrackDel),r=n.mapPos(e.to,1,h.gc.TrackDel);return null==t||null==r?null:{field:e.field,from:t,to:r}}var we=function(){function e(n){(0,K.Z)(this,e),this.lines=n.split(/\r\n?|\n/).map((function(e){return(new ye).parse(e).children}))}return e.prototype.apply=function(n){var t=n.view,r=n.from,i=n.to,o=e.instantiate(this.lines,n),a=o.text,l=o.ranges,c={from:r,to:i,insert:h.xv.of(a)},u={changes:c,scrollIntoView:!0,annotations:v.Jv.of(n.completion)};if(l.length&&(u.selection=Re(l,0)),l.length>1){var s=new ke(l,0),d=u.effects=[Se.of(s)];void 0===t.state.field(Ee,!1)&&d.push(h.Py.appendConfig.of([Ee,Ge,De]))}if(r===i&&!l.length){var f=h.as.of(c,t.state.doc.length),p=t.state.selection.ranges.map((function(e){return e.map(f,0)}));u.selection=h.jT.create(p,t.state.selection.mainIndex)}return u},e.resolveVariable=function(e,n){var t=n.view,r=n.from,i=n.path;switch(e){case"TM_FILENAME":return(0,Y.basename)(i);case"TM_FILENAME_BASE":return(0,Y.basename)(i,(0,Y.extname)(i));case"TM_DIRECTORY":return(0,Y.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(t.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return t.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(n,t){var r,i=t.view,l=t.from,c=i.state,u=[],s=[],d=c.doc.lineAt(l),f=/^\s*/.exec(d.text)[0],p=c.facet(ne.c),h=!0,v=!1,m=void 0;try{for(var g,y=function(){var n=g.value,r=0,i="",o=function(e){var n=0,t=r;if(0===r&&(n=/^\t*/.exec(e)[0].length)){var o=f+p.repeat(n);e=o+e.slice(n),t+=o.length}return i+=e,r+=e.length,{line:u.length,from:t,to:r}},a=function(n){var i=!0,c=!1,d=void 0;try{for(var f,p=n[Symbol.iterator]();!(i=(f=p.next()).done);i=!0){f.value.match({Text:function(e){o(e.value)},Variable:function(n){var r=n.name,i=n.transform,a=e.resolveVariable(r,t);i&&(a=a.replace(i.regexp,(function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return i.children.map((function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(n[e.index])}})})).filter(Boolean).join("")}))),o(a)},Choice:function(e){o(e.options[0].value)},Placeholder:function(e){var n,t=u.length?l+u.map((function(e){return e.length})).reduce((function(e,n){return e+n})):l;if(null===(n=e.children)||void 0===n?void 0:n.length){var i={field:e.index,from:t+r,to:null};s.push(i),a(e.children),i.to=t+r}else{o("");var c=t+r;s.push({field:e.index,from:c,to:c})}}})}}catch(h){c=!0,d=h}finally{try{i||null==p.return||p.return()}finally{if(c)throw d}}};a(n),u.push(i)},Z=n[Symbol.iterator]();!(h=(g=Z.next()).done);h=!0)y()}catch(w){v=!0,m=w}finally{try{h||null==Z.return||Z.return()}finally{if(v)throw m}}var b=(r=Math).max.apply(r,(0,N.Z)(s.map((function(e){return e.field}))));return{text:u,ranges:s.map((function(e){var n=e.field,t=(0,J.Z)(e,["field"]);return(0,a.Z)((0,o.Z)({},t),{field:0===n?b:n-1})}))}},e}(),xe=m.p.widget({widget:new(function(e){(0,Q.Z)(t,e);var n=(0,ee.Z)(t);function t(){return(0,K.Z)(this,t),n.apply(this,arguments)}var r=t.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},r.ignoreEvent=function(){return!1},t}(m.l9))}),Ce=m.p.mark({class:"cm-snippetField"}),ke=function(){function e(n,t){(0,K.Z)(this,e),this.ranges=n,this.active=t,this.deco=m.p.set(n.map((function(e){return(e.from===e.to?xe:Ce).range(e.from,e.to)})))}var n=e.prototype;return n.map=function(n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,l=this.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=be(a.value,n);if(!c)return null;t.push(c)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return new e(t,this.active)},n.isSelectionInsideField=function(e){var n=this;return e.ranges.every((function(e){return n.ranges.some((function(t){return t.field===n.active&&t.from<=e.from&&t.to>=e.to}))}))},e}(),Se=h.Py.define({map:function(e,n){return null===e||void 0===e?void 0:e.map(n)}}),Te=h.Py.define(),Ee=h.QQ.define({create:function(){return null},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(Se))return l.value;if(l.is(Te)&&e)return new ke(e.ranges,l.value)}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e&&n.docChanged&&(e=e.map(n.changes)),e&&n.selection&&!e.isSelectionInsideField(n.selection)&&(e=null),e},provide:function(e){return m.tk.decorations.from(e,(function(e){return e?e.deco:m.p.none}))}});function Re(e,n){var t=e.filter((function(e){return e.field===n})).map((function(e){return h.jT.range(e.from,e.to)}));if(0!==t.length)return h.jT.create(t)}function Ie(e){return function(n){var t,r=n.state,i=n.dispatch,o=r.field(Ee,!1);if(!o||e<0&&0===o.active)return!1;var a=o.active+e,l=(t=Math).max.apply(t,(0,N.Z)(o.ranges.map((function(e){return e.field})))),c=e>0&&o.active>=l;return i(r.update({selection:Re(o.ranges,a),effects:Se.of(c?null:new ke(o.ranges,a))})),!0}}var Ge=h.Wl.highest(m.$f.of([{key:"Tab",run:Ie(1),shift:Ie(-1)},{key:"Escape",run:function(e){var n=e.state,t=e.dispatch;return!!n.field(Ee,!1)&&(t(n.update({effects:Se.of(null)})),!0)}}])),De=m.tk.domEventHandlers({mousedown:function(e,n){var t,r=n.state.field(Ee,!1);if(!r||null==(t=n.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find((function(e){return e.from<=t&&e.to>=t}));return!(!i||i.field===r.active)&&(n.dispatch({selection:Re(r.ranges,i.field),effects:Se.of(r.ranges.some((function(e){return e.field>i.field}))?new ke(r.ranges,i.field):null)}),!0)}}),_e=t(75201),Pe=t(21942),Be=t(8126);function Ae(){return(0,u.tZ)(w.G,{css:[y.l0.p(4)],children:(0,u.BX)(x.xv,{css:[y.l0.fontSize("90%"),{opacity:.6,lineHeight:"1"}],children:[(0,u.tZ)(Be.Z,{width:8,height:8}),"\xa0",(0,u.tZ)(_e.ZP,{size:"small",dimmed:!1,shortcut:{key:"tab"}})," ","to use Ghostwriter suggestion."]})})}var Ue=t(53410),Ne=m.tk.baseTheme({".cm-tooltip.cm-ghostwriter-hint-tooltip":{boxShadow:"none",backgroundColor:"var(--background-higher)",padding:"0px",boxSizing:"content-box",borderTop:"1px solid var(--background-highest)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",marginTop:"-4px"}});function Le(e){return e.clientWidth.toString()+"px"}function Xe(){var e=h.QQ.define({create:function(){return null},update:function(e,n){return"active"===(0,v.LR)(n.state)&&(0,Pe.Z)(n.state)?e||function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=e.selection,r=(0,l.Z)(document.querySelectorAll(".cm-tooltip-autocomplete"),1)[0];if(!r)return null;var i=r.style.borderBottomLeftRadius,o=r.style.borderBottomRightRadius;return{pos:null!==n&&void 0!==n?n:t.main.head,above:!1,create:function(){var e=document.createElement("div");r.style.borderBottomLeftRadius="0px",r.style.borderBottomRightRadius="0px",e.className="cm-tooltip cm-ghostwriter-hint-tooltip";var n=function(){e.style.width=Le(r),e.style.left=r.offsetLeft+"px"};return(0,$.createRoot)(e).render((0,u.tZ)(Ue.C,{children:(0,u.tZ)(Ae,{})})),n(),{dom:e,positioned:function(){n()},destroy:function(){r.style.borderBottomLeftRadius=i,r.style.borderBottomRightRadius=o}}}}}(n.state):null},provide:function(e){return m.hJ.compute([e],(function(n){return n.field(e)}))}});return[e,Ne]}var Me=t(91355),Oe=t(27614),Fe=t(47843);function We(e){var n=Object.keys(e).join(""),t=/\w/.test(n);return t&&(n=n.replace(/\w/g,"")),"[".concat(t?"\\w":"").concat(n.replace(".","").replace(/[^\w\s]/g,"\\$&"),"]")}function He(e,n){var t=e.state,r=e.pos;if(e.explicit)return{triggerKind:L.CompletionTriggerKind.Invoked};var i=t.doc.lineAt(r),o=i.text[r-i.from-1],a=i.text.substring(0,r-i.from);if(null===n||void 0===n?void 0:n.includes(o)){var l=o;return{triggerKind:L.CompletionTriggerKind.TriggerCharacter,triggerCharacter:l}}return a.match(/\w$/)?{triggerKind:L.CompletionTriggerKind.Invoked}:null}var ze=Object.entries(k.CompletionItemKind).reduce((function(e,n){var t=(0,l.Z)(n,2),r=t[0],i=t[1];return(0,o.Z)((0,q.Z)({},i,r.toLowerCase()),e)}),{});function Ve(e,n){var t=(0,g.R)(e.state.doc,n.range.start),r=(0,g.R)(e.state.doc,n.range.end);if(null!==t&&null!==r)return{from:t,to:r,insert:n.newText}}function je(e){var n,t=e.context,s=e.items,f=e.client,p=e.path,m=e.setDecoration,y=e.trackCompletion,Z=0,b=null!==(n=(0,Oe.Z)(t.state))&&void 0!==n?n:"unknown",w=function(e,n){var t=new Set;return e.filter((function(e){var r=n.map((function(n){return e[n]})).join("\u241e");return!t.has(r)&&(t.add(r),!0)}))}(s.filter((function(e){return Boolean(e.label)})),["label","kind"]).map((function(e){var n=e.additionalTextEdits,t={label:e.label,detail:e.detail,apply:function(t,r,i,c){if(e.insertTextFormat===k.InsertTextFormat.Snippet){var u,s,d,f,m=[];n&&m.push({changes:n.map((function(e){return Ve(t,e)}))});var Z=null!==(f=null!==(d=null===(s=e.textEdit)||void 0===s?void 0:s.newText)&&void 0!==d?d:e.insertText)&&void 0!==f?f:e.label,w=new we(Z);e.textEdit&&"range"in e.textEdit&&(i=(0,g.R)(t.state.doc,e.textEdit.range.start),c=Math.max(c,(0,g.R)(t.state.doc,e.textEdit.range.end)));var x=w.apply({view:t,from:i,to:c,path:p,completion:r});return(u=t).dispatch.apply(u,(0,N.Z)(m).concat([x])),void y("completion-accepted",{language:b,completionKind:e.kind,insertTextFormat:e.insertTextFormat})}var C=function(e){var n,t=e.view,r=e.item,i=e.from,c=e.to,u=t.state,s=u.doc,d=u.selection,f=[];if(r.textEdit){var p=r.textEdit,v=p.range,m=p.newText,y=(0,g.R)(s,v.start),Z=(0,g.R)(s,v.end);if(null===y||null===Z)return;f.push({from:y,insert:m,to:Math.max(Z,d.main.to)})}else{var b=r.insertText||r.label,w=t.state.wordAt(c);w&&w.to>c&&b.includes(t.state.doc.sliceString(c,w.to))&&(c=w.to),f.push({from:i,to:c,insert:b})}var x=(0,l.Z)(f,1)[0],C="";null===(n=r.additionalTextEdits)||void 0===n||n.forEach((function(e){var n=Ve(t,e);n&&("from"in x&&n.from===x.from&&(C=n.insert),f.push(n))}));var k=c-i;d.ranges.forEach((function(e){if(e!==d.main){if(!("insert"in x)||!x.insert)throw new Error("Expected insert in mainChange");var n=e.from-k,t=C+x.insert;f.push({from:n,to:e.to,insert:t})}}));var S=f.map((function(e){return"from"in e&&"undefined"!==typeof e.to?(0,a.Z)((0,o.Z)({},e),{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e})),T=h.as.of(S,s.length),E=d.ranges.map((function(e){return e.map(T,0)}));return{changes:T,selection:h.jT.create(E,d.mainIndex)}}({view:t,item:(0,a.Z)((0,o.Z)({},e),{additionalTextEdits:n}),to:c,from:i});C&&(y("completion-accepted",{language:b,completionKind:e.kind,insertTextFormat:e.insertTextFormat}),t.dispatch({changes:C.changes,selection:C.selection,annotations:v.Jv.of(r)}))},type:e.kind&&ze[e.kind],filterText:(e.filterText||e.label).toLowerCase(),sortText:(e.sortText||e.label).toLowerCase()},s=(0,r.Z)(f).isCompletionItemResolveSupported;return f&&s?t.info=(0,i.Z)((function(){var t,r,i,o,a,l,s;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return[4,f.request.resolveCompletionItem(e)];case 1:return t=c.sent(),r="cancelled"in t&&t.cancelled,i="result"in t?t.result:null,r||!i?[2,null]:(i.additionalTextEdits&&(n=i.additionalTextEdits),Z++,o=[],i.detail&&i.detail!==e.detail&&i.detail!==e.label&&(a=(0,Y.extname)(p).slice(1),l=["```"+a,i.detail,"```"].join("\n"),o.push((0,u.tZ)(R,{className:"lsp-completion-detail",content:{value:l,kind:"markdown"}},"".concat(Z,"-detail")))),i.documentation&&o.push((0,u.tZ)(R,{content:i.documentation},"".concat(Z,"-documentation"))),0===o.length?[2,null]:(y("resolution-presented",{language:b,resolutionSource:"request",completionKind:e.kind}),s=document.createElement("div"),m(d.createPortal((0,u.tZ)(u.HY,{children:o}),s)),[2,s]))}}))})):e.documentation&&(t.info=function(){if(!e.documentation)return null;y("resolution-presented",{language:b,resolutionSource:"documentation",completionKind:e.kind});var n=document.createElement("div");return m(d.createPortal((0,u.tZ)(u.HY,{children:(0,u.tZ)(R,{content:e.documentation})}),n)),n}),t}));w=w.sort((function(e,n){return e.sortText<n.sortText?-1:e.sortText>n.sortText?1:0}));for(var x=0;x<w.length;x++)w[x-1]&&w[x].sortText===w[x-x].sortText?w[x].boost=w[x-1].boost:w[x].boost=w.length-x;var C=(0,l.Z)(function(e){var n=Object.create(null),t=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value.filterText;n[c[0]]=!0;for(var u=1;u<c.length;u++)t[c[u]]=!0}}catch(d){i=!0,o=d}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var s=We(n)+We(t)+"*$";return[new RegExp("^"+s),new RegExp(s)]}(w),2),S=C[0],T=C[1],E=t.matchBefore(T),I=t.pos;return E&&(I=E.from),w.length&&y("completion-options-presented",{language:b}),{from:I,options:w,validFor:S}}var qe=m.tk.baseTheme({".lsp-completion-keyboard-shortcuts":{display:"none"},'[aria-selected="true"] .lsp-completion-keyboard-shortcuts':{float:"right",display:"inline-block"}}),$e=t(8189),Ye=t(78457),Ke=t(65120),Qe=t(12018),Je=t(31518);function en(e){var n=e.content,t=e.className,r=e.showHoveredVariable,i=(0,Je.Z)().preferences;if("string"!==typeof n&&"kind"in n)return(0,u.tZ)(R,{content:n});var a=(Array.isArray(n)?n:[n]).map((function(e){return"string"===typeof e?e:"```"+e.language+"\n"+e.value+"\n```"})).join("\n");return(0,u.tZ)(C.ZP,{css:[{p:{fontSize:i.fontSize}},r?[y.l0.maxHeight(tn),y.l0.overflowY("auto")]:void 0],className:t,components:{code:function(e){return(0,u.tZ)(S.Z,(0,o.Z)({minimal:!0,disableCopy:!0},e))}},children:a})}function nn(e){var n=e.dom,t=(0,J.Z)(e,["dom"]);return d.createPortal((0,u.tZ)(rn,(0,o.Z)({},t)),n)}var tn=100;function rn(e){var n=e.className,t=e.content,r=e.textHovered,a=(0,Qe.P5)({controlName:"flag-debugger-hover-variable"}),d=(0,$e.Z)().debuggest,f=(0,Ye.Z)(d.mainClient),p=f&&("running"===f.state.current||"paused"===f.state.current),h=(0,l.Z)(s.useState(!1),2),v=h[0],m=h[1],g=(0,l.Z)(s.useState(void 0),2),Z=g[0],b=g[1],x=a&&p&&Z;return s.useEffect((function(){function e(){return e=(0,i.Z)((function(){var e,n,t;return(0,c.__generator)(this,(function(i){switch(i.label){case 0:if(!a||!p)return[3,4];m(!0),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,f.evaluate({expression:r,context:"hover"})];case 2:return n=i.sent(),(null===(e=n.body)||void 0===e?void 0:e.result)&&(t=(0,o.Z)({name:r,value:n.body.result},n.body),b(t)),[3,4];case 3:return m(!1),[7];case 4:return[2]}}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,f,p,r]),(0,u.BX)(w.G,{css:[T,x?y.l0.maxHeight(tn+190):y.l0.maxHeight(190),y.l0.minHeight(30),y.l0.overflowY("auto"),y.l0.borderRadius(4),y.l0.backgroundColor.backgroundHigher],children:[v?void 0:(0,u.tZ)(en,{content:t,className:n,showHoveredVariable:Boolean(x)}),x?(0,u.tZ)(w.G,{css:[y.l0.maxHeight(190),y.l0.overflowY("auto")],children:(0,u.tZ)(Ke._,{depth:0,client:f,variable:Z})}):void 0]})}function on(e){var n,t,r=e.hover,i=e.state,o=e.offset,a=e.languageId,l=e.setDecoration;if((Array.isArray(r.contents)||"string"===typeof r.contents)&&0===r.contents.length)return l(null),null;a.endsWith("css")&&Array.isArray(r.contents)&&(r.contents={kind:"markdown",value:"```html \n".concat(r.contents[0],"\n```\n").concat(r.contents[1],"\n      ")});var c="",s=i.doc;if(r.range)n=(0,g.R)(s,r.range.start),t=(0,g.R)(s,r.range.end),c=s.sliceString(n,t);else if(t=void 0,(n=o)<=i.doc.length){var d=i.wordAt(n);d?(c=s.sliceString(d.from,d.to),n=Math.min(n,d.from),t=d.to):c=s.sliceString(n,n+1)}return{pos:n,end:t,create:function(){var e=document.createElement("div");return e.classList.add("hover-tooltip"),e.style.padding="0",l((0,u.tZ)(nn,{dom:e,content:r.contents,textHovered:c})),{dom:e,mount:function(e){var n;n=function(){(0,m.E2)(e)},[0,50,200,1e3].forEach((function(e){return setTimeout(n,e)}))}}},above:!0}}var an=t(70134),ln=t(3652),cn=t(35427),un=t(61523),sn=t(83871),dn=t(31296),fn=m.p.mark({class:"cm-lsp-definition-target-word"}),pn=m.tk.baseTheme({".cm-lsp-definition-target-word span":{backgroundColor:y.TV.backgroundHigher,color:y.TV.accentPrimaryStrongest,cursor:"pointer",textDecoration:"underline"}});var hn=t(22488);function vn(e){var n=e.lspClient,t=e.path,a=e.decorations,l=e.rename,s=e.openFile,d=e.askGhostwriter,f=e.hintDefinitionEnabled,p=(0,r.Z)(n),y=function(e){return function(n){setTimeout((function(){a.update((function(t){return t.set(e,n)}))}))}},Z=[H({lspClient:n,path:t}),(0,j.Fq)({lspClient:n,path:t,askGhostwriter:d})];return(0,hn.isMobile)()||(p.isAutoCompleteSupported&&Z.push(function(e){var n=e.lspClient,t=e.path,r=e.setDecoration,a=Math.random()<.01,l=function(e,r){if(a){var i=n.getLanguageId(t);return Fe.kg.info("lsp:autocomplete:".concat(e),(0,o.Z)({languageId:i},r)),(0,Me.j)(Me.U3.LSP_COMPLETION_USED,(0,o.Z)({type:e,sampleRate:.01},r))}};function s(){return(s=(0,i.Z)((function(e){var i,o,a,u,s,d,f;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return(o=n.getServerCapabilities())?(a=(null===o||void 0===o||null===(i=o.completionProvider)||void 0===i?void 0:i.triggerCharacters)||[],(u=He(e,a))?[4,n.request.completion(t,(0,g.s)(e.state.doc,e.pos),u)]:[2,null]):[2,null];case 1:return"error"in(s=c.sent())?[2,null]:(d=s.result,e.aborted?[2,null]:d?(f=Array.isArray(d)?d:d.items,[2,je({context:e,items:f,client:n,path:t,setDecoration:r,trackCompletion:l})]):[2,null])}}))}))).apply(this,arguments)}return[(0,v.ys)({defaultKeymap:!1,closeOnBlur:!1,addToOptions:[{render:function(e,n){if(!(0,Pe.Z)(n))return null;var t=document.createElement("div");return t.className="lsp-completion-keyboard-shortcuts",(0,$.createRoot)(t).render((0,u.tZ)(Ue.C,{children:(0,u.tZ)(_e.ZP,{size:"inherit",shortcut:{key:"\u23ce"}})})),t},position:200}],override:[(0,v.eC)(["LineComment","BlockComment"],(function(e){return s.apply(this,arguments)}))]}),qe,h.Wl.low(Xe())]}({setDecoration:y("autocomplete"),lspClient:n,path:t})),p.isSignatureHelpSupported&&Z.push(_({setDecoration:y("signatureSuggestion"),lspClient:n,path:t})),p.isHoverSupported&&Z.push(function(e){var n=e.lspClient,t=e.path,r=e.setDecoration,o=null,a=(0,m.bF)(function(){var e=(0,i.Z)((function(e,i){var a,l,u,s,d,f;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:a=(0,g.s)(e.state.doc,i);try{l=e.state.wordAt(i)}catch(p){return[2,null]}if(o){if(o.from===(null===l||void 0===l?void 0:l.from)&&o.to===(null===l||void 0===l?void 0:l.to))return[2,null];n.notify.cancelRequest(o.id)}return u=n.generateId(),o={id:u,from:null===l||void 0===l?void 0:l.from,to:null===l||void 0===l?void 0:l.to},[4,n.request.hover(t,a,{id:u})];case 1:return s=c.sent(),o=null,d=n.getLanguageId(t),"error"in s||null===(f=s.result)?(r(null),[2,null]):[2,on({hover:f,offset:i,state:e.state,languageId:d,setDecoration:r})]}}))}));return function(n,t){return e.apply(this,arguments)}}(),{hideOn:function(e){return!e.annotation(h.YW.remote)&&!!(e.isUserEvent("input")||e.isUserEvent("delete")||e.isUserEvent("select"))},hoverTime:0});return a}({setDecoration:y("hoverTooltip"),lspClient:n,path:t})),p.isCodeActionsSupported&&Z.push((0,cn.p)({setDecoration:y("codeActions"),lspClient:n,path:t})),p.isFindDefinitionSupported&&s&&(Z.push((0,un.j)({lspClient:n,openFile:s})),f&&Z.push(function(e){var n=e.filePath,t=e.lspClient,r={current:null},o=h.Py.define(),a=h.Py.define(),l=h.Py.define(),u=h.QQ.define({create:function(){return{keyDown:!1,mousePosition:null}},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var l,c=n.effects[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var u=l.value;u.is(o)&&(e.mousePosition=u.value),u.is(a)&&(e.keyDown=u.value)}}catch(s){r=!0,i=s}finally{try{t||null==c.return||c.return()}finally{if(r)throw i}}return e}}),s=h.QQ.define({create:function(){return{exists:!1,range:null}},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var c=o.value;c.is(l)&&(e=c.value)}}catch(u){r=!0,i=u}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}}),d=h.QQ.define({create:function(){return m.p.none},update:function(e,n){var t=n.state.field(u,!1);if(!t)return m.p.none;var r=t.keyDown,i=t.mousePosition;if(!r)return m.p.none;if(!i)return m.p.none;var o=n.state.field(s,!1);if(!o||!o.exists||!o.range)return m.p.none;var a=(0,g.R)(n.state.doc,o.range.start),l=(0,g.R)(n.state.doc,o.range.end);if(a===l)return m.p.none;var c=(0,g.R)(n.state.doc,i);return c<a||c>l?m.p.none:m.p.set(fn.range(a,l),!0)},provide:function(e){return m.tk.decorations.from(e)}}),f=m.lg.fromClass(function(){function e(n){(0,K.Z)(this,e),this.view=n,document.addEventListener("keydown",this.onKeyDown.bind(this)),document.addEventListener("keyup",this.onKeyUp.bind(this))}var n=e.prototype;return n.destroy=function(){document.removeEventListener("keydown",this.onKeyDown.bind(this)),document.removeEventListener("keyup",this.onKeyUp.bind(this))},n.onKeyDown=function(e){(0,sn.j)(e)&&this.view.dispatch({effects:a.of(e.key===(dn.V5?"Meta":"Control"))})},n.onKeyUp=function(e){(0,sn.j)(e)&&this.view.dispatch({effects:a.of(!1)})},e}(),{eventHandlers:{mousemove:function(e,n){if(0!==e.buttons){var t=n.state.selection.main;if(t.from!==t.to)return void n.dispatch({effects:o.of(null)})}var r=e.clientX,i=e.clientY,l=n.posAtCoords({x:r,y:i}),c=null;null!=l&&(c=(0,g.s)(n.state.doc,l)),n.dispatch({effects:[o.of(c),a.of((0,sn.j)(e))]})},click:function(e,n){var t;(null===(t=n.state.field(u,!1))||void 0===t?void 0:t.keyDown)&&n.dispatch({effects:a.of(!1)})}}}),p=m.tk.updateListener.of(function(){var e=(0,i.Z)((function(e){var i,o,a,d,f,p,h,v,m,y,Z;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return(i=e.state.field(u)).keyDown&&i.mousePosition?(o=(0,g.R)(e.state.doc,i.mousePosition),!e.docChanged&&(a=e.state.field(s))&&a.range&&(d=(0,g.R)(e.state.doc,a.range.start),f=(0,g.R)(e.state.doc,a.range.end),o>=d&&o<=f)?[2]:(p=e.state.wordAt(o))?r.current&&(h=r.current.word,v=p.from===h.from,m=p.to===h.to,v&&m)?[2]:(r.current&&t.notify.cancelRequest(r.current.id),y=t.generateId(),r.current={id:y,word:p},Z=(0,g.s)(e.state.doc,o),[4,t.request.findDefinitions(n,Z,{id:y}).then((function(n){if(r.current=null,void 0!==n.cancelled&&!0!==n.cancelled){var t=n.result;if(t){var i=e.state.wordAt(o),a=t.length>0&&null!=i,c=null;if(i){var u=(0,g.s)(e.state.doc,i.from),s=(0,g.s)(e.state.doc,i.to);c=k.Range.create(u,s)}e.view.dispatch({effects:l.of({exists:a,range:c})})}}}))]):[2]):[2];case 1:return c.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}());return[pn,p,f,u,s,d]}({lspClient:n,filePath:t}))),(p.isFindDefinitionSupported||p.isFindReferencesSupported)&&Z.push((0,an.w)({setDecoration:y("tooltip"),lspClient:n,path:t})),p.isRenameSupported&&Z.push((0,ln.J)({setDecoration:y("renameInput"),hook:l}))),Z}},16565:function(e,n,t){t.d(n,{Z:function(){return Z}});var r=t(50959),i=t(72402),o=t(38986),a=t(31518),l=t(64400),c=t(8189),u=t(75030),s=t(57135),d=t(96583),f=t(25928),p=t(70059),h=t(76204);var v=t(73297),m=t(12018),g=t(60043),y=t(84869);function Z(e){var n=e.view,t=e.filePath,Z=e.isLoading,b=e.decorations,w=e.openFile,x=e.askGhostwriter,C=(0,a.Z)().preferences.codeIntelligence,k=(0,c.Z)().fs,S=(0,i.Z)(t),T=(0,o.Z)(S),E=(0,m.P5)({controlName:"flag-lsp-hover-cmd-definition"}),R=function(e){var n=e.view,t=e.filePath,o=r.useRef(null),a=(0,c.Z)().fs,u=(0,i.Z)(t),v=r.useCallback(function(){var e=(0,s.Z)((function(e,r){var i,c,s;return(0,d.__generator)(this,(function(d){switch(d.label){case 0:if(!n)throw new Error("Expected view");if(!u)throw new Error("Expected client");if(!t)throw new Error("Expected non-null file path");if(null==r)throw new Error("Expected rename input params");return o.current&&u.notify.cancelRequest(o.current),i=u.generateId(),o.current=i,[4,u.request.rename(t,(0,f.s)(n.state.doc,r),e,{id:i,tap:(0,h.M)(n)})];case 1:if(c=d.sent(),o.current=null,"error"in c)throw new Error("Something went wrong renaming ".concat(c.error.message));return c.cancelled?[2]:(s=c.result)?((0,p.w)({edit:s,fs:a,client:u}),n.dispatch({effects:[l.nD.of(null)]}),[2]):[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),[u,n,t,a]),m=r.useCallback((function(){if(!n)throw new Error("Expected view");n.dispatch({effects:[l.nD.of(null)]}),n.focus()}),[n]);return r.useMemo((function(){return{onRename:v,closeRenameInput:m}}),[v,m])}({view:n,filePath:t});(0,v.e)({view:n,filePath:t,lspClient:S});var I=Z||!C||!n||!S||!T||!S.isSupportedFile(t),G=(0,u.Z)({view:n});r.useEffect((function(){if(!I)return n.dispatch({effects:G.reconfigure([(0,l.sn)({lspClient:S,path:t,decorations:b,rename:R,openFile:w,askGhostwriter:x,hintDefinitionEnabled:E})])}),function(){n.dispatch({effects:G.reconfigure([(0,y.wB)()])}),b.unmount()};n&&!C&&n.dispatch((0,y._c)(n.state))}),[S,n,T,G,t,w,b,R,I,x,E]),r.useEffect((function(){if(S&&(t&&(0,g.Z)(S).isTextDocumentSyncSupported))return k.watchTextFile(t,{onFlush:function(){S.isOpen(t)&&S.notify.didSave(t)}})}),[k,t,S])}},29449:function(e,n,t){t.d(n,{Z:function(){return U}});var r=t(73691),i=t(50959),o=t(14806),a=t(33229),l=t(75030),c=t(56019),u=t(6601),s=t(37192),d=t(32187),f=o.q6.define();var p=t(57389),h=t(72006),v=t(4405),m=t(31533),g=t(2272),y=t(34145),Z={"#1BC47D":"rgba(27, 196, 125, 0.2)","#EF5533":"rgba(239, 85, 51, 0.2)","#18A0FB":"rgba(24, 160, 251, 0.2)","#FFC700":"rgba(255, 199, 0, 1)","#907CFF":"rgba(144, 124, 255, 0.2)","#00B5CE":"rgba(0, 181, 206, 0.2)","#EE46D3":"rgba(238, 70, 211, 0.2)"};var b=o.Py.define(),w=o.Py.define(),x=o.Py.define(),C=o.QQ.define({create:function(){return{}},update:function(e,n){if(!n.changes.empty){var t=function(e){return n.changes.mapPos(Math.min(n.changes.length,e))},r={},i=!0,o=!1,a=void 0;try{for(var l,c=Object.values(e)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;r[u.id]=(0,v.Z)((0,h.Z)({},u),{position:t(u.position),selectionStart:t(u.selectionStart),selectionEnd:t(u.selectionEnd)})}}catch(G){o=!0,a=G}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}e=r}var s=!0,d=!1,f=void 0;try{for(var p,m=n.effects[Symbol.iterator]();!(s=(p=m.next()).done);s=!0){var Z=p.value;if(Z.is(y.R)&&(e=(0,h.Z)({},e)),Z.is(b)&&Z.value.position<=n.newDoc.length&&((e=(0,h.Z)({},e))[Z.value.id]=(0,h.Z)({},Z.value)),Z.is(w)&&(e=(0,h.Z)({},e),Z.is(w)&&delete e[Z.value]),Z.is(x)){e=(0,h.Z)({},e);var C=!0,k=!1,S=void 0;try{for(var T,E=Object.entries(e)[Symbol.iterator]();!(C=(T=E.next()).done);C=!0){var R=(0,g.Z)(T.value,2),I=R[0];R[1].username===Z.value&&delete e[I]}}catch(G){k=!0,S=G}finally{try{C||null==E.return||E.return()}finally{if(k)throw S}}}}}catch(G){d=!0,f=G}finally{try{s||null==m.return||m.return()}finally{if(d)throw f}}return e},provide:function(e){return[r.tk.decorations.computeN([e],(function(n){var t=n.field(e);return Object.values(t).map((function(e){var n=e.selectionStart<e.selectionEnd?e.selectionStart:e.selectionEnd,t=e.selectionStart>e.selectionEnd?e.selectionStart:e.selectionEnd;return n===t?null:r.p.set(r.p.mark({attributes:{style:"background-color: ".concat(e.color.selection,"; display: inline-block;")},cursor:e}).range(n,t))})).filter((function(e){return null!==e}))}))]}});function k(e){return r.tk.updateListener.of((function(n){var t=n.state.selection;t!==n.startState.selection&&(n.transactions.every((function(e){return e.annotation(o.YW.remote)}))||e(t.ranges.map((function(e){var t=n.state.doc.lineAt(e.head);return{position:e.head,line:t.number,column:e.head-t.from+1,selectionStart:e.from,selectionEnd:e.to}})),t.mainIndex))}))}function S(e){var n=e.view,t=e.presence,r=e.fs,o=e.filePath,c=(0,i.useState)(null),u=c[0],s=c[1],d=(0,m.Z)({presence:t}),f=(0,i.useRef)({}),g=(0,a.Z)();(0,i.useEffect)((function(){var e=d.reduce((function(e,n){return n.username&&n.color?(0,v.Z)((0,h.Z)({},e),(0,p.Z)({},n.username,n.color)):e}),{});f.current=e}),[d]);var y=(0,l.Z)({view:n});return(0,i.useEffect)((function(){if(n){var e=t.onUserLeave((function(e){n.dispatch({effects:x.of(e.username)})})),i=r.watchTextFile(o,{onReady:function(e){var t=e.updateSelections;n.dispatch({effects:y.reconfigure([C,k((function(e){t(e)}))])}),s(o)},onCursor:function(e){var t=function(e){var n,t=e.cursor,r=e.usernameColorsMap,i=null===(n=t.user)||void 0===n?void 0:n.name;if(i){var o,a=t.id,l=t.position,c=t.selectionStart,u=t.selectionEnd,s=r[i];if(s&&a&&"number"===typeof l&&"number"===typeof c&&"number"===typeof u)return b.of({id:a,username:i,position:l,color:{cursor:s,selection:(o=s,Z[o]||"")},selectionStart:c,selectionEnd:u})}}({cursor:e,usernameColorsMap:f.current});t&&n.dispatch({effects:t})},onRemoveCursor:function(e){n.dispatch({effects:w.of(e)})},onError:function(){n.dispatch({effects:y.reconfigure([])})},onMoveOrDelete:function(){n.dispatch({effects:y.reconfigure([])})}});return function(){e(),i(),n.dispatch({effects:y.reconfigure([])}),g.current&&s(null)}}}),[n,o,r,t,y]),{loadedFile:u}}var T=t(37380),E=t(8189);var R=t(9970),I=t(22167),G=t(31296),D=r.tk.theme({".multiplayer-cursor":{width:"2px",left:"0",top:"0"},".multiplayer-cursor .multiplayer-label":{boxShadow:I.TV.shadow1,borderRadius:I.TV.borderRadius4,padding:"1px",position:"absolute",left:"0px",animation:"fadeOut 2s ease-in forwards",color:"white",display:"inline-block"},".multiplayer-cursor:hover .multiplayer-label":{animation:"auto"}});function _(e){e.style.transform="translate(-10000px, -10000px)"}function P(e){var n=document.createElement("div");n.textContent=e.username,n.style.backgroundColor=e.color.cursor,n.classList.add("multiplayer-label");var t=document.createElement("div");return t.classList.add("multiplayer-cursor"),t.style.backgroundColor=e.color.cursor,t.style.position=G.gn?"absolute":"fixed",t.appendChild(n),{dom:t,label:n}}var B=new Map;var A=[D,r.lg.define((function(e){var n=function(){c&&(c.disconnect(),o.forEach((function(e){c.observe(e.view.dom)})))},t=function(){if(!Boolean(!i||0===Object.values(i).length)&&(e.inView&&e.requestMeasure(s),a!==e.inView)){if(a=e.inView)return;o.forEach((function(e){_(e.view.dom)}))}},r=function(){null===u&&(u=setTimeout((function(){u=null,t()}),50))},i=e.state.field(C,!1),o=new Map((i?Object.values(i):[]).map((function(e){return[e.id,{view:P(e),cursor:e}]}))),a=!0,l=0,c="function"===typeof IntersectionObserver?new IntersectionObserver((function(e){Date.now()>l-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&r()}),{threshold:[1]}):null;n();var u=null;window.addEventListener("resize",r);var s={read:function(){return{editorRect:e.scrollDOM.getBoundingClientRect(),dimensions:new Map((i?Object.values(i):[]).map((function(n){var t=o.get(n.id),r=t?function(e,n){var t=B.get(e);if(t)return t;var r=n.getBoundingClientRect().width;return B.set(e,r),r}(n.username,t.view.label):null;return[n.id,{position:e.coordsAtPos(n.position),labelWidth:r}]})))}},write:function(e){o.forEach((function(n,t){var r=e.dimensions.get(t);!function(e){var n=e.cursorView,t=e.position,r=e.labelWidth,i=e.editorRect,o=n.dom,a=n.label;if(t&&r){var l=t.bottom-t.top;if(t.bottom<=i.top+l||t.top+l>=i.bottom||t.right<i.left-.1||t.left>i.right+.1)_(o);else{var c=t.left+r-i.right,u="0px";c>0?(u="-".concat(c,"px"),a.style.borderBottomLeftRadius="4px"):a.style.borderBottomLeftRadius="0px",a.style.pointerEvents="none",a.style.transform="translate(".concat(u,", -100%)");var s=G.gn?{x:t.left-i.left+"px",y:t.top-i.top+"px"}:{x:"calc(".concat(t.left,"px + var(--fixed-position-offset-x))"),y:"calc(".concat(t.top,"px + var(--fixed-position-offset-y))")},d=s.x,f=s.y;o.style.transform="translate(".concat(d,", ").concat(f,")"),o.style.height=l+"px"}}else _(o)}({cursorView:n.view,position:(null===r||void 0===r?void 0:r.position)||null,labelWidth:(null===r||void 0===r?void 0:r.labelWidth)||null,editorRect:e.editorRect})}))},key:Math.random().toString()};return{update:function(r){r.transactions.length&&(l=Date.now());var a=r.state.field(C,!1);if(a!==r.startState.field(C,!1)){var c=new Map,u=new Set;if(a){var s=new Map((0,R.Z)(o.values()).map((function(e){return[e.cursor.id,e.view]})));Object.values(a).forEach((function(n){var t=s.get(n.id);if(t)u.add(t),c.set(n.id,{view:t,cursor:n});else{var r=P(n);c.set(n.id,{view:r,cursor:n}),e.dom.appendChild(r.dom)}}))}o.forEach((function(e){u.has(e.view)||e.view.dom.remove()})),o=c,i=a,n(),t()}else r.geometryChanged&&t()},destroy:function(){window.removeEventListener("resize",r),o.forEach((function(e){e.view.dom.remove()})),i=void 0,o=new Map,null===c||void 0===c||c.disconnect(),u&&clearTimeout(u)},maybeMeasure:t}}),{eventHandlers:{scroll:function(){this.maybeMeasure()}}})];function U(e){var n=e.view,t=e.presence,p=e.fs,h=e.filePath,v=function(e){var n=e.view,t=e.fs,p=e.filePath,h=(0,i.useState)(null),v=h[0],m=h[1],g=(0,a.Z)(),y=(0,l.Z)({view:n}),Z=(0,c.Z)().trackTimeToLoadFileEnd,b=(0,s.uV)(),w=(0,s.Id)(),x=(0,s.I7)();return(0,i.useEffect)((function(){if(n){var e=0,i=t.watchTextFile(p,{onReady:function(i){var a=i.initialContent,l=i.writeChange,c=i.version;e=c,w({filePath:p,version:c}),Z(p),n.dispatch({changes:{from:0,to:n.state.doc.length,insert:a},annotations:[o.YW.addToHistory.of(!1),o.YW.remote.of(!0),f.of(!0)]}),n.dispatch({effects:y.reconfigure(r.tk.updateListener.of((function(n){if(n.docChanged){var r=!0,i=!1,a=void 0;try{for(var c,u=function(){var r=c.value;if(r.annotation(o.YW.remote)||r.annotation(f))return"continue";var i=r.annotation(d.Z)?{author:"ghostwriter"}:{};try{l(r.changes,i)}catch(a){throw t.readFile(p,{fromDisk:!1}).then((function(t){var i="replitReadError: "+t.error;t.error||(i=t.content.toString()),b({origin:"Codemirror: ot/writeChange",error:a,tags:{ot:!0},extras:{filePath:p,transactionChanges:JSON.stringify(r.changes),otherTransactionChanges:JSON.stringify(n.transactions.filter((function(e){return e!==r})).map((function(e){return e.changes}))),transactionDoc:r.newDoc.sliceString(0),updateDoc:n.state.doc.sliceString(0),otClientDoc:i,version:e}})})),a}},s=n.transactions[Symbol.iterator]();!(r=(c=s.next()).done);r=!0)u()}catch(h){i=!0,a=h}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}})))}),m(p)},onChange:function(r){var i=r.changes,a=r.changeSource,l=r.version;e=l,w({filePath:p,version:l});try{n.dispatch({changes:i,annotations:[o.YW.remote.of(a===u.Fl.Container),o.YW.addToHistory.of(a===u.Fl.Local),f.of(!0)]})}catch(c){throw t.readFile(p,{fromDisk:!1}).then((function(e){var t="replitReadError: "+e.error;e.error||(t=e.content.toString()),b({origin:"Codemirror: ot/syncRemoteOp",error:c,tags:{ot:!0},extras:{filePath:p,changes:JSON.stringify(i),changeSource:a,version:l,otClientDoc:t,cmDoc:n.state.doc.sliceString(0)}})})),c}},onError:function(){n.dispatch({effects:y.reconfigure([])})},onMoveOrDelete:function(){n.dispatch({effects:y.reconfigure([])})}});return function(){x({filePath:p}),i(),n.dispatch({effects:[y.reconfigure([])]}),g.current&&m(null)}}}),[n,p,t,g,y,Z,b,w,x]),{loadedFile:v}}({view:n,fs:p,filePath:h}),m=v.loadedFile,g=S({view:n,fs:p,filePath:h,presence:t}).loadedFile;!function(e){var n=e.view,t=(0,E.Z)().presence,a=(0,T.Z)(),c=(0,l.Z)({view:n});i.useEffect((function(){if(a&&n){var e=function(){t.getFollowedUser()&&t.unfollowUser()};return n.dispatch({effects:c.reconfigure(r.tk.domEventHandlers({wheel:e,keydown:function(n){"Control"!==n.key&&"Meta"!==n.key&&e()},click:e}))}),function(){n.dispatch({effects:c.reconfigure([])})}}}),[a,n,t,c]);var u=(0,l.Z)({view:n});i.useEffect((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n){var t=o.jT.cursor(e);n.dispatch({effects:[r.tk.scrollIntoView(t,{x:"center",y:"center"})]})}};if(n&&a){var t=n.state.field(C,!1);if(t){var i=Object.values(t).find((function(e){return e.username===a.username}));i&&e(i.position)}return n.dispatch({effects:u.reconfigure(r.tk.updateListener.of((function(n){var t,r=!0,i=!1,o=void 0;try{for(var l,c=n.transactions[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,s=!0,d=!1,f=void 0;try{for(var p,h=u.effects[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v=p.value;v.is(b)&&v.value.username===a.username&&(t=v.value)}}catch(m){d=!0,f=m}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}}}catch(m){i=!0,o=m}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}t&&e(t.position)})))}),function(){n.dispatch({effects:u.reconfigure([])})}}}),[n,a,u])}({view:n});var y=h!==m||h!==g,Z=(0,l.Z)({view:n});return(0,l.Z)({view:n,initialExtension:A}),(0,i.useEffect)((function(){n&&n.dispatch({effects:Z.reconfigure([r.tk.editable.of(!y),o.yy.readOnly.of(y)])})}),[n,y,Z]),{isLoading:y}}},49893:function(e,n,t){t.d(n,{Z:function(){return re}});var r=t(4541),i=t(50959),o=t(10422),a=t(72006),l=t(2272),c=t(85068),u=t(33405),s=t(22167);function d(){var e=(0,l.Z)(i.useState(!1),2),n=e[0],t=e[1];return(0,r.BX)(r.HY,{children:[(0,r.tZ)("a",{css:s.l0.linkStyle,onClick:function(){return t(!0)},onKeyDown:function(){return t(!0)},role:"button",tabIndex:0,children:"generate code with Ghostwriter"}),(0,r.tZ)(u.Z,{context:"workspace_placeholder_text",isOpen:n,onRequestClose:function(){return t(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}var f=t(43119),p=t(71440),h=t(67216);function v(){var e=(0,f.Z)(["\n  query IsReplLesson($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        lesson {\n          id\n        }\n      }\n      ... on ReplRedirect {\n        __typename\n      }\n      ... on SubscriptionExpiredError {\n        __typename\n      }\n    }\n  }\n"]);return v=function(){return e},e}var m={},g=(0,p.Ps)(v());var y=function(e){var n,t,r=function(e){var n=(0,a.Z)({},m,e);return h.a(g,n)}({variables:{replId:e.replId}}),i=r.data,o=r.loading;return{isLesson:"Repl"===(null===i||void 0===i?void 0:i.repl.__typename)&&"UserCourseLesson"===(null===i||void 0===i||null===(n=i.repl)||void 0===n||null===(t=n.lesson)||void 0===t?void 0:t.__typename),isLoading:o}},Z=t(30241),b=t(35813),w=t(30265),x=t(91355),C=t(29679),k=t(31876),S=t(35021),T=t(89853),E=t(47134),R=t(57389);function I(){var e=(0,f.Z)(["\n  query ReplCodeExamples($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deprecatedLanguageConfig {\n          id\n          mainFile\n          examples {\n            name\n            code\n          }\n        }\n      }\n    }\n  }\n"]);return I=function(){return e},e}var G={},D=(0,p.Ps)(I());var _=t(25776),P=t(55544),B=t(38231),A=t(3941),U=t(11122),N=t(97774),L=t(30202),X=_.K.button;function M(e){var n=e.name,t=e.children,i=e.onClick;return(0,r.BX)(X,{onClick:function(){return i()},css:[B.gU.nofill,s.l0.p(8),s.l0.focusRing,s.l0.textAlign.left],children:[(0,r.tZ)(P.xv,{variant:"subheadDefault",css:s.l0.pb(16),children:n}),(0,r.tZ)(_.G,{css:[s.l0.backgroundColor.backgroundDefault,s.l0.p(8),s.l0.borderRadius(8)],children:t})]})}var O="@media (min-width: ".concat(A.j.tabletMax,"px)"),F=(0,U.iv)([s.l0.colWithGap(16),(0,R.Z)({},O,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function W(e){var n=e.children;return(0,r.tZ)(_.G,{css:[(0,R.Z)({},O,[s.l0.rowWithGap(16)])],children:n})}function H(e){var n=e.mainFile,t=e.examples,i=e.onSelect;return(0,r.BX)(_.G,{css:[s.l0.colWithGap(24)],children:[(0,r.tZ)(P.h4,{level:1,variant:"headerDefault",children:"Code examples"}),(0,r.tZ)(P.xv,{multiline:!0,children:"Get started with some program examples."}),(0,r.BX)(W,{css:[s.l0.colWithGap(16)],children:[(0,r.tZ)(_.G,{css:F,children:t.slice(0,(t.length+1)/2).map((function(e){return(0,r.tZ)(M,{name:e.name,onClick:function(){return i(e)},children:(0,r.tZ)(L.Z,{code:e.code,filePath:n,fontSize:12,disableCursorStyling:!0})},e.name)}))}),(0,r.tZ)(_.G,{css:F,children:t.slice((t.length+1)/2).map((function(e){return(0,r.tZ)(M,{name:e.name,onClick:function(){return i(e)},children:(0,r.tZ)(L.Z,{code:e.code,filePath:n,fontSize:12,disableCursorStyling:!0})},e.name)}))})]})]})}function z(e){var n=e.replId,t=e.onSelect,i=function(e){var n=(0,a.Z)({},G,e);return h.a(D,n)}({variables:{replId:n}}),o=i.data,l=i.loading,c=i.error;if(l)return(0,r.tZ)(_.G,{css:[s.l0.colWithGap(0),s.l0.justify.center,s.l0.align.center,s.l0.pt(32),s.l0.pb(32)],children:(0,r.tZ)(N.Z,{})});if(c)return(0,r.tZ)(_.G,{css:[s.l0.colWithGap(0),s.l0.justify.center,s.l0.align.center,s.l0.pt(32),s.l0.pb(32)],children:c.message});var u="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null;if(!u)return null;var d=u.deprecatedLanguageConfig,f=d.mainFile,p=d.examples;return(null===p||void 0===p?void 0:p.length)?(0,r.tZ)(H,{mainFile:f,examples:p,onSelect:t}):(0,r.tZ)(_.G,{css:[s.l0.colWithGap(0),s.l0.justify.center,s.l0.align.center,s.l0.pt(32),s.l0.pb(32)],children:(0,r.BX)(P.xv,{multiline:!0,children:["Sorry, this language doesn\u2019t have any examples. Want to add some? Contact us at ",(0,r.tZ)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})})}var V=t(26673),j=t(62830);function q(){var e=(0,f.Z)(["\n  query PlaceholderTextCurrentUser {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n            CTA\n          }\n        }\n      }\n    }\n  }\n"]);return q=function(){return e},e}var $={},Y=(0,p.Ps)(q());function K(e){var n=e.onRequestClose,t=e.filePath,o=(0,E.e)(k.y.Examples),a=(0,E.e)(k.y.Editor),c=(0,l.Z)(i.useState(!1),2),u=c[0],s=c[1],d=(0,V.Z)(t),f=(0,Z.Z)(),p=i.useRef(null===o||void 0===o?void 0:o.isActive),h=i.useRef();h.current=null===o||void 0===o?void 0:o.isActive;var v=i.useRef(null===o||void 0===o?void 0:o.goto);return v.current=null===o||void 0===o?void 0:o.goto,i.useEffect((function(){return function(){var e;h.current&&(null===(e=v.current)||void 0===e||e.call(v,k.y.Editor))}}),[]),i.useEffect((function(){(null===a||void 0===a?void 0:a.isActive)&&!p.current&&(u?a.goto(k.y.Examples):s(!0))}),[a,n,u]),i.useEffect((function(){(null===o||void 0===o?void 0:o.isActive)?p.current=!0:p.current&&n(null)}),[n,null===o||void 0===o?void 0:o.isActive]),d?(0,r.tZ)("div",{ref:null===o||void 0===o?void 0:o.delegateTooltip,children:(0,r.tZ)(z,{replId:f,onSelect:function(e){d({code:e.code,insertAt:0}),n({exampleName:e.name})}})}):(0,r.tZ)("div",{children:"Please make sure you have a file open"})}function Q(e){var n=(0,l.Z)(i.useState(!1),2),t=n[0],o=n[1],c=(0,Z.Z)(),u=(0,b.Z)(),d=i.useCallback((function(e){(0,x.j)(x.U3.LANGUAGE_EXAMPLES_VIEWED,(0,a.Z)({language:u,replId:c},e)),o(!1)}),[u,c]);return(0,r.BX)(r.HY,{children:["Not sure what to do? Run some"," ",(0,r.tZ)("a",{"data-cy":"ws-editor-examples",css:s.l0.linkStyle,onClick:function(){o(!0)},onKeyDown:function(){o(!0)},role:"button",tabIndex:0,children:"examples"}),(0,r.tZ)(S.u,{maxWidth:872,isOpen:t,onRequestClose:function(){return d(null)},children:(0,r.tZ)(K,{onRequestClose:d,filePath:e.filePath})})]})}function J(e){var n,t,i=e.onShowGenerateCodeModal,o=e.filePath,l=(0,Z.Z)(),u=(0,b.Z)(),f=y({replId:l}),p=f.isLesson,v=f.isLoading,m=function(e){var n=(0,a.Z)({},$,e);return h.a(Y,n)}(),g=m.data,w=m.loading,x=c.Z.getDocs(u),k=(0,C.yR)();if(v||w)return null;var S="UserPowerUpsTypes"===(null===g||void 0===g||null===(n=g.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)&&g.currentUser.userPowerUpsByType.ghostwriter.CTA,T="UserPowerUpsTypes"===(null===g||void 0===g||null===(t=g.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)&&g.currentUser.userPowerUpsByType.ghostwriter.active,E=!T&&S===j.e4.Activate;return p&&k?(0,r.BX)(r.HY,{children:["Not sure what to do?"," ",(0,r.tZ)("a",{css:s.l0.linkStyle,onClick:function(){k&&k()},onKeyDown:function(){k&&k()},role:"button",tabIndex:0,children:"Watch the video"})," ","and follow the written tutorial!"]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Q,{filePath:o}),T?(0,r.BX)(r.HY,{children:[x?", ":" or ",(0,r.tZ)("a",{css:s.l0.linkStyle,onClick:i,onKeyDown:i,role:"button",tabIndex:0,children:"generate code"})]}):null,E?(0,r.BX)(r.HY,{children:[x?", ":" or ",(0,r.tZ)(d,{})]}):null,x&&(0,r.BX)(r.HY,{children:[", or view"," ",(0,r.tZ)("a",{target:"_blank",css:s.l0.linkStyle,href:x,children:"documentation"})]})," ","(start typing to dismiss)"]})}function ee(e){var n=e.filePath,t=(0,b.Z)(),i=c.Z.getDocs(t);return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Q,{filePath:n}),i&&(0,r.BX)(r.HY,{children:[", or view"," ",(0,r.tZ)("a",{target:"_blank",css:s.l0.linkStyle,href:i,children:"documentation"})]})," ","(start typing to dismiss)"]})}var ne=(0,T.X)({root:[s.l0.color.foregroundDimmest,{fontFamily:s.TV.fontFamilyCode}]});var te=function(e){var n=e.onShowGenerateCodeModal,t=e.filePath,i=(0,w.T3)();return(0,r.tZ)("div",{css:ne.root,children:i?(0,r.tZ)(ee,{filePath:t}):(0,r.tZ)(J,{filePath:t,onShowGenerateCodeModal:n})})};function re(e){var n=e.dom,t=e.onShowGenerateCodeModal,i=e.filePath;return o.createPortal((0,r.tZ)(te,{onShowGenerateCodeModal:t,filePath:i}),n)}},5865:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(2272),i=t(50959),o=t(73691),a=t(75030),l=t(30241),c=t(72006),u=t(43119),s=t(71440),d=t(67216);function f(){var e=(0,u.Z)(["\n  query DeprecatedLanguageConfig($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deprecatedLanguageConfig {\n          id\n          mainFile\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}var p={},h=(0,s.Ps)(f());function v(e){var n=function(e){var n=(0,c.Z)({},p,e);return d.a(h,n)}({variables:{replId:e.replId}}).data;return"Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?n.repl.deprecatedLanguageConfig:null}function m(e){var n=e.view,t=e.filePath,c=e.isLoading,u=v({replId:(0,l.Z)()}),s=(0,r.Z)(i.useState(null),2),d=s[0],f=s[1],p=(0,a.Z)({view:n});return i.useEffect((function(){if(n&&u&&!c&&t===u.mainFile){var e=document.createElement("div");return f(e),n.dispatch({effects:p.reconfigure((0,o.W$)(e))}),function(){n.dispatch({effects:p.reconfigure([])}),f(null)}}}),[n,u,t,c,p]),d}},42824:function(e,n,t){t.d(n,{Z:function(){return D}});var r=t(2272),i=t(4541),o=t(50959),a=t(13172),l=t(45858),c=t(91355),u=t(98260),s=t(3668),d=t(22167),f=t(55544),p=t(25776),h=t(24403),v=t(45703),m=t(7855),g=t(90253),y=t(50146),Z=t(82865),b=t(62830),w=t(72006),x=t(43119),C=t(71440),k=t(59187);function S(){var e=(0,x.Z)(["\n  mutation AIFeedback($input: CodexFeedback2Input!) {\n    giveCodexFeedback2(input: $input) {\n      ... on CodexFeedback2 {\n        id\n        __typename\n      }\n      ... on UnauthorizedError {\n        __typename\n      }\n      ... on NotFoundError {\n        __typename\n      }\n    }\n  }\n"]);return S=function(){return e},e}var T={},E=(0,C.Ps)(S());var R=function(e){var n=e.provideFeedback;return(0,i.BX)(p.G,{css:[d.l0.rowWithGap(8),d.l0.justify.start,d.l0.align.center],children:[(0,i.tZ)(s.h,{alt:"Helpful",colorway:"positive",children:(0,i.tZ)(y.Z,{css:{"&:not(:hover)":[d.l0.color.foregroundDimmer]},onClick:function(){return n(b.TY.Yes)}})}),(0,i.tZ)(s.h,{alt:"Unhelpful",colorway:"negative",children:(0,i.tZ)(m.Z,{css:{"&:not(:hover)":[d.l0.color.foregroundDimmer]},onClick:function(){return n(b.TY.No)}})})]})},I=function(e){var n=e.provideFeedback;return(0,i.BX)(p.G,{css:[d.l0.rowWithGap(8),d.l0.justify.start,d.l0.align.center],children:[(0,i.tZ)(u.zx,{text:"Yes",onClick:function(){return n(b.TY.Yes)},small:!0,colorway:"positive",iconLeft:(0,i.tZ)(v.Z,{}),css:{backgroundColor:d.TV.backgroundHighest,":hover":{backgroundColor:d.TV.accentPositiveDimmest}}}),(0,i.tZ)(u.zx,{text:"No",onClick:function(){return n(b.TY.No)},colorway:"negative",small:!0,iconLeft:(0,i.tZ)(h.Z,{}),css:{backgroundColor:d.TV.backgroundHighest,":hover":{backgroundColor:d.TV.accentNegativeDimmest}}})]})},G=function(e){var n=e.feedback;return e.inferenceClass===b.Sg.Chat?n===b.TY.Yes?(0,i.tZ)(Z.Z,{}):(0,i.tZ)(g.Z,{}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(v.Z,{}),(0,i.tZ)(f.xv,{variant:"small",children:"Thanks for the feedback!"})]})};function D(e){var n=e.inferenceId,t=e.language,u=e.inferenceClass,s=e.feedbackFeature,h=(0,o.useState)(null),v=h[0],m=h[1],g=(0,r.Z)(function(e){var n=(0,w.Z)({},T,e);return k.D(E,n)}(),2),y=g[0],Z=g[1],x=Z.data,C=Z.error,S=Z.called,D=function(e){u===b.Sg.Generation?(0,c.j)(c.U3.CODEX_FEEDBACK_SUBMITTED,{feedback:e,language:t,feature:"generation"}):u===b.Sg.Chat&&(0,c.j)(c.U3.GHOSTWRITER_CHAT_FEEDBACK_SUBMITTED,{feedback:e}),y({variables:{input:{feedback:e,inferenceClass:u,inferenceId:n}}}),m(e)};return(0,i.tZ)(p.G,{css:[d.l0.flex.row,d.l0.align.center,d.l0.justify.start,d.l0.rowWithGap(4),d.l0.width("100%"),d.l0.color.foregroundDimmer],children:S&&v&&"NotFoundError"!==(null===x||void 0===x?void 0:x.giveCodexFeedback2.__typename)&&"UnauthorizedError"!==(null===x||void 0===x?void 0:x.giveCodexFeedback2.__typename)&&!C?(0,i.tZ)(G,{feedback:v,inferenceClass:u}):(0,i.tZ)(i.HY,{children:(0,i.BX)(p.G,{css:[d.l0.flex.grow(1),d.l0.flex.row,d.l0.align.center,d.l0.maxWidth("100%"),d.l0.flex.wrap,d.l0.justify.spaceBetween,d.l0.fontSize(12),{gap:"4px"}],children:[(0,i.tZ)(f.xv,{variant:"small",color:"dimmer",children:_(u)}),(0,i.tZ)(p.G,{css:[d.l0.rowWithGap(8),d.l0.justify.start,d.l0.align.center],children:u===b.Sg.Chat?(0,i.tZ)(R,{provideFeedback:D}):(0,i.tZ)(I,{provideFeedback:D})}),s?(0,i.tZ)(l.Z,{feature:a.l.AI}):null]})})})}function _(e){switch(e){case b.Sg.Explanation:return"Is this a good explanation?";case b.Sg.Chat:return"";default:return"Is this code valuable?"}}},95784:function(e,n,t){t.d(n,{F:function(){return k},V:function(){return S}});var r=t(2272),i=t(4541),o=t(95980),a=t.n(o),l=t(50959),c=t(84626),u=t(54369),s=t(97754),d=t.n(s),f=t(73691),p=t(42858),h=t(25776),v=t(22167),m=t(3668),g=t(49615),y=t(55544),Z=t(35701),b=t(75030),w=t(25928),x=t(82400);function C(e){var n=e.height,t=e.loading;return(0,i.BX)("div",{className:a().dynamic([["5a8d0f5b84417a3b",[n]]])+" "+(d()("loader",{loading:t})||""),children:[(0,i.BX)(c.Z,{viewBox:"0 0 100 36",backgroundColor:v.TV.backgroundHighest,foregroundColor:v.TV.backgroundHigher,children:[(0,i.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"4",height:"4",className:a().dynamic([["5a8d0f5b84417a3b",[n]]])}),(0,i.tZ)("rect",{x:"6",y:"0",rx:"2",ry:"2",width:"92",height:"4",className:a().dynamic([["5a8d0f5b84417a3b",[n]]])})]}),(0,i.tZ)(a(),{id:"5a8d0f5b84417a3b",dynamic:[n],children:".loader.__jsx-style-dynamic-selector{padding:var(--space-8);display:none}.loader.loading.__jsx-style-dynamic-selector{height:".concat(n,";display:block}")})]})}function k(e){var n=e.maxHeight,t=e.minHeight,o=e.extensions,c=void 0===o?[]:o,s=e.allowScroll,p=void 0===s||s,h=e.fontSize,m=e.hideGutter,g=e.path,y=e.snippet,Z=e.style,k=e.elevation,S=e.onNavigateToCode,T=(0,u.Z)({hideGutter:m,filePath:g,fontSize:h,readOnly:!0}),E=T.view,R=T.ref,I=(0,r.Z)(l.useState(!1),2),G=I[0],D=I[1],_=l.useRef(v.TV.backgroundDefault),P=(0,b.Z)({view:E});return l.useEffect((function(){if(E&&y&&g){var e="lines"in y?y.lines.join("\n"):y.doc;E.dispatch({changes:{from:0,to:E.state.doc.length,insert:e},effects:P.reconfigure([(0,f.Eu)({formatNumber:function(e,n){for(var t=String(n.doc.lines).length,r=String(e+y.startLineNumber-1);t>r.length;)r="\xa0"+r;return r}}),c])});var n,t={root:v.TV.backgroundRoot,higher:v.TV.backgroundHigher,highest:v.TV.backgroundHighest,default:v.TV.backgroundDefault};return _.current=k&&null!==(n=t[k])&&void 0!==n?n:v.TV.backgroundDefault,D(!0),function(){E.dispatch({effects:P.reconfigure([])})}}}),[E,y,g,P,c,k]),(0,i.BX)("div",{style:Z,className:a().dynamic([["7371a85c4a264eca",[n||"10em",t,_.current,_.current]]]),children:[(0,i.tZ)(x.Z,{ref:R,view:E,className:d()("snippet-editor",{"no-scroll":!p,loading:!G}),onClick:function(e){if(S&&E){var n=e.clientX,t=e.clientY,r=E.posAtCoords({x:n,y:t}),i=null!==r?(0,w.s)(E.state.doc,r):null;S(i)}}}),(0,i.tZ)(C,{loading:!G,height:n}),(0,i.tZ)(a(),{id:"7371a85c4a264eca",dynamic:[n||"10em",t,_.current,_.current],children:".snippet-editor.__jsx-style-dynamic-selector .cm-scroller{max-height:".concat(n||"10em",";min-height:").concat(t,";scrollbar-width:thin;outline:none}.snippet-editor.__jsx-style-dynamic-selector .cm-content{padding-bottom:0}.snippet-editor.__jsx-style-dynamic-selector .cm-editor{background-color:").concat(_.current,"}.snippet-editor.loading.__jsx-style-dynamic-selector{display:none}.snippet-editor.no-scroll.__jsx-style-dynamic-selector .cm-scroller{overflow:hidden}.snippet-editor.__jsx-style-dynamic-selector ::-webkit-scrollbar{width:4px}.snippet-editor.__jsx-style-dynamic-selector .cm-gutters{min-width:unset;background-color:").concat(_.current,"}")})]})}function S(e){var n=e.path,t=e.doc,o=e.extensions,a=void 0===o?[]:o,c=e.numMatches,u=e.onNavigateToCode,s=e.initiallyExpanded,d=(0,r.Z)(l.useState(s),2),f=d[0],b=d[1],w=f?"block":"none",x=f?180:0,C=f?"Collapse snippet":"Expand snippet";return(0,i.BX)(h.G,{children:[(0,i.BX)(h.G,{css:[v.l0.width("100%"),v.l0.p(4),v.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,i.tZ)(p.Z,{path:n}),(0,i.tZ)(y.xv,{title:n,css:[v.l0.flex.shrink(1),{textOverflow:"ellipsis"}],children:n}),(0,i.tZ)(y.xv,{color:"dimmest",children:(0,Z.Z)("match",c,!0)}),(0,i.tZ)(h.G,{css:v.l0.flex.grow(1)}),(0,i.tZ)(m.h,{alt:C,tooltipHidden:!0,onClick:function(){return b((function(e){return!e}))},children:(0,i.tZ)(g.Z,{rotate:x,style:{transition:"200ms ease"}})})]}),(0,i.tZ)(h.G,{css:[v.l0.p(4),{display:w}],children:(0,i.tZ)(k,{path:n,snippet:{doc:t,startLineNumber:1},extensions:a,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:u})})]})}},92559:function(e,n,t){t.d(n,{Z:function(){return h}});var r=t(66091),i=t(5683),o=t(45347),a=t(73691),l=t(14806),c=t(22167),u=t(35701),s=new(function(e){(0,i.Z)(t,e);var n=(0,o.Z)(t);function t(){var e;return(0,r.Z)(this,t),(e=n.call(this)).elementClass="cm-gutterElement-hidden",e}return t.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var n=document.createElement("span");return n.classList.add("cm-dot"),e.appendChild(n),e},t}(a.SJ)),d=function(e){(0,i.Z)(t,e);var n=(0,o.Z)(t);function t(e){var i;return(0,r.Z)(this,t),(i=n.call(this)).numLines=e,i}var a=t.prototype;return a.eq=function(e){return e.numLines===this.numLines},a.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,u.Z)("line",this.numLines)),e.className="cm-hidden-lines",e},t}(a.l9),f=a.p.mark({class:"cm-searchResultMatch"}),p=a.tk.baseTheme({".cm-hidden-lines":{color:"var(--foreground-dimmer)",backgroundColor:"var(--background-highest)",display:"inline-block",width:"100%"},".cm-gutterElement-hidden":{backgroundColor:"var(--background-highest)"},".cm-hidden-lines-gutter":{backgroundColor:"var(--background-highest)",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:"var(--foreground-dimmest)",borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid var(--background-highest)",borderRadius:"var(--border-radius-4)"},".cm-tooltip .cm-scroller:hover":{border:"2px solid var(--accent-primary-dimmest)",boxShadow:"var(--shadow-1)",cursor:"pointer"},".cm-searchResultMatch":{color:c.TV.foregroundDefault,backgroundColor:c.TV.accentPrimaryDimmest,outline:c.TV.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:c.TV.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}});function h(e,n){var t=e.sort((function(e,n){return e.from-n.from})),r=t.map((function(e){var n=e.from,t=e.to;return f.range(n,t)})),i=a.lg.define((function(){return{}}),{decorations:function(){return a.p.set(r)}}),o=function(e,n){var t=[],r=1;e.forEach((function(i,o){var a=n.lineAt(i.from),l=n.lineAt(i.to);r<a.number-2&&t.push({startLine:r,endLine:a.number-2}),r=l.number+2,o===e.length-1&&r<n.lines&&t.push({startLine:r,endLine:n.lines})}));var i=t.map((function(e){var t=n.line(e.startLine),r=n.line(e.endLine);return a.p.replace({widget:new d(e.endLine-e.startLine+1)}).range(t.from,r.to)})),o=t.map((function(e){var t=n.line(e.startLine);return a.p.line({class:"cm-line-hidden"}).range(t.from)})),c=l.QQ.define({create:function(){return a.p.set(i)},update:function(e){return e},provide:function(e){return a.tk.decorations.from(e)}}),u=l.QQ.define({create:function(){return a.p.set(o)},update:function(e){return e},provide:function(e){return a.tk.decorations.from(e)}}),f=t.map((function(e){var t=n.line(e.startLine);return s.range(t.from)})),h=a.p2.of(l.Xs.of(f));return[c,u,p,h]}(t,n);return[i,o]}},33466:function(e,n,t){var r=t(50959).createContext(null);n.Z=r},85538:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(72006),i=t(4405),o=t(9970),a=t(33466),l=t(50959),c=t(73691),u=t(12417),s=t(74376),d=t(75030);function f(e){var n=e.view,t=e.filePath,f=e.isLoading,p=function(){var e=(0,l.useContext)(a.Z);if(!e)throw new Error("Expected codemirror state to be in codemirror state context");return e}(),h=(0,d.Z)({view:n});(0,l.useEffect)((function(){if(n&&!f){var e,a=p.current.fileMap.get(t);if(a&&n.state.doc.eq(a.doc)){if(n.state.field(s.cE,!1))throw new Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view");var l=[];a.foldedRanges.between(0,n.state.doc.length,(function(e,n){l.push(u.SW.of({from:e,to:n}))})),n.dispatch({effects:(0,o.Z)(l).concat([c.tk.scrollIntoView(a.scrollPos,{y:"start"})]),selection:a.selection}),e=[s.cE.init((function(){return a.history})),(0,s.m8)()]}else e=(0,s.m8)();var d=!1,v={read:function(e){if(!d){var n=p.current.fileMap.get(t);if(n){var o=function(e){var n=e.scrollDOM.getBoundingClientRect();if(0===n.top&&0===n.bottom)return null;var t=n.top+e.defaultLineHeight;return e.posAtCoords({x:0,y:t},!1)}(e);null===o||o>n.doc.length||p.current.fileMap.set(t,(0,i.Z)((0,r.Z)({},n),{scrollPos:o}))}}}},m=!1;return n.dispatch({effects:h.reconfigure([e,c.tk.updateListener.of((function(e){d||(!function(e){var n,r=p.current.fileMap.get(t),i=null!==(n=null===r||void 0===r?void 0:r.scrollPos)&&void 0!==n?n:0;p.current.fileMap.set(t,{history:e.field(s.cE,!1),foldedRanges:(0,u.q2)(e),selection:e.selection,doc:e.doc,scrollPos:i})}(e.state),m||(m=!0,e.view.requestMeasure(v),setTimeout((function(){return m=!1}),500)))}))])}),function(){d=!0,n.dispatch({effects:h.reconfigure([])})}}}),[n,t,p,f,h])}},63002:function(e,n,t){t.d(n,{nE:function(){return K},OQ:function(){return q},qi:function(){return F},UQ:function(){return W},YM:function(){return V},PQ:function(){return Y},ZS:function(){return $},eR:function(){return z},zj:function(){return J},cR:function(){return j}});var r=t(66091),i=t(57389),o=t(5683),a=t(72006),l=t(4405),c=t(45347),u=t(4541),s=t(50959),d=t(44478),f=t(14806),p=t(50260),h=t(22167),v=t(73691),m=t(3668),g=t(32099),y=t(66414),Z=t(6929),b=function(e){var n=e.isOpen,t=e.threadId,r=(0,s.useState)(!1),i=r[0],o=r[1],a=(0,y.GD)({variables:{id:t}});(0,s.useEffect)((function(){var e;if(a&&!a.error){var n=null===(e=a.data)||void 0===e?void 0:e.thread;n&&o("AnnotationAnchor"===(null===n||void 0===n?void 0:n.__typename)&&(null===n||void 0===n?void 0:n.messages.some((function(e){return!e.seen}))))}}),[a]);var l={alt:{default:"View threads",close:"Dismiss thread"}};return(0,u.tZ)(m.h,{alt:n?l.alt.close:l.alt.default,size:24,className:"thread-indicator",css:[h.l0.width(20),h.l0.height(20),h.l0.transition.snappy,h.l0.cursor.pointer,h.l0.display.flex,h.l0.borderRadius(8),h.l0.position.relative,h.l0.overflow("visible"),n?h.l0.color.accentPrimaryStrongest:h.l0.color.foregroundDimmest,{borderWidth:h.TV.borderWidthDefault,borderStyle:"solid",borderColor:n?h.TV.accentPrimaryDefault:"transparent",backgroundColor:n?h.TV.accentPrimaryDimmer:h.TV.backgroundHigher,outline:0},{":hover":{borderColor:n?h.TV.accentPrimaryStronger:h.TV.outlineDimmer,color:n?h.TV.accentPrimaryStrongest:h.TV.foregroundDimmer,background:n?h.TV.accentPrimaryDefault+" !important":h.TV.backgroundHighest},svg:{width:12,height:12}}],children:(0,u.BX)(u.HY,{children:[i?(0,u.tZ)("div",{css:[h.l0.width(8),h.l0.height(8),h.l0.backgroundColor.redStronger,h.l0.position.absolute,h.l0.top(-1),h.l0.left(-1),h.l0.borderRadius("full")]}):null,(0,u.tZ)(g.Z,{})]})})},w=function(e){return e.apolloClient?(0,u.tZ)(Z.e,{client:e.apolloClient,children:(0,u.tZ)(b,(0,a.Z)({},e))}):null},x=t(114),C=function(e){(0,o.Z)(t,e);var n=(0,c.Z)(t);function t(){return(0,r.Z)(this,t),n.apply(this,arguments)}var i=t.prototype;return i.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},i.eq=function(e){return!1},i.destroy=function(e){},t}(f.uU);C.prototype.elementClass="",C.prototype.toDOM=void 0,C.prototype.mapMode=f.gc.TrackBefore,C.prototype.startSide=C.prototype.endSide=-1,C.prototype.point=!0;var k=f.r$.define(),S={class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return f.Xs.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},T=f.r$.define();var E=f.r$.define({combine:function(e){return e.some((function(e){return e}))}});function R(e){var n=[I];return e&&!1===e.fixed&&n.push(E.of(!0)),n}var I=v.lg.fromClass(function(){function e(n){(0,r.Z)(this,e),this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.width="0px",this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(T).map((function(e){return new P(n,e)}));var t=!0,i=!1,o=void 0;try{for(var a,l=this.gutters[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=a.value;this.dom.appendChild(c.dom)}}catch(u){i=!0,o=u}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}this.fixed=!n.state.facet(E),this.fixed&&(this.dom.style.position="sticky",this.dom.style.right="0"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM.nextSibling)}var n=e.prototype;return n.update=function(e){if(this.updateGutters(e)){var n=this.prevViewport,t=e.view.viewport,r=Math.min(n.to,t.to)-Math.max(n.from,t.from);this.syncGutters(r<.8*(t.to-t.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(E)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},n.syncGutters=function(e){var n=this,t=this.dom.nextSibling;e&&this.dom.remove();var r=f.Xs.iter(this.view.state.facet(k),this.view.viewport.from),i=[],o=this.gutters.map((function(e){return new _(e,n.view.viewport,-n.view.documentPadding.top)})),a=!0,l=!1,c=void 0;try{for(var u,s=this.view.viewportLineBlocks[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value,p=void 0;if(Array.isArray(d.type)){var h=!0,m=!1,g=void 0;try{for(var y,Z=d.type[Symbol.iterator]();!(h=(y=Z.next()).done);h=!0){var b=y.value;if(b.type==v.kH.Text){p=b;break}}}catch(B){m=!0,g=B}finally{try{h||null==Z.return||Z.return()}finally{if(m)throw g}}}else p=d.type==v.kH.Text?d:void 0;if(p){i.length&&(i=[]),D(r,i,d.from);var w=!0,x=!1,C=void 0;try{for(var S,T=o[Symbol.iterator]();!(w=(S=T.next()).done);w=!0){S.value.line(this.view,p,i)}}catch(B){x=!0,C=B}finally{try{w||null==T.return||T.return()}finally{if(x)throw C}}}}}catch(B){l=!0,c=B}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}var E=!0,R=!1,I=void 0;try{for(var G,P=o[Symbol.iterator]();!(E=(G=P.next()).done);E=!0){G.value.finish()}}catch(B){R=!0,I=B}finally{try{E||null==P.return||P.return()}finally{if(R)throw I}}e&&this.view.scrollDOM.insertBefore(this.dom,t)},n.updateGutters=function(e){var n=e.startState.facet(T),t=e.state.facet(T),r=e.docChanged||e.heightChanged||e.viewportChanged||!f.Xs.eq(e.startState.facet(k),e.state.facet(k),e.view.viewport.from,e.view.viewport.to);if(n==t){var i=!0,o=!1,a=void 0;try{for(var l,c=this.gutters[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){l.value.update(e)&&(r=!0)}}catch(_){o=!0,a=_}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{r=!0;var u=[],s=!0,d=!1,p=void 0;try{for(var h,v=t[Symbol.iterator]();!(s=(h=v.next()).done);s=!0){var m=h.value,g=n.indexOf(m);g<0?u.push(new P(this.view,m)):(this.gutters[g].update(e),u.push(this.gutters[g]))}}catch(_){d=!0,p=_}finally{try{s||null==v.return||v.return()}finally{if(d)throw p}}var y=!0,Z=!1,b=void 0;try{for(var w,x=this.gutters[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var C=w.value;C.dom.remove(),u.indexOf(C)<0&&C.destroy()}}catch(_){Z=!0,b=_}finally{try{y||null==x.return||x.return()}finally{if(Z)throw b}}var S=!0,E=!1,R=void 0;try{for(var I,G=u[Symbol.iterator]();!(S=(I=G.next()).done);S=!0){var D=I.value;this.dom.appendChild(D.dom)}}catch(_){E=!0,R=_}finally{try{S||null==G.return||G.return()}finally{if(E)throw R}}this.gutters=u}return r},n.destroy=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.gutters[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.destroy()}}catch(o){n=!0,t=o}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}this.dom.remove()},e}(),{provide:function(e){return v.tk.scrollMargins.of((function(n){var t=n.plugin(e);return t&&0!=t.gutters.length&&t.fixed?n.textDirection==v.Nm.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}:null}))}});function G(e){return Array.isArray(e)?e:[e]}function D(e,n,t){for(;e.value&&e.from<=t;)e.from==t&&n.push(e.value),e.next()}var _=function(){function e(n,t,i){(0,r.Z)(this,e),this.gutter=n,this.height=i,this.localMarkers=[],this.i=0,this.cursor=f.Xs.iter(n.markers,t.from)}var n=e.prototype;return n.line=function(e,n,t){this.localMarkers.length&&(this.localMarkers=[]),D(this.cursor,this.localMarkers,n.from);var r=t.length?this.localMarkers.concat(t):this.localMarkers,i=this.gutter.config.lineMarker(e,n,r);i&&r.unshift(i);var o=this.gutter;if(0!=r.length||o.config.renderEmptyElements){var a=n.top-this.height;if(this.i==o.elements.length){var l=new B(e,n.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,n.height,a,r);this.height=n.bottom,this.i++}},n.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}},e}(),P=function(){function e(n,t){var i=this,o=function(e){i.dom.addEventListener(e,(function(r){var i=n.lineBlockAtHeight(r.clientY-n.documentTop);t.domEventHandlers[e](n,i,r)&&r.preventDefault()}))};for(var a in(0,r.Z)(this,e),this.view=n,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),t.domEventHandlers)o(a);this.markers=G(t.markers(n)),t.initialSpacer&&(this.spacer=new B(n,0,0,[t.initialSpacer(n)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}var n=e.prototype;return n.update=function(e){var n=this.markers;if(this.markers=G(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}var r=e.view.viewport;return!f.Xs.eq(this.markers,n,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},n.destroy=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.elements[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.destroy()}}catch(o){n=!0,t=o}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}},e}(),B=function(){function e(n,t,i,o){(0,r.Z)(this,e),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(n,t,i,o)}var n=e.prototype;return n.update=function(e,n,t,r){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=t&&(this.dom.style.marginTop=(this.above=t)?t+"px":""),function(e,n){if(e.length!=n.length)return!1;for(var t=0;t<e.length;t++)if(!e[t].compare(n[t]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)},n.setMarkers=function(e,n){for(var t="cm-gutterElement",r=this.dom.firstChild,i=0,o=0;;){var a=o,l=i<n.length?n[i++]:null,c=!1;if(l){var u=l.elementClass;u&&(t+=" "+u);for(var s=o;s<this.markers.length;s++)if(this.markers[s].compare(l)){a=s,c=!0;break}}else a=this.markers.length;for(;o<a;){var d=this.markers[o++];if(d.toDOM){d.destroy(r);var f=r.nextSibling;r.remove(),r=f}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=t,this.markers=n},n.destroy=function(){this.setMarkers(null,[])},e}();var A=f.r$.define(),U=f.r$.define({combine:function(e){return(0,f.BO)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,n){var t=function(e){var t=r[e],i=n[e];r[e]=t?function(e,n,r){return t(e,n,r)||i(e,n,r)}:i},r=Object.assign({},e);for(var i in n)t(i);return r}})}}),N=function(e){(0,o.Z)(t,e);var n=(0,c.Z)(t);function t(e){var i;return(0,r.Z)(this,t),(i=n.call(this)).number=e,i}var i=t.prototype;return i.eq=function(e){return this.number==e.number},i.toDOM=function(){return document.createTextNode(this.number)},t}(C);function L(e,n){return e.state.facet(U).formatNumber(n,e.state)}T.compute([U],(function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(A)},lineMarker:function(e,n,t){return t.some((function(e){return e.toDOM}))?null:new N(L(e,e.state.doc.lineAt(n.from).number))},lineMarkerChange:function(e){return e.startState.facet(U)!=e.state.facet(U)},initialSpacer:function(e){return new N(L(e,X(e.state.doc.lines)))},updateSpacer:function(e,n){var t=L(n.view,X(n.view.state.doc.lines));return t==e.number?e:new N(t)},domEventHandlers:e.facet(U).domEventHandlers}}));function X(e){for(var n=9;n<e;)n=10*n+9;return n}var M=new(function(e){(0,o.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;return(0,r.Z)(this,t),(e=n.apply(this,arguments)).elementClass="cm-activeLineGutter",e}return t}(C));k.compute(["selection"],(function(e){var n=[],t=-1,r=!0,i=!1,o=void 0;try{for(var a,l=e.selection.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(c.empty){var u=e.doc.lineAt(c.head).from;u>t&&(t=u,n.push(M.range(u)))}}}catch(s){i=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return f.Xs.of(n)}));var O=t(53410),F=f.Py.define(),W=f.Py.define(),H=f.Py.define(),z=f.Py.define(),V=f.Py.define(),j=v.tk.baseTheme({".replit-thread-highlight":{background:h.TV.accentPrimaryDimmest,transition:"".concat(h.TV.transitionDurationSnappy," all\n            ").concat(h.TV.transitionTimingFunctionSnappy)},".replit-thread-highlight .replit-thread-highlight":{background:"transparent"},".cm-thread-indicator-gutter":{transform:"translate(calc(-100% - var(--space-8)));",width:"20px",overflow:"visible"}}),q=f.QQ.define({create:function(){return{}},update:function(e,n){var t=e;return(0,p.j)(n,F,(function(e){t=e.value})),n.changes.empty?t:t=Object.values(t).map((function(e){var t=e.indexStart>n.state.doc.length?n.state.doc.length:n.changes.mapPos(e.indexStart),r=e.indexEnd>n.state.doc.length?n.state.doc.length:n.changes.mapPos(e.indexEnd);return(0,l.Z)((0,a.Z)({},e),{indexStart:t,indexEnd:r})})).reduce((function(e,n){return e[n.id]=n,e}),{})}}),$=f.QQ.define({create:function(){return null},update:function(e,n){var t=e;return(0,p.j)(n,W,(function(e){var r=n.state,i=r.selection.main,o=i.from,a=i.to;if(o===a){var l=r.doc.lineAt(o);o=Math.max(l.from-1,0),a=l.to}t={id:e.value,indexStart:o,indexEnd:a}})),(0,p.j)(n,H,(function(){t=null})),(0,p.j)(n,V,(function(){t=null})),null!==t&&(0,p.j)(n,F,(function(e){if(!t)throw new Error("expected newPlaceholder");e.value[t.id]&&(t=null)})),!n.changes.empty&&t&&(t=(0,l.Z)((0,a.Z)({},t),{indexStart:n.changes.mapPos(t.indexStart),indexEnd:n.changes.mapPos(t.indexEnd)})),t}}),Y=f.QQ.define({create:function(){return null},update:function(e,n){var t=e;return(0,p.j)(n,V,(function(e){t=e.value})),(0,p.j)(n,W,(function(e){t=e.value})),t}}),K=function(e){(0,o.Z)(t,e);var n=(0,c.Z)(t);function t(e,i){var o;return(0,r.Z)(this,t),(o=n.call(this)).id=e,o.setThreadElements=i,o}var u=t.prototype;return u.eq=function(e){return e.id===this.id},u.toDOM=function(e){var n=this,t=document.createElement("div");t.className="cm-thread-portal-widget";var r=e.dom.querySelector(".cm-scroller"),o=e.dom.querySelector(".cm-gutters");return r&&o&&(0,x.L)(t,r,o),setTimeout((function(){n.setThreadElements((function(e){return(0,l.Z)((0,a.Z)({},e),(0,i.Z)({},n.id,t))}))})),t},u.destroy=function(e){var n=this;e.remove(),setTimeout((function(){n.setThreadElements((function(e){var t=(0,a.Z)({},e);return delete t[n.id],t}))}))},u.ignoreEvent=function(){return!0},t}(v.l9),Q=function(e){(0,o.Z)(t,e);var n=(0,c.Z)(t);function t(e,i,o){var a;return(0,r.Z)(this,t),(a=n.call(this)).id=e,a.active=i,a.apolloClient=o,a}var i=t.prototype;return i.toDOM=function(e){var n=this,t=document.createElement("span");return t.setAttribute("aria-hidden","true"),t.className="cm-thread-indicator-widget",(0,d.createRoot)(t).render((0,u.tZ)(O.C,{children:(0,u.tZ)(w,{isOpen:this.active,threadId:this.id,apolloClient:this.apolloClient})})),t.style.cursor="pointer",t.onclick=function(t){t.stopPropagation(),t.preventDefault(),e.dispatch({effects:[V.of(e.state.field(Y)===n.id?null:n.id)]})},t},i.eq=function(e){return e.id===this.id&&e.active===this.active},t}(C),J=function(e){return n={class:"cm-thread-indicator-gutter",markers:function(n){var t=n.state.field(q),r=n.state.field(Y);return f.Xs.of(Object.values(t).filter((function(e){return e.indexEnd!==e.indexStart})).map((function(t){var i=n.state.doc.lineAt(Math.min(t.indexStart,t.indexEnd)).from;return new Q(t.id,t.id===r,e).range(i)})),!0)},initialSpacer:function(){return new Q("initial-spacer",!1)}},[R(),T.of((0,a.Z)({},S,n))];var n}},114:function(e,n,t){function r(e,n,t){var r=n.clientWidth,i=t.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}t.d(n,{L:function(){return r}})},66414:function(e,n,t){t.d(n,{AL:function(){return w},GD:function(){return v},VO:function(){return h},Y:function(){return Z},tT:function(){return g}});var r=t(72006),i=t(43119),o=t(71440),a=t(39159),l=t(67216),c=t(59187);function u(){var e=(0,i.Z)(["\n  query CodemirrorThread($id: String!) {\n    thread: annotationAnchor(id: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  mutation CreateThread(\n    $thread: AnnotationAnchorInput!\n    $message: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThread: createAnnotationAnchor(\n      annotationAnchor: $thread\n      annotationMessage: $message\n      highlight: $highlight\n    ) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation UpdateThread($id: String!, $changes: AnnotationAnchorChangesInput!) {\n    updateThread: updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation CreateThreadMessage(\n    $replId: String!\n    $threadId: String!\n    $threadMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThreadMessage: createAnnotationMessage(\n      replId: $replId\n      anchorId: $threadId\n      annotationMessage: $threadMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var p={},h=(0,o.Ps)(u(),a.j7);function v(e){var n=(0,r.Z)({},p,e);return l.a(h,n)}var m=(0,o.Ps)(s(),a.j7);function g(e){var n=(0,r.Z)({},p,e);return c.D(m,n)}var y=(0,o.Ps)(d(),a.j7);function Z(e){var n=(0,r.Z)({},p,e);return c.D(y,n)}var b=(0,o.Ps)(f(),a.j7);function w(e){var n=(0,r.Z)({},p,e);return c.D(b,n)}},69217:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(72006),i=t(4405),o=t(2272),a=t(9970),l=t(50959),c=t(46598),u=t(66414),s=t(4946),d=t(39159),f=t(79315),p=t(30241),h=t(48665),v=t(8189),m=t(63002),g=t(7247),y=t(30826),Z=t.n(y);function b(e,n){if(!e)return null;var t,r=e.state.field(m.OQ),i=e.state.field(m.ZS),o=null!==(t=r[n])&&void 0!==t?t:(null===i||void 0===i?void 0:i.id)===n?i:null;return o||null}function w(e,n){if(!e)return null;var t=b(e,n);if(!t)return null;var r=Math.min(t.indexStart,t.indexEnd),i=Math.max(t.indexStart,t.indexEnd),o=e.state.doc.lineAt(r),a=e.state.doc.lineAt(i),l=e.state.doc.sliceString(e.state.doc.line(Math.max(o.number-2,1)).from,r),c=e.state.doc.sliceString(i,e.state.doc.line(Math.min(a.number+2,e.state.doc.lines)).to);return{precode:l,code:e.state.doc.sliceString(r,i),postcode:c}}function x(e,n,t){var y=(0,c.Z)().showError,x=(0,p.Z)(),C=(0,f.Z)().map((function(e){return e.username})),k=(0,v.Z)().fs,S=(0,u.GD)({variables:{id:e}}),T=S.data,E=S.error,R=S.loading,I=S.client,G=function(){var t;return R||!T?!!n&&(null===(t=n.state.field(m.ZS))||void 0===t?void 0:t.id)===e:"AnnotationAnchor"!==T.thread.__typename}(),D=R,_=l.useMemo((function(){return D||!T?null:"UserError"===T.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===T.thread.__typename?T.thread:null}),[T,e,D]),P=(0,o.Z)((0,u.tT)({onError:function(e){return y(e.message)},update:function(e,n){var t,r;n.errors?n.errors.forEach((function(e){return y(e.message)})):"UserError"!==(null===(t=n.data)||void 0===t||null===(r=t.createThread)||void 0===r?void 0:r.__typename)||y(n.data.createThread.message)}}),1),B=P[0],A=(0,o.Z)((0,u.AL)({onError:function(e){return y(e.message)},update:function(e,n){var t;if(n.errors)n.errors.forEach((function(e){return y(e.message)}));else{var r=null===(t=n.data)||void 0===t?void 0:t.createThreadMessage;r&&"UserError"===r.__typename&&y(r.message)}}}),1),U=A[0],N=(0,o.Z)((0,u.Y)({onError:function(e){return y(e.message)},update:function(e,n){var t;if(n.errors)n.errors.forEach((function(e){return y(e.message)}));else{var r=null===(t=n.data)||void 0===t?void 0:t.updateThread;r&&"UserError"===r.__typename&&y(r.message)}}}),1),L=N[0],X=(0,o.Z)((0,d.Hj)(),1)[0],M=(0,g.Z)((function(){return Z()(X,1e3,{trailing:!1})}),[X]),O=function(){var e=null===T||void 0===T?void 0:T.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,image:e.image}}:{}};return{thread:_,isPlaceholder:G,error:E,loading:D,getHighlight:w,getLatestAnchor:function(){return b(n,e)},updateThread:function(e){var n,t=e.changes,o="AnnotationAnchor"===(null===T||void 0===T||null===(n=T.thread)||void 0===n?void 0:n.__typename)?T.thread:null;if(!o)throw new Error("expected thread");L({variables:{id:o.id,changes:t},optimisticResponse:{__typename:"RootMutationType",updateThread:(0,i.Z)((0,r.Z)({},o,t),{isResolved:"boolean"===typeof t.isResolved?t.isResolved:o.isResolved})}})},finalizeThreadMessage:function(o){var l,c=o.message,d=o.messageId,f={id:d,text:c,mentions:(0,h.kW)(c,{users:(0,a.Z)(C).concat(["everyone"])}).mentions};if(G&&n&&t){var p=n.state.field(m.ZS),v={id:e,replId:x,indexStart:null===p||void 0===p?void 0:p.indexStart,indexEnd:null===p||void 0===p?void 0:p.indexEnd,otVersion:k.getOTVersion(t),path:t};B({variables:{thread:v,message:f,highlight:w(n,e)},optimisticResponse:{__typename:"RootMutationType",createThread:(0,i.Z)((0,r.Z)({__typename:"AnnotationAnchor"},v,O()),{messages:[(0,i.Z)((0,r.Z)({id:d,timeCreated:Date.now(),currentUserIsAuthor:!0},O()),{content:{text:c,__typename:"TextMessageContentType"},anchor:{id:v.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),I.writeQuery({query:u.VO,variables:{id:e},data:{__typename:"RootQueryType",thread:(0,i.Z)((0,r.Z)((0,i.Z)((0,r.Z)({},v),{isResolved:!1,isGeneral:!1}),O()),{messages:[(0,i.Z)((0,r.Z)({id:d,timeCreated:Date.now(),currentUserIsAuthor:!0},O()),{content:{text:c,__typename:"TextMessageContentType"},anchor:{id:v.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null===T||void 0===T?void 0:T.currentUser}});var g=I.readQuery({query:s.Jq,variables:{replId:x,path:t}});if(g){var y,Z="ThreadsByFileResult"===(null===(y=g.threadsByFile)||void 0===y?void 0:y.__typename)?g.threadsByFile.threads:[],b=O().user;I.writeQuery({query:s.Jq,variables:{replId:x,path:t},data:{__typename:"RootQueryType",threadsByFile:{__typename:"ThreadsByFileResult",threads:(0,a.Z)(Z).concat([(0,r.Z)({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:b,isResolved:!1,participants:[b]},v)])}}})}}else{var S="AnnotationAnchor"===(null===T||void 0===T||null===(l=T.thread)||void 0===l?void 0:l.__typename)?T.thread:null;if(!S)throw new Error("expected thread");U({variables:{replId:x,threadId:S.id,threadMessage:f,highlight:w(n,S.id)},optimisticResponse:{__typename:"RootMutationType",createThreadMessage:(0,i.Z)((0,r.Z)({},S),{messages:(0,a.Z)(S.messages.filter((function(e){return!e.id.startsWith("chat-")}))).concat([(0,i.Z)((0,r.Z)({},O(),f),{content:{text:f.text,__typename:"TextMessageContentType"},anchor:{id:S.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})])})}})}},changeThreadMessage:function(n){var t=n.messageId;M({variables:{threadId:e,messageId:t,message:null}})}}}},4946:function(e,n,t){t.d(n,{Jq:function(){return u},eR:function(){return s}});var r=t(72006),i=t(43119),o=t(71440),a=t(67216);function l(){var e=(0,i.Z)(["\n  query ThreadsByFileHook($replId: String!, $path: String!) {\n    threadsByFile(replId: $replId, path: $path) {\n      ... on ThreadsByFileResult {\n        threads {\n          id\n          path\n          otVersion\n          indexStart\n          indexEnd\n          messageCount\n          unreadCount\n          user {\n            id\n            image\n            username\n          }\n          participants {\n            id\n            image\n            username\n          }\n          isGeneral\n          isResolved\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},u=(0,o.Ps)(l());function s(e){var n=(0,r.Z)({},c,e);return a.a(u,n)}},50260:function(e,n,t){function r(e,n,t){if("effects"in e){var i=!0,o=!1,a=void 0;try{for(var l,c=e.effects[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u.is(n)&&t(u)}}catch(v){o=!0,a=v}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{var s=!0,d=!1,f=void 0;try{for(var p,h=e.transactions[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){r(p.value,n,t)}}catch(v){d=!0,f=v}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}}}t.d(n,{j:function(){return r}})},52934:function(e,n,t){t.d(n,{B:function(){return o}});var r=t(14806),i=t(50260);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=r.Py.define(),o=r.QQ.define({create:function(){return n},update:function(n,r){return(0,i.j)(r,t,(function(t){n=e(t.value,n)})),n}});return{effect:t,state:o}}},81007:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(4541),i=t(30202),o=t(50959);function a(e){var n=e.json,t=(0,o.useMemo)((function(){return JSON.stringify(n,null,2)}),[n]);return(0,r.tZ)(i.Z,{language:"json",code:t})}},25942:function(e,n,t){t.d(n,{X:function(){return un}});var r=t(72006),i=t(4541),o=t(89853),a=t(47409),l=t(22167),c=t(65001),u=t(25776),s=t(11122),d=t(3941),f=t(38231),p=(d.H.duration,d.H.timingFunction,{container:(0,s.iv)([l.l0.p(8)]),surface:(0,s.iv)([f.gU.filled,l.l0.viewStyle,l.l0.flex.row,l.l0.align.center,l.l0.flex.growAndShrink(1),l.l0.height(32)]),input:(0,s.iv)([l.l0.viewStyle,l.l0.flex.growAndShrink(1),l.l0.fontSize("default"),l.l0.height("100%"),l.l0.px(4),{backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:l.TV.foregroundDimmest},"&:hover::placeholder":{color:l.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:l.TV.foregroundDimmest}}]),closeButton:(0,s.iv)([l.l0.reset.button,l.l0.viewStyle,l.l0.center,l.l0.height(32),l.l0.px(4),l.l0.cursor.pointer,l.l0.color.foregroundDimmest,{"&:hover":{color:l.TV.foregroundDefault}}])}),h=t(2272),v=t(9970),m=t(81974);function g(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,l=e.slice(n)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;"group"!==c.data.type&&t.push(c.data.label)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return(0,v.Z)(new Set(t))}var y=t(50959),Z=t(36730),b=t(7247),w=t(86763),x=t.n(w);function C(e,n){for(var t=e.indexPath,r=n.indexPath,i=Math.min(t.length,r.length),o=0;o<i;o++){if(t[o]>r[o])return 1;if(t[o]<r[o])return-1}return t.length-r.length}var k=t(92153),S=t(98689),T=t(7579),E=t(34152),R=(0,y.createContext)(void 0);function I(){var e=(0,y.useContext)(R);if(!e)throw new Error("Expected store in context");return e}function G(e){var n=I();return(0,E.Dv)(e,{store:n})}var D=function(e){var n=I();return(0,E.b9)(e,{store:n})},_=function(e){return"item-"+e},P=(0,Z.cn)({path:[],rows:[],items:[],placeholder:"",isLoading:!1}),B=(0,Z.cn)(!0);function A(){return G(B)}var U=(0,Z.cn)(!1);function N(){return G(U)}var L=(0,Z.cn)(null),X=(0,Z.cn)(!1),M=(0,Z.cn)((function(e){return!e(X)})),O=(0,Z.cn)(!1),F=(0,Z.cn)(null),W=(0,Z.cn)((function(e){return e($)>-1})),H=(0,Z.cn)((function(e){var n=e(P);return!n.isLoading&&0===n.rows.length})),z=(0,Z.cn)({label:"",input:"",menu:""});var V=(0,Z.cn)(""),j=(0,Z.cn)(""),q=(0,Z.cn)(""),$=(0,Z.cn)(-1);var Y=(0,Z.cn)((function(e){var n=e($);return e(K).findIndex((function(e){return"item"===e.type&&e.index===n}))}));var K=(0,Z.cn)((function(e){return e(P).rows})),Q=(0,Z.cn)((function(e){return e(P).items})),J=(0,Z.cn)((function(e){return e(Q).length})),ee=(0,Z.cn)((function(e){return e(P).path.filter((function(e){return e.match})).length>0})),ne=(0,Z.cn)((function(e){return e(P).placeholder}));var te=(0,Z.cn)((function(e){return e(P).isLoading}));var re=(0,Z.cn)((function(e){return e(P).path.length}));function ie(){return G(re)}var oe=(0,Z.cn)((function(e){return e(ee)||Boolean(e(V))}));function ae(e){return G(function(e){return(0,b.Z)((function(){return(0,Z.cn)((function(n){return n(K)[e]}))}),[e])}(e))}var le=(0,Z.cn)((function(e){return e(P).path}));function ce(e,n){return n.match.score-e.match.score}var ue=(0,Z.cn)(null,(function(e,n,t){var r=e(q);if(r===e(q)){var i,o=t.items.sort(ce),a=t.path.length?t.path[t.path.length-1]:null,l=function(e,n){var t=new Map;e.forEach((function(e){var n=e.path.slice(0,-1),r="section:"+(0,m.Nv)(n),i=t.get(r);if(i)i.items.push(e);else{var o=n[n.length-1],a="group"===(null===o||void 0===o?void 0:o.data.type);t.set(r,{type:"section",path:n,score:e.match.score,items:[e],unlabeled:a,key:r})}}));var r=(0,v.Z)(t.entries()).sort((function(e,t){var r=(0,h.Z)(e,2),i=r[0],o=r[1],a=(0,h.Z)(t,2),l=a[0],c=a[1];if(!n||!n.includes(i)&&!n.includes(l))return c.score-o.score;var u=n.indexOf(i),s=n.indexOf(l);return u>-1&&s>-1?u-s:-1===u?1:-1})),i={items:[],rows:[]},o=0;return r.forEach((function(e){var n=(0,h.Z)(e,2),t=n[0],r=n[1];i.rows.push({type:r.type,key:t,path:r.path,unlabeled:r.unlabeled}),r.items.forEach((function(e){i.items.push(e),i.rows.push({type:"item",item:e,index:o++})}))})),i}(o,r?e(P).rows.filter((function(e){return"section"===e.type})).map((function(e){return e.key})):void 0),c=l.items,u=l.rows,s=null!==(i=null===a||void 0===a?void 0:a.data)&&void 0!==i?i:null,d=null===s||void 0===s?void 0:s.description;e(O)&&"group"!==(null===s||void 0===s?void 0:s.type)&&(d=null===s||void 0===s?void 0:s.label),n(P,(function(e){return{items:c,rows:u,isLoading:Boolean(t.partial),path:t.path,placeholder:d||e.placeholder}}))}})),se=(0,Z.cn)(null,(function(e,n,t){n(L,t),n(P,(function(e){return{items:[],rows:[],isLoading:!1,path:e.path,placeholder:e.placeholder}}))})),de=(0,Z.cn)(null,(function(e,n,t){n(V,t),n($,t?0:-1),n(L,null),n(P,(function(e){return(0,k.ZP)(e,(function(e){e.isLoading=Boolean(t)}))})),e(X)&&n(B,Boolean(t))}));var fe=(0,Z.cn)(null,(function(e,n,t){n(P,(function(e){return(0,k.ZP)(e,(function(e){e.items=[],e.rows=[],e.path=t}))})),n(de,""),n(j,""),n(q,"")})),pe=(0,Z.cn)(null),he=(0,Z.cn)(null,(function(e,n){var t=e($);if(!(t<0)){var r=e(Q)[t];r&&n(F,r)}})),ve=(0,Z.cn)(null,(function(e,n,t){var r=e(B),i=e(J),o=e($);switch(t.key){case"ArrowDown":t.preventDefault();var a=o+1;return n($,a<i?a:0),void n(B,!0);case"ArrowUp":t.preventDefault();var l=o-1;return void n($,Math.max(-1,l));case"Home":return t.preventDefault(),void(t.shiftKey?t.currentTarget.selectionStart=0:t.currentTarget.setSelectionRange(0,0));case"End":t.preventDefault();var c=t.currentTarget.value.length;return void(t.shiftKey?t.currentTarget.selectionEnd=c:t.currentTarget.setSelectionRange(c,c));case"Escape":if(!e(V))return;if(t.preventDefault(),n(de,""),n(j,""),e(M))return;return void n(B,!1);case"Enter":if(!r)return;return t.preventDefault(),void n(he);case"PageUp":case"PageDown":if(!r)return;t.preventDefault();var u="PageUp"===t.key?-10:10;return void n($,(function(e){return Math.max(Math.min(e+u,i-1),0)}))}}));function me(e){var n=D(F),t=(0,y.useRef)(null),r=function(e){return G((0,b.Z)((function(){return(0,Z.cn)((function(n){return n($)===e}))}),[e]))}(e),i=(0,b.Z)((function(){return(0,Z.cn)((function(i){var o=i(Q)[e],a={id:_(e),role:"option","aria-selected":r};return{onClick:function(){var e;n(o),"context"===o.data.type&&(null===(e=i(pe))||void 0===e||e.focus())},active:r,ref:t,ariaAttrs:a}}))}),[e,r,n]);return G(i)}function ge(){var e=D(pe),n=G(ne),t=(0,h.Z)(function(){var e=G(V),n=D(de),t=D(j),r=(0,b.Z)((function(){return x()(t,100)}),[t]);return[e,(0,y.useCallback)((function(e){var t="string"===typeof e?e:e.currentTarget.value;n(t),r(t)}),[n,r])]}(),2),r=t[0],i=t[1],o=D($),a=G($),l=G(z),c=A();return{onBlur:function(){return o(-1)},onChange:i,placeholder:n,value:r,ref:e,disabled:N(),ariaAttrs:{id:l.input,role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-activedescendant":a>-1?_(a):"","aria-controls":l.menu,"aria-expanded":c,"aria-labelledby":l.label}}}function ye(e){var n=D(ue),t=(0,b.Z)((function(){return Array.isArray(e)?e:[e]}),[e]),r=(0,b.Z)((function(){return function(e){var n=e.initialPath,t=e.partialUpdateTimeout,r=e.onUpdate,i=function(e){a&&clearTimeout(a);var n=++l,i=0,c=[],u=o[o.length-1];u.commands?(void 0!==t&&(a=setTimeout((function(){c.length&&r({items:(0,v.Z)(c).sort(C),partial:!0,path:o})}),t)),function t(u,s,d){if(i++,!u.commands)throw new Error("Expected commands");var f=(0,v.Z)(s).concat([u]),p=f.length===o.length;Promise.resolve(u.commands({active:p,search:e,path:f})).then((function(u){n===l?(i--,u.forEach((function(n,r){var i=(0,v.Z)(f).concat([n]),o=(0,v.Z)(d).concat([r]),a=n.match?n.match({search:e,data:n.data,path:i,active:p}):null;a&&c.push({path:i,data:n.data,match:a,indexPath:o}),n.commands&&t(n,f,o)})),i>0||(a&&clearTimeout(a),r({items:(0,v.Z)(c).sort(C),path:o}))):a&&clearTimeout(a)}))}(u,o.slice(0,o.length-1),[])):r({items:c,path:o})},o=n,a=null,l=0;return{search:i,setPath:function(e){o=e,i(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")},getPath:function(){return o}}}({initialPath:t,partialUpdateTimeout:100,onUpdate:n})}),[t,n]),i=G(j),o=D(q);return(0,y.useEffect)((function(){o(i),r.search(i)}),[r,i,o]),r}var Ze=t(74330),be={root:(0,s.iv)([l.l0.reset.button,l.l0.viewStyle,l.l0.rowWithGap(4),l.l0.align.center,l.l0.borderRadius(0),l.l0.px(4),l.l0.cursor.pointer,l.l0.color.foregroundDimmer,{"&:hover":{color:l.TV.foregroundDefault}}]),icon:(0,s.iv)([l.l0.width(16),l.l0.height(16),l.l0.position.relative]),text:(0,s.iv)([l.l0.truncate,l.l0.flex.shrink(1),{fontSize:l.TV.fontSizeDefault}])};function we(e){if("group"===e.command.data.type)return null;var n=e.command.data,t=n.label,r=n.icon;return(0,i.BX)("button",{css:be.root,onClick:e.onClick,children:[(0,i.tZ)(u.G,{css:be.icon,children:(0,y.cloneElement)(r,{size:16})}),e.iconOnly?null:(0,i.tZ)(u.G,{css:be.text,children:t}),(0,i.tZ)(Ze.Z,{size:12})]})}function xe(e){return(0,i.tZ)(i.HY,{children:e.path.map((function(n,t){if(!n.data||"group"===n.data.type)return null;if(!n.match)return null;var r=n.data.label+t;return(0,i.tZ)(we,{command:n,onClick:function(){return e.onClick(t)},iconOnly:e.iconOnly},r)}))})}var Ce=t(24403),ke=t(97774),Se=(0,s.iv)([l.l0.reset.button,l.l0.viewStyle,l.l0.center,l.l0.height("100%"),l.l0.px(4),l.l0.cursor.pointer,l.l0.color.foregroundDimmest,{"&:hover":{color:l.TV.foregroundDefault}}]);function Te(e){return(0,i.tZ)("button",{css:Se,onClick:e.onClick,title:e.isLoading?"Loading":"Clear",children:e.isLoading?(0,i.tZ)(ke.Z,{}):(0,i.tZ)(Ce.Z,{})})}var Ee=t(4405),Re=t(94629),Ie=t(37676),Ge=t(20866),De=t(32079),_e=t(77542),Pe=t(26555),Be=t(92003),Ae=(0,s.iv)({transitionDuration:d.H.duration,transitionTimingFunction:d.H.timingFunction}),Ue={background:(0,s.iv)([Ae,{transitionProperty:"background-color"}]),opacity:(0,s.iv)([Ae,{transitionProperty:"opacity"}]),color:(0,s.iv)([Ae,{transitionProperty:"color"}])},Ne=(0,s.iv)([l.l0.p(8),Ue.background]),Le={root:(0,s.iv)([Ne,l.l0.align.center,l.l0.rowWithGap(8)]),iconSurface:(0,s.iv)([l.l0.p(8),l.l0.borderRadius(8),l.l0.position.relative,Ue.background])},Xe={root:(0,s.iv)([Ue.opacity,{opacity:.7},l.l0.width(16),l.l0.height(16),l.l0.position.relative]),active:(0,s.iv)({opacity:1})};function Me(e){var n=e.pane,t=e.active,r=e.highlight,o=(0,Ge.Se)(),a=o.Icon({pane:n,size:16}),l=o.getTitle(n),c=(0,_e.b2)({paneType:n.type});return(0,i.BX)(Ie.T,{elevated:t,css:Le.root,children:[(0,i.tZ)(Ie.T,{elevated:!0,css:Le.iconSurface,children:(0,i.BX)(u.G,{css:[Xe.root,e.active&&Xe.active],children:[a,c?(0,i.tZ)(Pe.B,{}):null]})}),(0,i.tZ)(De.x,{dimmed:!t,text:l,highlight:r})]})}function Oe(e){return(0,i.tZ)(Ie.T,{elevated:e.active,css:Ue.background,children:e.children})}var Fe={root:(0,s.iv)([Ne,l.l0.rowWithGap(8),l.l0.align.center,{userSelect:"none"}]),iconText:(0,s.iv)([l.l0.rowWithGap(8),l.l0.align.center]),description:(0,s.iv)([l.l0.truncate,l.l0.flex.growAndShrink(1),{fontSize:l.TV.fontSizeSmall}]),shortcut:(0,s.iv)({justifySelf:"end",marginLeft:"auto"})};function We(e){return(0,i.BX)(Ie.T,{elevated:e.active,css:Fe.root,children:[(0,i.BX)(u.G,{css:[Fe.iconText],children:[(0,i.tZ)(u.G,{css:[Xe.root,e.active&&Xe.active],children:(0,y.cloneElement)(e.icon,{size:16})}),(0,i.tZ)(De.x,{dimmed:!e.active,text:e.text,highlight:e.highlight})]}),e.description?(0,i.tZ)(u.G,{style:{color:e.active?l.TV.foregroundDimmer:l.TV.foregroundDimmest},css:Fe.description,children:e.description}):null,e.shortcut?(0,i.tZ)(u.G,{css:Fe.shortcut,children:(0,i.tZ)(Be.bM,{keyCombo:e.shortcut,small:!0})}):null,e.hasChildren?(0,i.tZ)(u.G,{css:Fe.shortcut,children:(0,i.tZ)(Ze.Z,{size:12})}):null]})}function He(e){var n=e.data,t="openPane"===n.type?n.pane:void 0;return t&&!(0,Ge.Ur)(t)?t:null}function ze(e){var n=e.item,t=e.active,r=n.data;if("group"===r.type)return null;var o=n.match.render,a=o&&"content"in o?o.content:void 0,l=o&&"ranges"in o?o.ranges:void 0;if(a)return(0,i.tZ)(Oe,{active:t,children:(0,y.cloneElement)(a,{active:t})});var c=He(n),u=r.label,s=r.icon;return c?(0,i.tZ)(Me,{active:t,pane:c,highlight:l}):(0,i.tZ)(We,{active:t,icon:s,text:u,highlight:l,description:r.description,shortcut:r.keyboardShortcut,hasChildren:"context"===n.data.type})}var Ve=[l.l0.position.absolute,l.l0.top(0),l.l0.left(0),l.l0.width("100%")],je=(0,o.X)({item:[Ve,{userSelect:"none",cursor:"pointer","&:hover > div":{backgroundColor:"var(".concat(f.dj.interactiveBackground,")")},"& > div > div":{transition:"120ms ease-out"},"&:hover > div > div":{backgroundColor:"var(".concat(f.dj.interactiveBackground,")"),color:"".concat(l.TV.foregroundDefault," !important")}}],divider:[Ve,l.l0.justify.center,l.l0.px(8)]}),qe=(0,y.memo)((function(e){var n=ae(e.index);if(!n)return null;var t={height:e.height,transform:"translateY(".concat(e.y,"px)")};return"section"===n.type?(0,i.tZ)(Ke,{path:n.path,style:t,border:e.index>0}):(0,i.tZ)($e,{index:n.index,item:n.item,style:t})})),$e=(0,y.memo)((function(e){var n=me(e.index),t=n.ref,o=n.active,a=n.onClick,l=n.ariaAttrs;return(0,i.tZ)(u.G,(0,Ee.Z)((0,r.Z)({innerRef:t,css:je.item,style:e.style,onClick:a},l),{children:(0,i.tZ)(ze,{item:e.item,active:o})}))})),Ye=(0,o.X)({borderHeaderWrap:[{userSelect:"none"},Ve,l.l0.p(8),l.l0.pt(8),l.l0.pb(4),l.l0.colWithGap(0),l.l0.justify.spaceBetween],borderWrap:[{userSelect:"none"},Ve,l.l0.justify.center,l.l0.px(8)],headerWrap:[{userSelect:"none"},Ve,l.l0.justify.end,l.l0.pb(4),l.l0.px(8)],header:[{userSelect:"none"},l.l0.rowWithGap(4),l.l0.align.center],text:[{userSelect:"none"},l.l0.flex.shrink(1),l.l0.color.foregroundDimmest,l.l0.truncate,{fontSize:l.TV.fontSizeSmall}],border:[l.l0.height(1),l.l0.width("100%")]}),Ke=(0,y.memo)((function(e){var n=ie(),t=g(e.path,n),r=(0,i.tZ)(Ie.T,{elevated:!0,css:Ye.border}),o=0===t.length;if(e.border&&o)return(0,i.tZ)(u.G,{css:Ye.borderWrap,style:e.style,children:r});var a=(0,i.tZ)(u.G,{css:Ye.header,children:t.map((function(e,n){return(0,i.BX)(y.Fragment,{children:[n>0?(0,i.tZ)(Ze.Z,{size:12,color:l.TV.foregroundDimmest}):null,(0,i.tZ)(u.G,{css:Ye.text,children:e})]},e+n)}))});return e.border||o?(0,i.BX)(u.G,{css:Ye.borderHeaderWrap,style:e.style,children:[r,a]}):(0,i.tZ)(u.G,{css:Ye.headerWrap,style:e.style,children:a})})),Qe=(0,o.X)({root:[l.l0.flex.growAndShrink(1),l.l0.overflow("hidden"),l.l0.pt(8)],scrollParent:[l.l0.height("100%"),l.l0.overflowY("auto"),l.l0.flex.growAndShrink(1)]}),Je=(0,y.memo)((function(e){var n,t=function(){var e=G(K),n=A(),t=(0,y.useRef)(null),r=ie(),i=G(z);return{rows:e,isOpen:n,scrollRef:t,currentPathIndex:r,ariaAttrs:{id:i.menu,"aria-labelledby":i.label,role:"listbox"}}}(),o=t.rows,a=t.isOpen,c=t.scrollRef,s=t.currentPathIndex,d=t.ariaAttrs,f=(0,Re.MG)({count:o.length,overscan:null!==(n=e.overscan)&&void 0!==n?n:1,getScrollElement:function(){return c.current},getItemKey:function(e){var n=o[e];return n?"section"===n.type?n.key:(0,m.Nv)(n.item.path):""},estimateSize:function(e){var n=o[e];return n?function(e){var n=e.row,t=e.currentPathIndex,r=e.isFirst;if("section"===n.type){var i=g(n.path,t).length?24:0;return r?i:i+16}var o,a=n.item.match.render;return a&&"content"in a?null!==(o=a.height)&&void 0!==o?o:32:He(n.item)?48:32}({row:n,currentPathIndex:s,isFirst:0===e}):0}}),p={borderRadius:e.hasFooter?void 0:l.TV.space8,display:a?void 0:"none"},h=f.scrollToIndex,v=G(Y);return(0,y.useEffect)((function(){var e=v;e<0||(1===e&&(e=0),h(e,{behavior:"smooth"}))}),[h,v]),(0,i.tZ)(u.G,(0,Ee.Z)((0,r.Z)({css:Qe.root},d),{style:p,children:(0,i.tZ)(u.G,{innerRef:c,css:Qe.scrollParent,children:(0,i.tZ)(u.G,{style:{height:"".concat(f.getTotalSize(),"px"),position:"relative"},children:a?f.getVirtualItems().map((function(e){return(0,i.tZ)(qe,{index:e.index,height:e.size,y:e.start},e.key)})):null})})}))})),en=(0,o.X)({root:[l.l0.flex.shrink(1),l.l0.height("100%")],footer:[l.l0.pt(8)],inputBarSurface:p.surface,input:p.input,keyComboBlocks:[l.l0.pr(8)],menuWrap:[l.l0.flex.shrink(1)],row:[l.l0.position.absolute,l.l0.top(0),l.l0.left(0),l.l0.width("100%")],menu:[l.l0.flex.shrink(1),l.l0.overflow("auto")],running:[l.l0.center,l.l0.flex.growAndShrink(1)]}),nn=(0,o.X)({root:[p.input,l.l0.px(8),{fontSize:l.TV.fontSizeDefault}]}),tn=(0,y.memo)((function(e){var n=ge();return(0,i.tZ)("input",(0,r.Z)({autoFocus:e.autoFocus,onKeyDown:e.onKeyDown,css:nn.root,placeholder:n.placeholder,value:n.value,onChange:n.onChange,ref:n.ref,onBlur:n.onBlur,disabled:n.disabled,autoComplete:"off"},n.ariaAttrs))})),rn=(0,o.X)({container:[p.container,l.l0.pb(0),{"& > div > button + input":{paddingLeft:0}}],surface:[p.surface],surfaceRunning:[p.surface,a.p.foregroundPulse()]});function on(e){var n=N();return(0,i.tZ)(u.G,{css:rn.container,children:(0,i.tZ)(u.G,{css:n?rn.surfaceRunning:rn.surface,children:e.children})})}var an=(0,y.memo)((function(e){var n={iconOnly:G(O),path:G(le)},t=n.path,r=n.iconOnly;return(0,i.tZ)(xe,{iconOnly:r,path:t,onClick:e.onClick})})),ln=(0,y.memo)((function(e){var n=G(oe),t=G(te);return n?(0,i.tZ)(Te,{onClick:e.onClick,isLoading:t}):null}));function cn(e){!function(e){var n=D(O);(0,y.useEffect)((function(){n(Boolean(e.iconBreadcrumbs))}),[n,e.iconBreadcrumbs]);var t=D(X);(0,y.useEffect)((function(){t(Boolean(e.openOnInput))}),[t,e.openOnInput])}({iconBreadcrumbs:e.iconBreadcrumbs,openOnInput:e.openOnInput});var n=function(e){var n=e.command,t=e.onSelect,r=e.onAction,i=A(),o=G(oe),a=G(V),l=D($),c=G(F),u=G(H),s=D(fe),d=D(U),f=D(se),p=N(),h=G(L),v=D(ve),m=G(W),g=(0,S.Z)({completer:ye(n),input:G(pe),onSelect:t,onAction:r}),Z=(0,b.Z)((function(){return function(){var e,n;return null===(e=g.current)||void 0===e||null===(n=e.input)||void 0===n?void 0:n.focus()}}),[g]),w=(0,b.Z)((function(){return function(){var e,n;return null===(e=g.current)||void 0===e||null===(n=e.input)||void 0===n?void 0:n.blur()}}),[g]),x=(0,b.Z)((function(){return function(){var e=g.current.completer.getPath().slice(0,1);l(-1),s(e),g.current.completer.setPath(e)}}),[s,l,g]),C=(0,b.Z)((function(){return function(){var e=g.current.completer.getPath();e.length<=1||(e=e.slice(0,-1),l(0),s(e),g.current.completer.setPath(e))}}),[s,l,g]),k=(0,b.Z)((function(){return function(e){if("Backspace"!==e.key||e.currentTarget.value)return v(e);C()}}),[v,C]);return(0,y.useEffect)((function(){var e=function(e){f(null!==e&&void 0!==e?e:"Something went wrong"),Z()};if(c&&"group"!==c.data.type){if("context"===c.data.type){var n=c.path;return s(n),l(-1),void g.current.completer.setPath(n)}switch(c.data.type){case"output":case"openPane":case"error":var t,r;return null===(r=(t=g.current).onSelect)||void 0===r||r.call(t,c),void x()}var i=null;try{i=c.data.run()}catch(a){return void e()}var o=!1;return d(!0),Promise.resolve(i).then((function(n){var t,r;o||(d(!1),"error"!==(null===n||void 0===n?void 0:n.type)?(null===(r=(t=g.current).onAction)||void 0===r||r.call(t),x()):e(n.message))})).catch((function(){e()})),function(){o=!0}}}),[g,c,s,l,x,d,f,w,Z]),{focus:Z,reset:x,onKeyDown:k,inputValue:a,isOpen:i,isClearable:o,noResults:u,hasHighlightedItem:m,isRunning:p,actionError:h}}({command:e.command,onSelect:e.onSelect,onAction:e.onAction}),t=n.isOpen,r=n.focus,o=n.reset,a=n.isClearable,s=n.onKeyDown,d=n.inputValue,f=n.noResults,p=n.hasHighlightedItem,h=n.isRunning,v=n.actionError,m=(0,S.Z)({inputValue:d,noResults:f,hasHighlightedItem:p,onSubmit:e.onSubmit,onKeyDown:e.onKeyDown}),g=(0,b.Z)((function(){return function(e){var n,t=m.current;null===(n=t.onKeyDown)||void 0===n||n.call(t,e,{inputValue:t.inputValue,noResults:t.noResults,hasHighlightedItem:t.hasHighlightedItem}),e.defaultPrevented||("Enter"===e.key&&t.inputValue&&t.noResults&&t.onSubmit?t.onSubmit(t.inputValue):s(e))}}),[m,s]),Z=e.focusRef;(0,y.useEffect)((function(){Z&&(Z.current=r)}),[r,Z]);var w=G(z);return(0,i.BX)(u.G,{css:en.root,children:[(0,i.tZ)("label",{id:w.label,htmlFor:w.input,css:l.l0.visuallyHidden,children:"Commands"}),(0,i.BX)(on,{children:[(0,i.tZ)(an,{onClick:o}),(0,i.tZ)(tn,{autoFocus:Boolean(e.autoFocus),onKeyDown:g}),(0,i.tZ)(ln,{onClick:function(){return o()}}),e.keyboardShortcut&&!a?(0,i.tZ)(u.G,{css:en.keyComboBlocks,children:(0,i.tZ)(Be.bM,{keyCombo:e.keyboardShortcut,small:!0})}):null]}),v?(0,i.tZ)(u.G,{css:[l.l0.p(8)],children:(0,i.tZ)(c.E,{colorway:"warning",text:v})}):null,t&&!h?(0,i.BX)(i.HY,{children:[(0,i.tZ)(Je,{overscan:e.overscan,hasFooter:Boolean(e.footer)}),e.footer?(0,i.tZ)(u.G,{css:en.footer,children:e.footer}):null]}):null,h?(0,i.tZ)(u.G,{css:en.running,children:(0,i.tZ)(ke.Z,{size:24})}):null]})}function un(e){var n=function(e){var n={label:(0,T.D)(),input:(0,T.D)(),menu:(0,T.D)()};return(0,y.useState)((function(){var t,r=(0,Z.MT)();r.set(z,n),r.set(O,Boolean(e.iconBreadcrumbs)),r.set(X,Boolean(e.openOnInput)),r.set(B,!e.openOnInput);var i,o=Array.isArray(e.command)?e.command[0]:e.command,a=null!==(i=null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.description)&&void 0!==i?i:null;return a&&r.set(P,(function(e){return(0,k.ZP)(e,(function(e){e.placeholder=a}))})),r}))[0]}({iconBreadcrumbs:e.iconBreadcrumbs,command:e.command,openOnInput:e.openOnInput});return(0,i.tZ)(R.Provider,{value:n,children:(0,i.tZ)(cn,{overscan:e.overscan,onSelect:e.onSelect,onAction:e.onAction,onSubmit:e.onSubmit,command:e.command,autoFocus:Boolean(e.autoFocus),focusRef:e.focusRef,keyboardShortcut:e.keyboardShortcut,openOnInput:e.openOnInput,onKeyDown:e.onKeyDown,footer:e.footer,iconBreadcrumbs:e.iconBreadcrumbs})})}},89145:function(e,n,t){t.d(n,{m:function(){return f}});var r=t(72006),i=t(4405),o=t(77637),a=t(2272),l=t(4541),c=t(50959),u=t(98260),s=t(37195),d=t(47287);function f(e){var n=e.textToCopy,t=e.tooltip,f=(0,o.Z)(e,["textToCopy","tooltip"]),p=(0,a.Z)(c.useState(!1),2),h=p[0],v=p[1],m=c.useRef(null);return c.useEffect((function(){return function(){m.current&&clearTimeout(m.current)}}),[]),(0,l.tZ)(d.u,{isOpen:h,tooltip:null!==t&&void 0!==t?t:"".concat(n," copied to clipboard"),placement:"bottom-end",children:(0,l.tZ)(u.zx,(0,i.Z)((0,r.Z)({},f),{onClick:function(e){(0,s.Z)(n),v(!0),m.current&&clearTimeout(m.current),m.current=setTimeout((function(){return v(!1)}),4e3),f.onClick&&f.onClick(e)}}))})}},55116:function(e,n,t){t.d(n,{KG:function(){return m},bx:function(){return y},h3:function(){return b},pC:function(){return x}});var r=t(72006),i=t(43119),o=t(71440),a=t(67216),l=t(59187);function c(){var e=(0,i.Z)(["\n  fragment EditDomainRepl on Repl {\n    id\n    hostedUrl\n    apexProxy\n    domains {\n      hosting_deployment_id\n      domain\n      state\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query EditDomain($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query EditDomainCheckDomain2($replId: String!, $domain: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        checkDomain2(domain: $domain) {\n          ... on DomainStatus2 {\n            verified\n            retry\n            status\n            records {\n              A\n              TXT\n              CNAME\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation EditDomainLinkReplDomain2(\n    $replId: String!\n    $domain: String!\n    $deploymentId: String\n  ) {\n    linkReplDomain2(\n      replId: $replId\n      domain: $domain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation EditDomainUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...EditDomainRepl\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var p={},h=(0,o.Ps)(c()),v=(0,o.Ps)(u(),h);function m(e){var n=(0,r.Z)({},p,e);return a.a(v,n)}var g=(0,o.Ps)(s());function y(e){var n=(0,r.Z)({},p,e);return a.a(g,n)}var Z=(0,o.Ps)(d(),h);function b(e){var n=(0,r.Z)({},p,e);return l.D(Z,n)}var w=(0,o.Ps)(f(),h);function x(e){var n=(0,r.Z)({},p,e);return l.D(w,n)}},67516:function(e,n,t){t.d(n,{Z:function(){return P}});var r,i=t(77637),o=t(2272),a=t(4541),l=t(95980),c=t.n(l),u=t(50959),s=t(55116),d=t(25776),f=t(55544),p=t(98260),h=t(22167),v=t(42735),m=t(47287),g=t(37195),y=t(88254),Z=t(32508),b=t.n(Z),w=t(58975),x=t(7579),C=t(35238),k=t(3220),S=t(97774),T=t(75916),E=t(24403),R=d.K.span;function I(e){switch(e.status){case r.Verified:return(0,a.tZ)(T.Z,{color:h.TV.accentPositiveDefault});case r.Failed:return(0,a.tZ)(E.Z,{color:h.TV.accentNegativeDefault});case r.Verifying:return(0,a.tZ)(S.Z,{color:h.TV.accentPrimaryDefault});default:return null}}function G(e){var n=e.repl,t=e.existingDomain,r=e.deploymentId,i=e.onLink,l=e.onGoBack,c=e.onLinkStarted,m=e.onStateChanged,Z=(0,u.useState)(t?"loading":null),w=Z[0],k=Z[1],S=(0,u.useState)(!1),T=S[0],E=S[1],R=(0,u.useState)(null),I=R[0],G=R[1],_=(0,u.useState)(!1),P=_[0],B=_[1],A=(0,u.useState)(!0),U=A[0],N=A[1],L=(0,o.Z)((0,s.h3)(),2),X=L[0],M=L[1],O=(0,u.useRef)(null),F=(0,u.useRef)(null),W=(0,u.useRef)(null),H=function(e){(null===e||void 0===e?void 0:e.current)&&e.current.select()},z=function(e){var n;(null===e||void 0===e||null===(n=e.current)||void 0===n?void 0:n.value)&&(0,g.Z)(e.current.value).catch((function(e){y.$e((function(n){n.setTag("domain-link",!0),n.setExtra("type","copy"),y.Tb(e)}))}))},V=(0,u.useState)(t||""),j=V[0],q=V[1];(0,u.useEffect)((function(){M.data&&"Repl"===M.data.linkReplDomain2.__typename&&i()}),[M.data,i]),(0,u.useEffect)((function(){N(!r)}),[r]);var $=function(e){k(e),m()},Y=b()(j,{require_valid_protocol:!1})&&j.split(".").length>=2,K=Y&&2===j.split(".").length,Q=function(e,n,t){var r=e.replace(/^https:\/\//,"");return t?r.replace(n,t):r}(n.hostedUrl,n.id,r),J=n.apexProxy,ee="replit-verify=".concat(null!==r&&void 0!==r?r:n.id),ne=(0,x.H)();return(0,a.BX)(d.G,{css:[h.l0.colWithGap(16)],children:[(0,a.BX)(d.G,{css:[h.l0.colWithGap(8)],children:[(0,a.tZ)(f.h4,{level:2,variant:"subheadDefault",children:"New Domain Link"}),(0,a.BX)(f.xv,{multiline:!0,children:["Learn more"," ",(0,a.tZ)("a",{href:"https://docs.replit.com/hosting/hosting-web-pages#custom-domains",target:"_blank",children:"here"}),"."]})]}),(0,a.BX)(d.G,{css:[h.l0.colWithGap(4)],children:[(0,a.tZ)("label",{htmlFor:ne("domain"),children:(0,a.tZ)(f.xv,{color:"dimmer",variant:"small",children:"Step 1: Enter your domain"})}),(0,a.tZ)(v.II,{className:"cname-url",readOnly:"loading"===w,value:j,onChange:function(e){q(e.target.value)},onBlur:function(){!function(){try{var e=new URL("/",j);q(e.hostname)}catch(n){}}()},placeholder:"example.com",id:ne("domain")})]}),!K&&U||P?null:(0,a.BX)(d.G,{css:[h.l0.colWithGap(8)],children:[(0,a.BX)(d.G,{css:[h.l0.colWithGap(4)],children:[(0,a.tZ)("label",{htmlFor:ne("record"),children:(0,a.BX)(f.xv,{color:"dimmer",variant:"small",children:["Step 2: Add an ",(0,a.tZ)("code",{children:"A"})," Record"]})}),(0,a.BX)(d.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,a.tZ)(f.xv,{css:{fontFamily:h.TV.fontFamilyCode,maxWidth:"40%"},children:j}),(0,a.tZ)(f.xv,{css:{fontFamily:h.TV.fontFamilyCode},children:"A"}),(0,a.tZ)(v.II,{readOnly:!0,ref:O,onChange:function(){return null},value:J,onFocus:function(){return H(O)},id:ne("record")}),(0,a.tZ)(p.zx,{onClick:function(){return z(O)},text:"Copy"})]})]}),U?(0,a.tZ)(d.G,{css:[h.l0.flex.row,h.l0.align.stretch],children:(0,a.tZ)(p.zx,{outlined:!0,onClick:function(){return B(!0)},text:"Use CNAME record instead."})}):null]}),Y&&(P||U&&!K)?(0,a.BX)(d.G,{css:[h.l0.colWithGap(4)],children:[(0,a.tZ)("label",{htmlFor:ne("CNAMERecord"),children:(0,a.BX)(f.xv,{color:"dimmer",variant:"small",children:["Step 2: Add a ",(0,a.tZ)("code",{children:"CNAME"})," Record"]})}),(0,a.BX)(d.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,a.tZ)(f.xv,{css:{fontFamily:h.TV.fontFamilyCode,maxWidth:"40%"},children:j}),(0,a.tZ)(f.xv,{css:{fontFamily:h.TV.fontFamilyCode},children:"CNAME"}),(0,a.tZ)(v.II,{readOnly:!0,ref:W,onChange:function(){return null},value:Q,onFocus:function(){return H(W)},id:ne("CNAMERecord")}),(0,a.tZ)(p.zx,{onClick:function(){return z(W)},text:"Copy"})]}),K?(0,a.BX)(d.G,{css:[h.l0.colWithGap(8)],children:[(0,a.tZ)(f.xv,{variant:"small",multiline:!0,children:'Note: this CNAME record requires that your DNS provider supports CNAMEs for apex domains - for example Cloudflare with "CNAME Flattening".'}),(0,a.tZ)(d.G,{css:[h.l0.flex.row,h.l0.align.stretch],children:(0,a.tZ)(p.zx,{onClick:function(){return B(!1)},text:"Use A record instead",outlined:!0})})]}):null]}):null,Y?(0,a.BX)(d.G,{css:[h.l0.colWithGap(4)],children:[K?(0,a.tZ)("label",{htmlFor:ne("txtRecord"),children:(0,a.BX)(f.xv,{color:"dimmer",variant:"small",children:["This domain also requires a ",(0,a.tZ)("code",{children:"TXT"})," Record"]})}):(0,a.BX)("label",{children:['If you are using a service like Cloudflare (with "orange cloud") that rewrites domain records, you can add a ',(0,a.tZ)("code",{children:"TXT"})," ","Record for verification purposes."]}),(0,a.BX)(d.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,a.tZ)(f.xv,{css:{fontFamily:h.TV.fontFamilyCode,maxWidth:"40%"},children:j}),(0,a.tZ)(f.xv,{css:{fontFamily:h.TV.fontFamilyCode},children:"TXT"}),(0,a.tZ)(v.II,{readOnly:!0,ref:F,onChange:function(){return null},value:ee,onClick:function(){return H(F)},id:ne("txtRecord")}),(0,a.tZ)(p.zx,{onClick:function(){return z(F)},text:"Copy"})]})]}):null,"loading"===w?(0,a.tZ)(d.G,{css:[h.l0.colWithGap(12),h.l0.pt(16)],children:(0,a.tZ)(D,{replId:n.id,domain:j,onVerified:function(){return $("verified")},onError:function(){return $("error")}})}):null,"verified"===w?(0,a.tZ)(d.G,{css:[h.l0.colWithGap(12),h.l0.pt(16)],children:(0,a.tZ)(f.xv,{children:"Your domain has been verified."})}):null,"error"===w||I?(0,a.tZ)(d.G,{css:[h.l0.colWithGap(12),h.l0.pt(16)],children:(0,a.BX)(f.xv,{children:["Creating the domain link failed",I?": "+I:"","."]})}):null,(0,a.BX)(d.G,{css:[h.l0.rowWithGap(12),h.l0.justify.end],children:[(0,a.tZ)(p.zx,{onClick:l,text:"Close"}),Y&&null===w?(0,a.tZ)(p.zx,{disabled:T,onClick:function(){E(!0),G(null),X({variables:{replId:n.id,domain:j,deploymentId:r}}).then((function(e){var n,t=(null===(n=e.data)||void 0===n?void 0:n.linkReplDomain2)||null;"Repl"===(null===t||void 0===t?void 0:t.__typename)?(G(null),$("loading")):("ServiceUnavailable"!==(null===t||void 0===t?void 0:t.__typename)&&"NotFoundError"!==(null===t||void 0===t?void 0:t.__typename)&&"UnauthorizedError"!==(null===t||void 0===t?void 0:t.__typename)||G(null===t||void 0===t?void 0:t.message),$("error")),E(!1),c()})).catch((function(e){E(!1),G(e.message)}))},text:"".concat(T?"Linking domain...":"Link domain"),iconLeft:(0,a.tZ)(C.Z,{}),colorway:"primary"}):null]})]})}function D(e){var n,t=e.domain,r=e.replId,l=e.onVerified,p=e.onError,v=(0,s.bx)({variables:{replId:r,domain:t},pollInterval:1e3}),m=v.data,g=v.stopPolling;if((0,u.useEffect)((function(){var e,n;if(m&&"Repl"===m.repl.__typename){var t=m.repl;if("NotFoundError"!==(null===(e=t.checkDomain2)||void 0===e?void 0:e.__typename)){if("DomainStatus2"===(null===(n=t.checkDomain2)||void 0===n?void 0:n.__typename)){var r=t.checkDomain2,i=r.retry,o=r.verified;o||i?(!o&&i||g(),o&&l()):p()}}else p()}}),[m,g,l,p]),"Repl"===(null===m||void 0===m?void 0:m.repl.__typename)&&m.repl.checkDomain2){var y,Z,b,w="DomainStatus2"===m.repl.checkDomain2.__typename?m.repl.checkDomain2:null,x=null;if(null===w||void 0===w?void 0:w.records){var C=w.records;C.__typename;x=(0,i.Z)(C,["__typename"])}var k,S=null;if(!(null===w||void 0===w?void 0:w.status))"ServiceUnavailable"===(null===(k=m.repl.checkDomain2)||void 0===k?void 0:k.__typename)&&(S=m.repl.checkDomain2.message),S||(S="DNS updates can take up to 48 hours to fully synchronize. Feel free to check back later.");return(0,a.BX)(d.G,{css:[h.l0.colWithGap(16),h.l0.justify.spaceBetween],children:[(0,a.BX)(d.G,{css:[h.l0.rowWithGap(16),h.l0.align.center],children:[(0,a.tZ)("div",{css:[h.l0.width("20px"),h.l0.height("20px"),{aspectRatio:"1 / 1"},{borderRadius:"100%"},{borderRadius:"100%"},{borderStyle:"solid"},{borderWidth:"3px"},{borderColor:h.TV.accentPrimaryDimmer},{borderTopColor:h.TV.accentPrimaryDefault},{transform:"rotate(0deg)"},{animation:"linear domain-loading 1s infinite"}],className:"jsx-4e6cc6caecb799c9"}),(0,a.tZ)("div",{className:"jsx-4e6cc6caecb799c9",children:S})]}),x||"DomainStatus2"===(null===(y=m.repl.checkDomain2)||void 0===y?void 0:y.__typename)&&(null===(Z=m.repl.checkDomain2)||void 0===Z?void 0:Z.retry)||"ServiceUnavailable"===(null===(b=m.repl.checkDomain2)||void 0===b?void 0:b.__typename)?(0,a.BX)(d.G,{children:[(0,a.tZ)("br",{className:"jsx-4e6cc6caecb799c9"}),x?(0,a.BX)(d.G,{children:["Currently, your domain\u2019s records show:",(0,a.tZ)("pre",{css:[h.l0.overflow("scroll")],className:"jsx-4e6cc6caecb799c9",children:Object.entries(x).map((function(e){var n=(0,o.Z)(e,2),r=n[0],i=n[1];return null===i||void 0===i?void 0:i.map((function(e){return(0,a.BX)("div",{className:"jsx-4e6cc6caecb799c9",children:[t," ",r," ",e]},"{domain}-{dnsType}")}))}))})]}):(0,a.tZ)(f.xv,{multiline:!0,children:"Currently, your domain is either not returning any records, or something is getting in the way of our verification process."})]}):null,(0,a.tZ)(c(),{id:"4e6cc6caecb799c9",children:"@-webkit-keyframes domain-loading{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes domain-loading{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes domain-loading{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes domain-loading{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}return"Repl"===(null===m||void 0===m?void 0:m.repl.__typename)&&"NotFoundError"===(null===(n=m.repl.checkDomain2)||void 0===n?void 0:n.__typename)?(0,a.tZ)(a.HY,{children:"We ran into an internal error while checking the domain. Please try again later."}):null}function _(e){var n=e.replId,t=e.domain,r=e.onUnlink,i=e.onGoBack,l=(0,o.Z)((0,s.pC)({variables:{input:{id:n,removeDomain:t}}}),2),c=l[0],v=l[1];return(0,u.useEffect)((function(){v.data&&v.data.updateRepl.repl&&r()}),[v.data,r]),(0,a.BX)(d.G,{css:[h.l0.colWithGap(16)],children:[(0,a.BX)(d.G,{css:[h.l0.colWithGap(8)],children:[(0,a.tZ)(f.h4,{level:3,variant:"subheadDefault",children:"Domain Unlinking"}),(0,a.BX)(f.xv,{multiline:!0,children:["Are you sure you want to unlink"," ",(0,a.tZ)("a",{target:"_blank",rel:"noopener",href:"https://"+t,children:t}),"?"]})]}),(0,a.BX)(d.G,{css:[h.l0.rowWithGap(12),h.l0.justify.end],children:[(0,a.tZ)(p.zx,{onClick:i,text:"Cancel"}),(0,a.tZ)(p.zx,{onClick:function(){v.loading||c()},text:v.loading?"Unlinking domain...":"Yes, unlink this domain",colorway:"negative",iconLeft:(0,a.tZ)(k.Z,{}),disabled:v.loading})]})]})}function P(e){var n=e.replId,t=e.deploymentId,r=e.showTitle,i=void 0===r||r,o=e.onUnlink,l=e.onLink,c=(0,s.KG)({variables:{replId:n}}),v=c.data,g=c.loading,y=c.refetch,Z=(0,u.useState)("listing"),b=Z[0],x=Z[1],C=(0,u.useState)(null),k=C[0],T=C[1],E=null;if(g)E=(0,a.tZ)(d.G,{css:[h.l0.colWithGap(8),h.l0.align.center,h.l0.justify.center],children:(0,a.BX)(d.G,{css:[h.l0.rowWithGap(4),h.l0.align.center],children:[(0,a.tZ)(S.Z,{color:h.TV.accentPrimaryDefault}),(0,a.tZ)(R,{children:"Loading"})]})});else if(v&&"Repl"===v.repl.__typename){var D=v.repl,P=null;if(D.domains){var B=D.domains.filter(Boolean).filter((function(e){return t?(null===e||void 0===e?void 0:e.hosting_deployment_id)===t:!(null===e||void 0===e?void 0:e.hosting_deployment_id)})).map((function(e){return{domain:e.domain,state:e.state}}));P=0===B.length?(0,a.tZ)(f.xv,{children:"No domains are currently linked."}):(0,a.BX)(d.G,{children:[(0,a.tZ)(f.h4,{level:3,variant:"subheadDefault",children:"Currently Linked Domains"}),(0,a.tZ)(d.G,{css:[h.l0.colWithGap(16)],children:B.map((function(e){return e?(0,a.tZ)(d.G,{children:(0,a.BX)(d.G,{css:[h.l0.colWithGap(4),h.l0.justify.spaceBetween,h.l0.align.center],children:[(0,a.BX)(d.G,{css:[h.l0.rowWithGap(8),h.l0.align.center,h.l0.justify.spaceBetween,h.l0.width("100%")],children:[(0,a.tZ)(d.G,{css:[h.l0.flex.shrink(1)],children:(0,a.tZ)(m.u,{tooltip:e.domain,children:(0,a.tZ)(f.xv,{children:e.domain})})}),(0,a.tZ)(d.G,{children:(0,a.tZ)(m.u,{tooltip:(0,a.tZ)(f.xv,{css:{textTransform:"capitalize"},children:e.state}),children:(0,a.tZ)(I,{status:e.state})})})]}),(0,a.BX)(d.G,{css:[h.l0.rowWithGap(12),h.l0.justify.end,h.l0.align.center,h.l0.width("100%"),"verified"!==e.state&&h.l0.pl(12)],children:[(0,a.tZ)(p.zx,{text:"Unlink",css:h.l0.width("verified"!==e.state?"50%":"100%"),onClick:function(){T(e.domain),x("unlinking")}}),"verified"!==e.state?(0,a.tZ)(p.zx,{text:"Check status",css:h.l0.width("50%"),onClick:function(){T(e.domain),x("linking")}}):null]})]})},e.domain):null}))})]})}"listing"===b?E=(0,a.BX)(d.G,{css:[h.l0.colWithGap(16)],children:[P,(0,a.tZ)(p.zx,{text:"Create domain link",onClick:function(){return x("linking")},iconLeft:(0,a.tZ)(w.Z,{})})]}):"linking"===b?E=(0,a.tZ)(G,{repl:D,existingDomain:k,deploymentId:t,onLink:l,onGoBack:function(){x("listing"),T(null)},onLinkStarted:y,onStateChanged:y}):"unlinking"===b&&null!==k&&(E=(0,a.tZ)(_,{replId:D.id,domain:k,onUnlink:function(){y(),x("listing"),o()},onGoBack:function(){x("listing"),T(null)}}))}else v&&"ReplRedirect"===v.repl.__typename?E=(0,a.BX)("div",{children:["This repl has moved to"," ",(0,a.tZ)("a",{href:v.repl.replUrl,children:v.repl.replUrl})]}):v&&"SubscriptionExpiredError"===v.repl.__typename&&(E=(0,a.tZ)("div",{children:"Subscription expired"}));return(0,a.BX)(d.G,{css:[h.l0.colWithGap(24)],children:[i?(0,a.tZ)(f.h4,{level:1,variant:"headerDefault",children:"Domain Linking"}):null,E]})}!function(e){e.Verified="verified",e.Verifying="verifying",e.Failed="failed"}(r||(r={}))},86911:function(e,n,t){t.d(n,{E:function(){return p}});var r=t(4541),i=t(91355),o=t(98260),a=t(55544),l=t(35021),c=t(22167),u=t(25776),s=t(8189),d=t(75916),f=t(50959);function p(){var e=(0,s.Z)().replspaceApi,n=(0,f.useState)(null),t=n[0],p=n[1];return(0,f.useEffect)((function(){return e.onConfirmSendToken((function(e){e&&(0,i.j)(i.U3.MODAL_VIEWED,{modalName:"git_token_modal"}),p((function(){return e}))}))}),[e]),(0,r.tZ)(l.u,{isOpen:"function"===typeof t,onRequestClose:function(){null===t||void 0===t||t(!1),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"close"}),p(null)},children:(0,r.BX)(u.G,{css:[c.l0.colWithGap(16)],children:[(0,r.tZ)(a.h4,{variant:"headerDefault",level:3,children:"Pass GitHub Credentials"}),(0,r.tZ)(a.xv,{multiline:!0,children:"It looks like you're trying to connect to your GitHub repository through the shell. Pass your token to the shell?"}),(0,r.tZ)(a.xv,{multiline:!0,children:"If you did not initiate a git command, you should deny this."}),(0,r.BX)(u.G,{css:[c.l0.justify.end,c.l0.rowWithGap(16)],children:[(0,r.tZ)(o.zx,{onClick:function(){null===t||void 0===t||t(!1),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"deny"}),p(null)},text:"Deny"}),(0,r.tZ)(o.zx,{onClick:function(){null===t||void 0===t||t(!0),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"confirm"}),p(null)},iconLeft:(0,r.tZ)(d.Z,{}),text:"Confirm for this session",colorway:"primary"})]})]})})}},32079:function(e,n,t){t.d(n,{x:function(){return f}});var r=t(4541),i=t(11122),o=t(22167),a=t(25776),l=t(3941);function c(e,n){var t=0,r=[];return n.forEach((function(n){var i=n.from,o=n.to,a=e.slice(t,i);a&&r.push({text:a,match:!1});var l=e.slice(i,o);l&&r.push({text:l,match:!0}),t=o})),t<e.length&&r.push({text:e.slice(t),match:!1}),r}var u=(0,i.iv)({transitionProperty:"color",transitionDuration:l.H.duration,transitionTimingFunction:l.H.timingFunction}),s=(0,i.iv)([o.l0.flex.shrink(1),o.l0.truncate,u]),d={normal:{matched:o.TV.foregroundDefault,unmatched:o.TV.foregroundDimmer},dimmed:{matched:o.TV.foregroundDimmer,unmatched:o.TV.foregroundDimmest}};function f(e){var n,t=null===(n=e.highlight)||void 0===n?void 0:n.filter((function(e){return e.to>0})),i=e.dimmed?d.dimmed:d.normal;return(null===t||void 0===t?void 0:t.length)?(0,r.tZ)(a.G,{css:s,children:c(e.text,t).map((function(e,n){return(0,r.tZ)("span",{css:u,style:{fontWeight:e.match?o.TV.fontWeightBold:o.TV.fontWeightRegular,color:e.match?i.matched:i.unmatched},children:e.text},e.text+n)}))}):(0,r.tZ)(a.G,{style:{color:i.matched},css:[s,u],children:e.text})}},25037:function(e,n,t){t.d(n,{LU:function(){return s},Ot:function(){return f}});var r=t(72006),i=t(43119),o=t(71440),a=t(59187);function l(){var e=(0,i.Z)(["\n  fragment ReplInfoEditReplDescriptionRepl on Repl {\n    id\n    description\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  mutation ReplInfoEditReplDescriptionUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplInfoEditReplDescriptionRepl\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function f(e){var n=(0,r.Z)({},u,e);return a.D(d,n)}},62052:function(e,n,t){t.d(n,{Jr:function(){return s},ie:function(){return f}});var r=t(72006),i=t(43119),o=t(71440),a=t(59187);function l(){var e=(0,i.Z)(["\n  fragment ReplInfoEditReplTemplateLabelRepl on Repl {\n    id\n    templateLabel\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  mutation ReplInfoEditReplTemplateLabelUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplInfoEditReplTemplateLabelRepl\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function f(e){var n=(0,r.Z)({},u,e);return a.D(d,n)}},11138:function(e,n,t){t.d(n,{C4:function(){return m},Zx:function(){return f},uB:function(){return h}});var r=t(72006),i=t(43119),o=t(71440),a=t(59187),l=t(31558);function c(){var e=(0,i.Z)(["\n  fragment ReplInfoEditReplTitleRepl on Repl {\n    id\n    title\n    isRenamed\n    owner {\n      ... on Team {\n        id\n        __typename\n      }\n      ... on User {\n        id\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation ReplInfoEditReplTitleUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplInfoEditReplTitleRepl\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query ReplInfoEditReplTitleAvailableReplTitle(\n    $input: AvailableReplTitleInput!\n  ) {\n    availableReplTitle(input: $input) {\n      ... on AvailableReplTitleResult {\n        isAvailable\n      }\n    }\n  }\n"]);return s=function(){return e},e}var d={},f=(0,o.Ps)(c()),p=(0,o.Ps)(u(),f);function h(e){var n=(0,r.Z)({},d,e);return a.D(p,n)}var v=(0,o.Ps)(s());function m(e){var n=(0,r.Z)({},d,e);return l.t(v,n)}},52422:function(e,n,t){t.d(n,{$:function(){return i},D:function(){return r}});var r=t(22167).tX.categorical,i=.0075},54427:function(e,n,t){t.d(n,{b:function(){return i}});var r=t(52422),i=function(e,n,t){var i=new Array,o=0,a=!0,l=!1,c=void 0;try{for(var u,s=e[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value,f=Math.max(d.percentage,r.$),p=f-d.percentage;0!==p&&(o+=p),i.push({percentage:f,adjusted:0!==p,grouped:!1,replIds:new Set([d.repl.id])})}}catch(k){l=!0,c=k}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}var h=0===n?0:Math.max(n,r.$);if(h>0){var v=h-n;v>0&&(o+=v),i.push({percentage:h,adjusted:v>0,grouped:!0,replIds:t})}if(o>0){var m=i.filter((function(e){return!e.adjusted})),g=m.length;if(g>0){var y=o/g,Z=!0,b=!1,w=void 0;try{for(var x,C=m[Symbol.iterator]();!(Z=(x=C.next()).done);Z=!0){x.value.percentage-=y}}catch(k){b=!0,w=k}finally{try{Z||null==C.return||C.return()}finally{if(b)throw w}}}}return i}},46597:function(e,n,t){t.d(n,{_:function(){return a}});var r=t(72006),i=t(4405),o=t(91309),a=function(e){switch(e.__typename){case"AccountStorageUtilization":return l(e);case"MonthlyEgressSummary":return c(e);default:(0,o.Z)(e)}},l=function(e){var n=e.total,t=e.perRepl,r=e.quota;return{total:Number(n),limit:Number(r),perRepl:t.map(u)}},c=function(e){var n=e.usage,t=e.limit,r=e.perRepl;return{total:Number(n),limit:Number(t),perRepl:r.map(u)}},u=function(e){return(0,i.Z)((0,r.Z)({},e),{usage:Number(e.usage)})}},59389:function(e,n,t){t.d(n,{$s:function(){return a},fZ:function(){return i},p6:function(){return o}});var r=1048576,i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.forceGib,i=void 0!==t&&t,l=n.precision,c=void 0===l?4:l;return e>r||i?"".concat(a(e).toFixed(c)," GiB"):"".concat(o(e).toFixed(c)," MiB")},o=function(e){return e/r},a=function(e){return e/1073741824}},29708:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(2272),i=t(4541),o=t(98260),a=t(50959),l=t(33405);function c(e){var n=e.context,t=(0,r.Z)(a.useState(!1),2),c=t[0],u=t[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(o.zx,{text:"Activate",colorway:"primary",onClick:function(){return u(!0)}}),(0,i.tZ)(l.Z,{context:n,isOpen:c,onRequestClose:function(){return u(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}},268:function(e,n,t){t.d(n,{Fh:function(){return v},IN:function(){return w},s7:function(){return Z}});var r=t(72006),i=t(43119),o=t(71440),a=t(27594),l=t(67216),c=t(59187);function u(){var e=(0,i.Z)(["\n  fragment HostingTierReplPowerUps on Repl {\n    powerUps {\n      __typename\n      ... on ReplPowerUpTypes {\n        hostingTier {\n          __typename\n          sku\n          methodOfPayment\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment HostingTierPowerUpCostDetails on PowerUpCostsType {\n    hostingTierE2Micro {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Small {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Medium {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierN1Custom1_4 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Standard2 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Standard4 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment HostingTierPowerUpCosts on Repl {\n    id\n    powerUpCosts {\n      __typename\n      ... on PowerUpCostsType {\n        ...HostingTierPowerUpCostDetails\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  query HostingTierPowerUp($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        owner {\n          __typename\n        }\n        ...HostingTierReplPowerUps\n        ...HostingTierPowerUpCosts\n      }\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation SetHostingTier($input: SetHostingTierInput!) {\n    setHostingTier(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on PaymentError {\n        message\n      }\n      ... on SetHostingTierResult {\n        repl {\n          ... on Repl {\n            ...HostingTierReplPowerUps\n            ...HostingTierPowerUpCosts\n          }\n        }\n        currentUser {\n          ...PowerUpMutationReturnFields\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}var h={},v=(0,o.Ps)(u()),m=(0,o.Ps)(s()),g=(0,o.Ps)(d(),m),y=(0,o.Ps)(f(),v,g);function Z(e){var n=(0,r.Z)({},h,e);return l.a(y,n)}var b=(0,o.Ps)(p(),v,g,a.E_);function w(e){var n=(0,r.Z)({},h,e);return c.D(b,n)}},49622:function(e,n,t){t.d(n,{$:function(){return l},i:function(){return a}});var r=t(62830),i=t(91309),o=t(5213);function a(e,n){if(void 0!==n)switch(n){case r.DZ.HostingTierE2Micro:return e.hostingTierE2Micro;case r.DZ.HostingTierE2Small:return e.hostingTierE2Small;case r.DZ.HostingTierE2Medium:return e.hostingTierE2Medium;case r.DZ.HostingTierN1Custom_1_4:return e.hostingTierN1Custom1_4;case r.DZ.HostingTierE2Standard_2:return e.hostingTierE2Standard2;case r.DZ.HostingTierE2Standard_4:return e.hostingTierE2Standard4;default:(0,i.Z)(n)}}function l(e){var n=o.r4[e],t=n.vCpu,r=n.ram,i=n.dedicated;return"".concat(i?"Dedicated ":"").concat(t," vCPU / ").concat(r," GiB RAM")}},98824:function(e,n,t){t.d(n,{_:function(){return R},U:function(){return T}});var r,i=t(4541),o=t(50959),a=t(17202),l=t(22167),c=t(25776),u=t(55544),s=t(98260),d=t(57389),f=t(62830),p=t(69940),h=t(97774),v=(r={},(0,d.Z)(r,f.Fe.Suspended,{title:"Suspended",color:l.TV.greyDefault}),(0,d.Z)(r,f.Fe.UpdatingTier,{title:"Updating tier",color:l.TV.orangeStronger}),(0,d.Z)(r,f.Fe.Suspending,{title:"Suspending",color:l.TV.orangeStronger}),(0,d.Z)(r,f.Fe.Resuming,{title:"Resuming",color:l.TV.orangeStronger}),(0,d.Z)(r,f.Fe.Pending,{title:"Provisioning",color:l.TV.orangeStronger}),(0,d.Z)(r,f.Fe.Building,{title:"Building",color:l.TV.orangeStronger}),(0,d.Z)(r,f.Fe.Running,{title:"Running",color:l.TV.orangeStronger}),(0,d.Z)(r,f.Fe.Promoting,{title:"Promoting",color:l.TV.orangeStronger}),(0,d.Z)(r,f.Fe.Failed,{title:"Failed",color:l.TV.accentNegativeDefault}),(0,d.Z)(r,f.Fe.Success,{title:"Success",color:l.TV.accentPositiveDefault}),r),m=function(e){var n=e.status,t=n in v?v[n]:{title:"",color:l.TV.greyDefault},r=t.title,o=t.color;return(0,i.tZ)(c.G,{css:[l.l0.align.center,l.l0.rowWithGap(6),{textTransform:"capitalize"}],children:n===p.pS.Refetch?(0,i.tZ)(h.Z,{size:12}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.G,{as:"span",css:[l.l0.width("8px"),l.l0.height("8px"),l.l0.borderRadius("full"),{backgroundColor:o,boxShadow:"0 0 12px ".concat(o)}]}),(0,i.tZ)("div",{className:"always-on-indicator","aria-label":r,"data-microtip-position":"bottom",role:"tooltip"}),(0,i.tZ)(u.xv,{children:r})]})})},g=t(2272),y=t(25969),Z=t(77770),b=function(e){var n=e.currentBuild,t=(0,g.Z)(o.useState([]),2),r=t[0],a=t[1];return o.useEffect((function(){var e,t="HostingDeployment"===(null===(e=n.repl.hostingDeployment)||void 0===e?void 0:e.__typename)&&n.repl.hostingDeployment.id,r=[];switch(n.provider){case f.r4.Goval:r.push({href:"https://".concat(t,".id.repl.co"),private:!0});break;case f.r4.Gce:case f.r4.CloudRun:case f.r4.Static:var i,o,l,c,u="HostingDeployment"===(null===(i=n.repl.hostingDeployment)||void 0===i?void 0:i.__typename)?null===(o=n.repl.hostingDeployment)||void 0===o?void 0:o.replitAppSubdomain:void 0;if(!u&&(null===(l=n.repl.owner)||void 0===l?void 0:l.username)&&(u="".concat(n.repl.slug,"-").concat(n.repl.owner.username)),u)r.push({href:"https://".concat(u).concat("replit.com"!==(null===window||void 0===window||null===(c=window.location)||void 0===c?void 0:c.hostname)?".canary":"",".replit.app"),private:!1})}if(n.repl.domains){var s=n.repl.domains.filter((function(e){return(null===e||void 0===e?void 0:e.hosting_deployment_id)===t})),d=!0,p=!1,h=void 0;try{for(var v,m=s[Symbol.iterator]();!(d=(v=m.next()).done);d=!0){var g=v.value;g&&r.push({href:"https://".concat(g.domain),private:!1,state:"verified"!==g.state?g.state:void 0})}}catch(y){p=!0,h=y}finally{try{d||null==m.return||m.return()}finally{if(p)throw h}}}a(r)}),[n]),(0,i.tZ)(c.G,{css:[l.l0.colWithGap(8),l.l0.flex.growAndShrink(1)],children:r.map((function(e,n){return(0,i.BX)(c.G,{css:[l.l0.rowWithGap(8),l.l0.align.center],children:[(0,i.tZ)(u.xv,{css:[l.l0.flex.shrink(1)],children:(0,i.tZ)("a",{href:e.href,target:"_blank",css:[l.l0.color.foregroundDefault],children:e.href})}),e.private?(0,i.tZ)(Z.Z,{color:l.TV.foregroundDefault}):null,(0,i.tZ)("a",{href:e.href,target:"_blank",css:[l.l0.display.flex,l.l0.align.center],children:(0,i.tZ)(y.Z,{color:l.TV.foregroundDefault})}),e.state?(0,i.BX)(u.xv,{children:["(",e.state,")"]}):null]},"domains-".concat(n))}))})},w=t(49622),x=t(3941),C=t(40306),k=t(65001),S=function(e){var n=e.hostingTier,t=e.canManage,r=e.onManageClick;return(0,i.tZ)(c.G,{css:[l.l0.colWithGap(4)],children:(0,i.BX)(c.G,{css:l.l0.rowWithGap(4),children:[(0,i.tZ)(u.xv,{children:"Pro"}),(0,i.BX)(u.xv,{color:"dimmest",children:["(",(0,w.$)(n.sku),")"]}),t?(0,i.tZ)("button",{css:[l.l0.cursor.pointer,l.l0.reset.button,l.l0.color.accentPrimaryStronger,{lineHeight:1.2,transitionProperty:"color, box-shadow",transitionDuration:x.H.duration,transitionTimingFunction:x.H.timingFunction,":not([disabled])":{cursor:"pointer","@media (hover: hover)":{":hover":{color:l.TV.accentPrimaryStrongest}},":not(textarea):active":{color:l.TV.accentPrimaryStronger}}}],onClick:r&&r,children:"Manage"}):null]})})},T=function(e){var n=e.hostingTier,t=e.onManageClick,r="function"===typeof t;return(0,i.BX)(c.G,{css:[l.l0.rowWithGap(4),l.l0.align.baseline,l.l0.justify.spaceBetween,l.l0.mb(12)],children:[(0,i.tZ)(u.xv,{color:"dimmest",children:"Tier"}),(0,i.tZ)(S,{hostingTier:n,canManage:r,onManageClick:t})]})},E=function(e){var n=e.label,t=e.children;return(0,i.BX)(c.G,{css:[l.l0.flex.row,l.l0.align.baseline,l.l0.mb(12)],children:[(0,i.tZ)(c.G,{css:l.l0.minWidth(100),children:(0,i.tZ)(u.xv,{css:[l.l0.color.greyStronger],children:n})}),t]})},R=function(e){var n=e.currentBuild,t=e.hostingTier,r=e.status,o=e.onManageClick,u=void 0!==t,d=void 0!==n,h="function"===typeof o,v=d&&!u,g=d&&null===n.hasImageTag,y=Boolean(h&&(r===p.pS.Ready||r===f.Fe.Suspended)&&!g&&d);return(0,i.BX)(c.G,{css:[l.l0.colWithGap(12)],children:[n?(0,i.BX)(i.HY,{children:[(0,i.BX)(E,{label:"Deployed",children:[(0,a.Z)(new Date(n.timeCreated),Date.now(),{addSuffix:!0})," ","by ",n.user.displayName]}),(0,i.tZ)(E,{label:"Status",children:(0,i.tZ)(m,{status:r===p.pS.Refetch?p.pS.Refetch:n.status})}),(0,i.tZ)(E,{label:"Domains",children:(0,i.tZ)(b,{currentBuild:n})})]}):null,u?(0,i.tZ)(E,{label:"Tier",children:(0,i.tZ)(S,{hostingTier:t,currentBuild:n,canManage:y,onManageClick:o})}):null,g&&h?(0,i.tZ)(c.G,{children:(0,i.tZ)(k.E,{icon:(0,i.tZ)(C.Z,{}),colorway:"warning",text:"To upgrade, please redeploy."})}):null,v&&h?(0,i.tZ)(s.zx,{onClick:h&&o,text:"Select hosting tier"}):null]})}},41256:function(e,n,t){t.d(n,{MX:function(){return f},uC:function(){return d}});var r=t(43119),i=t(71440);function o(){var e=(0,r.Z)(["\n  fragment ReplDomain2 on Domain {\n    hosting_deployment_id\n    domain\n    state\n  }\n"]);return o=function(){return e},e}function a(){var e=(0,r.Z)(["\n  fragment CustomDomain on Domain {\n    ...ReplDomain2\n  }\n  ","\n"]);return a=function(){return e},e}function l(){var e=(0,r.Z)(["\n  fragment TargetHostingDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,r.Z)(["\n  fragment CurrentBuild2 on HostingBuild {\n    id\n    description\n    status\n    timeCreated\n    hasImageTag\n    envVars {\n      name\n      value\n    }\n    repl {\n      id\n      slug\n      apexProxy\n      domains {\n        ... on Domain {\n          ...CustomDomain\n        }\n      }\n      owner {\n        ... on Team {\n          id\n          username\n        }\n        ... on User {\n          id\n          username\n        }\n      }\n      hostingDeployment {\n        ... on HostingDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n    }\n    provider\n    user {\n      id\n      displayName\n      username\n    }\n  }\n  ","\n  ","\n"]);return c=function(){return e},e}var u=(0,i.Ps)(o()),s=(0,i.Ps)(a(),u),d=(0,i.Ps)(l()),f=(0,i.Ps)(c(),s,d)},61848:function(e,n,t){t.d(n,{E:function(){return r},c:function(){return i}});var r="Procfile";function i(e){var n={};return e.split("\n").forEach((function(e){if(""!==e){var t=e.match(/^([A-Za-z0-9_]+):\s*(.+)$/);if(t){var r=t[2].trim().split(" "),i=t[1];n[i]={command:r[0],options:r.slice(1)}}}})),n}},6490:function(e,n,t){t.d(n,{K:function(){return o}});var r=t(50959),i=t(98314);function o(e){(0,r.useEffect)((function(){e((0,i.r)(),{captureDraggingState:!0})}),[e])}},49773:function(e,n,t){t.d(n,{f6:function(){return c},oj:function(){return l},xZ:function(){return s}});var r=t(2272),i=t(50959),o=t(8189);function a(e){var n=(0,r.Z)(i.useState(!1),2),t=n[0],a=n[1],l=(0,o.Z)().dotReplit;return i.useEffect((function(){var n=!1;return l.getConfig().then((function(t){n||t.error||t.config.language===e&&a(!0)})),function(){n=!0}}),[e,l]),t}function l(){return a("kaboom")}function c(){return a("kaboomdraw")}var u=/^draw.[tj]s$/;function s(e){return c()&&Boolean(null===e||void 0===e?void 0:e.match(u))}},51042:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(94370),i=t.n(r),o=t(8189),a=t(50959),l=t(6601),c=t(31296),u="You have unsaved changes";function s(){var e=(0,o.Z)().fs,n=(0,r.useRouter)(),t=(0,a.useRef)(!1),s=(0,a.useCallback)((function(){if(!t.current&&(e.getStatus()!==l.kO.Clean&&!window.confirm(u)))throw i().events.emit("routeChangeError"),new Error("Abort route change. Please ignore this error.")}),[e]);return(0,a.useEffect)((function(){var r=function(n){if(!t.current&&e.getStatus()!==l.kO.Clean)return n.preventDefault(),n.returnValue=u,u};return window.addEventListener("beforeunload",r),c.gn||n.events.on("routeChangeStart",s),function(){window.removeEventListener("beforeunload",r),c.gn||n.events.off("routeChangeStart",s)}}),[n.events,e,s]),function(e){return t.current=e}}},40792:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(2272),i=t(50959),o=t(72006),a=t(43119),l=t(71440),c=t(59187);function u(){var e=(0,a.Z)(["\n  mutation ReplFsUpdated($replId: String!) {\n    updateReplTimeUpdated(id: $replId) {\n      ... on Repl {\n        id\n        timeUpdated\n      }\n    }\n  }\n"]);return u=function(){return e},e}var s={},d=(0,l.Ps)(u());var f=t(57934),p=t(39771),h=t(8189);function v(){var e=(0,r.Z)(function(e){var n=(0,o.Z)({},s,e);return c.D(d,n)}(),1)[0],n=(0,h.Z)().fs,t=(0,p.Z)(),a=null===t||void 0===t?void 0:t.currentUserPermissions.containerWrite,l=null===t||void 0===t?void 0:t.id;(0,i.useEffect)((function(){if(a&&l){var t=(0,f.Z)((function(){return e({variables:{replId:l}})}),{wait:6e4,maxWait:6e5}),r=n.onStatusChange((function(){t()}));return function(){t.isScheduled()&&t.flush(),r()}}}),[n,l,a,e])}},9495:function(e,n,t){t.d(n,{T:function(){return o}});var r=t(8189),i=t(78457);function o(){var e=(0,r.Z)().toolchain;return(0,i.Z)(e.configs)}},41347:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(50959),i=t(30265);function o(){var e=(0,r.useRef)(0),n=(0,r.useState)(!1),t=n[0],o=n[1],a=(0,i.T3)(),l=window.visualViewport;return(0,r.useEffect)((function(){if(l&&a){var n=function(){var n=l.height<.8*e.current;o(n)};return e.current=l.height,l.addEventListener("resize",n),function(){l.removeEventListener("resize",n)}}}),[l,a]),t}},47453:function(e,n,t){t.d(n,{C:function(){return i},w:function(){return r}});var r=function(e){var n=parseInt(e.substring(1),16);return[n>>16&255,n>>8&255,255&n]},i=function(e,n,t){return"#"+e.toString(16)+n.toString(16)+t.toString(16)}},40396:function(e,n,t){t.d(n,{o:function(){return r},p:function(){return i}});var r=function(e){var n=new Date(e),t=n.getHours(),r=n.getMinutes(),o="AM";return t>=12&&(o="PM"),0===(t%=12)&&(t="12"),r<10&&(r="0"+r),i(e)+" ".concat(t,":").concat(r," ").concat(o)},i=function(e){var n=new Date(e),t=n.getMonth()+1,r=n.getDate(),i=n.getFullYear();return"".concat(t,"/").concat(r,"/").concat(i)}},83886:function(e,n,t){t.d(n,{Sf:function(){return l},UP:function(){return c},eC:function(){return a}});var r=t(37248),i={js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",go:"go"},o={rs:"rust",lsp:"lisp",sh:"bash",cpp:"c++",hs:"haskell",go:"go",rb:"ruby",md:"markdown"};function a(e){if(!e)return!1;var n=(0,r.r6)(e);return Boolean(i[n])}function l(e){var n=(0,r.r6)(e);return Object.prototype.hasOwnProperty.call(i,n)?i[n]:Object.prototype.hasOwnProperty.call(o,n)?o[n]:n}function c(e){var n=(0,r.r6)(e);return i[n]?i[n]:"unknown"}},94635:function(e,n,t){function r(e){if(!e)return!1;try{var n=new URL(e);return Boolean(n)}catch(t){return!1}}t.d(n,{Z:function(){return r}})},71573:function(e,n,t){t.d(n,{Rf:function(){return c},jv:function(){return a},yR:function(){return l}});var r=t(50959),i=t(35652),o=t(98689);function a(e,n,t){var a=(0,o.Z)(t);(0,r.useLayoutEffect)((function(){var t=function(n){var t=a.current(n);null!==t&&(0,i.A)(e,t)};return t(n.current),(0,i.p)(e),n.subscribe(t)}),[e,n,a])}function l(e,n){a(e,n,(function(e){return e?{width:e.width+"px",height:e.height+"px"}:null}))}function c(e,n){a(e,n,(function(e){return e?{transform:"translate(".concat(Math.round(e.x),"px, ").concat(Math.round(e.y),"px)")}:null}))}},35652:function(e,n,t){t.d(n,{A:function(){return l},p:function(){return c}});var r=t(66091),i=t(2272),o=new(function(){function e(){(0,r.Z)(this,e),this.map=new Map}var n=e.prototype;return n.getOrInit=function(e){var n=this.map.get(e);return n||(n=new Map,this.map.set(e,n)),n},n.add=function(e,n,t){this.getOrInit(e).set(n,t)},n.flush=function(){var e=!0,n=!1,t=void 0;try{for(var r,o=this.map[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=(0,i.Z)(r.value,2),l=a[0],c=a[1];if(l&&"current"in l&&(l=l.current),l){var u=!0,s=!1,d=void 0;try{for(var f,p=c[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=(0,i.Z)(f.value,2),v=h[0],m=h[1];l.style.setProperty(v,m)}}catch(g){s=!0,d=g}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}}}}catch(g){n=!0,t=g}finally{try{e||null==o.return||o.return()}finally{if(n)throw t}}this.map.clear()},n.flushNode=function(e){if(e){var n=e,t=this.map.get(n);if(t&&(e&&"current"in e&&(e=e.current),e)){var r=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=(0,i.Z)(l.value,2),s=u[0],d=u[1];e.style.setProperty(s,d)}}catch(f){o=!0,a=f}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}this.map.delete(n)}}},e}()),a=!1;function l(e,n,t){if(null!==e){if("string"===typeof n){if(void 0===t)throw new Error("value is undefined when prop is string");o.add(e,n,t)}else for(var r in n)o.add(e,r,n[r]);a||(a=!0,requestAnimationFrame((function(){o.flush(),a=!1})))}}function c(e){o.flushNode(e)}},20459:function(e,n,t){t.d(n,{HM:function(){return w},JT:function(){return g},U4:function(){return h},Y8:function(){return v},fS:function(){return Z}});var r=t(72006),i=t(43119),o=t(71440),a=t(67216),l=t(59187);function c(){var e=(0,i.Z)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment MultiplayerReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...MultiplayerUser\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query MultiplayerManageTeamMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        currentUserPermissions {\n          editMultiplayers\n          inviteGuests\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation MultiplayerManageTeamMultiplayersAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation MultiplayerManageTeamMultiplayersRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}var p={},h=(0,o.Ps)(c()),v=(0,o.Ps)(u(),h),m=(0,o.Ps)(s(),v,h);function g(e){var n=(0,r.Z)({},p,e);return a.a(m,n)}var y=(0,o.Ps)(d(),h,v);function Z(e){var n=(0,r.Z)({},p,e);return l.D(y,n)}var b=(0,o.Ps)(f(),h,v);function w(e){var n=(0,r.Z)({},p,e);return l.D(b,n)}},95881:function(e,n,t){t.d(n,{Ej:function(){return G},Gk:function(){return T},L1:function(){return b},QN:function(){return k},Sv:function(){return R},X6:function(){return x}});var r=t(72006),i=t(43119),o=t(71440),a=t(20459),l=t(67216),c=t(59187);function u(){var e=(0,i.Z)(["\n  fragment MultiplayerControlUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment MultiplayerControlReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...MultiplayerControlUser\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment MultiplayerControlEmailInviteReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      image\n      username\n      url\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  query MultiplayerControl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        currentUserPermissions {\n          editMultiplayers\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation MultiplayerControlAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        id\n        ...MultiplayerControlUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerControlReplPermission\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation MultiplayerControlRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerControlUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerControlReplPermission\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation MultiplayerControlCreateMultiplayerInvite(\n    $replId: String!\n    $email: String!\n    $type: String!\n  ) {\n    createMultiplayerInvite2(replId: $replId, email: $email, type: $type) {\n      ... on MultiplayerInvite {\n        email\n        repl {\n          id\n          permissions {\n            id\n            ...MultiplayerReplPermission\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on ReplPermission {\n        id\n        ...MultiplayerControlEmailInviteReplPermission\n      }\n    }\n  }\n  ","\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation MultiplayerControlDeleteMultiplayerInvite(\n    $replId: String!\n    $email: String!\n  ) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          permissions {\n            id\n            ...MultiplayerReplPermission\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},y=(0,o.Ps)(u()),Z=(0,o.Ps)(s(),y),b=(0,o.Ps)(d()),w=(0,o.Ps)(f(),a.Y8);function x(e){var n=(0,r.Z)({},g,e);return l.a(w,n)}var C=(0,o.Ps)(p(),y,Z);function k(e){var n=(0,r.Z)({},g,e);return c.D(C,n)}var S=(0,o.Ps)(h(),y,Z);function T(e){var n=(0,r.Z)({},g,e);return c.D(S,n)}var E=(0,o.Ps)(v(),a.Y8,b);function R(e){var n=(0,r.Z)({},g,e);return c.D(E,n)}var I=(0,o.Ps)(m(),a.Y8);function G(e){var n=(0,r.Z)({},g,e);return c.D(I,n)}},40097:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(2272),i=t(9970),o=t(4541),a=t(1235),l=t(46598),c=t(30265),u=t(35701),s=t(91355),d=t(3668),f=t(22167),p=t(37676),h=t(55544),v=t(25776),m=t(24403),g=t(51609),y=t(27396),Z=t(62830),b=t(94370),w=t(50959),x=t(14948),C=t(95881),k=t(42482);function S(e){var n=e.replId,t=(0,b.useRouter)(),S=(0,c.Vg)(t),T=(0,C.X6)({variables:{replId:n},pollInterval:8e3}),E=T.data,R=T.loading,I=(0,l.Z)(),G=I.showConfirm,D=I.showError,_=(0,r.Z)(w.useState(!1),2),P=_[0],B=_[1],A=(0,r.Z)((0,C.QN)({onCompleted:function(e){var t,r=null===(t=e.addMultiplayerUser.user)||void 0===t?void 0:t.username;r&&((0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"username"}),G("Added @".concat(r)))}}),2),U=A[0],N=A[1],L=(0,r.Z)((0,C.Gk)({onError:function(e){return D(e.message)},onCompleted:function(e){var n,t=null===(n=e.removeMultiplayerUser.user)||void 0===n?void 0:n.username;t&&G("".concat(t," removed"))}}),2),X=L[0],M=L[1],O=(0,r.Z)((0,C.Sv)({update:function(e,t){var r,o=null===(r=t.data)||void 0===r?void 0:r.createMultiplayerInvite2;if(o)if("UserError"!==o.__typename){if("MultiplayerInvite"===o.__typename){var a=o.email;return(0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"}),void G("Invited ".concat(a," via email"))}if("ReplPermission"===o.__typename){var l;e.modify({id:e.identify({__typename:"Repl",id:n}),fields:{permissions:function(n){var t=e.writeFragment({data:o,fragment:C.L1});return(0,i.Z)(n).concat([t])}}});var c=null===(l=o.user)||void 0===l?void 0:l.username;if(!c)return;(0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"}),G("Invited @".concat(c))}}else D(o.message)}}),2),F=O[0],W=O[1],H=(0,r.Z)((0,C.Ej)({onError:function(e){return D(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var n=e.deleteMultiplayerInvite.email;G("invite for ".concat(n," deleted"))}}else D(e.deleteMultiplayerInvite.message)}}),2),z=H[0],V=H[1];w.useEffect((function(){var e=N.error||W.error;e&&(e.message.includes("reached the limit")?S?D("You have reached the invite limit for a free account, visit https://replit.com/pricing to upgrade."):B(!0):D(e.message))}),[N.error,W.error,D,S]);var j="Repl"===(null===E||void 0===E?void 0:E.repl.__typename)?E.repl:null,q=null===E||void 0===E?void 0:E.currentUser,$=null===j||void 0===j?void 0:j.permissions.reduce((function(e,n){return n.user?(0,i.Z)(e).concat([n.user.username]):e}),[]),Y=null===j||void 0===j?void 0:j.currentUserPermissions.editMultiplayers,K=Boolean(j&&!j.permissions.length&&!j.multiplayerInvites.length),Q=(null===j||void 0===j?void 0:j.permissions)?j.permissions.length:null;return(0,o.BX)(p.T,{background:"default",css:{color:f.TV.foregroundDefault},children:[(0,o.BX)(v.G,{css:[f.l0.flex.column,f.l0.colWithGap(8),f.l0.align.stretch],children:[Y&&$&&j?(0,o.tZ)(v.G,{children:(0,o.tZ)(k.Z,{existingUsernames:$,onSubmit:function(e){!!!e.match(/.+@.+/)||W.loading?N.loading||U({variables:{username:e,replId:j.id,type:"rw"}}):F({variables:{email:e,replId:j.id,type:"rw"}})}})}):null,(0,o.BX)(v.G,{css:[f.l0.flex.row,f.l0.rowWithGap(4),f.l0.align.center],children:[(0,o.BX)(h.xv,{variant:"subheadDefault",children:[null!==Q&&(null===q||void 0===q?void 0:q.isSubscribed)?"".concat((0,u.Z)("multiplayer",Q,!0)):null,null===Q||(null===q||void 0===q?void 0:q.isSubscribed)?null:"".concat(Q,"/").concat(x.z," ").concat((0,u.Z)("multiplayer",Q))," "]}),R||(null===q||void 0===q?void 0:q.isSubscribed)||S?null:(0,o.tZ)(d.h,{alt:"Click to upgrade for unlimited invites",onClick:function(){return B(!0)},children:(0,o.tZ)(g.Z,{})}),R?(0,o.tZ)(h.xv,{children:"Loading..."}):null]}),K?(0,o.BX)(v.G,{css:[f.l0.flex.row,f.l0.rowWithGap(8),f.l0.center,f.l0.borderRadius(8),{maxHeight:200,border:"solid 1px ".concat(f.TV.outlineDimmest)}],children:[(0,o.tZ)(h.xv,{children:"No one else is here"}),(0,o.tZ)("img",{src:"/public/images/rainy-computer.png",alt:"raindrops falling onto an open laptop",style:{height:200}})]}):(0,o.BX)(v.G,{css:[f.l0.backgroundColor.backgroundDefault,f.l0.borderRadius(8),f.l0.p(8),f.l0.flex.column,f.l0.colWithGap(8),{border:"solid 1px ".concat(f.TV.outlineDimmest),maxHeight:200,overflowY:"auto"}],children:[null===j||void 0===j?void 0:j.permissions.map((function(e){var t=e.user,r=e.type;return t?(0,o.BX)(v.G,{css:[f.l0.flex.row,f.l0.rowWithGap(8),f.l0.align.center],children:[(0,o.tZ)(a.Z,{size:"s",url:t.image}),(0,o.BX)(h.xv,{children:[t.username," "]}),(0,o.tZ)(h.xv,{color:"dimmest",children:r===Z.aQ.Rw?" (can edit)":null}),(0,o.tZ)(v.G,{css:[f.l0.flex.grow(1)]}),j.currentUserPermissions.editMultiplayers?(0,o.tZ)(d.h,{alt:"Remove member",onClick:function(){M.loading||X({variables:{replId:n,username:t.username}})},children:(0,o.tZ)(m.Z,{size:12})}):null]},t.id):null})),null===j||void 0===j?void 0:j.multiplayerInvites.map((function(e){return(0,o.BX)(v.G,{css:[f.l0.flex.row,f.l0.rowWithGap(8),f.l0.align.center],children:[(0,o.tZ)(a.Z,{size:"s"}),(0,o.BX)(h.xv,{children:[e.email," "]}),(0,o.tZ)(h.xv,{color:"dimmest",children:" (pending)"}),(0,o.tZ)(v.G,{css:[f.l0.flex.grow(1)]}),Y?(0,o.tZ)(d.h,{alt:"Remove member",onClick:function(){V.loading||z({variables:{replId:n,email:e.email}})},children:(0,o.tZ)(m.Z,{})}):null]},e.email)}))]})]}),(0,o.tZ)(y.Z,{isOpen:P,initialTab:"plans",context:"workspace_multiplayer_header",onRequestClose:function(){B(!1)}})]})}},65895:function(e,n,t){t.d(n,{QN:function(){return v},hA:function(){return p},oo:function(){return g}});var r=t(72006),i=t(43119),o=t(71440),a=t(67216),l=t(59187);function c(){var e=(0,i.Z)(["\n  query MultiplayerInviteUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation MultiplayerRefreshInviteUrl($replId: String!) {\n    refreshMultiplayerInviteLink(replId: $replId) {\n      id\n      ... on Repl {\n        id\n        inviteUrl\n      }\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  mutation DeleteMultiplayerInviteUrl($replId: String!) {\n    deleteMultiplayerInviteLink(replId: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return s=function(){return e},e}var d={},f=(0,o.Ps)(c());function p(e){var n=(0,r.Z)({},d,e);return a.a(f,n)}var h=(0,o.Ps)(u());function v(e){var n=(0,r.Z)({},d,e);return l.D(h,n)}var m=(0,o.Ps)(s());function g(e){var n=(0,r.Z)({},d,e);return l.D(m,n)}},91197:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(2272),i=t(4541),o=t(50959),a=t(98260),l=t(25776),c=t(22167),u=t(3668),s=t(37676),d=t(42735),f=t(55544),p=t(46598),h=t(65895),v=t(51609),m=t(24403),g=t(35238);function y(e){var n,t,y,Z=e.replId,b=(0,p.Z)(),w=b.showConfirm,x=b.showError,C=(0,h.hA)({variables:{replId:Z}}),k=C.data,S=C.loading,T=C.error,E=(0,r.Z)((0,h.QN)({variables:{replId:Z},onError:function(e){return x(e.message)}}),2),R=E[0],I=E[1],G=(0,r.Z)((0,h.oo)({variables:{replId:Z},optimisticResponse:{deleteMultiplayerInviteLink:{id:Z,inviteUrl:null,__typename:"Repl"},__typename:"RootMutationType"},onError:function(e){return x(e.message)},onCompleted:function(e){"UserError"!==e.deleteMultiplayerInviteLink.__typename?"Repl"===e.deleteMultiplayerInviteLink.__typename&&w("Join link deleted"):x(e.deleteMultiplayerInviteLink.message)}}),2),D=G[0],_=G[1],P=I.loading||_.loading,B=o.useRef(null),A="Repl"===(null===k||void 0===k||null===(n=k.repl)||void 0===n?void 0:n.__typename)&&"Team"===(null===(t=k.repl.owner)||void 0===t?void 0:t.__typename),U="Repl"===(null===k||void 0===k||null===(y=k.repl)||void 0===y?void 0:y.__typename)&&k.repl.inviteUrl?window.location.origin+k.repl.inviteUrl:null;o.useEffect((function(){I.error&&x(I.error.message)}),[I.error,I.data,Z,x]);var N=function(){B&&B.current&&B.current.select()},L=function(){return(0,i.tZ)(u.h,{alt:"Anyone on the internet with this link can join and edit this Repl",children:(0,i.tZ)(v.Z,{})})};return S?(0,i.tZ)(f.xv,{children:"loading..."}):T?(0,i.tZ)(f.xv,{children:"Error: please contact support"}):U?(0,i.BX)(l.G,{css:[c.l0.flex.column,c.l0.colWithGap(4),c.l0.align.stretch],children:[(0,i.tZ)(f.xv,{color:"dimmer",variant:"small",children:(0,i.BX)(l.G,{css:[c.l0.flex.row,c.l0.rowWithGap(4),c.l0.align.center],children:["Invite ",A?"guests":"friends"," with a join link",L()]})}),(0,i.BX)(l.G,{css:[c.l0.flex.row,c.l0.rowWithGap(8),c.l0.align.center],children:[(0,i.tZ)(l.G,{css:[c.l0.flex.row,c.l0.flex.grow(1)],children:(0,i.tZ)(d.II,{ref:B,readOnly:!0,onChange:function(){return null},value:P?"loading...":U,onClick:N})}),(0,i.tZ)(u.h,{alt:"Copy",onClick:function(){N(),document.execCommand("copy"),w("Link copied")},colorway:"primary",children:(0,i.tZ)(g.Z,{})}),(0,i.tZ)(u.h,{alt:"Delete link",colorway:"negative",onClick:function(e){P||D()},children:(0,i.tZ)(m.Z,{})})]}),(0,i.BX)(f.xv,{variant:"small",color:"dimmer",children:[(0,i.tZ)("a",{onKeyDown:function(e){e.preventDefault(),P||R()},role:"button",tabIndex:0,onClick:function(e){e.preventDefault(),P||R()},children:"Generate a new link"})," ","(The current one will stop working)"]})]}):(0,i.tZ)(s.T,{elevated:!0,background:"default",css:[c.l0.flex.row,c.l0.pt(8)],children:(0,i.tZ)(a.zx,{onClick:function(){P||R()},text:"Generate a join link",iconRight:L(),css:{width:"100%"}})})}},49686:function(e,n,t){t.d(n,{sk:function(){return f},zq:function(){return s}});var r=t(72006),i=t(43119),o=t(71440),a=t(67216);function l(){var e=(0,i.Z)(["\n  fragment MultiplayerUsernameSearchUser on User {\n    id\n    firstName\n    lastName\n    username\n    image\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query MultiplayerUsernameSearch($query: String!, $limit: Int) {\n    usernameSearch(query: $query, limit: $limit) {\n      id\n      ...MultiplayerUsernameSearchUser\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function f(e){var n=(0,r.Z)({},u,e);return a.a(d,n)}},42482:function(e,n,t){t.d(n,{Z:function(){return w}});var r=t(72006),i=t(4405),o=t(2272),a=t(4541),l=t(95980),c=t.n(l),u=t(50959),s=t(97754),d=t.n(s),f=t(21371),p=t(59645),h=t(98260),v=t(4981),m=t(49686),g=t(46598),y=t(26430),Z=t(75916),b=t(1235);function w(e){var n=e.onSubmit,t=e.existingUsernames,l=e.isDisabled,s=e.onChange,w=e.placeholder,x=(0,o.Z)(u.useState(""),2),C=x[0],k=x[1],S=!!C.match(/.+@.+/),T=(0,v.Z)(C.trim().replace(/^@/,""),250),E=(0,m.sk)({skip:!T||S,variables:{query:T,limit:6}}),R=E.data,I=E.loading,G=E.error,D=(0,g.Z)().showError;u.useEffect((function(){G&&D(G.message)}),[G,D]);var _=null===R||void 0===R?void 0:R.usernameSearch;return(0,a.BX)("form",{onSubmit:function(e){e.preventDefault(),n(C),k("")},className:"jsx-d408485a86637a91",children:[(0,a.BX)("div",{className:"jsx-d408485a86637a91 form-content",children:[(0,a.tZ)(f.ZP,{onChange:function(e){e&&k(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var o=e.getInputProps,l=e.getItemProps,c=e.getMenuProps,u=e.isOpen,f=e.highlightedIndex;return(0,a.BX)("div",{className:"jsx-d408485a86637a91 dropdown",children:[(0,a.tZ)(p.ZP,(0,r.Z)({},o({ref:null,value:C,onChange:function(e){k(e.currentTarget.value),null===s||void 0===s||s(e.currentTarget.value)},placeholder:null!==w&&void 0!==w?w:"Search by username or invite by email",autoComplete:"off",onKeyDown:function(e){"Enter"===e.key&&C.match(/.+@.+/)&&(n(C),k(""),e.currentTarget.blur())}}))),(0,a.BX)("div",(0,i.Z)((0,r.Z)({},c()),{className:"jsx-d408485a86637a91",children:[u&&_&&_.length?(0,a.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu",children:_.map((function(e,n){return(0,a.tZ)("div",(0,i.Z)((0,r.Z)({},l({item:e,index:n})),{className:"jsx-d408485a86637a91 "+(d()("result",{"is-active":f===n})||""),children:(0,a.BX)(y.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(b.Z,{size:"s",url:e.image}),(0,a.tZ)("div",{className:"jsx-d408485a86637a91",children:e.username}),t.includes(e.username)?(0,a.tZ)("div",{className:"jsx-d408485a86637a91 check-icon",children:(0,a.tZ)(Z.Z,{})}):null]})}),e.username)}))}):null,u&&I?(0,a.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-loading",children:"loading..."}):null,u&&_&&0===_.length?(0,a.BX)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-empty",children:['no results found for "',C,'"']}):null]}))]})}}),(0,a.tZ)("div",{className:"jsx-d408485a86637a91",children:(0,a.tZ)(h.zx,{colorway:"primary",type:"submit",disabled:l||!C,text:"Invite"})})]}),(0,a.tZ)(c(),{id:"d408485a86637a91",children:".form-content.jsx-d408485a86637a91{display:grid;position:relative;width:100%;grid-template-columns:1fr auto;grid-column-gap:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.dropdown.jsx-d408485a86637a91{position:relative;z-index:5}.dropdown-menu.jsx-d408485a86637a91{position:absolute;z-index:1;top:100%;left:0;width:100%;background-color:var(--background-default);border:1px solid var(--foreground-dimmest);border-top:0 none;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);max-height:300px;overflow:auto}.dropdown-menu.is-loading.jsx-d408485a86637a91,.dropdown-menu.is-empty.jsx-d408485a86637a91{color:var(--foreground-dimmer);padding:var(--space-8)}.dropdown.jsx-d408485a86637a91:focus-within .dropdown-menu.jsx-d408485a86637a91{border-color:var(--accent-primary-default)}.spacer.jsx-d408485a86637a91{width:var(--space-8);pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.result.jsx-d408485a86637a91{cursor:pointer;padding:var(--space-8)var(--space-16)}.result.jsx-d408485a86637a91:hover,.is-active.jsx-d408485a86637a91{background-color:var(--accent-primary-dimmer)}.check-icon.jsx-d408485a86637a91{margin-left:auto;color:var(--accent-positive-default)}"})]})}},54574:function(e,n,t){t.d(n,{Z:function(){return k}});var r=t(2272),i=t(4541),o=(t(50959),t(25776)),a=t(22167),l=t(37676),c=t(42735),u=t(55544),s=t(57004),d=t(89853),f=t(36291),p=t(46598),h=t(65895),v=t(62374),m=t(89145),g=t(35238),y=t(97774),Z=t(40306),b=t(37195),w=t(91355),x=(0,d.X)({container:[a.l0.colWithGap(12),a.l0.px(16),a.l0.pt(12),{borderTop:"solid 1px ".concat(a.TV.outlineDimmest)}],header:[a.l0.flex.row,a.l0.justify.spaceBetween],globeIconContainer:[a.l0.width(40),a.l0.height(40),a.l0.backgroundColor.accentPrimaryDimmer,a.l0.borderRadius("full"),a.l0.align.center,a.l0.justify.center],title:[a.l0.fontWeight.medium],loading:[a.l0.rowWithGap(4),a.l0.align.center],inviteUrlContainer:[a.l0.borderRadius(8),a.l0.flex.row],input:[a.l0.borderRadius(8,0,0,8),a.l0.color.foregroundDimmer],copyToClipboard:[a.l0.borderRadius(0,8,8,0)],titleGroup:[a.l0.rowWithGap(12)]}),C=function(){return(0,i.BX)(o.G,{css:x.titleGroup,children:[(0,i.tZ)(o.G,{css:x.globeIconContainer,children:(0,i.tZ)(v.Z,{color:a.TV.accentPrimaryStrongest,size:20})}),(0,i.BX)(o.G,{children:[(0,i.tZ)(u.xv,{css:x.title,id:"link-switch-label",children:"Private join link"}),(0,i.tZ)(u.xv,{variant:"small",color:"dimmest",children:"Anyone with this link can edit files"})]})]})};function k(e){var n,t,d,v,k,S,T,E,R=e.replId,I=(0,p.Z)(),G=I.showConfirm,D=I.showError,_=(0,h.hA)({variables:{replId:R}}),P=_.data,B=_.loading,A=_.error,U=_.refetch,N=(0,r.Z)((0,h.QN)({variables:{replId:R},onError:function(e){return D(e.message)},onCompleted:function(){return G("Join link created")}}),2),L=N[0],X=N[1],M=(0,r.Z)((0,h.oo)({variables:{replId:R},optimisticResponse:{deleteMultiplayerInviteLink:{id:R,inviteUrl:null,__typename:"Repl"},__typename:"RootMutationType"},onError:function(e){return D(e.message)},onCompleted:function(e){"UserError"!==e.deleteMultiplayerInviteLink.__typename?"Repl"===e.deleteMultiplayerInviteLink.__typename&&G("Join link deleted"):D(e.deleteMultiplayerInviteLink.message)}}),2),O=M[0],F=M[1],W="Repl"===(null===P||void 0===P||null===(n=P.repl)||void 0===n?void 0:n.__typename)?P.repl:null,H=X.loading||F.loading,z="Repl"===(null===P||void 0===P||null===(t=P.repl)||void 0===t?void 0:t.__typename)&&"Team"===(null===W||void 0===W||null===(d=W.owner)||void 0===d?void 0:d.__typename),V="Repl"===(null===P||void 0===P||null===(v=P.repl)||void 0===v?void 0:v.__typename)&&"Team"===(null===W||void 0===W||null===(k=W.owner)||void 0===k?void 0:k.__typename)&&(null===(S=null===W||void 0===W?void 0:W.owner.capabilities)||void 0===S?void 0:S.isBusinessPlan)&&(null===(T=null===W||void 0===W?void 0:W.owner.capabilities)||void 0===T?void 0:T.hasValidSubscription),j="Repl"===(null===P||void 0===P||null===(E=P.repl)||void 0===E?void 0:E.__typename)&&(null===W||void 0===W?void 0:W.inviteUrl)?window.location.origin+(null===W||void 0===W?void 0:W.inviteUrl):null;return B||z&&!V?null:A?(0,i.BX)(o.G,{css:x.container,children:[(0,i.BX)(o.G,{css:x.header,children:[(0,i.tZ)(C,{}),(0,i.tZ)(s.r,{isSelected:!1,isDisabled:!0,"aria-labelledby":"link-switch-label"})]}),(0,i.tZ)(f.u,{css:[a.l0.textAlign.left],icon:(0,i.tZ)(Z.Z,{color:a.TV.accentNegativeStrongest}),colorway:"negative",text:"Error loading join link. Click here to try again, or contact support.",onClick:function(){return U({replId:R})}})]}):(0,i.BX)(o.G,{css:x.container,children:[(0,i.BX)(o.G,{css:x.header,children:[(0,i.tZ)(C,{}),B?(0,i.BX)(o.G,{css:x.loading,children:[(0,i.tZ)(y.Z,{color:a.TV.foregroundDimmer}),(0,i.tZ)(u.xv,{color:"dimmer",children:"Loading..."})]}):(0,i.tZ)(s.r,{isSelected:!!j,isDisabled:H,onChange:function(e){H||(e?L():O())},"aria-labelledby":"link-switch-label"})]}),!B&&j?(0,i.BX)(i.HY,{children:[(0,i.BX)(l.T,{css:x.inviteUrlContainer,children:[(0,i.tZ)(c.II,{type:"url",readOnly:!0,disabled:!0,value:H?"Loading...":j,css:x.input}),(0,i.tZ)(m.m,{textToCopy:j,onClick:function(){j?((0,b.Z)(j),(0,w.j)(w.U3.JOIN_LINK_COPIED,{replId:null===W||void 0===W?void 0:W.id,isTeamRepl:z,source:"replEnvironment"}),G("Link copied")):D("Could not copy link")},tooltip:"Copied to clipboard",text:"Copy join link",iconLeft:(0,i.tZ)(g.Z,{}),css:x.copyToClipboard,colorway:"primary",disabled:H})]}),(0,i.tZ)(o.G,{children:(0,i.BX)(u.xv,{color:"dimmer",variant:"small",children:["Want to revoke access to this link?"," ",(0,i.tZ)("a",{css:a.l0.linkStyle,role:"button",tabIndex:0,onKeyDown:function(e){if("Enter"===e.key){if(e.preventDefault(),H)return;L()}},onClick:function(e){e.preventDefault(),H||L()},children:"Generate a new link"})]})})]}):null]})}},64406:function(e,n,t){t.d(n,{Jh:function(){return C},RJ:function(){return E},U:function(){return w},dE:function(){return g},mH:function(){return Z},z8:function(){return S}});var r=t(72006),i=t(43119),o=t(71440),a=t(67216),l=t(59187);function c(){var e=(0,i.Z)(["\n  fragment MultiplayerManagerUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment MultiplayerManagerEmailInviteReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      image\n      username\n      url\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query MultiplayerManager($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n        currentUserPermissions {\n          editMultiplayers\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        ...MultiplayerManagerUser\n      }\n      repl {\n        id\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerManagerUser\n      }\n      repl {\n        id\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerCreateMultiplayerInvite(\n    $replId: String!\n    $email: String!\n    $type: String!\n  ) {\n    createMultiplayerInvite2(replId: $replId, email: $email, type: $type) {\n      ... on MultiplayerInvite {\n        email\n        repl {\n          id\n          multiplayers {\n            ...MultiplayerManagerUser\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on ReplPermission {\n        id\n        ...MultiplayerManagerEmailInviteReplPermission\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerDeleteMultiplayerInvite(\n    $replId: String!\n    $email: String!\n  ) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          multiplayers {\n            ...MultiplayerManagerUser\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var v={},m=(0,o.Ps)(c()),g=(0,o.Ps)(u()),y=(0,o.Ps)(s(),m);function Z(e){var n=(0,r.Z)({},v,e);return a.a(y,n)}var b=(0,o.Ps)(d(),m);function w(e){var n=(0,r.Z)({},v,e);return l.D(b,n)}var x=(0,o.Ps)(f(),m);function C(e){var n=(0,r.Z)({},v,e);return l.D(x,n)}var k=(0,o.Ps)(p(),m,g);function S(e){var n=(0,r.Z)({},v,e);return l.D(k,n)}var T=(0,o.Ps)(h(),m);function E(e){var n=(0,r.Z)({},v,e);return l.D(T,n)}},54938:function(e,n,t){t.d(n,{_U:function(){return R},ln:function(){return I}});var r=t(2272),i=t(9970),o=t(4541),a=t(63202),l=t(36828),c=t(46598),u=t(30265),s=t(91355),d=t(32045),f=t(64444),p=t(37676),h=t(55544),v=t(25776),m=t(22167),g=t(74043),y=t(97774),Z=t(94370),b=t(50959),w=t(14948),x=t(64406),C=t(79274),k=t(23803),S=t(14709),T=t.n(S);function E(e,n){return n.some((function(n){return n.id===e}))}var R={root:[m.l0.color.foregroundDefault,m.l0.flex.column,m.l0.colWithGap(12),m.l0.align.stretch,m.l0.flex.growAndShrink(1)],header:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.center,m.l0.px(16)],header_mobile:[m.l0.px(0)],titleContainer:[m.l0.flex.row,m.l0.rowWithGap(4),m.l0.align.center],limitsContainer:[m.l0.align.center,m.l0.rowWithGap(8)],loading:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.grow(1),m.l0.justify.center],measureBar:[m.l0.height(8),m.l0.width(60)],searchContainer:[m.l0.px(16),m.l0.position.relative,m.l0.maxHeight(32)],userList:[m.l0.flex.column,m.l0.colWithGap(16),m.l0.scrollbar.thin,m.l0.position.relative,m.l0.overflowY("auto"),m.l0.flex.growAndShrink(1),m.l0.pb(8),{maxHeight:300,"::-webkit-scrollbar-thumb":[m.l0.backgroundColor.backgroundHighest,m.l0.borderRadius(4)],scrollbarColor:"".concat(m.TV.backgroundDefault," ").concat(m.TV.backgroundHighest)}],userGroup:{root:[m.l0.colWithGap(8)],titleContainer:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.px(16)],title:[m.l0.fontWeight.medium]},emptyContainer:[m.l0.position.relative,m.l0.flex.row,m.l0.rowWithGap(12),m.l0.pt(8),m.l0.center,m.l0.px(16),{maxHeight:220,borderBottom:"solid 1px ".concat(m.TV.outlineDimmest)}],emptyImg:[m.l0.width("100%"),m.l0.height(180),m.l0.position.relative,m.l0.maxWidth(160),{alignSelf:"end",userSelect:"none",pointerEvents:"none"},{"> div":{position:"unset !important"},".image":{objectFit:"contain",width:"100% !important",position:"relative !important",height:"unset !important"}}]},I=function(e){var n=e.title,t=e.count,r=e.color;return(0,o.BX)(v.G,{css:R.userGroup.titleContainer,children:[(0,o.tZ)(g.Z,{color:r,size:6}),(0,o.tZ)(h.xv,{variant:"small",css:R.userGroup.title,children:n}),(0,o.tZ)(h.xv,{variant:"small",color:"dimmest",css:R.userGroup.title,children:t})]})};n.ZP=function(e){var n=e.replId,t=e.handleUpgradeTriggered,g=(0,Z.useRouter)(),S=(0,u.Vg)(g),G=(0,c.Z)(),D=G.showConfirm,_=G.showError,P=(0,k.aG)(),B=(0,x.mH)({variables:{replId:n},pollInterval:8e3}),A=B.data,U=B.loading,N=(0,r.Z)((0,x.U)({onCompleted:function(e){var t,r=null===(t=e.addMultiplayerUser.user)||void 0===t?void 0:t.username;r&&((0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"username"}),D("Added @".concat(r)))}}),2),L=N[0],X=N[1],M=(0,r.Z)((0,x.z8)({update:function(e,t){var r,o=null===(r=t.data)||void 0===r?void 0:r.createMultiplayerInvite2;if(o)if("UserError"!==o.__typename){if("MultiplayerInvite"===o.__typename){var a=o.email;return(0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"}),void D("Invited ".concat(a," via email"))}if("ReplPermission"===o.__typename){var l;e.modify({id:e.identify({__typename:"Repl",id:n}),fields:{permissions:function(n){var t=e.writeFragment({data:o,fragment:x.dE});return(0,i.Z)(n).concat([t])}}});var c=null===(l=o.user)||void 0===l?void 0:l.username;if(!c)return;(0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"}),D("Invited @".concat(c))}}else _(o.message)}}),2),O=M[0],F=M[1];(0,b.useEffect)((function(){var e=X.error||F.error;e&&(e.message.includes("reached the limit")?S?_("You have reached the invite limit for a free account, visit https://replit.com/pricing to upgrade."):t&&t(!0):_(e.message))}),[X.error,F.error,_,S,t]);var W="Repl"===(null===A||void 0===A?void 0:A.repl.__typename)?A.repl:null,H=null===A||void 0===A?void 0:A.currentUser,z=null===W||void 0===W?void 0:W.multiplayers.reduce((function(e,n){return(0,i.Z)(e).concat([n.username])}),[]),V=(null===W||void 0===W?void 0:W.currentUserPermissions.editMultiplayers)||!1,j=Boolean(W&&!W.multiplayers.length&&!W.multiplayerInvites.length),q=null===W||void 0===W?void 0:W.multiplayers.filter((function(e){return e.id!==(null===H||void 0===H?void 0:H.id)})),$=null===q||void 0===q?void 0:q.filter((function(e){return e&&E(e.id,P)})),Y=null===q||void 0===q?void 0:q.filter((function(e){return e&&!E(e.id,P)})),K=q?q.length:null;return(0,o.BX)(p.T,{background:"default",css:R.root,children:[(0,o.BX)(v.G,{css:[R.header,S&&R.header_mobile],children:[(0,o.tZ)(v.G,{css:R.titleContainer,children:(0,o.tZ)(h.xv,{variant:"subheadDefault",children:"Multiplayers"})}),(0,o.BX)(v.G,{css:R.limitsContainer,children:[U?(0,o.BX)(v.G,{css:R.loading,children:[(0,o.tZ)(y.Z,{color:m.TV.foregroundDimmer}),(0,o.tZ)(h.xv,{color:"dimmer",children:"Loading..."})]}):null,null===K||(null===H||void 0===H?void 0:H.isSubscribed)?null:(0,o.BX)(o.HY,{children:[(0,o.BX)(h.xv,{variant:"small",color:"dimmest","aria-hidden":!0,children:[K," / ",w.z]}),(0,o.tZ)(f.J,{css:R.measureBar,total:w.z,current:K,tooltip:"".concat(w.z-K," free editors remaining")})]}),U||(null===H||void 0===H?void 0:H.isSubscribed)||S?null:(0,o.tZ)(l.Z,{small:!0,context:"workspace_multiplayer_header",onClickCallback:function(){t&&t(!0)},onCancel:function(){t&&t(!1)}})]})]}),V&&z&&W?(0,o.tZ)(v.G,{css:R.searchContainer,children:(0,o.tZ)(d.Z,{existingUsernames:z,onSubmit:function(e){U&&!(null===H||void 0===H?void 0:H.isSubscribed)||(!T()(e)||F.loading?X.loading||L({variables:{username:e,replId:n,type:"rw"}}):O({variables:{replId:n,email:e,type:"rw"}}))}})}):null,j?(0,o.BX)(v.G,{css:R.emptyContainer,children:[(0,o.tZ)(v.G,{children:(0,o.tZ)(h.xv,{variant:"subheadDefault",color:"dimmer",children:"No one else is here"})}),(0,o.tZ)(v.G,{css:R.emptyImg,children:(0,o.tZ)(a.Z,{src:"/public/images/rainy-computer.png",alt:"raindrops falling onto an open laptop",layout:"fill",className:"image"})})]}):(0,o.BX)(p.T,{css:R.userList,children:[(null===$||void 0===$?void 0:$.length)?(0,o.BX)(v.G,{css:R.userGroup.root,children:[(0,o.tZ)(I,{title:"Online",count:$.length||0,color:m.TV.greenStrongest}),$.map((function(e){return e?(0,o.tZ)(C.Z,{isPendingInvitation:!1,replId:n,canEditMultiplayers:V,user:e},e.id):null}))]}):null,(null===Y||void 0===Y?void 0:Y.length)?(0,o.BX)(v.G,{css:R.userGroup.root,children:[(0,o.tZ)(I,{title:"Offline",count:Y.length||0,color:m.TV.outlineStrongest}),null===Y||void 0===Y?void 0:Y.map((function(e){return e?(0,o.tZ)(C.Z,{canEditMultiplayers:V,isPendingInvitation:!1,user:e,replId:n},e.id):null}))]}):null,(null===W||void 0===W?void 0:W.multiplayerInvites.length)?(0,o.BX)(v.G,{css:R.userGroup.root,children:[(0,o.tZ)(I,{title:"Pending Invitations",count:(null===W||void 0===W?void 0:W.multiplayerInvites.length)||0,color:m.TV.outlineStrongest}),W.multiplayerInvites.map((function(e){return(0,o.tZ)(C.Z,{canEditMultiplayers:V,replId:n,isPendingInvitation:!0,email:e.email},e.email)}))]}):null]})]})}},79274:function(e,n,t){var r=t(2272),i=t(4541),o=t(1235),a=t(3668),l=t(55544),c=t(35742),u=t(25776),s=t(89853),d=t(22167),f=t(472),p=t(24403),h=t(26995),v=t(99214),m=t.n(v),g=t(64406),y=t(46598),Z=(0,s.X)({root:[d.l0.px(16),d.l0.py(4),d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center,d.l0.cursor.default,d.l0.justify.spaceBetween],userContainer:d.l0.color.foregroundDefault,userContainer_pending:[d.l0.flex.grow(1),d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center,{fontStyle:"italic"}],permissionsContainer:[d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center]});n.Z=function(e){var n=e.isPendingInvitation,t=e.canEditMultiplayers,s=e.replId,v=(0,y.Z)(),b=v.showError,w=v.showConfirm,x=(0,r.Z)((0,g.Jh)({onError:function(e){return b(e.message)},onCompleted:function(e){var n,t=null===(n=e.removeMultiplayerUser.user)||void 0===n?void 0:n.username;t&&w("".concat(t," removed"))}}),2),C=x[0],k=x[1],S=(0,r.Z)((0,g.RJ)({onError:function(e){return b(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var n=e.deleteMultiplayerInvite.email;w("Invite canceled for ".concat(n))}}else b(e.deleteMultiplayerInvite.message)}}),2),T=S[0],E=S[1],R=!n,I=R?(0,i.tZ)(o.Z,{size:"m",url:e.user.image}):(0,i.tZ)(f.Z,{color:d.TV.outlineDefault,size:32}),G=R?e.user.username:e.email;return(0,i.BX)(u.G,{css:Z.root,children:[R?(0,i.tZ)(h.Z,{username:e.user.username,children:(0,i.tZ)(m(),{href:"/@".concat(e.user.username),passHref:!0,children:(0,i.tZ)(u.G,{tag:"a",css:Z.userContainer,children:(0,i.tZ)(c.n,{username:e.user.username,src:e.user.image})})})}):(0,i.BX)(u.G,{css:[Z.userContainer_pending],children:[I,(0,i.tZ)(l.xv,{color:R?"default":"dimmest",children:G})]}),(0,i.BX)(u.G,{css:Z.permissionsContainer,children:[(0,i.tZ)(l.xv,{color:"dimmest",variant:"small",children:e.isPendingInvitation?"Invited":"Can edit"}),t?(0,i.tZ)(a.h,{alt:R?"Remove member":"Cancel invitation",onClick:function(){t&&(k.loading||E.loading||(R?C({variables:{replId:s,username:e.user.username}}):T({variables:{replId:s,email:e.email}})))},children:(0,i.tZ)(p.Z,{size:12})}):null]})]})}},32045:function(e,n,t){t.d(n,{Z:function(){return T}});var r=t(72006),i=t(4405),o=t(2272),a=t(4541),l=t(1235),c=t(4981),u=t(46598),s=t(98260),d=t(42735),f=t(37676),p=t(55544),h=t(25776),v=t(89853),m=t(22167),g=t(75916),y=t(97774),Z=t(21371),b=t(50959),w=t(7579),x=t(14709),C=t.n(x),k=t(49686),S=(0,v.X)({form:[m.l0.align.start,m.l0.display.flex,m.l0.rowWithGap(8),m.l0.width("100%")],searchContainer:[m.l0.position.relative,m.l0.flex.growAndShrink(1)],dropdownMenu:[m.l0.borderRadius(8),m.l0.overflow("hidden"),m.l0.mt(2),m.l0.zIndex(2),m.l0.border({color:m.TV.outlineDimmer,width:1,style:"solid"}),m.l0.maxHeight(280),m.l0.overflowY("auto"),m.l0.scrollbar.thin,{scrollbarColor:m.TV.backgroundHigher+" "+m.TV.backgroundHighest,"&::-webkit-scrollbar-thumb":{backgroundColor:m.TV.backgroundHighest}}],result:[m.l0.p(8),m.l0.rowWithGap(8),m.l0.justify.spaceBetween,m.l0.align.center,m.l0.cursor.pointer],result_active:[m.l0.backgroundColor.accentPrimaryDimmer],userContainer:[m.l0.rowWithGap(8),m.l0.align.center],loadingContainer:[m.l0.align.center,m.l0.m(8),m.l0.rowWithGap(8),m.l0.align.center],emptyText:[m.l0.m(8)]});function T(e){var n=e.onSubmit,t=e.existingUsernames,v=e.isDisabled,x=e.onChange,T=e.placeholder,E=(0,o.Z)(b.useState(""),2),R=E[0],I=E[1],G=(0,w.H)(),D=(0,c.Z)(R.trim().replace(/^@/,""),250),_=(0,k.sk)({skip:!D||C()(R),variables:{query:D,limit:6}}),P=_.data,B=_.loading,A=_.error,U=(0,u.Z)().showError;b.useEffect((function(){A&&U(A.message)}),[A,U]);var N=null===P||void 0===P?void 0:P.usernameSearch,L=function(e){I(e.currentTarget.value),null===x||void 0===x||x(e.currentTarget.value)},X=function(e){"Enter"===e.key&&R.match(/.+@.+/)&&(n(R),I(""),e.currentTarget.blur())};return(0,a.BX)("form",{onSubmit:function(e){e.preventDefault(),n(R),I("")},css:S.form,children:[(0,a.tZ)(Z.ZP,{onChange:function(e){e&&I(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var n=e.getInputProps,o=e.getItemProps,c=e.getMenuProps,u=e.isOpen,s=e.highlightedIndex,v=e.getRootProps;return(0,a.BX)(h.G,(0,i.Z)((0,r.Z)({css:S.searchContainer},v({refKey:"innerRef"})),{children:[(0,a.tZ)(d.II,(0,r.Z)({id:G("username-search")},n({ref:null,value:R,onChange:L,placeholder:null!==T&&void 0!==T?T:"Add people by username or email",autoComplete:"off",onKeyDown:X}))),u?(0,a.BX)(h.G,{children:[N&&N.length?(0,a.tZ)(f.T,(0,i.Z)((0,r.Z)({elevated:!0,css:S.dropdownMenu,tag:"ul"},c({refKey:"innerRef"})),{children:N.map((function(e,n){return(0,a.BX)(h.G,(0,i.Z)((0,r.Z)({tag:"li"},o({item:e,index:n})),{css:[S.result,n===s&&S.result_active],children:[(0,a.BX)(h.G,{css:S.userContainer,children:[(0,a.tZ)(l.Z,{size:"m",url:e.image}),(0,a.tZ)(p.xv,{children:e.username})]}),t.includes(e.username)?(0,a.tZ)(h.G,{children:(0,a.tZ)(g.Z,{color:m.TV.accentPositiveStronger})}):null]}),n)}))})):null,B?(0,a.tZ)(f.T,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(h.G,{css:S.loadingContainer,children:[(0,a.tZ)(y.Z,{}),(0,a.tZ)(p.xv,{color:"dimmer",children:"Loading\u2026"})]})}):null,N&&0===N.length?(0,a.tZ)(f.T,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(p.xv,{css:S.emptyText,color:"dimmer",children:['No results found for "',R,'"']})}):null]}):null]}))}}),(0,a.tZ)(h.G,{children:(0,a.tZ)(s.zx,{colorway:"primary",type:"submit",disabled:v||!R,text:"Invite"})})]})}},22529:function(e,n,t){t.d(n,{s:function(){return Be}});var r=t(4541),i=t(77408),o=t(91355),a=t(5096),l=t(57135),c=t(72006),u=t(4405),s=t(2272),d=t(96583),f=t(85394),p=t(13040),h=t(14357),v=t(10733),m=t(76951),g=t(22167),y=t(55544),Z=t(25776),b=t(90429);function w(e){var n=e.amount,t=e.includeUsd,i=e.variant,o=e.color,a=void 0===o?"default":o,l=(0,m.$E)(n),c=(0,m.H2)(n);return(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(2),g.l0.align.center],children:[(0,r.tZ)(b.Z,{size:"small"===i?12:16,css:[y.E_[a]]}),(0,r.BX)(y.xv,{variant:i,color:a,children:[c,t?" (".concat(l,")"):""]})]})}var x=t(44433),C=t(62830),k={boost:C.kL.Boost,hosting_tier:C.kL.HostingTier},S={boost_2cpu_2ram:C.s2.Boost_2cpu_2ram,boost_4cpu_4ram:C.s2.Boost_4cpu_4ram,boost_8cpu_8ram:C.s2.Boost_8cpu_8ram,boost_16cpu_16ram:C.s2.Boost_16cpu_16ram,hosting_tier_e2_micro:C.s2.HostingTierE2Micro,hosting_tier_e2_small:C.s2.HostingTierE2Small,hosting_tier_e2_medium:C.s2.HostingTierE2Medium,hosting_tier_n1_custom_1_4:C.s2.HostingTierN1Custom_1_4,hosting_tier_e2_standard_2:C.s2.HostingTierE2Standard_2,hosting_tier_e2_standard_4:C.s2.HostingTierE2Standard_4},T=t(97632),E=t(40419),R=t(98260),I=t(72428),G=t(3668),D=t(89853),_=t(47923),P=t(97774),B=t(58975),A=t(50932),U=t(75093),N=t(50959),L=t(5213),X=t(17474),M=t(43119),O=t(71440),F=t(92374),W=t(27594),H=t(31558);function z(){var e=(0,M.Z)(["\n  query RefetchPowerUps($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        ...MultiBoostReplPowerUps\n        ...ReplPowerUpMutationReturnFields\n      }\n    }\n    currentUser {\n      ...PowerUpMutationReturnFields\n    }\n  }\n  ","\n  ","\n  ","\n"]);return z=function(){return e},e}var V={},j=(0,O.Ps)(z(),F.s1,W.sh,W.E_);var q=t(57937);function $(e){var n=e.cycles,t=e.description;return(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(y.xv,{color:"dimmest",children:t}),(0,r.tZ)(I.R,{}),(0,r.tZ)(w,{amount:n,includeUsd:!1,color:"dimmest"})]})}var Y=(0,D.X)({iconBackground:[g.l0.width(40),g.l0.height(40),g.l0.borderRadius(8),g.l0.justify.center,g.l0.align.center,g.l0.backgroundColor.blueDimmer],loadingContainer:[g.l0.justify.center,g.l0.align.center,g.l0.minHeight(80)]});function K(e){var n=e.powerUpCategory,t=e.cyclesCost,o=e.description,a=i.S0[n];return(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(16)],children:(0,r.BX)(Z.G,{css:[g.l0.flex.row,g.l0.justify.spaceBetween],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.G,{css:Y.iconBackground,children:(0,r.tZ)(a.iconComponent,{size:24})}),(0,r.BX)(Z.G,{css:[g.l0.px(8),g.l0.py(2),g.l0.colWithGap(4),g.l0.justify.spaceBetween],children:[(0,r.tZ)(y.xv,{variant:"subheadDefault",children:a.name}),(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",children:o})]})]}),(0,r.BX)(Z.G,{css:[g.l0.px(8),g.l0.py(2),g.l0.colWithGap(4),g.l0.justify.spaceBetween,g.l0.align.end],children:[(0,r.tZ)(w,{amount:t,includeUsd:!0}),(0,r.BX)(y.xv,{variant:"small",color:"dimmer",children:["per / ",a.orderDuration]})]})]})})}function Q(e){return(0,r.tZ)(x.Z,{children:(0,r.tZ)(J,(0,c.Z)({},e))})}function J(e){var n=e.product,t=e.context,a=e.goToCheckoutSuccess,m=e.goToNewPaymentMethodForm,b=(0,f.useStripe)(),w=(0,p.Z)({forceFetch:!0}),x=w.cycles,C=w.loading,D=(0,E.Q)(),M=D.paymentMethod,O=D.loading,F=i.S0[n.powerUpCategory],W=i.$[n.powerUpSku].provisionDescription,z=(0,N.useState)(null),Q=z[0],J=z[1],ee=(0,N.useState)(!1),ne=ee[0],te=ee[1],re=(0,N.useState)(!1),ie=re[0],oe=re[1],ae=(0,T.M)().createCheckoutSession,le=(0,s.Z)(function(e){var n=(0,c.Z)({},V,e);return H.t(j,n)}({variables:{replId:n.replId}}),1)[0],ce=(0,X.B)().startPolling,ue=(0,h.kr)({defaultAutoRefillEnabledValue:!0}),se=ue.autoRefillEnabled,de=ue.autoRefillMonthlyBudget,fe=ue.autoRefillHasError,pe=ue.autoRefillHasChanged,he=ue.cardAutoRefillPreferencesProps,ve=function(e){var n=e.productCost,t=e.cyclesBalance;if(n<=t)return{cyclesToBePurchased:0,cyclesBalanceAfterUpgrade:t,excessPurchaseExplanation:"no-purchase"};var r,i=n-t,o="no-excess";return i>=L.gp?(r=i,o="no-excess"):(r=L.gp,o="minimum"),{cyclesToBePurchased:r,cyclesBalanceAfterUpgrade:t+r-n,excessPurchaseExplanation:o}}({productCost:n.cyclesCostNow,cyclesBalance:null!==x&&void 0!==x?x:0}),me="This will purchase ".concat(ve.cyclesToBePurchased.toLocaleString()," Cycles for ").concat((0,L.qJ)(ve.cyclesToBePurchased)," and activate your ").concat(F.name,".");"minimum"===ve.excessPurchaseExplanation&&(me="This will purchase the minimum purchase amount of ".concat(ve.cyclesToBePurchased.toLocaleString()," Cycles for ").concat((0,L.qJ)(ve.cyclesToBePurchased)," and activate your ").concat(F.name,"."));var ge=(0,N.useState)("Processing..."),ye=ge[0],Ze=ge[1],be=(0,U.i)(),we=be.isPurchaseAllowed,xe=be.reasonPurchaseNotAllowed;if(!we&&xe)return(0,r.tZ)(A.Z,{reason:xe});var Ce=function(){te(!1)},ke=function(){var e=(0,l.Z)((function(){return(0,d.__generator)(this,(function(e){switch(e.label){case 0:if(te(!0),null==M)throw new Error("paymentMethod is null");if(null==b)throw new Error("stripe is null");return Ze("Checking out..."),[4,ae({input:{cyclesQuantity:ve.cyclesToBePurchased,postPurchasePowerUp:{replPowerUp:{replId:n.replId,sku:S[n.powerUpSku],type:k[n.powerUpCategory]}},cyclesAutoRefillConfiguration:pe?{enabled:se,monthlyBudget:de}:null},onError:function(e){J(e),Ce()},onSucceed:function(){var e=(0,l.Z)((function(e){var r,i;return(0,d.__generator)(this,(function(l){switch(l.label){case 0:return Ze("Processing payment..."),[4,b.confirmCardPayment(e.clientSecret)];case 1:return(r=l.sent().error)?(J(null!==(i=r.message)&&void 0!==i?i:"An error occurred. Please try again."),Ce(),[2]):(Ze("Provisioning Power Up..."),function(e){var r=e.checkoutSessionId;ce({checkoutSessionId:r,onSucceeded:function(){oe(!0),le(),(0,o.j)(o.U3.CHECKOUT_COMPLETED,{source:t,powerUpCategory:n.powerUpCategory,autoRefill:se}),a(n)},onFailed:function(){J("Payment failed. Please try again."),Ce(),le()},onError:function(e){J(e),Ce(),le()}})}({checkoutSessionId:e.checkoutSessionId}),[2])}}))}));return function(n){return e.apply(this,arguments)}}()})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),Se=O||C||null==x,Te=null!=M&&!Se&&!ne;return(0,r.BX)(Z.G,{css:[g.l0.colWithGap(16)],children:[(0,r.tZ)(K,{powerUpCategory:n.powerUpCategory,cyclesCost:L.z4[n.powerUpSku],description:W}),(0,r.tZ)(I.R,{}),Se?(0,r.tZ)(Z.G,{css:Y.loadingContainer,children:(0,r.tZ)(P.Z,{})}):(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(12),g.l0.align.start],children:null==M?(0,r.BX)(r.HY,{children:[(0,r.tZ)(y.xv,{color:"dimmer",multiline:!0,children:"You need to add a payment method to complete this purchase."}),(0,r.tZ)(R.zx,{iconLeft:(0,r.tZ)(B.Z,{}),text:"Add Payment Method",big:!0,onClick:m,colorway:"primary",stretch:!0})]}):(0,r.tZ)(r.HY,{children:(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(16)],children:(0,r.BX)(Z.G,{css:[g.l0.colWithGap(4)],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(G.h,{alt:"Update Payment Method",onClick:m,children:(0,r.tZ)(_.Z,{})}),(0,r.tZ)(v.R,{last4:M.last4})]}),(0,r.tZ)(Z.G,{css:[g.l0.pl(24),g.l0.pr(16),g.l0.colWithGap(8)],children:(0,r.tZ)(h.OK,(0,u.Z)((0,c.Z)({},he),{loading:he.loading||ne,showSaveButton:!1}))})]})})})}),null!==M?(0,r.BX)(r.HY,{children:[(0,r.tZ)(I.R,{}),(0,r.tZ)(y.xv,{multiline:!0,variant:"small",css:[g.l0.color.foregroundDimmer],children:me}),(0,r.tZ)(q.q,{isMakingPayment:!0,showSuccessState:ie,showProcessingState:ne,disabled:!Te||fe,initialStateTextOverride:"Purchase ".concat(ve.cyclesToBePurchased.toLocaleString()," Cycles & Upgrade ").concat(F.name),processingStateTextOverride:ye,big:!0,onClick:ke}),null!=Q?(0,r.tZ)(y.xv,{css:[g.l0.color.accentNegativeDefault],multiline:!0,children:Q}):null,(0,r.BX)(Z.G,{css:[g.l0.colWithGap(4)],children:[(0,r.tZ)($,{description:"Cycles balance after purchase",cycles:ve.cyclesToBePurchased}),(0,r.tZ)($,{description:"1st ".concat(F.orderDuration," of ").concat(F.name),cycles:-1*n.cyclesCostNow}),(0,r.tZ)($,{description:"Cycles balance after upgrade",cycles:ve.cyclesBalanceAfterUpgrade})]})]}):null]})}var ee=t(67216);function ne(){var e=(0,M.Z)(["\n  query CheckOutSuccess($replId: String!) {\n    currentUser {\n      id\n      cyclesAutoRefillConfiguration {\n        ... on CyclesAutoRefillConfiguration {\n          id\n          enabled\n          refillAmount\n          monthlyBudget\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return ne=function(){return e},e}var te={},re=(0,O.Ps)(ne());var ie=t(65001),oe=t(98414),ae=t(40306);function le(e){var n=e.autoRefillEnabled;return e.loadingAutoRefill?"...":n?"on":"off"}var ce=(0,D.X)({powerUpIconBackground:[g.l0.width(32),g.l0.height(32),g.l0.borderRadius(8),g.l0.justify.center,g.l0.align.center,g.l0.backgroundColor.blueDimmer],autoRefillIconBackground:[g.l0.width(32),g.l0.height(32),g.l0.borderRadius(8),g.l0.justify.center,g.l0.align.center,g.l0.backgroundColor.greyDimmer]});function ue(e){var n,t,o,a=e.product,l=e.goToCardPreferences,u=e.goToPowerUpDetails,s=(0,p.Z)({forceFetch:!0}).cycles,d=function(e){var n=(0,c.Z)({},te,e);return ee.a(re,n)}({variables:{replId:a.replId}}),f=d.data,h=d.loading,v="CyclesAutoRefillConfiguration"===(null===f||void 0===f||null===(n=f.currentUser)||void 0===n||null===(t=n.cyclesAutoRefillConfiguration)||void 0===t?void 0:t.__typename)?f.currentUser.cyclesAutoRefillConfiguration:null,m="Repl"===(null===f||void 0===f?void 0:f.repl.__typename)&&"Team"===(null===(o=f.repl.owner)||void 0===o?void 0:o.__typename),b=Boolean(null===v||void 0===v?void 0:v.enabled),x=i.S0[a.powerUpCategory],C=i.$[a.powerUpSku];return(0,r.BX)(Z.G,{css:[g.l0.colWithGap(16)],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.align.center],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.G,{css:ce.powerUpIconBackground,children:(0,r.tZ)(x.iconComponent,{size:20})}),(0,r.BX)(Z.G,{css:[g.l0.flex.column],children:[(0,r.BX)(y.xv,{children:[x.name," activated"]}),(0,r.BX)(Z.G,{css:g.l0.rowWithGap(8),children:[(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",children:C.provisionDescription}),(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(4)],children:[(0,r.tZ)(w,{amount:L.z4[a.powerUpSku],includeUsd:!0,variant:"small",color:"dimmer"}),(0,r.BX)(y.xv,{variant:"small",color:"dimmer",children:["/ ",x.orderDuration]})]})]})]})]}),(0,r.tZ)(y.xv,{children:(0,r.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(){return u(a.powerUpCategory)},onClick:function(){return u(a.powerUpCategory)},css:[g.l0.color.foregroundDimmer,{textDecoration:"underline"}],children:"Edit"})})]}),m||h?null:(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.align.center],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.G,{css:ce.autoRefillIconBackground,children:(0,r.tZ)(oe.Z,{size:20})}),(0,r.BX)(Z.G,{css:[g.l0.flex.column],children:[(0,r.BX)(y.xv,{children:["Auto-Refill is"," ",le({autoRefillEnabled:b,loadingAutoRefill:h})]}),(0,r.tZ)(Z.G,{css:g.l0.rowWithGap(4),children:null==s?(0,r.tZ)(P.Z,{}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(w,{amount:s,includeUsd:!1,variant:"small",color:"dimmer"}),(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",children:"left"})]})})]})]}),(0,r.tZ)(y.xv,{children:(0,r.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(){return l(a.powerUpCategory)},onClick:function(){return l(a.powerUpCategory)},css:[g.l0.color.foregroundDimmer,{textDecoration:"underline"}],children:"Edit"})})]}),h||b||m?null:(0,r.tZ)(ie.E,{colorway:"warning",icon:(0,r.tZ)(ae.Z,{}),text:"Add a payment method and enable Auto-Refill to prevent your ".concat(x.name," Power Up from being disabled when you run out of Cycles.")})]})}var se=t(92228),de=t(39056),fe=t(75916),pe=t(91309),he=t(7445),ve=t(74783),me=t(37676),ge=t(11122),ye=t(49622),Ze={tier:(0,ge.iv)([g.l0.borderRadius(12),g.l0.colWithGap(12),g.l0.p(12)]),tierHeader:(0,ge.iv)([g.l0.rowWithGap(8),g.l0.flex.grow(1),g.l0.justify.spaceBetween,g.l0.align.baseline]),tierHeaderTitle:(0,ge.iv)(g.l0.rowWithGap(8)),tierHeaderCost:(0,ge.iv)([g.l0.rowWithGap(4),g.l0.align.baseline]),tierFeatures:(0,ge.iv)(g.l0.colWithGap(8)),tierFeature:(0,ge.iv)(g.l0.rowWithGap(4),g.l0.align.center),tierPicker:(0,ge.iv)([g.l0.border({color:g.TV.outlineDefault})])},be=function(e){var n=e.selectedOption,t=e.onChange,i=e.disabled,o=L.r4[n.sku].egress,a=["".concat(o," GiB egress"),"Deploy to any URL, cover page optional","Configurable machine","Always on"];return(0,r.BX)(me.T,{elevated:!0,css:Ze.tier,children:[(0,r.BX)(Z.G,{css:Ze.tierHeader,children:[(0,r.tZ)(Z.G,{css:Ze.tierHeaderTitle,children:(0,r.tZ)(y.xv,{variant:"subheadBig",children:"Pro"})}),(0,r.tZ)(Z.G,{css:g.l0.rowWithGap(4),children:(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(2),g.l0.align.center],children:[(0,r.tZ)(b.Z,{}),(0,r.BX)(Z.G,{css:[Ze.tierHeaderCost],children:[(0,r.tZ)(y.xv,{variant:"subheadDefault",children:n.cost.cyclesCostRecurring}),(0,r.tZ)(y.xv,{color:"dimmer",variant:"small",children:"per day"})]})]})})]}),(0,r.tZ)(ve.P,{css:Ze.tierPicker,initialSelectedItem:{title:(0,ye.$)(n.sku),sku:n.sku},items:Object.keys(L.r4).map((function(e){return{title:(0,ye.$)(e),sku:e}})),onChange:function(e){var n=e.sku;return t(n)},disabled:i}),(0,r.tZ)(Z.G,{css:Ze.tierFeatures,children:a.map((function(e,n){return(0,r.BX)(Z.G,{css:Ze.tierFeature,children:[(0,r.tZ)(fe.Z,{}),(0,r.tZ)(y.xv,{children:e})]},n)}))})]})},we=t(30241),xe=t(47287),Ce=t(51609),ke=t(36501),Se=t(88254),Te=t(33229),Ee=t(46598),Re=t(6581),Ie=t(268),Ge=function(e){var n=e.context,t=e.selectedOption,i=e.currentOption,a=e.onBuyMoreCycles,c=e.onPowerUpUpdated,u=e.onPowerUpRequested,f=(0,we.Z)(),p=(0,Te.Z)(),v=(0,Ee.Z)().showError,m=(0,s.Z)(N.useState(!1),2),y=m[0],Z=m[1],b=(0,h.kr)({}).autoRefillEnabled,w=(0,s.Z)((0,Ie.IN)({onCompleted:function(){var e=(0,l.Z)((function(e){var n;return(0,d.__generator)(this,(function(r){switch(r.label){case 0:return"UserError"===(n=e.setHostingTier).__typename?(v(n.message),[2]):(Z(!0),[4,new Promise((function(e){return setTimeout(e,2e3)}))]);case 1:return r.sent(),c({type:"powerUp",powerUpCategory:"hosting_tier",powerUpSku:t.sku,cyclesCostNow:t.cost.cyclesCostNow,replId:f}),p.current,[2]}}))}));return function(n){return e.apply(this,arguments)}}(),onError:function(e){u(!1),Se.Tb(e),v(e.message)}}),2),x=w[0],k=w[1].loading;if(y)return(0,r.tZ)(R.zx,{text:"Tier Purchased",colorway:"positive",disabled:!0,loading:!0,css:{color:"".concat(g.TV.accentPositiveStronger," !important")}});var S,T=(null===i||void 0===i?void 0:i.sku)===t.sku,E=!0;switch(t.cost.explanation){case C.Ch.IncludedInExistingOrder:case C.Ch.ActivateExistingOrder:case C.Ch.SpendCycles:case C.Ch.NeedsCycles:case C.Ch.IncludedInSubscription:E=!1}return k?(E=!0,S="Processing"):T?(E=!0,S="Current tier"):S="Purchase and deploy",(0,r.tZ)(R.zx,{text:S,disabled:E,loading:k,colorway:k||!E?"primary":void 0,iconRight:k?void 0:(0,r.tZ)(Re.Z,{}),onClick:function(){var e;(u(!0),k)||(t.cost.explanation!==C.Ch.NeedsCycles?(x({variables:{input:{replId:f,sku:t.sku}}}),null!==(e=t.cost.cyclesCostNow)&&void 0!==e&&e&&((0,o.j)(o.U3.CHECKOUT_REQUESTED,{source:n,powerUpCategory:"boost"}),(0,o.j)(o.U3.CYCLES_USED,{powerUp:"hosting_tier",sku:t.sku,source:n}),(0,o.j)(o.U3.CHECKOUT_COMPLETED,{source:n,powerUpCategory:"boost",autoRefill:b}))):a({type:"powerUp",powerUpCategory:"hosting_tier",powerUpSku:t.sku,cyclesCostNow:t.cost.cyclesCostNow,replId:f}))},css:k&&{color:"".concat(g.TV.accentPrimaryStronger," !important")}})},De=function(e){var n=e.context,t=e.onBuyMoreCycles,i=e.onPowerUpUpdated,o=(0,we.Z)(),a=(0,s.Z)(N.useState("ready"),2),l=a[0],c=a[1],u=(0,s.Z)(N.useState(null),2),d=u[0],f=u[1],p=(0,s.Z)(N.useState(null),2),h=p[0],v=p[1],b=(0,s.Z)(N.useState(null),2),w=b[0],x=b[1],k=(0,Ie.s7)({variables:{replId:o},onCompleted:function(e){var n,t,r,i,o;if("Repl"===(null===e||void 0===e?void 0:e.repl.__typename)&&"ReplPowerUpTypes"===(null===(n=e.repl)||void 0===n||null===(t=n.powerUps)||void 0===t?void 0:t.__typename)&&"PowerUpCostsType"===(null===(r=e.repl)||void 0===r||null===(i=r.powerUpCosts)||void 0===i?void 0:i.__typename)){var a=null===(o=e.repl.powerUps.hostingTier)||void 0===o?void 0:o.sku,l=a||C.DZ.HostingTierE2Small,c=(0,ye.i)(e.repl.powerUpCosts,a),u=(0,ye.i)(e.repl.powerUpCosts,l);c&&a&&v({sku:a,cost:c}),u&&f({sku:l,cost:u}),x(e.repl.powerUpCosts)}}}).loading;if(k||!d||!w)return(0,r.tZ)(Z.G,{css:[g.l0.flex.row,g.l0.justify.center],children:(0,r.tZ)(P.Z,{})});var S=null;if("INCLUDED_IN_SUBSCRIPTION"===d.cost.explanation)S="Included in your subscription plan.";else if(d.cost.cyclesCostRecurring>0){var T=(0,m.$E)(d.cost.cyclesCostRecurring),E=(0,m.$E)(d.cost.cyclesCostRecurring*ke.Dj);S="".concat(T,"/day (Approximately ").concat(E,"/month).")}var R=null;switch(d.cost.explanation){case C.Ch.IncludedInExistingOrder:break;case C.Ch.NeedsCycles:R="You'll be able to purchase Cycles while activating.";break;case C.Ch.SpendCycles:R="Today's charge will be ".concat(d.cost.cyclesCostNow," Cycles.")}return(0,r.BX)(Z.G,{css:g.l0.colWithGap(16),children:[(0,r.tZ)(be,{selectedOption:d,onChange:function(e){var n=(0,ye.i)(w,e);n&&f({sku:e,cost:n})},disabled:"requesting"===l}),(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(12)],children:(0,r.BX)(Z.G,{css:[g.l0.colWithGap(8)],children:[(0,r.BX)(Z.G,{css:[g.l0.minHeight(50),g.l0.colWithGap(16),g.l0.justify.end,g.l0.mb(16)],children:[null!=S?(0,r.tZ)(y.xv,{css:[g.l0.textAlign.center],children:S}):null,null!=R?(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.justify.center,g.l0.color.foregroundDimmer],children:[(0,r.tZ)(y.xv,{children:R}),(0,r.tZ)(xe.u,{tooltip:"Upgrades and downgrades are immediate. Upgrading within a 24 hour period following a downgrade will incur a charge.",children:(0,r.tZ)(Ce.Z,{})})]}):null]}),(0,r.tZ)(Ge,{context:n,selectedOption:d,currentOption:h,onBuyMoreCycles:t,onPowerUpUpdated:i,onPowerUpRequested:function(e){return c(e?"requesting":"ready")}})]})})]})};function _e(e){var n=e.powerUpCategory,t=e.goToCheckout,i=e.goToCheckoutSuccess;switch(n){case"boost":return(0,r.tZ)(he.Z,{isCheckoutFlow:!0,powerUp:n,onPowerUpUpdated:i,onBuyMoreCycles:t,context:"repl_resources"});case"hosting_tier":return(0,r.tZ)(De,{context:"workspace_hosting_pane",onPowerUpUpdated:i,onBuyMoreCycles:t});default:throw new Error("Unknown power up category: ".concat(n))}}function Pe(e){var n=e.title,t=e.children,i=e.goBack,o=e.canGoBack,a=e.allowBack,l=void 0===a||a;return(0,r.BX)(r.HY,{children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.p(12),g.l0.align.center],children:[l&&o?(0,r.tZ)(G.h,{alt:"Back",onClick:function(){return i()},children:(0,r.tZ)(de.Z,{})}):null,"string"===typeof n?(0,r.tZ)(y.xv,{variant:"subheadDefault",children:n}):n]}),(0,r.tZ)(I.R,{}),(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(8),g.l0.p(12)],children:t})]})}function Be(e){var n=e.currentStep,t=e.goBack,l=e.canGoBack,c=e.goTo,u=e.analyticsContext;switch(n.step){case"power_up_details":var s=n.powerUpCategory,d=i.S0[s];return(0,r.tZ)(Pe,{goBack:t,canGoBack:l,title:d.name,children:(0,r.tZ)(_e,{powerUpCategory:s,goToCheckout:function(e){c({step:"checkout",product:e}),(0,o.j)(o.U3.CHECKOUT_REQUESTED,{source:u,powerUpCategory:s})},goToCheckoutSuccess:function(e){c({step:"checkout_success",product:e})}})});case"checkout":return(0,r.tZ)(Pe,{goBack:t,canGoBack:l,title:"Checkout",children:(0,r.tZ)(Q,{product:n.product,goToCheckoutSuccess:function(e){c({step:"checkout_success",product:e})},goToNewPaymentMethodForm:function(){return c({step:"new_payment_method_form"})},context:u})});case"checkout_success":return(0,r.tZ)(Pe,{goBack:t,canGoBack:l,allowBack:!1,title:(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(fe.Z,{color:g.TV.accentPositiveStronger}),(0,r.tZ)(y.xv,{variant:"subheadDefault",css:[g.l0.color.accentPositiveStronger],children:"Success"})]}),children:(0,r.tZ)(ue,{product:n.product,goToCardPreferences:function(e){return c({step:"card_preferences",powerUpCategory:e})},goToPowerUpDetails:function(e){return c({step:"power_up_details",powerUpCategory:e})}})});case"card_preferences":var f=n.powerUpCategory;return(0,r.tZ)(Pe,{goBack:t,canGoBack:l,title:"Card Preferences",children:(0,r.tZ)(a.t,{goToNewPaymentMethodForm:function(){return c({step:"new_payment_method_form",powerUpCategory:f})}})});case"new_payment_method_form":var p=n.powerUpCategory;return(0,r.tZ)(Pe,{goBack:t,canGoBack:l,title:"Update Payment Method",children:(0,r.tZ)(se.q,{onSuccess:function(){return l&&t()},powerUpCategory:p,context:u})});case"not_shown":throw new Error("This step should never be rendered");default:(0,pe.Z)(n)}}},5096:function(e,n,t){t.d(n,{t:function(){return Z}});var r=t(72006),i=t(4541),o=t(14357),a=t(10733),l=t(40419),c=t(98260),u=t(3668),s=t(65001),d=t(25776),f=t(89853),p=t(22167),h=t(58975),v=t(47923),m=t(97774),g=t(40306),y=(0,f.X)({self:[p.l0.colWithGap(16)],paymentMethodContainer:[p.l0.colWithGap(16)],addPaymentMethodContainer:[p.l0.colWithGap(6)],loadingContainer:[p.l0.justify.center,p.l0.align.center,p.l0.minHeight(80)]});function Z(e){var n=e.goToNewPaymentMethodForm,t=e.onPreferencesUpdated,f=(0,l.Q)(),Z=f.paymentMethod,b=f.loading,w=f.error,x=(0,o.kr)({defaultAutoRefillEnabledValue:!1,onAutoRefillPreferencesUpdated:function(){t&&t()}}).cardAutoRefillPreferencesProps;return b||null!=w?(0,i.tZ)(d.G,{css:y.loadingContainer,children:(0,i.tZ)(m.Z,{})}):(0,i.BX)(d.G,{css:y.self,children:[null!=Z?(0,i.BX)(d.G,{css:y.paymentMethodContainer,children:[(0,i.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,i.tZ)(u.h,{alt:"Update Payment Method",onClick:n,children:(0,i.tZ)(v.Z,{})}),(0,i.tZ)(a.R,{last4:Z.last4})]}),(0,i.tZ)(o.OK,(0,r.Z)({},x))]}):null," ",null==Z?(0,i.BX)(d.G,{css:y.addPaymentMethodContainer,children:[(0,i.tZ)(s.E,{colorway:"warning",icon:(0,i.tZ)(g.Z,{}),text:"Add a payment method and enable Auto-Refill to prevent your Power Ups from being disabled when you run out of Cycles."}),(0,i.tZ)(c.zx,{text:"Add Payment Method",iconLeft:(0,i.tZ)(h.Z,{}),onClick:n})]}):null]})}},78838:function(e,n,t){t.d(n,{P:function(){return o}});var r=t(9970),i=t(50959);function o(e){var n=(0,i.useState)(e),t=n[0],o=n[1],a=(0,i.useState)([]),l=a[0],c=a[1],u=(0,i.useCallback)((function(e){c((0,r.Z)(l).concat([t])),o(e)}),[l,c,t,o]),s=(0,i.useCallback)((function(){var e=l.pop();c(l),e&&o(e)}),[l,c,o]);return{currentStep:t,goTo:u,goBack:s,canGoBack:l.length>0}}},24170:function(e,n,t){t.d(n,{FW:function(){return p},NH:function(){return m}});var r=t(72006),i=t(43119),o=t(71440),a=t(5709),l=t(93207),c=t(67216);function u(){var e=(0,i.Z)(["\n  fragment PublishReplData on Repl {\n    id\n    url\n    title\n    description\n    iconUrl\n    lastPublishedAt\n    publishedAs\n    imageUrl\n    isRenamed\n    templateInfo {\n      iconUrl\n    }\n    replViewSettings {\n      id\n      defaultView\n      replImage\n      replFile\n    }\n    tags {\n      id\n      isOfficial\n    }\n    currentUserPermissions {\n      containerWrite\n      publish\n      changeIconUrl\n    }\n    ...CrosisContextRepl\n    ...PublishedReplShareInfoReplData\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment PublishCurrentUser on CurrentUser {\n    id\n    image\n    isTemplateDeveloper: hasRole(role: TEMPLATE_DEVELOPER)\n    ...CrosisContextCurrentUser\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  query PublishCurrentUser {\n    currentUser {\n      id\n      ...PublishCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var f={},p=(0,o.Ps)(u(),a.C,l.B),h=(0,o.Ps)(s(),a.D),v=(0,o.Ps)(d(),h);function m(e){var n=(0,r.Z)({},f,e);return c.a(v,n)}},79181:function(e,n,t){t.d(n,{e9:function(){return p},wd:function(){return d}});var r=t(72006),i=t(43119),o=t(71440),a=t(93207),l=t(67216);function c(){var e=(0,i.Z)(["\n  fragment PublishReleaseFormRepl on Repl {\n    id\n    title\n    description\n    slug\n    user {\n      username\n    }\n    ...PublishedReplShareInfoReplData\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        timeCreated\n        description\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query PublishReleaseFormCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return u=function(){return e},e}var s={},d=(0,o.Ps)(c(),a.B),f=(0,o.Ps)(u());function p(e){var n=(0,r.Z)({},s,e);return l.a(f,n)}},95872:function(e,n,t){t.d(n,{Z:function(){return Q}});var r=t(57135),i=t(72006),o=t(4405),a=t(2272),l=t(96583),c=t(4541),u=t(50959),s=t(25776),d=t(55544),f=t(22167),p=t(42735),h=t(98260),v=t(65001),m=t(47287),g=t(66466),y=t(7579),Z=t(62830),b=t(79181),w=t(30249),x=t(40306),C=t(66910),k=t(43119),S=t(71440),T=t(67216);function E(){var e=(0,k.Z)(["\n  query PendingChanges($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deployment {\n          id\n          activeRelease {\n            id\n            pendingChanges {\n              fileName\n              changeType\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return E=function(){return e},e}var R={},I=(0,S.Ps)(E());function G(e){var n,t,r=function(e){var n=(0,i.Z)({},R,e);return T.a(I,n)}({variables:{replId:e.replId},fetchPolicy:"cache-and-network",ssr:!1}),o=r.data,a=r.loading,l=r.error;if(a)return{loading:a,pendingChanges:null,error:null};if(l)return{loading:!1,pendingChanges:null,error:l};var c="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null;return c?{loading:!1,pendingChanges:(null===(n=c.deployment)||void 0===n||null===(t=n.activeRelease)||void 0===t?void 0:t.pendingChanges)||[],error:l}:{loading:!1,pendingChanges:null,error:new Error("Repl not found")}}var D=t(1243),_=t(59187);function P(){var e=(0,k.Z)(["\n  mutation RevertTemplateRelease($input: RevertReplReleaseInput!) {\n    revertReplRelease(input: $input) {\n      ... on Repl {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return P=function(){return e},e}var B={},A=(0,S.Ps)(P());function U(e){if(!e.data)return null;var n=e.data;if("revertReplRelease"in n){if("NotFoundError"===n.revertReplRelease.__typename||"UnauthorizedError"===n.revertReplRelease.__typename||"UserError"===n.revertReplRelease.__typename)return n.revertReplRelease.message;if("Repl"!==n.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}function N(){var e=(0,a.Z)(function(e){var n=(0,i.Z)({},B,e);return _.D(A,n)}({refetchQueries:["ReplEnvironmentHeader"]}),2),n=e[0];function t(){return(t=(0,r.Z)((function(e){var t,r;return(0,l.__generator)(this,(function(i){switch(i.label){case 0:return t=e.input,[4,n({variables:{input:t}})];case 1:return[2,{data:(r=i.sent()).data,error:U(r)}]}}))}))).apply(this,arguments)}return{revertTemplateRelease:function(e){return t.apply(this,arguments)},state:e[1]}}var L=t(97774),X=t(42858),M=t(77645),O=t(37248),F=t(78890),W=t(47236),H=t(36501),z=(0,W.cn)({ran:!1,tested:!1}),V=s.K.form;function j(e){if(0===e.length)return{message:"You cannot leave this empty."}}function q(e){var n,t,r=e.changeType;return r===Z.J5.NewFile?(n=f.TV.accentPositiveStronger,t="Added"):r===Z.J5.DeletedFile?(n=f.TV.accentNegativeStronger,t="Deleted"):(n=f.TV.foregroundDefault,t="Changed"),(0,c.tZ)(d.xv,{variant:"small",css:[{color:n}],children:t})}function $(e){var n=e.pendingChangesState,t=e.isReplitTemplate;if(n.loading)return(0,c.tZ)(s.G,{css:[f.l0.center],children:(0,c.tZ)(L.Z,{})});if(n.error)return(0,c.tZ)(v.E,{icon:(0,c.tZ)(x.Z,{}),text:n.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!n.pendingChanges||0===n.pendingChanges.length)return t?null:(0,c.tZ)(d.xv,{multiline:!0,children:"No changes to publish. Come back when you have made changes to your Repl."});var r=n.pendingChanges,i=r.slice(0,15);return(0,c.BX)(s.G,{css:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:f.TV.space8}],children:[i.map((function(e){return(0,c.BX)(u.Fragment,{children:[(0,c.BX)(s.G,{css:[f.l0.rowWithGap(4),f.l0.align.center],children:[(0,c.tZ)(X.Z,{size:12,path:e.fileName}),(0,c.tZ)(d.xv,{children:e.fileName})]},e.fileName),(0,c.tZ)(q,{changeType:e.changeType})]},e.fileName)})),r.length>i.length&&(0,c.BX)(d.xv,{children:["And ",r.length-i.length," other files..."]})]})}function Y(e){var n=e.repl,t=N(),i=function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.revertTemplateRelease({input:{replId:n.id,releaseId:e}})];case 1:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}();return(0,c.BX)(s.G,{children:[(0,c.tZ)(d.h4,{level:1,variant:"subheadBig",css:[f.l0.mb(16)],children:"Existing Releases"}),(0,c.tZ)(s.G,{css:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:f.TV.space8}],children:n.releases.items.map((function(e){var t,r;return(0,c.BX)(u.Fragment,{children:[(0,c.tZ)("span",{children:(0,F.Z)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,c.tZ)("span",{children:e.description}),(0,c.tZ)("span",{style:{justifySelf:"end"},children:e.id===(null===(t=n.deployment)||void 0===t||null===(r=t.activeRelease)||void 0===r?void 0:r.id)?(0,c.tZ)("span",{css:[f.l0.p(4),{display:"flex"}],children:"(active)"}):(0,c.tZ)(h.zx,{text:"revert",colorway:"primary",small:!0,onClick:function(n){n.preventDefault(),i(e.id)}})})]},e.id)}))})]})}function K(e){var n=e.children;return(0,c.tZ)(s.G,{css:[f.l0.rowWithGap(8),f.l0.py(2)],children:n})}function Q(e){var n,t,g,Z,b,k,S=e.repl,T=(0,y.H)(),E=(0,a.Z)(u.useState(!1),2),R=E[0],I=E[1],_=(0,a.Z)(u.useState(!1),2),P=_[0],B=_[1],A=function(e){var n=G({replId:e.replId}),t=u.useMemo((function(){if(!n.pendingChanges)return[];var e=n.pendingChanges.slice().sort((function(e,n){return e.fileName.localeCompare(n.fileName)})).map((function(e){return{file:e,pathDepth:(0,O.U$)(e.fileName)}})).sort((function(e,n){return e.pathDepth-n.pathDepth})).map((function(e){return e.file}));return e}),[n.pendingChanges]);return(0,o.Z)((0,i.Z)({},n),{pendingChanges:t})}({replId:S.id}),U=(0,D.r)(),N=(0,w.Y)("",j),L=0!==(null===(n=A.pendingChanges)||void 0===n?void 0:n.length),X=(null===(t=S.user)||void 0===t?void 0:t.username)===H.IU||"templates"===(null===(g=S.user)||void 0===g?void 0:g.username),F=(0,a.Z)((0,W.KO)(z),2),q=F[0],K=F[1];u.useEffect((function(){K({ran:!1,tested:!1})}),[K]);var Q=Boolean(N.error||!X&&!L||U.loading||X&&(!q.ran||!q.tested)),ee=X&&(null===(Z=S.releases)||void 0===Z||null===(b=Z.items)||void 0===b?void 0:b.length)>1,ne="";return N.error?ne="Please fill out the form":X||L||(ne="No changes to publish in this release"),R?(0,c.tZ)(M.q,{repl:S,isUpdate:!0}):P?(0,c.tZ)(s.G,{css:[f.l0.p(16),f.l0.colWithGap(16)],children:(0,c.tZ)(Y,{repl:S})}):(0,c.BX)(V,{onSubmit:function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return e.preventDefault(),Q||N.validate()?[2]:[4,U.createRelease({input:{replId:S.id,description:N.value}})];case 1:return n.sent().error||I(!0),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),css:[f.l0.colWithGap(24),f.l0.p(16)],children:[(0,c.tZ)(d.h4,{level:1,variant:"headerDefault",children:"Publish a new release"}),(0,c.BX)(s.G,{css:[f.l0.colWithGap(8)],children:[(0,c.tZ)(d.h4,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,c.tZ)($,{pendingChangesState:A,isReplitTemplate:X})]}),X||L?(0,c.BX)(s.G,{css:[f.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:T("description"),css:[f.l0.color.foregroundDimmer,{fontSize:f.TV.fontSizeSmall,lineHeight:f.TV.lineHeightSmall}],children:"Description"}),(0,c.tZ)(p.B,{id:T("description"),"aria-label":"Description",onChange:function(e){return N.setValue(e.target.value)},css:[f.l0.width("100%"),f.l0.minHeight(64),f.l0.maxHeight(128),{resize:"vertical"}],placeholder:"Explain what has changed about your template"}),N.error?(0,c.tZ)(v.E,{icon:(0,c.tZ)(x.Z,{}),text:null===(k=N.error)||void 0===k?void 0:k.message,colorway:"negative"}):null]}):null,X?(0,c.tZ)(J,{repl:S}):null,(0,c.tZ)(s.G,{children:U.error?(0,c.tZ)(v.E,{icon:(0,c.tZ)(x.Z,{}),text:U.error,colorway:"negative"}):null}),(0,c.BX)(s.G,{css:[f.l0.rowWithGap(12),f.l0.justify.end],children:[ee?(0,c.tZ)(h.zx,{text:"Revert to older",colorway:"negative",onClick:function(){return B(!0)}}):null,(0,c.tZ)(m.u,{tooltip:ne,placement:"bottom",isDisabled:!ne,children:(0,c.tZ)(h.zx,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,c.tZ)(C.Z,{}),disabled:Q})})]})]})}function J(e){var n,t,r,l=e.repl,u=(0,a.Z)((0,W.KO)(z),2),p=u[0],h=u[1],m=(0,y.H)(),Z=(0,b.e9)(),w=Z.data,x=Z.loading,C=null===w||void 0===w||null===(n=w.currentUser)||void 0===n?void 0:n.username;return(0,c.BX)(s.G,{css:[f.l0.colWithGap(12)],children:[(0,c.tZ)(d.h4,{level:2,children:"Official Replit Template publishing checklist"}),(0,c.BX)(s.G,{children:[(0,c.BX)(K,{children:[(0,c.tZ)(g.X,{id:m("ran"),checked:p.ran,onChange:function(e){return h((0,o.Z)((0,i.Z)({},p),{ran:e.target.checked}))}}),(0,c.tZ)("label",{htmlFor:m("ran"),children:"Run Repl:"}),(0,c.BX)("span",{children:["to generate and cache package guesser result into ",(0,c.tZ)("code",{children:".upm"}),"."]})]}),(0,c.BX)(K,{children:[(0,c.tZ)(g.X,{id:m("tested"),checked:p.tested,onChange:function(e){return h((0,o.Z)((0,i.Z)({},p),{tested:e.target.checked}))}}),(0,c.tZ)("label",{htmlFor:m("tested"),children:"Run tests:"}),(0,c.BX)("span",{children:['Run "Test working copy" for @',null===(t=l.user)||void 0===t?void 0:t.username,"/",l.slug," in"," ",(0,c.tZ)("a",{href:"https://tmpltester.util.repl.co/",target:"_blank",children:"template tester"}),". ",(0,c.tZ)("br",{}),"If there are no tests, consider adding one."]})]})]}),x||(null===(r=l.user)||void 0===r?void 0:r.username)!==C?null:(0,c.tZ)(v.E,{text:"You can't publish an update while impersonating. Add yourself as a member of the 'replit' team using CLUI tool 'add-remove-team-member', then open this Repl from your account.",colorway:"negative"})]})}},93207:function(e,n,t){t.d(n,{B:function(){return o}});var r=t(43119);function i(){var e=(0,r.Z)(["\n  fragment PublishedReplShareInfoReplData on Repl {\n    id\n    url\n    publishedAs\n    title\n  }\n"]);return i=function(){return e},e}var o=(0,t(71440).Ps)(i())},2882:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(57135),i=t(96583),o=t(4541),a=(t(50959),t(42735)),l=t(25776),c=t(55544),u=t(22167),s=t(98260),d=t(65001),f=t(7579),p=t(62830),h=t(30249),v=t(40306),m=t(36632),g=t(91355),y=t(84561),Z=t(96092),b=(0,t(89853).X)({content:[u.l0.p(8),u.l0.colWithGap(16)],section:[u.l0.colWithGap(8)]});function w(e){var n=e.header;return(0,o.tZ)(Z.Q,{headerContent:n,children:(0,o.BX)(l.G,{css:b.content,children:[(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{children:"Bold Text"}),(0,o.tZ)(c.xv,{color:"dimmer",children:"**bold**"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{children:"Italic Text"}),(0,o.tZ)(c.xv,{color:"dimmer",children:"__italic__"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{children:"Links"}),(0,o.tZ)(c.xv,{color:"dimmer",children:"[Link Name](https://yourlink.com)"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{children:"Images"}),(0,o.tZ)(c.xv,{color:"dimmer",children:"![Image alt text](https://linktoyourimage.com)"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{children:"Header Text"}),(0,o.tZ)(c.xv,{color:"dimmer",children:"# Header"})]}),(0,o.BX)(l.G,{css:[u.l0.colWithGap(8)],children:[(0,o.tZ)(c.xv,{children:"Code Blocks"}),(0,o.BX)(c.xv,{color:"dimmer",children:["```",(0,o.tZ)("br",{}),"this is for large, multiline code blocks",(0,o.tZ)("br",{}),"```"]})]}),(0,o.BX)(l.G,{css:[u.l0.colWithGap(8)],children:[(0,o.tZ)(c.xv,{children:"Inline Code"}),(0,o.tZ)(c.xv,{color:"dimmer",children:"`this is for code in the middle of sentences`"})]}),(0,o.BX)(l.G,{css:[u.l0.colWithGap(8)],children:[(0,o.tZ)(c.xv,{children:"Horizontal Rules"}),(0,o.tZ)(c.xv,{color:"dimmer",children:"***"})]})]})})}var x=l.K.form;function C(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>100?{message:"The title should not be longer than ".concat(100," characters.")}:void 0}function k(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>5e3?{message:"The description should not be longer than ".concat(5e3," characters.")}:void 0}function S(e){var n,t,Z=e.repl,b=e.source,S=e.onDone,T=(0,f.H)(),E=T("titleIdInput"),R=T("descriptionIdInput"),I=(0,h.Y)("",C),G=(0,h.Y)("",k),D=(0,m.O)();return(0,o.BX)(x,{onSubmit:function(){var e=(0,r.Z)((function(e){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return e.preventDefault(),I.validate()||G.validate()?[2]:[4,D.publish({input:{replId:Z.id,title:I.value,body:G.value}})];case 1:return n.sent().error||((0,g.j)(g.U3.UPDATE_SHARED,{source:b,replType:Z.publishedAs===p.O2.Template?"template_repl":"regular_repl"}),S()),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),css:[u.l0.colWithGap(16)],children:[(0,o.tZ)(c.h4,{level:1,variant:"headerDefault",children:"Add an update"}),(0,o.BX)(c.xv,{children:["Explain what has changed about this"," ",Z.publishedAs===p.O2.Template?"Template":"Repl","."]}),(0,o.BX)(l.G,{css:u.l0.colWithGap(8),children:[(0,o.BX)(l.G,{css:u.l0.colWithGap(4),children:[(0,o.tZ)("label",{css:u.l0.color.foregroundDimmer,htmlFor:E,children:"Title"}),(0,o.tZ)(a.II,{id:E,onChange:function(e){I.setValue(e.target.value)},disabled:D.loading,placeholder:"Give your post a title"})]}),I.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(v.Z,{}),text:null===(n=I.error)||void 0===n?void 0:n.message,colorway:"negative"}):null]}),(0,o.BX)(l.G,{css:u.l0.colWithGap(8),children:[(0,o.BX)(l.G,{css:u.l0.colWithGap(4),children:[(0,o.tZ)("label",{css:u.l0.color.foregroundDimmer,htmlFor:R,children:"Description"}),(0,o.tZ)(a.B,{id:R,onChange:function(e){G.setValue(e.target.value)},css:[u.l0.width("100%"),{minHeight:u.TV.space128,maxHeight:u.TV.space256,resize:"vertical",lineHeight:u.TV.lineHeightDefault}],disabled:D.loading,placeholder:"Write something about this post"})]}),G.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(v.Z,{}),text:null===(t=G.error)||void 0===t?void 0:t.message,colorway:"negative"}):null]}),(0,o.tZ)(w,{header:"Style your description with Markdown"}),D.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(v.Z,{}),colorway:"negative",text:D.error}):null,(0,o.tZ)(s.zx,{text:D.loading?"Sharing update...":"Share update",type:"submit",colorway:"primary",disabled:Boolean(D.loading||I.error||G.error),css:{alignSelf:"end"},iconLeft:(0,o.tZ)(y.Z,{})})]})}},36632:function(e,n,t){t.d(n,{O:function(){return v}});var r=t(57135),i=t(2272),o=t(96583),a=t(72006),l=t(43119),c=t(71440),u=t(24170),s=t(59187);function d(){var e=(0,l.Z)(["\n  mutation PublishReplCreatePost($input: CreateReplPost2Input!) {\n    createReplPost2(input: $input) {\n      ... on Post {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var f={},p=(0,c.Ps)(d(),u.FW);function h(e){var n,t,r,i,o,a,l;return e.error?e.error.message||"Something went wrong publishing your Repl":"NotFoundError"===(null===(n=e.data)||void 0===n||null===(t=n.createReplPost2)||void 0===t?void 0:t.__typename)||"UnauthorizedError"===(null===(r=e.data)||void 0===r||null===(i=r.createReplPost2)||void 0===i?void 0:i.__typename)||"UserError"===(null===(o=e.data)||void 0===o||null===(a=o.createReplPost2)||void 0===a?void 0:a.__typename)?e.data.createReplPost2.message:(null===(l=e.data)||void 0===l?void 0:l.createReplPost2)&&"Post"!==e.data.createReplPost2.__typename?"Something went wrong publishing your Repl":void 0}function v(){var e=(0,i.Z)(function(e){var n=(0,a.Z)({},f,e);return s.D(p,n)}(),2),n=e[0],t=e[1],l=function(){var e=(0,r.Z)((function(e){var r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(r=e.input,t.loading)return[2,{data:null,error:null}];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n({variables:{input:r}})];case 2:return[2,{data:(i=o.sent()).data,error:h(i)}];case 3:return o.sent(),[2,{data:null,error:"Something went wrong publishing your Repl"}];case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}();return{publish:l,data:t.data,loading:t.loading,error:h(t)}}},65120:function(e,n,t){t.d(n,{Z:function(){return p},_:function(){return m}});var r=t(2272),i=t(4541),o=t(95980),a=t.n(o),l=t(50959),c=t(72851),u=t(26430),s=t(62223),d=t(26568),f=t(22167);function p(e){var n=(0,r.Z)(l.useState(!1),2),t=n[0],o=n[1],a=[],s=[];if(e.variables.length>0){var f=e.variables[0].parentVariableReference,p=!0,h=!1,v=void 0;try{for(var g,y=e.variables[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var Z=g.value;Z.parentVariableReference===f?a.push(Z):s.push(Z)}}catch(b){h=!0,v=b}finally{try{p||null==y.return||y.return()}finally{if(h)throw v}}}return(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.Z,{truncate:!0,level:5,children:"Variables"}),(0,i.BX)(u.gC,{align:"stretch",constrainWidth:!0,children:[a.map((function(n){return(0,i.tZ)(m,{depth:0,variable:n,client:e.client},n.parentVariableReference+"/"+n.name)})),s.length>0&&(0,i.BX)(i.HY,{children:[(0,i.BX)(d.Z,{filled:!1,border:!1,onClick:function(){return o((function(e){return!e}))},children:["See ",t?"Less":"More"]}),t&&s.map((function(n){return(0,i.tZ)(m,{depth:0,variable:n,client:e.client},n.parentVariableReference+"/"+n.name)}))]})]})]})}function h(e){var n=e.variable,t=e.expanded;return n.variablesReference>0?(0,i.tZ)("div",{css:[f.l0.transition.snappy,{transform:"rotate(".concat(t?0:-90,"deg)")}],children:(0,i.tZ)(s.Z,{})}):null}function v(e){var n=e.expanded,t=e.depth,r=e.variable;return 0===t&&!("parentVariableReference"in r)?(0,i.tZ)(h,{expanded:n,variable:r}):(0,i.tZ)("div",{css:[f.l0.flex.grow(0),f.l0.flex.shrink(0),f.l0.width(f.TV.space16),f.l0.display.flex,f.l0.align.center,f.l0.justify.end],children:(0,i.tZ)(h,{expanded:n,variable:r})})}function m(e){var n=e.depth,t=e.variable,o=e.client,c=(0,r.Z)(l.useState(!1),2),s=c[0],d=c[1],f=(0,r.Z)(l.useState([]),2),p=f[0],h=f[1];return l.useEffect((function(){s&&o.fetchVariables(t.variablesReference).then((function(e){return h(e)}),(function(){return d(!1)}))}),[s,o,t.variablesReference]),(0,i.BX)(i.HY,{children:[(0,i.BX)("div",{onClick:function(){t.variablesReference>0&&d((function(e){return!e}))},className:a().dynamic([["d2db4fbc08fcf9b",[n]]])+" variable",children:[(0,i.tZ)(v,{expanded:s,variable:t,depth:n}),(0,i.BX)("div",{className:a().dynamic([["d2db4fbc08fcf9b",[n]]])+" label",children:[t.name,t.type?(0,i.BX)("span",{className:a().dynamic([["d2db4fbc08fcf9b",[n]]])+" type",children:[" ",t.type]}):null,""!==t.value&&": "]}),(0,i.tZ)("div",{className:a().dynamic([["d2db4fbc08fcf9b",[n]]])+" label value",children:(0,i.tZ)("pre",{className:a().dynamic([["d2db4fbc08fcf9b",[n]]]),children:t.value})})]}),s?(0,i.tZ)(u.gC,{align:"stretch",constrainWidth:!0,children:p.map((function(e){return(0,i.tZ)(m,{depth:n+1,variable:e,client:o},"parentVariableReference"in e?e.parentVariableReference+"/"+e.name:e.name)}))}):null,(0,i.tZ)(a(),{id:"d2db4fbc08fcf9b",dynamic:[n],children:".variable.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;height:var(--space-32);min-height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-default);padding-left:-webkit-calc(".concat(n," * var(--space-16));padding-left:-moz-calc(").concat(n," * var(--space-16));padding-left:calc(").concat(n," * var(--space-16));font-family:var(--font-family-code)}.variable.__jsx-style-dynamic-selector:hover{background-color:var(--background-higher);color:var(--foreground-default)}.label.__jsx-style-dynamic-selector{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;-webkit-box-flex:1;-webkit-flex:1 0 auto;-moz-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}.type.__jsx-style-dynamic-selector{opacity:.5}.value.__jsx-style-dynamic-selector{text-align:right;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1}")})]})}},29679:function(e,n,t){t.d(n,{gC:function(){return xn},T0:function(){return sn},Xo:function(){return di},CC:function(){return ei},ex:function(){return si},uD:function(){return hi},_F:function(){return pi},u_:function(){return Fi},hF:function(){return ho},DR:function(){return ri},FQ:function(){return Ki},N8:function(){return Si},lY:function(){return fo},ii:function(){return qi},lz:function(){return Wr},Z0:function(){return gi},kr:function(){return uo},KD:function(){return ci},m$:function(){return ui},x:function(){return Mr},Gt:function(){return $r},nG:function(){return qr},k:function(){return Zo},Ek:function(){return Li},rU:function(){return jr},oL:function(){return yo},BN:function(){return no},Eh:function(){return Vi},LR:function(){return Ui},cT:function(){return bi},o3:function(){return Ai},Zr:function(){return ti},cr:function(){return fi},Jy:function(){return Xi},rX:function(){return vi},Un:function(){return co},xs:function(){return Lr},x7:function(){return Or},Lo:function(){return _i},je:function(){return ii},hx:function(){return Oi},e$:function(){return oi},JW:function(){return Hi},km:function(){return ji},CA:function(){return Ri},Vu:function(){return zr},Ge:function(){return Ii},ec:function(){return Hr},s7:function(){return Ci},qV:function(){return Wi},R5:function(){return Ji},q6:function(){return Ei},FZ:function(){return eo},N2:function(){return Vr},L0:function(){return go},V5:function(){return mo},ZW:function(){return Qr},ts:function(){return Kr},HW:function(){return Jr},zs:function(){return zi},Kt:function(){return xi},A:function(){return wi},lI:function(){return to},Fg:function(){return Ni},Fh:function(){return Yi},cu:function(){return Qi},n7:function(){return ai},ze:function(){return Di},TN:function(){return Yr},Av:function(){return li},Vz:function(){return Zi},VD:function(){return yi},ne:function(){return Fr},dK:function(){return Bi},eM:function(){return Pi},Id:function(){return vo},y8:function(){return Mi},$x:function(){return lo},yR:function(){return ao},Ap:function(){return Co},$P:function(){return xo},Bd:function(){return ro},Hb:function(){return $i},OO:function(){return Gi},H7:function(){return ni},gQ:function(){return oo},MG:function(){return po},Z9:function(){return Xr},HM:function(){return mi},MI:function(){return kr}});var r=t(2272),i=t(7247),o=t(86763),a=t.n(o),l=t(36730),c=t(4541),u=t(50959),s=t(34152),d=t(40120),f=t(29524),p=t(92674),h=t.n(p),v=t(20866);function m(e){if("number"!==typeof e)throw new Error("Expected number")}function g(e){if("string"!==typeof e)throw new Error("Expected string")}function y(e){if(g(e.type),m(e.percent),"paneGroup"!==e.type){if("split"===e.type)return function(e){if("boolean"!==typeof e)throw new Error("Expected boolean")}(e.stacked),function(e){if(!Array.isArray(e.children))throw new Error("Expected children")}(e),void e.children.forEach(y);throw new Error("Invalid pane type: "+e.type)}if(g(e.id),!Array.isArray(e.panes))throw new Error("Expected panes array");e.panes.map(g)}function Z(e,n){if(!Array.isArray(e.floating))throw new Error("Expected floating");e.floating.forEach((function(e){if(g(e.id),"floatingPaneGroup"!==e.type)throw new Error("Expected floatingPaneGroup type");if(!Array.isArray(e.panes))throw new Error("Expected panes array");!function(e){[e.x,e.y,e.width,e.height].forEach(m)}(e.rect),e.panes.forEach((function(e){if(g(e),!n.includes(e))throw new Error("Unrecognized id")}))})),e.tiling&&y(e.tiling)}function b(e){if("object"!==typeof e)throw new Error("Expected object");if(!v.v[e.type])throw new Error("Expected valid pane, got: ".concat(e.type))}function w(e){!function(e){if("object"!==typeof e)throw new Error("Expected object");Object.values(e).map(b)}(e.data),Z(e.layout,Object.keys(e.data)),void 0!==e.sidebarPercent&&function(e){if("number"!==typeof e)throw new Error("Expected number");if(e<0)throw new Error("Expected positive number");if(e>100)throw new Error("Expected number less than 100")}(e.sidebarPercent)}var x=t(92153),C=t(55749),k=t(9970),S=t(19692);function T(e,n){var t=(0,C.Z)(n),r=t[0],i=t.slice(1);if("floating"===r){if(!e.floating)return null;var o=i[0];if("number"!==typeof o)throw new Error("Expected floatingIndex");var a=e.floating[o];if(!a)throw new Error("Expected paneGroup");return a}if("tiling"!==r)throw new Error("Expected tiling path");var l=e.tiling;if(!l)return null;var c=l,u=i.length,s=0,d=!0,f=!1,p=void 0;try{for(var h,v=i[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value;if("paneGroup"===c.type)break;if("number"!==typeof m)throw new Error("Expected number");s++,c=c.children[m]}}catch(g){f=!0,p=g}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}return u===s?c:null}function E(e,n){var t=e.floating.find((function(e){return e.panes.includes(n)}));if(t)return{index:t.panes.indexOf(n),paneGroup:t,paneGroupPath:["floating",e.floating.indexOf(t)],floating:!0};var r=e.tiling;if(!r)return null;for(var i=[{paneGroupPath:["tiling"],parent:null,grandparent:null,node:r}];i.length;){var o=i.shift();if(!o)throw new Error("Expected item");if("split"===o.node.type){var a=!0,l=!1,c=void 0;try{for(var u,s=o.node.children[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;i.push({grandparent:o.parent,parent:o.node,node:d,paneGroupPath:(0,k.Z)(o.paneGroupPath).concat([o.node.children.indexOf(d)])})}}catch(f){l=!0,c=f}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}else if(o.node.panes.includes(n))return{paneGroupPath:o.paneGroupPath,paneGroup:o.node,parent:o.parent,grandparent:o.grandparent,index:o.node.panes.indexOf(n),floating:!1}}return null}function R(e,n,t){if("paneGroup"===e.type)return{paneGroup:e,path:t};var r=0,i=e.children.length-1;return"topRight"!==n||e.stacked?("bottomRight"===n||"bottomLeft"===n&&e.stacked)&&(r=i):r=i,R(e.children[r],n,(0,k.Z)(t).concat([r]))}function I(e,n){var t=e.tiling;return t?R(t,n,["tiling"]):null}function G(e,n){var t=e.tiling,r=e.floating,i=(0,k.Z)(r);for(t&&i.push(t);i.length;){var o,a=i.shift();if(!a)throw new Error("Expected item");if("split"===a.type)(o=i).push.apply(o,(0,k.Z)(a.children));else if(a.id===n)return a}return null}function D(e,n){var t=function(){var e=o.shift();if(!e)throw new Error("Expected item");var t=(0,r.Z)(e,2),i=t[0],a=t[1];return"split"!==i.type?"continue":i.children.some((function(e){return"paneGroup"===e.type&&e.id===n}))?{v:{node:i,path:a}}:void i.children.forEach((function(e,n){o.push([e,(0,k.Z)(a).concat([n])])}))},i=e.tiling;if(null===i)return null;for(var o=[[i,["tiling"]]];o.length;){var a=t();if("object"===(0,S.Z)(a))return a.v}return null}function _(e){if(e.length<1)throw new Error("Expected a path with a parent");return e.slice(0,-1)}function P(e){return"floatingPaneGroup"!==e.type}function B(e,n){e.panes.splice(n,1),0!==e.activeIndex&&(n>e.activeIndex||(e.activeIndex=e.activeIndex-1))}function A(e,n){var t=E(e,n);if(!t)throw new Error("Expected pane");if(t.floating)if(1===t.paneGroup.panes.length){var r=t.paneGroupPath[1];if("number"!==typeof r)throw new Error("Expected floatingIndex");U(e,["floating",r])}else B(t.paneGroup,t.index);else{var i=t.paneGroup,o=t.paneGroupPath,a=t.parent;if(!i)throw new Error("paneGroup eith paneId not found: "+n);var l=i.panes.indexOf(n);if(-1===l)throw new Error("Expected paneIndex");a||1!==i.panes.length?i.panes.length>1?B(i,l):U(e,o):e.tiling=null}}function U(e,n){var t=(0,C.Z)(n),i=t[0],o=t.slice(1);if("tiling"!==i||0!==o.length)if("floating"!==i||0!==o.length){var a=T(e,n);if(!a)throw new Error("Expected node");if("floatingPaneGroup"!==a.type){var l=_(n),c=T(e,l);if("split"!==(null===c||void 0===c?void 0:c.type))throw new Error("Expected split");var u=c.children.indexOf(a);if(-1===u)throw new Error("Expected paneGroupIndex");var s=c.children;if(s.splice(u,1),s.length>1){var d=100/s.reduce((function(e,n){return e+n.percent}),0);s.forEach((function(e){e.percent=e.percent*d}))}else{var f=(0,r.Z)(s,1)[0],p=l.length>1?T(e,_(l)):null;if(!p)return f.percent=100,void(e.tiling=f);if("split"!==p.type)throw new Error("Expected split");var h=p.children.indexOf(c);if(-1===h)throw new Error("Expected parentIndex");f.percent=c.percent,p.children[h]=f}}else{var v=e.floating.indexOf(a);if(-1===v)throw new Error("Expected paneGroupIndex");e.floating.splice(v,1)}}else e.floating=[];else e.tiling=null}var N=t(36501);function L(e){var n=e.isStacked,t=e.isHTML,r=e.isExtension,i=e.codeEditorPath,o=void 0===i?"":i,a={codeEditor:{paneId:h()(),pane:{type:"codeEditor",data:{path:o}}},output:{paneId:h()(),pane:{type:t?"webview":"runnerOutput"}},shell:{paneId:h()(),pane:{type:"shell"}},ghostwriter:{paneId:h()(),pane:{type:"ghostwriterChat"}},extensionDevtools:{paneId:h()(),pane:{type:"extensionDevtools"}},extensionDocs:{paneId:h()(),pane:{type:"docs",data:{url:N.TT.EXTENSIONS}}}},l={};Object.values(a).forEach((function(e){var n=e.paneId,t=e.pane;l[n]=t}));var c=function(e){var n=e.codeEditorId,t=e.outputId,r=e.shellId,i=e.extensionDevtoolsId,o=e.extensionDocsId,a=e.isStacked,l=e.isExtension,c=a?{type:"split",stacked:!0,percent:100,children:[{id:h()(),percent:60,type:"paneGroup",panes:[n],activeIndex:0},{id:h()(),percent:40,type:"paneGroup",panes:[t,r],activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:h()(),percent:55,type:"paneGroup",panes:[n],activeIndex:0},{id:h()(),percent:45,type:"paneGroup",panes:[t,r],activeIndex:0}]};return l&&(c=a?{type:"split",stacked:!0,percent:100,children:[{id:h()(),percent:40,type:"paneGroup",panes:[n],activeIndex:0},{id:h()(),percent:60,type:"paneGroup",panes:[i,o,r],activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:h()(),percent:55,type:"paneGroup",panes:[n],activeIndex:0},{id:h()(),percent:45,type:"paneGroup",panes:[i,o,r],activeIndex:0}]}),{floating:[],tiling:c}}({codeEditorId:a.codeEditor.paneId,outputId:a.output.paneId,shellId:a.shell.paneId,extensionDevtoolsId:a.extensionDevtools.paneId,extensionDocsId:a.extensionDocs.paneId,isStacked:n,isExtension:r});return{layout:c,data:l}}function X(e){var n,t=e.initialLayoutState,i=e.codeEditorPath,o=e.isHTML,a=e.isStacked,l=e.isExtension,c=t?function(e){try{w(e)}catch(n){return null}return e}(t):null,u=null!==(n=null===c||void 0===c?void 0:c.sidebarPercent)&&void 0!==n?n:15;if(c){var s=(0,x.ZP)(c,(function(e){var n=!0,t=!1,i=void 0;try{for(var o,a=Object.entries(e.data)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,r.Z)(o.value,2),c=l[0],u=l[1];("commands"===u.type||"codeEditor"===u.type&&!u.data.path)&&(delete e.data[c],A(e.layout,c))}}catch(s){t=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}}));return{data:s.data,layout:s.layout,type:"saved",sidebarPercent:u}}var d=L({isStacked:a,isHTML:o,isExtension:l,codeEditorPath:i});return{data:d.data,layout:d.layout,type:"default",sidebarPercent:u}}var M=t(81202),O=t.n(M),F=t(72006);var W={top:0,bottom:0,left:0,right:0};function H(e,n){var t=n.size,r=n.gap,i=n.headerHeight,o=n.inset,a=void 0===o?W:o,l=[],c=[],u=[],s=[],d=null;function f(n,t,o,a){var l=t.children.indexOf(n),p=t.children.length,h=t.stacked?o.height:o.width;var v=function(){var e=o.width,a=o.height,l=n.percent/100;return t.stacked?a=(h-(r*(p-1)+i*p))*l+i:e=(h-r*(p-1))*l,{width:e,height:a}}(),m=v.width,g=v.height,y=function(){var e=o.x,n=o.y;if(0===l)return{x:e,y:n};if(!d)throw new Error("Expected previousRect");return t.stacked?n=d.y+d.height+r:e=d.x+d.width+r,{x:e,y:n}}(),Z={x:y.x,y:y.y,height:g,width:m};if(d=Z,"paneGroup"===n.type){var b,w={x:Z.x,y:Z.y+i,width:Z.width,height:Z.height-i},x={x:w.x,y:w.y-i,width:w.width,height:i};s.push({id:n.id,rect:x,panes:n.panes,activeIndex:n.activeIndex,path:a}),(b=c).push.apply(b,(0,k.Z)(n.panes.map((function(e,t){return{paneId:e,rect:w,active:t===n.activeIndex}}))))}else n.children.forEach((function(e,t){return f(e,n,Z,(0,k.Z)(a).concat([t]))}));if(0!==l){var C={x:Z.x-(t.stacked?0:r),y:Z.y-(t.stacked?r:0),width:t.stacked?Z.width:r,height:t.stacked?r:Z.height},S=_(a),E=(0,k.Z)(S).concat([l-1]),R=T(e,E);if(!R||!P(R))throw new Error("Expected leftNode");var I=void 0;0===R.percent?I="left":0===n.percent&&(I="right"),u.push({parentPath:S,leftPath:E,rightPath:a,stacked:t.stacked,rect:C,snapped:I})}}var p={x:a.left,y:a.top,width:t.width-(a.left+a.right),height:t.height-(a.top+a.bottom)},h=e.tiling;if("paneGroup"===(null===h||void 0===h?void 0:h.type)){var v,m={x:p.x,y:p.y+i,width:p.width,height:p.height-i},g={x:m.x,y:m.y-i,width:m.width,height:i};s.push({id:h.id,rect:g,panes:h.panes,activeIndex:h.activeIndex,path:["tiling"]}),(v=c).push.apply(v,(0,k.Z)(h.panes.map((function(e,n){return{paneId:e,rect:m,active:n===h.activeIndex}}))))}else h&&h.children.forEach((function(e,n){return f(e,h,p,["tiling",n])}));var y=a.left+49,Z={x:p.x-y,y:p.y,width:p.width+y,height:p.height};return e.floating.forEach((function(e,n){var t,r=function(e,n){var t=n.inside,r=(0,F.Z)({},e);return r.x<t.x?(r.x=t.x,r.width=Math.min(r.width,t.width)):r.x+r.width>=t.x+t.width?(r.x=Math.max(t.x,t.x+t.width-r.width),r.width=Math.min(r.width,t.width)):r.width=Math.min(r.width,t.width),r.y<t.y?(r.y=t.y,r.height=Math.min(r.height,t.height)):r.y+r.height>=t.y+t.height?(r.y=Math.max(t.y,t.y+t.height-r.height),r.height=Math.min(r.height,t.height)):r.height=Math.min(r.height,t.height),r}(e.rect,{inside:Z}),o={height:i,width:r.width,x:r.x,y:r.y},a={x:r.x,y:r.y+i,width:r.width,height:Math.max(r.height-i,0)};s.push({id:e.id,rect:o,panes:e.panes,activeIndex:e.activeIndex,path:["floating",n]}),(t=l).push.apply(t,(0,k.Z)(e.panes.map((function(n,t){return{paneId:n,rect:a,active:t===e.activeIndex}}))))})),{tiles:c,gutters:u,headers:s,floating:l}}var z=t(10161),V=(0,l.cn)([]),j=(0,l.cn)([]),q=(0,l.cn)([]),$={x:0,y:0,width:0,height:0},Y={type:"commands",data:{autoFocus:!1}};var K=(0,z.xu)((function(e){return(0,l.cn)(function(e){return{paneId:e,type:"tile",rectAtom:(0,l.cn)((0,F.Z)({},$)),data:(0,l.cn)((0,F.Z)({},Y)),isHidden:!1,isCommitted:!1}}(e))})),Q=(0,l.cn)((function(e){return e(V).map((function(n){return e(K(n))}))})),J=(0,l.cn)((function(e){return e(q).map((function(n){return e(ne(n))}))})),ee=(0,z.xu)((function(e){return(0,l.cn)(function(e){return{handleId:e,rect:$,stacked:!1,parentPath:["tiling"],leftPath:["tiling"],rightPath:["tiling"]}}(e))})),ne=(0,z.xu)((function(e){return(0,l.cn)({id:e,rectAtom:(0,l.cn)((0,F.Z)({},$)),panes:[],path:["tiling"],activeIndex:0})})),te=(0,l.cn)((function(){return 36})),re=(0,l.cn)({x:0,y:0,width:0,height:0}),ie=(0,l.cn)({width:0}),oe=(0,l.cn)(null),ae=(0,l.cn)(null,(function(e,n,t){t!==e(oe)&&n(oe,t)})),le=(0,l.cn)(null,(function(e,n,t){var r=K(t);e(r).isCommitted||n(r,(function(e){return(0,x.ZP)(e,(function(e){e.isCommitted=!0}))}))})),ce=(0,l.cn)((function(e){var n=e(oe);if(!n)return null;var t=e(K(n)),r=e(t.data);return(0,v.Ur)(r)&&r.data.path||null})),ue=(0,l.cn)(!0),se=(0,l.cn)({tiling:null,floating:[]}),de=(0,l.cn)((function(e){return e(Q).filter((function(n){return(0,v.Ur)(e(n.data))}))})),fe=(0,l.cn)((function(e){return e(de).map((function(n){return{paneId:n.paneId,filePath:e(n.data).data.path}})).filter((function(e){return e.filePath&&e.filePath.length>0}))})),pe=(0,l.cn)((function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(Q)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.data)])}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n})),he=(0,l.cn)((function(e){var n=e(re);return Boolean(n.width&&n.height)})),ve=(0,l.cn)(null),me=(0,l.cn)((function(e){var n=e(oe);if(!n)return null;var t=e(K(n)).rectAtom,r=e(t),i=e(te);return{x:r.x,y:r.y-i,width:r.width,height:r.height+i}})),ge=(0,l.cn)(null,(function(e,n,t){var r=e(de).find((function(n){return t===(0,v.DQ)(e(n.data))}));r&&(n(ae,r.paneId),n(le,r.paneId))})),ye=(0,l.cn)(null,(function(e,n,t){n(e(K(t.paneId)).data,t.pane),t.makeActive&&n(ae,t.paneId),t.commit&&n(le,t.paneId)})),Ze=(0,l.cn)(null);function be(e,n){var t=e.x,r=e.y;return t>n.x&&t<n.x+n.width&&r>n.y&&r<n.y+n.height}function we(e,n){var t=function(e){var n=e.rect,t=e.point,r=n.height>n.width?n.width/n.height:1,i=n.width>n.height?n.height/n.width:1,o=(t.x-n.x)*i,a=(n.x+n.width-t.x)*i,l=(t.y-n.y)*r,c=(n.y+n.height-t.y)*r,u=Math.min(o,a,l,c);return u===o?"left":u===a?"right":u===l?"top":"bottom"}({point:e,rect:n}),r={x:n.x,y:n.y,width:n.width,height:n.height},i="below";return"top"===t?(r.height=n.height/2,i="above"):"bottom"===t?(r.height=n.height/2,r.y=n.y+n.height/2,i="below"):"left"===t?(r.width=n.width/2,r.x=n.x,i="leftOf"):"right"===t&&(r.width=n.width/2,r.x=n.x+n.width/2,i="rightOf"),{placement:i,rect:r}}function xe(e){return"handle:"+e.leftPath.join(":")}function Ce(e){return(0,i.Z)((function(){return(0,z.kv)(e,(function(e){return{width:e.width,height:e.height}}),(function(e,n){return Boolean(e.height===n.height&&e.width===n.width)}))}),[e])}function ke(e){return(0,i.Z)((function(){return(0,z.kv)(e,(function(e){return{x:e.x,y:e.y}}),(function(e,n){return Boolean(e.x===n.x&&e.y===n.y)}))}),[e])}var Se=t(95210),Te=(0,l.cn)((function(e){var n=e(te),t=e(ie),r=e(re);return{headerHeight:n,inset:{top:0,bottom:8,left:8+t.width,right:8},gap:8,size:{width:r.width,height:r.height}}})),Ee=(0,l.cn)(null,(function(e,n,t){n(re,t),n(Ie,e(se))}));function Re(e,n){return O()(e,n)}var Ie=(0,l.cn)(null,(function(e,n,t){var r=function(t){var r=t.paneId,i=t.rect,o=t.type,a=t.isHidden;l.delete(r);var c=K(r),u=e(c);Re(e(u.rectAtom),i)||n(u.rectAtom,i);var s=(0,x.ZP)(u,(function(e){e.paneId=r,e.type=o,e.isHidden=a}));Re(u,s)||n(c,s)},i=e(V),o=e(j),a=e(q),l=new Set(i),c=new Set(o),u=new Set(a),s=H(t,e(Te)),d=s.tiles,f=s.floating,p=s.gutters,h=s.headers,v=p.map(xe);Re(o,v)||n(j,v);var m=(0,k.Z)(d).concat((0,k.Z)(f)).map((function(e){return e.paneId}));Re(i,m)||n(V,(0,Se.Z)(m,{existing:i,getKey:function(e){return e}}));var g=[];h.forEach((function(t){u.delete(t.id);var r=ne(t.id),i=e(r);g.push(t.id),Re(e(i.rectAtom),t.rect)||n(i.rectAtom,t.rect);var o=(0,x.ZP)(i,(function(e){e.panes=t.panes,e.activeIndex=t.activeIndex,e.path=t.path}));Re(i,o)||n(r,o)})),Re(a,g)||n(q,g),d.forEach((function(e){var n=e.paneId,t=e.rect,i=e.active;r({paneId:n,rect:t,isHidden:!i,type:"tile"})})),f.forEach((function(e){var n=e.paneId,t=e.rect,i=e.active;r({paneId:n,rect:t,isHidden:!i,type:"floating"})})),p.forEach((function(t){var r={handleId:xe(t),rect:t.rect,parentPath:t.parentPath,leftPath:t.leftPath,rightPath:t.rightPath,stacked:t.stacked,snapped:t.snapped};c.delete(r.handleId);var i=ee(r.handleId);Re(e(i),r)||n(i,r)})),l.forEach(K.remove),c.forEach(ee.remove),u.forEach(ne.remove);var y=e(oe);y&&l.has(y)&&n(oe,null),n(se,t)})),Ge=t(57135),De=t(96583),_e=t(85234),Pe=t.n(_e),Be=t(43119),Ae=t(71440),Ue=t(59187);function Ne(){var e=(0,Be.Z)(["\n  mutation SaveReplLayoutState($input: SetReplLayoutStateInput!) {\n    setReplLayoutState(input: $input) {\n      ... on Repl {\n        id\n        layoutState\n      }\n    }\n  }\n"]);return Ne=function(){return e},e}var Le={},Xe=(0,Ae.Ps)(Ne());var Me=t(98298);function Oe(e,n){var t=n.leftPath,r=n.percent,i=n.snapPercent,o=void 0===i?0:i,a=T(e,t);if(!a||!P(a))throw new Error("Expected leftNode");var l=T(e,_(t));if("split"!==(null===l||void 0===l?void 0:l.type))throw new Error("Expected splitNode");var c=l.children.indexOf(a);if(-1===c)throw new Error("Expected leftNodeIndex");var u=c+1,s=l.children[u];if(!s)throw new Error("Expected rightNode");if(r<=o){if(a.percent=0,r<0&&c>0)for(var d=Math.abs(r),f=c-1;d>0;){var p=l.children[f];if(p.percent>d){p.percent-=d;break}if(d-=p.percent,p.percent=0,0===f)break;f--}var h=l.children.reduce((function(e,n){return n===s?e:e+n.percent}),0);s.percent=100-h}else{var v=a.percent+s.percent,m=l.children.slice(c).reduce((function(e,n){return e+n.percent}),0);if(r>v-o){if(a.percent=Math.min(m,Math.max(v,r)),s.percent=0,r>v&&u<l.children.length-1)for(var g=r-v,y=u+1;g>0;){var Z=l.children[y];if(Z.percent>g){Z.percent-=g;break}if(g-=Z.percent,Z.percent=0,y===l.children.length-1)break;y++}}else{var b=a.percent-r;s.percent=s.percent+b,a.percent=r}}}function Fe(e){var n=e.layout,t=e.splitPath,r=e.tilingOptions,i=function(e,n){var t=n.splitPath,r=T(e,t);if(!r||"split"!==r.type)throw new Error("Expected split node");for(var i=100,o=_(t);o.length;){var a=T(e,o);if(!a)break;o=_(o),"split"===a.type&&a.stacked===r.stacked&&(i*=a.percent/100)}return i}(n,{splitPath:t}),o=T(n,t);if("split"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected split node");var a=r.size,l=r.gap,c=r.headerHeight,u=r.inset,s=void 0===u?{top:0,bottom:0,left:0,right:0}:u,d=o.children.length,f=o.stacked?l*(d-1)+c*d:l*(d-1);return i/100*((o.stacked?a.height-(s.top+s.bottom):a.width-(s.left+s.right))-f)}var We=(0,l.cn)(null),He=(0,l.cn)(null,(function(e,n,t){if("end"!==t.type)if("update"!==t.type){var r=e(se),i=t.stacked?window.innerHeight:window.innerWidth,o=T(r,t.leftPath);if(!o||!P(o)){var a=new Error("Expected left node");throw n(ve,{error:a,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),a}var l=_(t.leftPath),c=o.percent,u=30/i*100,s=null;try{s=Fe({splitPath:l,layout:r,tilingOptions:e(Te)})}catch(w){throw n(ve,{error:w,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),w}if(null===s)throw new Error("Expected resizeDistance");n(We,{stacked:t.stacked,leftPath:t.leftPath,startPercent:c,resizeDistance:s,snapPercent:u,initialLayout:r})}else{var d=e(We);if(!d){var f=new Error("Expected tilingResize");throw n(ve,{error:f,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),f}var p=d.stacked,h=d.leftPath,v=d.startPercent,m=d.resizeDistance,g=d.initialLayout,y=d.snapPercent,Z=v+(p?t.moveDelta.y:t.moveDelta.x)/m*100,b=(0,x.ZP)(g,(function(e){Oe(e,{leftPath:h,percent:Z,snapPercent:y})}));n(Ie,b)}else n(We,null)}));function ze(e){return(0,i.Z)((function(){return ee(e)}),[e])}function Ve(e){var n=ze(e);return(0,i.Z)((function(){return(0,z.kv)(n,(function(e){return e.rect}))}),[n])}function je(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){var t=n(We);return!!t&&e===xe({leftPath:t.leftPath})}))}),[e])}function qe(e){var n=ze(e);return(0,i.Z)((function(){return(0,z.kv)(n,(function(e){return e.stacked}))}),[n])}var $e=(0,l.cn)(null,(function(e,n){0!==e(ie).width&&(n(ie,{width:0}),n(Ie,e(se)))})),Ye=(0,l.cn)(null,(function(e,n){var t=e(ie).width>0?0:un;n(ie,{width:t}),n(Ie,e(se))})),Ke=(0,l.cn)(null),Qe=(0,l.cn)(null,(function(e,n){var t=e(ie);n(Ke,{sidebarWidthStart:t.width})})),Je=(0,l.cn)(null,(function(e,n,t){var r=t.deltaX,i=e(Ke);if(i){var o=e(re),a=i.sidebarWidthStart+r;if((a=Math.min(Math.max(a,0),Math.min(o.width,an)))<sn&&!(r>0)){if(sn-a<ln)return;a=0}n(ie,{width:a}),n(Ie,e(se))}})),en=(0,l.cn)(null,(function(e,n){if(e(Ke)){var t=e(ie);t.width<sn&&(n(ie,{width:0===t.width?0:sn}),n(Ie,e(se))),n(Ke,null)}})),nn=(0,l.cn)((function(e){return Boolean(e(Ke))})),tn=(0,l.cn)((function(e){return e(nn)?{width:1,height:e(rn).height}:{width:2,height:24}})),rn=(0,l.cn)((function(e){var n=e(re).height;return{x:e(ie).width,y:0,height:n-8,width:8}})),on=(0,l.cn)((function(e){return e(rn).height})),an=600,ln=80,cn=(0,l.cn)((function(e){return e(ie).width})),un=220,sn=180,dn=(0,l.cn)((function(e){return e(cn)>0}));var fn=(0,l.cn)((function(e){var n=e(re);return function(e,n){var t=n.min,r=n.max;return Math.min(Math.max(t,e),r)}(e(cn)/n.width*100,{min:0,max:100})})),pn=(0,l.cn)((function(e){var n=e(se),t={};e(Q).forEach((function(n){t[n.paneId]=e(n.data)}));var r=e(fn);return{layout:n,data:t,sidebarPercent:r}})),hn=(0,l.cn)(null),vn=(0,l.cn)(null),mn=(0,l.cn)(null);function gn(e,n){return yn.apply(this,arguments)}function yn(){return(yn=(0,Ge.Z)((function(e,n){var t,r;return(0,De.__generator)(this,(function(i){switch(i.label){case 0:r=void 0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,null===Me.l||void 0===Me.l?void 0:Me.l.mutate({mutation:Xe,variables:{input:{replId:e,state:n}}})];case 2:return r=i.sent(),[3,4];case 3:return i.sent(),[2,{success:!1,retry:!0}];case 4:return"Repl"===(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.setReplLayoutState.__typename)?[2,{success:!0,retry:void 0}]:[2,{success:!1,retry:!1}]}}))}))).apply(this,arguments)}var Zn=(0,l.cn)(null,function(){var e=(0,Ge.Z)((function(e,n,t){var r,i,o,a,l,c;return(0,De.__generator)(this,(function(u){switch(u.label){case 0:return(r=e(vn))&&!r.retry||r&&Date.now()-r.timestamp<6e4?[2]:e(he)?(i=e(pn),o=t.replId,a=e(hn),!t.force&&O()(a,i)?[2]:(l=Pe()(),n(mn,l),[4,gn(o,i)])):[2];case 1:return c=u.sent(),e(mn)!==l?[2]:(n(mn,null),c.retry?(n(vn,{timestamp:Date.now(),retry:!0}),[2]):c.success?(n(hn,i),[2]):(n(vn,{timestamp:Date.now(),retry:!1}),[2]))}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),bn=(0,l.cn)(null,(function(e,n,t){var i=t.data,o=t.layout,a=t.sidebarPercent,l=t.type;Object.entries(i).forEach((function(t){var i=(0,r.Z)(t,2),o=i[0],a=i[1],l=K(o);n(l,(0,x.ZP)(e(l),(function(e){e.isCommitted=!0}))),n(e(l).data,a)}));var c=window.innerWidth,u=Math.floor(a)>0?Math.min(c*(a/100),an):0;n(ie,{width:u>0?Math.max(un,u):Math.max(0,u)}),n(Ie,o),n(Ze,l),n(hn,e(pn))})),wn=(0,u.createContext)(null);function xn(e){var n=e.children,t=e.initialLayoutState,r=void 0===t?null:t,i=e.isHTML,o=void 0!==i&&i,a=e.isStacked,s=void 0!==a&&a,d=e.isExtension,f=void 0!==d&&d,p=(0,u.useState)((function(){return function(e){var n=e.initialLayoutState,t=e.isHTML,r=e.isStacked,i=e.isExtension,o=(0,l.MT)();return o.set(bn,X({initialLayoutState:n,isHTML:t,isStacked:r,isExtension:i})),o}({initialLayoutState:r,isHTML:o,isStacked:s,isExtension:f})})),h=p[0];return(0,c.tZ)(wn.Provider,{value:h,children:n})}function Cn(){var e=(0,u.useContext)(wn);if(!e)throw new Error("Expected store in context");return e}function kn(e){return(0,s.Dv)(e,{store:Cn()})}function Sn(e){return(0,f.b)(e,Cn())}var Tn=function(e){return(0,s.b9)(e,{store:Cn()})};var En=(0,l.cn)(!1),Rn=(0,l.cn)((function(e){return e(En)?e(oe):null})),In=(0,l.cn)(null,(function(e,n,t){n(ae,t),n(En,!0)})),Gn=(0,l.cn)(null,(function(e,n,t){n(En,!0);var r=G(e(se),t.paneGroupId);if(!r){var i=new Error("Expected paneGroup");throw n(ve,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=new Error("Expected paneId");throw n(ve,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),a}n(ae,o)})),Dn=(0,l.cn)(null,(function(e,n){n(En,!1)})),_n=(0,l.cn)(null,(function(e,n,t){e(Rn)===t?n(Dn):n(In,t)})),Pn=(0,l.cn)(null,(function(e,n,t){var r=G(e(se),t.paneGroupId);if(!r){var i=new Error("Expected paneGroup");throw n(ve,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=new Error("Expected paneId");throw n(ve,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),a}n(_n,o)})),Bn=(0,l.cn)((function(e){var n=e(re);return{x:-n.x,y:-n.y,width:n.width+n.x,height:n.height+n.y}})),An=(0,l.cn)((function(e){var n=e(te),t=e(Bn);return{x:t.x,y:t.y,width:t.width,height:n}})),Un=(0,l.cn)((function(e){var n=e(te),t=e(Bn);return{x:t.x,y:t.y+n,width:t.width,height:t.height-n}})),Nn=t(6601);function Ln(e,n){var t=void 0===n.activeIndex?0:n.activeIndex;if(n.isFloating)e.floating.push({id:n.id,type:"floatingPaneGroup",panes:n.panes,activeIndex:t,rect:n.rect});else{var r=null;if(Array.isArray(n.relativeTo))r=n.relativeTo;else{var i=E(e,n.relativeTo);if(!i)throw new Error("Expected pane");r=i.paneGroupPath}if(null===r)throw new Error("Expected relativeTo");if("tiling"!==r[0])throw new Error("Expected tiling path");var o=n.placement,a=n.panes,l=n.percent,c="above"===o||"below"===o,u="rightOf"===o||"below"===o;if(e.tiling||1!==r.length){if(!e.tiling)throw new Error("Expected tiling");var s=T(e,r);if(!s||!P(s))throw new Error("Expected tiled node");if(1!==r.length||"replace"!==o){if(1===r.length&&"paneGroup"===e.tiling.type){var d=[e.tiling];return e.tiling={type:"split",percent:100,stacked:c,children:d},void Xn({id:n.id,insertIndex:u?1:0,panes:a,children:d,percent:l,activeIndex:t})}if(1===r.length&&"split"===e.tiling.type){if(Boolean(e.tiling.stacked)===Boolean(c))return void Xn({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:u?e.tiling.children.length:0,children:e.tiling.children});var f={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},p=u?[s,f]:[f,s];return s.percent=100-f.percent,void(e.tiling={type:"split",stacked:c,children:p,percent:100})}if(0===r.length)throw new Error("Expected relativeTo length");var h=T(e,_(r));if("split"!==(null===h||void 0===h?void 0:h.type))throw new Error("Expected split parent");if("replace"!==o)if(Boolean(h.stacked)!==Boolean(c))if(Boolean(h.stacked)===Boolean(c));else{var v={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},m=u?[s,v]:[v,s],g=s.percent;s.percent=100-v.percent;var y=h.children.indexOf(s);h.children[y]={type:"split",stacked:c,children:m,percent:g}}else{var Z=h.children.indexOf(s);Xn({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:u?Z+1:Z,children:h.children})}else{var b=h.children.indexOf(s);h.children.splice(b,1,{id:n.id,panes:a,percent:s.percent,type:"paneGroup",activeIndex:t})}}else e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t}}else e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t}}}function Xn(e){var n=e.id,t=e.percent,r=e.children,i=e.panes,o=e.insertIndex,a=e.activeIndex;if(void 0===t){var l=r.reduce((function(e,n){return e+n.percent}),0)/r.length,c=100/(100+l);r.forEach((function(e){e.percent=e.percent*c}));var u={id:n,panes:i,type:"paneGroup",percent:l*c,activeIndex:a};r.splice(o,0,u)}else{var s=(100-t)/100;r.forEach((function(e){e.percent=e.percent*s}));var d={id:n,panes:i,type:"paneGroup",percent:t,activeIndex:a};r.splice(o,0,d)}}function Mn(e,n){var t=G(e,n.paneGroupId);if(!t)throw new Error("Expected paneGroup");!function(e,n){var t,r=n.index,i=n.paneIds,o=n.activate,a=void 0===o||o;if(void 0!==r&&r>e.panes.length)throw new Error("Invalid index");var l=void 0===r?e.panes.length:r;(t=e.panes).splice.apply(t,[l,0].concat((0,k.Z)(i))),a&&(e.activeIndex=l)}(t,n)}var On=(0,l.cn)(null,(function(e,n,t){var r=e(se),i=G(r,t.paneGroupId);if(!i){var o=new Error("Expected pane group");throw n(ve,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),o}var a=(0,x.ZP)(r,(function(e){try{i.panes.forEach((function(n){A(e,n)}))}catch(o){throw n(ve,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),o}}));e(En)&&n(En,!1),n(Ie,a)})),Fn=(0,l.cn)(null,(function(e,n,t){var r=e(se),i=E(r,t.paneId);if(!i){var o=new Error("Expected relativeToPane");throw n(ve,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),o}var a=Pe()(),l=e(K(a));n(l.data,{type:"commands",data:{autoFocus:Boolean(t.autoFocus)}});var c=(0,x.ZP)(r,(function(e){try{Ln(e,{id:Pe()(),isFloating:!1,placement:t.placement,relativeTo:i.paneGroupPath,panes:[a]})}catch(o){throw n(ve,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),o}}));n(Ie,c),n(ae,a)})),Wn=(0,l.cn)(null,(function(e,n,t){var r=e(se),i=Pe()(),o=e(K(i));n(o.data,t.pane);var a=(0,x.ZP)(r,(function(e){try{Ln(e,{id:Pe()(),isFloating:!1,placement:t.placement,relativeTo:t.relativeTo,panes:[i],percent:t.percent})}catch(r){throw n(ve,{error:r,tags:{layoutstate:!0},origin:"Layout: state/splits/insertSplitPaneAtom"}),r}}));return n(Ie,a),i})),Hn=(0,l.cn)(null,(function(e,n,t){var r=e(se),i=(0,x.ZP)(r,(function(e){Oe(e,{leftPath:t.leftPath,percent:t.percent})}));n(Ie,i)})),zn=(0,l.cn)(null,(function(e,n,t){var r=e(se),i=t===e(oe)?E(r,t):null,o=null===i||void 0===i?void 0:i.paneGroup.panes.find((function(e){return e!==t})),a=(0,x.ZP)(r,(function(e){try{A(e,t)}catch(c){throw n(ve,{error:c,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),c}}));if(n(Ie,a),o){var l=E(a,o);if(!l){var c=new Error("Expected siblingPane");throw n(ve,{error:c,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),c}var u=l.paneGroup.panes[l.paneGroup.activeIndex];u&&n(ae,u)}else e(En)&&n(En,!1)})),Vn=(0,l.cn)(null,(function(e,n,t){var r=e(se),i=E(r,t),o=null===i||void 0===i?void 0:i.paneGroup.panes.filter((function(e){return e!==t}));if(null===o||void 0===o?void 0:o.length){var a=(0,x.ZP)(r,(function(e){try{var t=!0,r=!1,i=void 0;try{for(var a,l=o[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){A(e,a.value)}}catch(c){r=!0,i=c}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}}catch(u){throw n(ve,{error:u,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),u}}));n(Ie,a)}})),jn=(0,l.cn)(null,(function(e,n,t){if(0===t.panes.length){var r=new Error("Expect at least one pane");throw n(ve,{error:r,origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),r}var i=e(se),o=t.panes.map((function(){return Pe()()})),a=(0,x.ZP)(i,(function(e){try{Ln(e,{id:Pe()(),panes:o,relativeTo:t.relativeTo||["tiling"],placement:t.placement,percent:t.percent})}catch(r){throw n(ve,{error:r,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),r}}));n(Ie,a),t.panes.forEach((function(t,r){var i=o[r],a=e(K(i));n(a.data,t);var l=(0,v.b)(t.type)?e(Q).find((function(n){return e(n.data).type===t.type&&n.paneId!==i})):null;l&&n(zn,l.paneId)})),t.makeActive&&n(ae,o[0])})),qn={top:"above",left:"leftOf",right:"rightOf",bottom:"below"},$n=(0,l.cn)(null,(function(e,n,t){var r=t.pane,i=t.edge;n(Wn,{pane:r,relativeTo:["tiling"],placement:qn[i]})})),Yn=(0,l.cn)(null,(function(e,n,t){var r=e(se),i=Pe()(),o=(0,x.ZP)(r,(function(e){try{Ln(e,{id:Pe()(),panes:[i],isFloating:!0,rect:t.rect})}catch(r){throw n(ve,{error:r,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertFloatingPaneGroupAtom"}),r}}));n(Ie,o);var a=e(K(i));n(a.data,t.pane),t.makeActive&&n(ae,i)}));function Kn(e,n,t){var i=(0,r.Z)("x"===t?[[e.x,e.x+e.width],[n.x,n.x+n.width]]:[[e.y,e.y+e.height],[n.y,n.y+n.height]],2),o=i[0],a=i[1],l=Math.max(o[0],a[0]);return Math.min(o[1],a[1])-l}function Qn(e){var n=e.from,t=e.other;switch(e.direction){case"above":return n.y-t.y;case"below":return t.y-n.y;case"rightOf":return t.x-n.x;case"leftOf":return n.x-t.x}}function Jn(e){var n=e.relativeTo,t=e.rects,i=e.direction,o=t.get(n);if(!o)throw new Error("Expected relativeTo rect to be included in rects");var a=null,l=!0,c=!1,u=void 0;try{for(var s,d=t[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=(0,r.Z)(s.value,2),p=f[0],h=f[1];if(p!==n){var v=Qn({from:o,other:h,direction:i});if(!(("leftOf"===i||"above"===i)&&v<=0||("rightOf"===i||"below"===i)&&v<0)){var m=Kn(o,h,"leftOf"===i||"rightOf"===i?"y":"x");if(!(m<=0))(!a||a.distance>v||a.distance===v&&a.overlap<m)&&(a={key:p,rect:h,distance:v,overlap:m})}}}}catch(g){c=!0,u=g}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return(null===a||void 0===a?void 0:a.key)||null}var et=t(85647),nt=(0,l.cn)(null,(function(e,n,t){var r=e(se),i=E(r,t);if(!i){var o=new Error("Expected selectedPane");throw n(ve,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}var a=ne(i.paneGroup.id);n(a,(function(e){return(0,x.ZP)(e,(function(e){e.activeIndex=i.index}))}));var l=!0,c=!1,u=void 0;try{for(var s,d=i.paneGroup.panes[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value,p=K(f);n(p,(function(e){return(0,x.ZP)(e,(function(e){e.isHidden=e.paneId!==t}))}))}}catch(h){c=!0,u=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}n(se,(0,x.ZP)(r,(function(e){try{!function(e,n){var t=E(e,n);if(!(null===t||void 0===t?void 0:t.paneGroup))throw new Error("Expected pane group");var r=t.paneGroup,i=r.panes.indexOf(n);if(-1===i)throw new Error("Expected index");r.activeIndex=i}(e,t)}catch(o){throw n(ve,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}}))),n(ae,t)})),tt=(0,l.cn)(null,(function(e,n,t){var r=e(Q).find((function(n){return e(n.data).type===t.type}));r?n(nt,r.paneId):n(rt,{pane:t,activate:!1})})),rt=(0,l.cn)(null,(function(e,n,t){var i,o=t.pane,a=t.activate,l=e(se),c=I(l,"topRight");if(!c){var u=n(Wn,{pane:o,relativeTo:["tiling"],placement:"replace"});return a&&n(ae,u),u}if("paneGroup"===(null===(i=l.tiling)||void 0===i?void 0:i.type)){var s=n(Wn,{pane:o,relativeTo:c.path,placement:"rightOf"});return a&&n(ae,s),s}return(0,r.Z)(n(lt,{panes:[o],paneGroupId:c.paneGroup.id,activate:a}),1)[0]})),it=(0,l.cn)(null,(function(e,n,t){var r=e(Q).find((function(n){return e(n.data).type===t}));if(r){if("webview"===t||"vnc"===t)return;return n(nt,r.paneId),void n(le,r.paneId)}var i=e(se),o=I(i,"topRight");if(o&&i.tiling)if("paneGroup"!==i.tiling.type)if("split"!==i.tiling.type||2!==i.tiling.children.length||"paneGroup"!==i.tiling.children[1].type)n(lt,{panes:[{type:t}],paneGroupId:o.paneGroup.id,commit:!0});else{var a=i.tiling.stacked,l=n(Wn,{pane:{type:t},relativeTo:o.path,placement:a?"rightOf":"above"});n(le,l)}else{var c=n(Wn,{pane:{type:t},relativeTo:["tiling"],placement:"rightOf"});n(le,c)}else{var u=n(Wn,{pane:{type:t},relativeTo:["tiling"],placement:"replace"});n(le,u)}})),ot=(0,l.cn)(null,(function(e,n){var t=e(Q).find((function(n){return"threadInbox"===e(n.data).type}));if(t)n(nt,t.paneId);else{var r=e(se),i=I(r,"bottomRight");i&&r.tiling?"paneGroup"!==r.tiling.type?n(lt,{panes:[{type:"threadInbox"}],paneGroupId:i.paneGroup.id}):n(Wn,{pane:{type:"threadInbox"},relativeTo:["tiling"],placement:"rightOf"}):n(Wn,{pane:{type:"threadInbox"},relativeTo:["tiling"],placement:"replace"})}})),at=(0,l.cn)(null,(function(e,n,t){var r=e(Q).find((function(n){return e(n.data).type===t.type}));if(r){var i=e(se),o=(0,x.ZP)(i,(function(e){try{A(e,r.paneId)}catch(t){throw n(ve,{error:t,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePaneTypeAtom"}),t}}));n(Ie,o)}})),lt=(0,l.cn)(null,(function(e,n,t){if(0===t.panes.length)return[];var r=e(se),i=t.panes.map((function(){return Pe()()})),o=(0,x.ZP)(r,(function(e){try{Mn(e,{paneIds:i,activate:t.activate,paneGroupId:t.paneGroupId,index:t.index})}catch(r){throw n(ve,{error:r,tags:{layoutstate:!0},origin:"Layout: state/tabs/insertPanesAtom"}),r}}));return n(Ie,o),t.panes.forEach((function(r,o){var a=i[o],l=e(K(a));n(l.data,r);var c=(0,v.b)(r.type)?e(Q).find((function(n){return e(n.data).type===r.type&&n.paneId!==a})):null;c&&n(zn,c.paneId),t.commit&&n(le,a)})),t.activate&&n(ae,i[0]),i})),ct=(0,l.cn)(null,(function(e,n,t){var r=e(se),i=(0,x.ZP)(r,(function(e){var r=E(e,t.paneId);if(!r){var i=new Error("Expected pane");throw n(ve,{error:i,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),i}var o=G(e,t.toPaneGroupId);if(!o){var a=new Error("Expected toPaneGroup");throw n(ve,{error:a,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),a}var l=1===r.paneGroup.panes.length,c=!o.panes.includes(t.paneId);if(!l||c)try{A(e,t.paneId),Mn(e,{paneIds:[t.paneId],paneGroupId:t.toPaneGroupId,index:t.index}),c&&n(le,t.paneId)}catch(u){throw n(ve,{error:u,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),u}}));n(Ie,i)})),ut=(0,l.cn)(null,(function(e,n,t){var r=e(oe);if(r){var i=e(se),o=E(i,r);if(o){var a=o.paneGroup,l=new Map(e(Q).filter((function(e){return!e.isHidden})).map((function(n){return[n.paneId,e(n.rectAtom)]}))),c=Jn({relativeTo:r,rects:l,direction:t}),u=c?E(i,c):null;if(u)n(ct,{paneId:r,toPaneGroupId:u.paneGroup.id});else{var s=a.panes.find((function(e){return e!==r}));if(s){var d=(0,x.ZP)(i,(function(e){A(e,r),Ln(e,{id:Pe()(),relativeTo:s,panes:[r],placement:t})}));n(Ie,d)}}}}})),st=(0,l.cn)((function(e){return e(Q).some((function(n){return"markdown"===e(n.data).type}))})),dt=(0,l.cn)(!1),ft=(0,l.cn)(null,(function(e,n,t){var r=e(de).map((function(n){return{paneId:n.paneId,path:(0,v.DQ)(e(n.data))}})).filter((function(e){return t===e.path})),i=[],o=e(se),a=(0,x.ZP)(o,(function(e){var t=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var u=l.value.paneId,s=E(e,u);if(!s){var d=new Error("Expected pane");throw n(ve,{error:d,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePanesForFileAtom"}),d}!s.floating&&1===s.paneGroup.panes.length?i.push(u):A(e,u)}}catch(f){o=!0,a=f}finally{try{t||null==c.return||c.return()}finally{if(o)throw a}}})),l=!0,c=!1,u=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;n(ye,{paneId:f,pane:{type:"commands",data:{autoFocus:!1}}})}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}n(Ie,a)})),pt=(0,l.cn)(null,(function(e,n,t){var r=t.node.path;if(t.eventType!==Nn.kS.Delete){var i=e(de).filter((function(n){return(0,v.DQ)(e(n.data))===r})),o={type:(0,v.Dp)({path:t.to}),data:{path:t.to}},a=!0,l=!1,c=void 0;try{for(var u,s=i[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value.paneId;n(ye,{paneId:d,pane:o})}}catch(f){l=!0,c=f}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}else n(ft,r)}));var ht=(0,l.cn)(null,(function(e,n,t){var r=e(oe),i=e(se);if(r){var o=E(i,r);if(o)return void n(lt,{panes:t,paneGroupId:null===o||void 0===o?void 0:o.paneGroup.id,activate:!0,index:o.index+t.length})}var a=I(i,"topLeft");if(a)n(lt,{activate:!0,paneGroupId:a.paneGroup.id,index:a.paneGroup.activeIndex+t.length,panes:t});else{var l=i.floating.length?i.floating[0]:null;l?n(lt,{activate:!0,paneGroupId:l.id,index:l.activeIndex+t.length,panes:t}):n(jn,{panes:t,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}})),vt=(0,l.cn)(null,(function(e,n){n(ht,[{type:"commands",data:{autoFocus:!0}}])})),mt=(0,l.cn)(null,(function(e,n){var t=e(oe);return!!t&&(n(zn,t),!0)}));var gt=(0,l.cn)(null,(function(e,n,t){var r=e(oe);if(r){var i=function(e,n){var t=n.paneId,r=n.dir,i=E(e,t);if(i){var o=i.index,a=i.paneGroup.panes;return"previous"===r?a[0===o?a.length-1:o-1]:a[o===a.length-1?0:o+1]}}(e(se),{paneId:r,dir:t});i&&n(nt,i)}}));var yt=(0,l.cn)(null,(function(e,n,t){var r=t.paneId,i=t.pane;n(ye,{paneId:r,pane:i});var o=(0,v.b)(i.type)?e(Q).find((function(n){return e(n.data).type===i.type&&n.paneId!==r})):null;if(o){var a=E(e(se),o.paneId);(null===a||void 0===a?void 0:a.floating)||1!==(null===a||void 0===a?void 0:a.paneGroup.panes.length)?n(zn,o.paneId):n(ye,{paneId:o.paneId,pane:{type:"commands",data:{autoFocus:!1}}})}})),Zt=(0,l.cn)(null,(function(e,n,t){var r=e(e(K(t.b)).data);n(ye,{paneId:t.a,pane:r});var i=E(e(se),t.b);(null===i||void 0===i?void 0:i.floating)||1!==(null===i||void 0===i?void 0:i.paneGroup.panes.length)?n(zn,t.b):n(yt,{paneId:t.b,pane:{type:"commands",data:{autoFocus:!1}}})})),bt=(0,l.cn)(null),wt=(0,l.cn)((function(e){return null!==e(bt)})),xt=(0,l.cn)((function(e){var n=e(bt);return"detachPreview"===(null===n||void 0===n?void 0:n.type)?n.progress:1})),Ct=(0,l.cn)((function(e){return e(xt)<.98})),kt=(0,l.cn)((function(e){var n;return null===(n=e(bt))||void 0===n?void 0:n.type})),St=(0,z.kv)(bt,(function(e){return e?{width:e.rect.width,height:e.rect.height}:null}),(function(e,n){return Boolean(e&&n&&e.height===n.height&&e.width===n.width)})),Tt=(0,z.kv)(bt,(function(e){return e?{x:e.rect.x,y:e.rect.y}:null}),(function(e,n){return Boolean(e&&n&&e.y===n.y&&e.x===n.x)})),Et=(0,l.cn)(null,(function(e,n){var t=e(It);n(bt,{type:"dropPreview",rect:t})})),Rt=(0,l.cn)(null,(function(e,n,t){n(bt,null),n(dt,!1),n(jn,{panes:t.panes,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})})),It=(0,l.cn)((function(e){var n=e(re),t=n.width,r=n.height,i=e(ie);return{x:Math.round(i.width+8),y:0,width:t-i.width-16,height:r-8}}));var Gt=(0,l.cn)(null,(function(e,n,t){var r=t.paneId,i=t.activate,o=e(se);"tile"===e(K(r)).type?n(Ie,(0,x.ZP)(o,(function(e){try{!function(e,n){var t=E(e,n.paneId);if(!t)return!1;var r=t.paneGroupPath;t.paneGroup.activeIndex=t.index;var i=r.map((function(e,n){return r.slice(0,n+1)})),o=!0,a=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,d=T(e,s);if(!d)throw new Error("Expected node");if("floatingPaneGroup"===d.type)throw new Error("Expected tiled pane");if(1!==s.length){var f=s[s.length-1];if("number"!==typeof f)throw new Error("Expected number");var p=T(e,_(s));if("split"!==(null===p||void 0===p?void 0:p.type))throw new Error("Expected split");var h=p.stacked?n.minPercentVertical:n.minPercentHorizontal;if(!(d.percent>=h)){var v=f===p.children.length-1;Oe(e,{leftPath:v?(0,k.Z)(s.slice(0,-1)).concat([f-1]):s,percent:v?p.children[f-1].percent-h:h})}}}}catch(m){a=!0,l=m}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}(e,{paneId:r,minPercentHorizontal:30,minPercentVertical:20})}catch(t){throw n(ve,{error:t,origin:"Layout: revealPaneAtom/revealTiledPane"}),t}}))):n(Ie,(0,x.ZP)(o,(function(e){try{!function(e,n){var t=E(e,n.paneId);if(!t)return!1;var r=t.paneGroup;if("floatingPaneGroup"!==r.type)throw new Error("Expected floatingPaneGroup");r.activeIndex=t.index,r.rect.width=Math.max(r.rect.width,n.minWidth),r.rect.height=Math.max(r.rect.height,n.minHeight)}(e,{paneId:r,minWidth:200,minHeight:140})}catch(t){throw n(ve,{error:t,origin:"Layout: revealPaneAtom/revealFloatingPane"}),t}}))),i&&n(ae,r)})),Dt=(0,l.cn)(null,(function(e,n,t){var i=t.pane.type,o=e(pe).find((function(e){var n=(0,r.Z)(e,2);n[0];return n[1].type===i}));if(o){var a=(0,r.Z)(o,1)[0];return n(Gt,{paneId:a,activate:t.activate}),a}return n(rt,t)})),_t=(0,l.cn)(null,(function(e,n,t){var r=I(e(se),"topRight"),i=e(Q).find((function(n){return e(n.data).type===t.pane.type}));if((0,v.b)(t.pane.type)&&i)return n(nt,i.paneId),void n(ye,{paneId:i.paneId,pane:t.pane,makeActive:!0});if(r){var o=r.paneGroup.panes.find((function(n){var t=e(K(n));if(t.isHidden)return!1;var r=e(t.data);return"filetree"!==r.type&&(!t.isCommitted&&!(0,v.RX)(r.type))}));o?n(ye,{paneId:o,pane:t.pane,makeActive:!0}):("debugger"===t.pane.type&&n($n,{pane:t.pane,edge:"left"}),n(lt,{panes:[t.pane],paneGroupId:r.paneGroup.id,activate:!0}))}else n(jn,{panes:[t.pane],placement:"rightOf",relativeTo:["tiling"],makeActive:!0})}));var Pt={height:0,width:0};var Bt={width:120,height:120},At=(0,l.cn)(null),Ut=(0,l.cn)(null,(function(e,n,t){var r=e(se);if("end"===t.type)return n(At,null),void n(Ie,r);if("update"!==t.type){var i=e(Q).find((function(e){return e.paneId===t.paneId}));if(!i){var o=new Error("Expected pane");throw n(ve,{error:o,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),o}n(ae,t.paneId),n(At,{paneId:t.paneId,edge:t.edge,rectStart:e(i.rectAtom)})}else{var a=e(At);if(!a){var l=new Error("Expected floatingResizeState");throw n(ve,{error:l,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),l}var c=e(te),u=function(e,n){var t=n.edge,r=n.delta,i=n.minSize,o=void 0===i?Pt:i,a=(0,F.Z)({},e),l=o.height,c=o.width;if(function(e){return"top"===e||"topLeft"===e||"topRight"===e}(t)){var u=e.height-r.y;a.height=Math.max(u,l),a.y=u<l?e.y+e.height-l:e.y+r.y}else if(function(e){return"bottom"===e||"bottomLeft"===e||"bottomRight"===e}(t)){var s=e.height+r.y;a.height=Math.max(s,l)}if(function(e){return"right"===e||"bottomRight"===e||"topRight"===e}(t)){var d=e.width+r.x;a.width=Math.max(d,c)}else if(function(e){return"left"===e||"bottomLeft"===e||"topLeft"===e}(t)){var f=e.width-r.x;a.width=Math.max(f,c),a.x=f<c?e.x+e.width-c:e.x+r.x}return a}(a.rectStart,{delta:t.moveDelta,edge:a.edge,minSize:Bt}),s=a.paneId,d=(0,x.ZP)(r,(function(e){var t=e.floating.find((function(e){return e.panes.includes(s)}));if(!t){var r=new Error("Expected floating");throw n(ve,{error:r,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),r}var i=t.rect;i.x=u.x,i.y=u.y-c,i.width=u.width,i.height=u.height+c}));n(Ie,d)}})),Nt=(0,l.cn)(null,(function(e,n,t){if(!e(En)){var r=e(re),i=t.pageX,o=t.pageY,a=t.over,l=e(K(a)),c=we({x:i-r.x,y:o-r.y},e(l.rectAtom)),u=c.rect,s=c.placement,d=e(te);"above"!==s&&"below"!==s?(n(dt,!0),n(bt,{type:"dropPreview",rect:{x:u.x,y:u.y-d,width:u.width,height:u.height+d}})):n(bt,{type:"dropPreview",rect:{x:u.x,y:u.y-d+("below"===s?d/2:0),width:u.width,height:u.height+d/2}})}})),Lt=(0,l.cn)(null,(function(e,n,t){if(!e(En)){var r=e(re),i=t.pageX,o=t.pageY,a=t.over,l=e(K(a)),c=we({x:i-r.x,y:o-r.y},e(l.rectAtom)).placement;n(bt,null),n(dt,!1);var u=e(se);if("newPaneGroup"!==t.type){var s=a;if(s===t.paneId){var d=E(u,t.paneId);if(!d){var f=new Error("Expected pane");throw n(ve,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/expectedPane"}),f}if(d.floating)throw new Error("Expected paneGroup");var p=d.paneGroup.panes.find((function(e){return e!==t.paneId}));if(!p)return;s=p}var h=(0,x.ZP)(u,(function(e){try{A(e,t.paneId),Ln(e,{id:Pe()(),panes:[t.paneId],relativeTo:s,placement:c}),n(le,t.paneId)}catch(f){throw n(ve,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/updatedLayout"}),f}}));n(Ie,h)}else n(jn,{panes:t.panes,placement:c,makeActive:!0,relativeTo:l.paneId})}})),Xt=(0,l.cn)(null,(function(e,n,t){n(bn,X({initialLayoutState:null,isHTML:t.isHTML,isStacked:t.isStacked,isExtension:t.isExtension,codeEditorPath:t.entrypoint})),n(Zn,{replId:t.replId,force:!0})})),Mt=t(87187),Ot=(0,l.cn)(null,(function(e,n,t){var r=t.path,i=t.col,o=t.line,a=t.opener,l=e(se),c=(null===a||void 0===a?void 0:a.paneType)||(0,v.Dp)({path:r}),u=function(){if("codeEditor"===c)return{type:"codeEditor",data:{path:r,col:i,line:o}};if("extension"===c){var e=a.extensionFileHandler;return{type:"extension",data:{path:r,extensionId:e.extension.extensionId,installationId:e.extension.installationId,name:e.extension.manifest.name,url:(0,Mt.Vh)(e.extension.baseUrl,e.handler)}}}return{type:c,data:{path:r}}}();if(t.newPane){var s;n($n,{pane:u,edge:null!==(s=t.newPaneEdge)&&void 0!==s?s:"left"})}else{var d=I(l,"topLeft");if(d){var f=e(de).find((function(n){return r===(0,v.DQ)(e(n.data))}));if(f&&!t.newTab)return n(nt,f.paneId),void n(ye,{paneId:f.paneId,pane:u});var p=d.paneGroup;if(t.newTab)n(lt,{panes:[u],paneGroupId:p.id,activate:!0,commit:!0,index:p.activeIndex+1});else{var h=e(de).find((function(e){return!e.isCommitted}));if(h)return n(ye,{paneId:h.paneId,pane:u}),void n(nt,h.paneId);var m=e(de).find((function(n){var t=e(n.data);return"codeEditor"===t.type&&""===(0,v.DQ)(t)}));if(m)return n(ye,{paneId:m.paneId,pane:u}),void n(nt,m.paneId);var g=p.panes.find((function(n){var t=e(K(n));return"commands"===e(t.data).type}));if(g)return n(ye,{paneId:g,pane:u}),void n(nt,g);n(lt,{panes:[u],paneGroupId:p.id,activate:!0})}}else n(Wn,{pane:u,relativeTo:["tiling"],placement:"replace"})}})),Ft=(0,l.cn)(null,(function(e,n,t){var r=t.paths.map((function(e){return{type:(0,v.Dp)({path:e}),data:{path:e}}}));n(jn,{panes:r,placement:"leftOf",relativeTo:["tiling"],makeActive:!0})}));var Wt=(0,l.cn)(null,(function(e,n,t){var r=e(Q).find((function(n){return e(n.data).type===t.type}));if(r)n(ye,{paneId:r.paneId,pane:t});else{var i=function(e,n){var t=Math.min(600,e.width),r=Math.min(318.75+n,e.height);return{width:t,height:r,x:e.width-t,y:e.height-r}}(e(re),e(te));n(Yn,{pane:t,rect:i})}})),Ht=(0,l.cn)(null,(function(e,n,t){e(Q).filter((function(n){return e(n.data).type===t})).forEach((function(e){return n(zn,e.paneId)}))})),zt=(0,l.cn)(null),Vt=(0,l.cn)((function(e){var n=e(zt);return n&&e(Q).find((function(t){var r=e(t.data);return"videoPlayer"===r.type&&r.data.embedUrl===(null===n||void 0===n?void 0:n.embedUrl)}))||null})),jt=(0,l.cn)((function(e){var n=e(Vt);return n&&!n.isHidden?n:null})),qt=(0,l.cn)(null,(function(e,n,t){n(zt,t);var r="videoPlayer";t?n(Wt,{type:r,data:{title:"Tutorial",embedUrl:t.embedUrl}}):n(Ht,r)})),$t=(0,l.cn)(null,(function(e,n){var t=e(Vt);if(null===t||void 0===t?void 0:t.isHidden)n(nt,t.paneId);else{var r=e(zt);r&&n(qt,r)}})),Yt=(0,l.cn)((function(e){return e(Q).find((function(n){return"tutorial"===e(n.data).type}))||null})),Kt=(0,l.cn)(null,(function(e,n){var t=e(Yt);(null===t||void 0===t?void 0:t.isHidden)?n(nt,t.paneId):(n(jn,{panes:[{type:"tutorial"}],placement:"leftOf",percent:25,relativeTo:["tiling"],makeActive:!1}),n($e))}));function Qt(e,n){var t=n.path,r=n.forwards,i=n.vertical,o=T(e,t);if("split"!==(null===o||void 0===o?void 0:o.type))return null;var a=_(t),l=T(e,a);if("split"!==(null===l||void 0===l?void 0:l.type))return null;if(l.stacked!==i)return Qt(e,{path:a,forwards:r,vertical:i});var c=l.children.indexOf(o),u=0===c;if(!(c===l.children.length-1&&r||u&&!r)){var s=c+(r?1:-1),d=l.children[s],f=l.children[c];return d?{other:f,node:d,parent:l,path:(0,k.Z)(a).concat([s])}:null}if(1===a.length){var p=u&&!r?l.children.length-1:0;return{parent:l,other:l.children[c],path:(0,k.Z)(a).concat([p]),node:l.children[p]}}return Qt(e,{path:a,forwards:r,vertical:i})}function Jt(e,n,t){var r=D(e,n.id);if(!r)return null;var i="up"===t||"down"===t,o="down"===t||"right"===t;return Qt(e,{path:r.path,forwards:o,vertical:i})}function er(e,n){var t=n.paneGroupId,r=n.direction,i=G(e,t),o=D(e,t);if("paneGroup"!==(null===i||void 0===i?void 0:i.type)||!o)return!1;var a=o.node.children.indexOf(i);if(-1===a)throw new Error("Expected index");var l=(0,k.Z)(o.path).concat([a]),c="up"===r||"down"===r,u="down"===r||"right"===r,s=0===a,d=a===o.node.children.length-1,f=o.node.stacked===c,p=o.path.length>2;if(f&&!((d&&u||s&&!u)&&p))!function(e,n,t){var r=e.indexOf(n);if(-1===r)throw new Error("Expected item to be in array");if(1!==e.length){var i=r===e.length-1,o=0===r;if("forward"===t&&i)return e.pop(),void e.unshift(n);if("back"===t&&o)return e.shift(),void e.push(n);var a="forward"===t?1:-1;e[r]=e[r+a],e[r+a]=n}}(o.node.children,i,u?"forward":"back");else{var h=Jt(e,i,r);if(h){var v=l.slice(0,h.path.length+("paneGroup"===h.node.type?2:1));!function(e){if("tiling"!==e[0])throw new Error("Expected tiling path")}(v);var m=T(e,v);if(!m||"floatingPaneGroup"===m.type)throw new Error("Expected adjacentNode");if("split"!==h.other.type)throw new Error("Expected split");var g,y,Z,b=function(e,n){var t=e.indexOf(n),r=0,i=!0,o=!1,a=void 0;try{for(var l,c=e.slice(0,t)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)r+=l.value.percent}catch(u){o=!0,a=u}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{start:r,end:r+n.percent}}(h.other.children,m);if("paneGroup"===h.node.type){var w=(g=b,y={start:0,end:100},Z=!h.parent.stacked,g.start-y.start<y.end-g.end?Z?"above":"rightOf":Z?"below":"leftOf");return U(e,(0,k.Z)(o.path).concat([a])),void Ln(e,{placement:w,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:h.path})}var x=function(e,n){var t,r,i=e.children,o=e.stacked,a="above",l=0,c=0,u=0,s=0,d=!0,f=!1,p=void 0;try{for(var h,v=i[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value,g={start:u,end:u+m.percent},y=(t=n,r=g,Math.max(0,Math.min(t.end,r.end)-Math.max(t.start,r.start)));y>s&&(s=y,l=c,a=n.start-g.start<g.end-n.end?o?"above":"rightOf":o?"below":"leftOf"),u+=m.percent,c++}}catch(Z){f=!0,p=Z}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}return{placement:a,index:l}}(h.node,b),C=x.index,S=x.placement;U(e,(0,k.Z)(o.path).concat([a])),Ln(e,{placement:S,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:(0,k.Z)(h.path).concat([C])})}}}var nr=(0,l.cn)(null),tr=(0,l.cn)((function(e){var n=e(nr);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=E(e(se),n.paneId);if(!t)return null;var r=t.paneGroup;return{target:"pane",paneGroupId:r.id,activeIndex:r.activeIndex,panes:r.panes.map((function(n){var t=e(K(n));return[t.paneId,e(t.data)]}))}})),rr=(0,l.cn)((function(e){var n=e(tr);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=n.paneGroupId,r=n.activeIndex;return{target:"pane",paneId:n.panes[r][0],paneGroupId:t}})),ir=(0,l.cn)((function(e){var n=e(nr);if(!n)return null;if("sidebar"===n.target)return null;if(e(Rn)===n.paneId)return e(Un);var t=e(K(n.paneId)),r=e(t.rectAtom),i=e(te);return{x:Math.round(r.x),y:Math.round(r.y-i),width:Math.round(r.width),height:Math.round(r.height+i)}})),or=(0,l.cn)(null,(function(e,n,t){var r=e(oe),i=null!==t&&void 0!==t?t:r;if(i)return n(nr,{target:"pane",paneId:i}),void(i!==r&&n(ae,i));var o=I(e(se),"topLeft"),a=o?o.paneGroup.panes[o.paneGroup.activeIndex]:null;a&&n(nr,{target:"pane",paneId:a})})),ar=(0,l.cn)(null,(function(e,n){var t=e(nr);t&&(n(nr,null),"sidebar"!==t.target&&n(Gt,{paneId:t.paneId,activate:!0}))})),lr=(0,l.cn)(null,(function(e,n){if(e(tr))n(ar);else{var t=e(oe);if(t)n(or,t);else{var r=I(e(se),"topLeft"),i=r?r.paneGroup.panes[r.paneGroup.activeIndex]:null;i&&n(or,i)}}})),cr=(0,l.cn)((function(e){return null!==e(nr)})),ur=(0,l.cn)(null,(function(e,n){n(nr,null)})),sr=(0,l.cn)(null,(function(e,n,t){var r=e(oe);if(r&&!e(Rn)){var i=Jn({relativeTo:r,rects:new Map(e(Q).filter((function(e){return!e.isHidden})).map((function(n){return[n.paneId,e(n.rectAtom)]}))),direction:t});if(i)n(oe,i),e(nr)&&n(nr,{target:"pane",paneId:i})}})),dr=(0,l.cn)(null,(function(e,n,t){var r=e(tr);null!==r&&"sidebar"!==r.target&&n(Ie,(0,x.ZP)(e(se),(function(e){er(e,{paneGroupId:r.paneGroupId,direction:t.direction})})))}));function fr(e,n){var t=n.paneGroupPath,r=n.rect,i=T(e,t);if("paneGroup"!==(null===i||void 0===i?void 0:i.type))throw new Error("Expected paneGroup");U(e,t),Ln(e,{id:i.id,isFloating:!0,panes:i.panes,rect:r,activeIndex:i.activeIndex})}var pr=50,hr=(0,l.cn)(null),vr=(0,l.cn)((function(e){var n=e(hr);if(!n)return null;var t=G(e(se),n.paneGroupId);return t&&t.panes[t.activeIndex]||null})),mr=(0,l.cn)(null,(function(e,n,t){if(!e(En)){var r=e(re),i=G(e(se),t.paneGroupId);if(!i){var o=new Error("Expected paneGroup");throw n(ve,{error:o,origin:"Layout: state/paneGroupDragAndDrop/dragStartAtom"}),o}var a=e(K(i.panes[i.activeIndex])),l=e(a.rectAtom),c=e(te),u={x:l.x,y:l.y-c,width:l.width,height:l.height+c},s=t.mouse.x-(r.x+l.x);n(hr,{startType:a.type,startPoint:{x:t.mouse.x-r.x,y:t.mouse.y-r.y},paneGroupId:t.paneGroupId,transformOriginX:Math.round(s)+"px",scale:1,fromRect:u,movedAtAll:!1})}})),gr=(0,l.cn)(null,(function(e,n,t){if(!e(En)){var i=e(hr);if(i){var o=t.delta,a=i.paneGroupId,l=i.fromRect,c=e(se),u=G(e(se),a);if(!u){var s=new Error("Expected paneGroup");throw n(ve,{error:s,origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),s}var d=u.panes[u.activeIndex],f=E(c,d);if(!f){var p=new Error("Expected pane");throw n(ve,{error:p,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),p}var h=K(d),v=ne(f.paneGroup.id),m=e(te),g=Math.max(Math.abs(o.x),Math.abs(o.y)),y=g>=pr,Z=g>0;if(!y||f.floating){var b=e(v),w=e(h),C=l.x+o.x,k=l.y+o.y;if(n(b.rectAtom,(function(e){return(0,x.ZP)(e,(function(e){e.x=C,e.y=k}))})),n(w.rectAtom,(function(e){return(0,x.ZP)(e,(function(e){e.x=C,e.y=k+m}))})),"floating"!==i.startType){if(!y&&!f.floating){var S=i.startPoint,T=1-.30000000000000004*(R=g/pr,1-Math.sqrt(1-Math.pow(R,2)));return n(bt,{type:"detachPreview",rect:{x:S.x-pr,y:S.y-pr,width:100,height:100},progress:g/pr}),void n(hr,(0,x.ZP)(i,(function(e){e.scale=T,e.movedAtAll=e.movedAtAll||Z})))}var R,I=e(re);if(!f.floating)throw new Error("Expected floating pane");var D=e(Q).filter((function(e){return"tile"===e.type&&!e.isHidden})).map((function(n){return[n.paneId,e(n.rectAtom)]})),_=e(cn),P=function(e){var n=e.views,t=e.mouse,i=e.container,o=e.headerHeight,a=e.sidebarWidth,l={x:Math.min(Math.max(t.x-i.x,1),i.width-1),y:Math.min(Math.max(t.y-i.y,1),i.height-1)},c=!0,u=!1,s=void 0;try{for(var d,f=n[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=(0,r.Z)(d.value,2),h=p[0],v=p[1],m={x:v.x,y:v.y-o,width:v.width,height:o};if(be(l,{x:m.x-4,y:m.y-4,width:m.width+8,height:o+4}))return{dropPreview:m,drop:{type:"insert",paneId:h}};var g={x:v.x,y:v.y-o,width:v.width,height:v.height+o};if(be(l,{x:g.x-4,y:g.y-4,width:g.width+8,height:g.height+8})){var y=we(l,g);return{dropPreview:y.rect,drop:{type:"split",relativeTo:h,placement:y.placement}}}}}catch(b){u=!0,s=b}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}var Z=we(l,{x:a,y:0,width:i.width-a,height:i.height});return{dropPreview:Z.rect,drop:{type:"split",relativeTo:["tiling"],placement:Z.placement}}}({views:D,container:I,mouse:t.mouse,headerHeight:m,sidebarWidth:_}),B=P.drop,A=P.dropPreview;n(bt,{type:"dropPreview",rect:A}),n(hr,{fromRect:i.fromRect,paneGroupId:i.paneGroupId,startType:i.startType,startPoint:i.startPoint,drop:B,transformOriginX:i.transformOriginX,scale:i.scale,movedAtAll:i.movedAtAll||Z})}}else{var U=e(h).rectAtom,N=e(U),L=(0,x.ZP)(c,(function(e){try{fr(e,{paneGroupPath:f.paneGroupPath,rect:{x:N.x+o.x,y:N.y-m+o.y,width:N.width,height:N.height+m}})}catch(s){throw n(ve,{error:s,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),s}}));n(Ie,L)}}else n(bt,null)}})),yr=(0,l.cn)(null,(function(e,n,t){var r=t.delta;if(!e(En)){n(bt,null);var i=e(hr);if(i){var o=i.paneGroupId,a=i.drop,l=i.fromRect,c=e(se),u=G(e(se),o);if(!u){var s=new Error("Expected paneGroup");throw n(ve,{error:s,origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),s}var d=u.panes[u.activeIndex],f=E(c,d);if(!f){var p=new Error("Expected pane");throw n(ve,{error:p,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),p}var h=(0,x.ZP)(c,(function(e){if(f.floating&&"floating"===i.startType){var t=T(e,f.paneGroupPath);if("floatingPaneGroup"!==(null===t||void 0===t?void 0:t.type))return;var o=l.x+r.x,c=l.y+r.y;return t.rect.x=o,void(t.rect.y=c)}if(a)if("split"!==a.type){var u=E(e,a.paneId);f.paneGroup.panes.forEach((function(t){!function(e,n){var t="floatingIndex"in n?e.floating[n.floatingIndex]:T(e,n.paneGroupPath);if(!t||!("panes"in t))throw new Error("Expected paneGroup");A(e,n.paneId);var r=void 0===n.index?t.panes.length:n.index;t.panes.splice(r,0,n.paneId),n.activate?t.activeIndex=r:t.activeIndex>=r&&t.activeIndex++}(e,{paneId:t,paneGroupPath:(null===u||void 0===u?void 0:u.paneGroupPath)||["tiling"],activate:!1}),n(le,t)}))}else{if(null===e.tiling){var h=Pe()();try{Ln(e,{id:Pe()(),panes:[h],placement:"leftOf",relativeTo:["tiling"]})}catch(s){throw n(ve,{error:s,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),s}}try{!function(e,n){var t=n.from,r=n.to,i=n.placement,o=E(e,t);if(!o)throw new Error("Expected fromPane");var a=o.paneGroup,l=a.panes,c=a.activeIndex;U(e,o.paneGroupPath),Ln(e,{id:o.paneGroup.id,relativeTo:r,panes:l,placement:i,activeIndex:c})}(e,{from:d,to:a.relativeTo,placement:a.placement})}catch(p){throw n(ve,{error:p,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),p}}}));n(hr,null),n(Ie,h),"insert"===(null===a||void 0===a?void 0:a.type)&&n(nt,d)}}}));var Zr=(0,l.cn)(null,(function(e,n,t){var r=e(se),i=e(K(t)),o=i.rectAtom,a=i.type,l=e(o),c=E(r,t);if(!c){var u=new Error("Expected pane");throw n(ve,{error:u,tags:{layoutstate:!0},origin:"Layout: state/toggleFloating"}),u}if("tile"!==a){var s=e(Q).filter((function(e){return"tile"===e.type&&!e.isHidden})),d=e(te),f={x:l.x+l.width/2,y:l.y+l.height/2},p=s.find((function(n){var t=e(n.rectAtom);return be(f,{x:t.x,y:t.y-d,width:t.width,height:t.height+d})})),h="leftOf";p&&(h=we(f,e(p.rectAtom)).placement),n(Ie,(0,x.ZP)(r,(function(e){!function(e,n){var t=n.paneGroupPath,r=n.placement,i=n.to,o=T(e,t);if("floatingPaneGroup"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected floatingPaneGroup");U(e,t),null!==i?Ln(e,{id:o.id,relativeTo:i,panes:o.panes,activeIndex:o.activeIndex,placement:r}):e.tiling={id:o.id,panes:o.panes,percent:100,type:"paneGroup",activeIndex:o.activeIndex}}(e,{paneGroupPath:c.paneGroupPath,to:(null===p||void 0===p?void 0:p.paneId)||["tiling"],placement:h})})))}else n(Ie,(0,x.ZP)(r,(function(e){fr(e,{paneGroupPath:c.paneGroupPath,rect:{x:l.x-16,y:l.y-16,width:l.width,height:l.height}})})))})),br=t(30241),wr=t(35813),xr=t(31518),Cr=t(23823),kr={overlay:Cr.Is+20,gutterActive:Cr.Is+19,maximizedTooltip:Cr.Is+18,maximizedPane:Cr.Is+17,maximizedHeader:Cr.Is+16,filetreeDragLayer:17,detachPreview:16,draggingPane:15,draggingHeader:14,dropPreview:13,floatingPaneActive:11,floatingHeaderActive:10,floatingPane:9,floatingHeader:8,gutterHovered:6,tiledPaneActive:5,tiledHeaderActive:4,tiledPane:3,tiledHeader:2,gutter:1};function Sr(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){if(n(Rn)===e)return n(Un);var t=n(K(e));return n(t.rectAtom)}))}),[e])}function Tr(e){var n=ke(Sr(e)),t=function(e){var n,t=Er(e);return(0,i.Z)((function(){return(0,z.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.scale)&&void 0!==n?n:1}))}),[t])}(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var r=e(n);return{x:r.x,y:r.y,scale:e(t)}}))}),[n,t])}function Er(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){var t=n(hr);return t&&e===n(vr)?t:null}))}),[e])}function Rr(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){return n(oe)===e}))}),[e])}function Ir(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){return n(n(K(e)).data)}))}),[e])}function Gr(e){return(0,i.Z)((function(){return(0,z.kv)(K(e),(function(e){return"floating"===e.type}))}),[e])}function Dr(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){var t=n(hr);return t&&e===t.paneGroupId?t:null}))}),[e])}function _r(e){var n=Dr(e),t=Br(e),r=Ar(e),o=function(e){var n=Pr(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var t=e(oe);if(!t)return!1;var r=e(n);return!!r&&r.panes.includes(t)}))}),[n])}(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){return e(t)?kr.maximizedHeader:e(n)?kr.draggingHeader:e(r)?e(o)?kr.floatingHeaderActive:kr.floatingHeader:kr.tiledHeader}))}),[n,t,r,o])}function Pr(e){return(0,i.Z)((function(){return(0,z.kv)(se,(function(n){return G(n,e)}))}),[e])}function Br(e){var n=Pr(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){if(!e(En))return!1;var t=e(n);if(!t)return!1;var r=e(oe);return!!r&&t.panes.includes(r)}))}),[n])}function Ar(e){var n=ne(e);return(0,i.Z)((function(){return(0,z.kv)(n,(function(e){return"floating"===e.path[0]}))}),[n])}var Ur=(0,l.cn)((function(e){return Boolean(e(hr)||e(At)||e(We)||e(dt)||e(nn))})),Nr=t(58727);function Lr(){return kn(ve)}function Xr(){return Tn(Ee)}function Mr(){return kn(It)}function Or(){return kn(Ze)}function Fr(){var e=Tn(Zn);return(0,i.Z)((function(){return a()(e,1e3)}),[e])}function Wr(){return Tn(ge)}function Hr(e){return kn((0,i.Z)((function(){return(0,l.cn)((function(n){var t=n(K(e));return n(t.data)}))}),[e]))}function zr(){return kn(fe)}function Vr(){return kn(V)}function jr(){return kn(q)}function qr(){return kn(j)}function $r(){return kn(me)}function Yr(){return{start:Tn(Qe),update:Tn(Je),end:Tn(en)}}function Kr(){return kn(rr)}function Qr(){return kn(ir)}function Jr(){return Tn(ar)}function ei(){return Tn(or)}function ni(){return Tn(lr)}function ti(){return kn(cr)}function ri(){return Tn(ur)}function ii(){return Tn(sr)}function oi(){return Tn(dr)}function ai(){return Tn(Xt)}function li(){return Tn(He)}function ci(){return{active:kn(wt),size:Sn(St),position:Sn(Tt),progress:Sn(xt),type:Sn(kt),belowDetachThreshold:Sn(Ct)}}function ui(e){var n=e.isOver,t=Tn(bt);return(0,u.useEffect)((function(){n||t(null)}),[n,t]),{drag:Tn(Et),drop:Tn(Rt)}}function si(){return kn(ce)}function di(){var e=Tn(ae),n=Tn(le);return(0,i.Z)((function(){return function(t,r){(null===r||void 0===r?void 0:r.commit)&&n(t),e(t)}}),[n,e])}function fi(e){var n=e.paneId;return kn((0,i.Z)((function(){return(0,l.cn)((function(e){return e(oe)===n}))}),[n]))}function pi(){return kn(oe)}function hi(){return kn((0,i.Z)((function(){return(0,l.cn)((function(e){var n=e(oe);if(!n)return null;var t=E(e(se),n);return t?t.paneGroup.id:null}))}),[]))}function vi(){return kn(En)}function mi(){return Tn(ye)}function gi(){return Tn(le)}function yi(){return Tn(Gt)}function Zi(){return Tn(Dt)}function bi(){return Tn(_t)}function wi(){return Tn(zn)}function xi(){return Tn(Vn)}function Ci(e){var n=e.isOver,t=Tn(bt);return(0,u.useEffect)((function(){n||t(null)}),[n,t]),{drag:Tn(Nt),drop:Tn(Lt)}}var ki=(0,l.cn)(null,(function(e,n){n(dt,!1)}));function Si(){return Tn(ki)}function Ti(e){var n=e.paneGroupId;return kn((0,i.Z)((function(){return(0,l.cn)((function(e){var t;return n===(null===(t=e(hr))||void 0===t?void 0:t.paneGroupId)}))}),[n]))}function Ei(e){var n=e.paneGroupId,t=Tn(mr),r=Tn(gr),o=Tn(yr),a=(0,i.Z)((function(){return{start:function(e){var r=e.mouse;t({paneGroupId:n,mouse:r})},update:function(e){r(e)},end:function(e){o(e)}}}),[n,t,r,o]);return{isDragging:Ti({paneGroupId:n}),dnd:a}}function Ri(){return Tn(Ot)}function Ii(){return Tn(Ft)}function Gi(){return Tn(Zr)}function Di(){return Tn(Ut)}function _i(){return{maximizePane:Tn(In),maximizePaneGroup:Tn(Gn),restoreMaximizedPaneGroup:Tn(Dn),toggleMaximizePane:Tn(_n),toggleMaximizedPaneGroup:Tn(Pn)}}function Pi(){return Tn(nt)}var Bi=function(){return Tn(tt)};function Ai(){return Tn(it)}function Ui(){return Tn(ot)}function Ni(){return Tn(at)}function Li(){return kn(st)}function Xi(){return kn(dt)}function Mi(){return Tn(dt)}function Oi(){return Tn(pt)}function Fi(e){return kn(function(e){var n=ne(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var t=e(n);return e(K(t.panes[t.activeIndex])).paneId}))}),[n])}(e))}function Wi(e){var n=function(e){var n=ne(e);return{activeIndexAtom:(0,i.Z)((function(){return(0,l.cn)((function(e){return e(n).activeIndex}))}),[n]),pathAtom:(0,i.Z)((function(){return(0,z.kv)(n,(function(e){return e.path}),O())}),[n]),panesAtom:(0,i.Z)((function(){return(0,z.kv)(n,(function(e){return e.panes}),O())}),[n]),activeFileAtom:(0,i.Z)((function(){return(0,l.cn)((function(e){var t=e(n),r=e(K(t.panes[t.activeIndex])),i=e(r.data);return(0,v.Ur)(i)?(0,v.DQ)(i):null}))}),[n])}}(e),t=n.activeIndexAtom,r=n.pathAtom,o=n.panesAtom,a=Fi(e),c=kn(ce);return{activeIndex:kn(t),path:kn(r),panes:kn(o),activeTabPaneId:a,activeFile:c}}function Hi(){return Tn(ct)}function zi(){return Tn(ut)}function Vi(){return Tn(lt)}function ji(){return Tn(vt)}function qi(){return Tn(mt)}function $i(){return Tn(gt)}function Yi(){return Tn(function(){var e=(0,et.gv)();return(0,i.Z)((function(){return(0,l.cn)(null,(function(n,t){var r=e();if(r){t(ht,[r]);var i=n(oe);i&&t(le,i)}}))}),[e])}())}function Ki(){return Tn(yt)}function Qi(){return Tn(Zt)}function Ji(e){return kn(function(e){var n=e.paneGroupId;return(0,i.Z)((function(){return(0,l.cn)((function(e){var t=G(e(se),n);return t?t.panes.length:null}))}),[n])}({paneGroupId:e.paneGroupId}))}function eo(){return kn((0,i.Z)((function(){return(0,l.cn)((function(e){var n=e(J),t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,s=u.panes.map((function(n){return[n,e(e(K(n)).data)]})),d="floating"===u.path[0];(d?t:r).push({activeIndex:u.activeIndex,paneGroupId:u.id,isFloating:d,panes:s})}}catch(f){o=!0,a=f}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{floating:t,tiling:r}}))}),[]))}function no(){return Tn($n)}function to(){return Tn(On)}function ro(){return Tn(Fn)}function io(){return Tn(Hn)}function oo(){return Tn(qt)}function ao(){var e=kn(zt),n=kn(jt),t=Tn($t);return n||!e?null:t}function lo(){return Tn(Kt)}function co(){return e="tutorial",kn((0,i.Z)((function(){return(0,l.cn)((function(n){return n(Q).find((function(t){return!t.isHidden&&n(t.data).type===e}))}))}),[e]));var e}function uo(){return kn(he)}function so(){return e=se,(0,d.lV)((0,u.useCallback)((function(n){return n(e)}),[e]),{store:Cn()});var e}function fo(){var e=(0,br.Z)(),n=(0,wr.T)(),t=(0,xr.Z)().preferences.isLayoutStacked,i=(0,Nr.c)(),o=(0,r.Z)(function(e){var n=(0,F.Z)({},Le,e);return Ue.D(Xe,n)}(),1)[0];return(0,u.useCallback)((function(){var r=X({initialLayoutState:null,isStacked:t,isHTML:n,isExtension:i}),a=r.layout,l=r.data;o({variables:{input:{replId:e,state:{layout:a,data:l}}}})}),[e,o,n,t,i])}function po(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,u.useRef)(e),t=io(),r=so();return(0,u.useCallback)((function(i){i.snapped?t({leftPath:i.leftPath,percent:n.current}):Promise.resolve(r()).then((function(r){var o=T(r,i.leftPath);if(!o||!P(o))throw new Error("Expected split or paneGroup");n.current=o.percent,t({leftPath:i.leftPath,percent:e})}))}),[e,t,r])}function ho(){return kn(ue)}function vo(){return Tn(ue)}function mo(){return kn(pe)}function go(e){var n=Ce(Sr(e)),t=Tr(e),r=function(e){var n,t=Er(e);return(0,i.Z)((function(){return(0,z.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.transformOriginX)&&void 0!==n?n:"0px"}))}),[t])}(e),o=function(e){var n=Sr(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var t=e(n),r=e(re);return{x:Math.round(r.x+t.x),y:Math.round(r.y+t.y)}}))}),[n])}(e),a=function(e){return(0,i.Z)((function(){return(0,z.kv)(K(e),(function(e){return e.isHidden}))}),[e])}(e),c=function(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){var t=n(K(e)),r=e===n(oe);return n(Rn)===e?kr.maximizedPane:e===n(vr)?kr.draggingPane:"floating"===t.type?r?kr.floatingPaneActive:kr.floatingPane:r?kr.tiledPaneActive:kr.tiledPane}))}),[e])}(e),u=function(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){return!!n(hr)&&n(vr)!==e&&"floating"!==n(K(e)).type}))}),[e])}(e),s=function(e){var n=Ir(e);return(0,i.Z)((function(){return(0,z.kv)(n,(function(e){return e.type}))}),[n])}(e),d=Gr(e),f=Rr(e),p=function(e){return(0,i.Z)((function(){return(0,z.kv)(K(e),(function(e){return e.isCommitted}))}),[e])}(e),h=Ir(e),v=function(e){var n=Gr(e),t=Rr(e),r=Er(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){return!e(En)&&Boolean(e(n)||e(t)||e(r))}))}),[n,t,r])}(e),m=function(e){var n=Er(e);return(0,i.Z)((function(){return(0,z.kv)(n,Boolean)}),[n])}(e),g=function(e){var n,t=Er(e);return(0,i.Z)((function(){return(0,z.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.movedAtAll)&&void 0!==n&&n}))}),[t])}(e);return{size:Sn(n),transform:Sn(t),paneType:Sn(s),transformOriginXAtom:Sn(r),viewportInset:Sn(o),zIndex:Sn(c),disableInteractions:Sn(Ur),animate:Sn(u),data:Sn(h),isFloating:Sn(d),isActive:Sn(f),isCommitted:Sn(p),isHidden:Sn(a),isBeingDragged:Sn(m),hasMovedWhileDragging:Sn(g),headerHeight:Sn(te),hasBorder:Sn(v)}}function yo(e){var n=function(e){var n=Br(e);return(0,i.Z)((function(){return(0,l.cn)((function(t){if(t(n))return t(An);var r=t(ne(e));return t(r.rectAtom)}))}),[n,e])}(e),t=Ce(n),r=ke(n),o=function(e){var n,t=Dr(e);return(0,i.Z)((function(){return(0,z.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.scale)&&void 0!==n?n:1}))}),[t])}(e),a=function(e){var n,t=Dr(e);return(0,i.Z)((function(){return(0,z.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.transformOriginX)&&void 0!==n?n:"0px"}))}),[t])}(e),c=_r(e),u=function(e){var n=Ar(e);return(0,i.Z)((function(){return(0,l.cn)((function(t){var r=t(hr);return!!r&&r.paneGroupId!==e&&!t(n)}))}),[e,n])}(e),s=Br(e),d=Ar(e);return{size:Sn(t),position:Sn(r),scale:Sn(o),transformOriginX:Sn(a),zIndex:Sn(c),animate:Sn(u),isMaximized:Sn(s),isFloating:Sn(d)}}function Zo(e){var n=ze(e),t=Ve(e),r=Ce(t),o=ke(t),a=je(e),c=function(e){var n=ze(e);return(0,i.Z)((function(){return(0,z.kv)(n,(function(e){var n=e.snapped;return Boolean(n)}))}),[n])}(e),u=qe(e),s=function(e){var n=Ce(Ve(e)),t=qe(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var r=e(n),i=r.width,o=r.height;return e(t)?i:o}))}),[n,t])}(e),d=function(e){var n=ze(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var t=e(n),r=t.snapped,i=t.stacked;return"right"===r?i?180:90:"left"===r?i?0:270:0}))}),[n])}(e),f=function(e){var n=qe(e),t=je(e),r=Ce(Ve(e));return(0,i.Z)((function(){return(0,l.cn)((function(e){var i=e(r),o=i.width,a=i.height,l=e(t);return e(n)?{width:l?o:24,height:l?1:2}:{height:l?a:24,width:l?1:2}}))}),[r,n,t])}(e),p=function(e){var n=Ce(Ve(e)),t=qe(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var r=e(n),i=r.width,o=r.height;return(e(t)?i:o)<24}))}),[n,t])}(e);return{handle:Sn(n),size:Sn(r),position:Sn(o),isActive:Sn(a),isSnapped:Sn(c),isStacked:Sn(u),length:Sn(s),rotation:Sn(d),gripSize:Sn(f),gripIsHidden:Sn(p)}}var bo=(0,l.cn)(!1),wo=(0,l.cn)(0);function xo(){var e=Ce(rn),n=ke(rn);return{size:Sn(e),position:Sn(n),isActive:Sn(nn),length:Sn(on),gripSize:Sn(tn),isStacked:Sn(bo),gripIsHidden:Sn(bo),rotation:Sn(wo)}}function Co(){return{width:Sn(cn),isOpen:Sn(dn),toggle:Tn(Ye)}}},79050:function(e,n,t){t.d(n,{Z:function(){return I}});var r=t(50959),i=t(73691),o=t(85234),a=t.n(o),l=t(75030),c=t(94370),u=t(69381),s=t(98171),d=t(14806),f=t(74376),p=t(40058),h=t(42362),v=t(611),m=t(83886),g=t(91355),y=t(88254);function Z(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function b(e,n){return null==n?Z(e):{filePath:e,text:null!==(t=n.state.doc.toString())&&void 0!==t?t:"",selections:n.state.selection.ranges.map((function(e){var n=e.from;return{location:n,length:e.to-n}})),hasFocus:n.hasFocus};var t}function w(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a()(),i=b(e,n),o={messageType:u.cF.TEXT_EDITOR_STATE,filePath:e,text:i.text,selections:i.selections,hasFocus:i.hasFocus,hasGhostwriterSuggestion:t.hasGhostwriterSuggestion,revisionId:t.revisionId};(0,p.bG)(o,r)}function x(e,n,t,r,i){return r===e&&r===t.textEditorState.filePath&&(n===t.textEditorState.filePath&&i===t.revisionId)}function C(e){var n=e.map((function(e){return d.jT.range(e.location,e.location+e.length)}));return d.jT.create(n)}function k(e,n,t,r,i,o){var a=i.payload;if((0,u.Se)(a))return function(e,n,t,r,i){if(!x(e,n,r,i.filePath,i.revisionId))return!1;var o=C(i.selections);return t.dispatch({selection:o,scrollIntoView:!0}),!0}(e,n,t,r,a);if((0,u.m7)(a))return function(e,n,t,r,i){if(!x(e,n,r,i.filePath,i.revisionId))return!1;var o=b(e,t),a=C(i.selections);return t.dispatch({changes:{from:0,to:o.text.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,n,t,r,a);if((0,u.ac)(a))return function(e,n,t,r,i){if(!x(e,n,r,i.filePath,i.revisionId))return!1;var o=i.insertionRange,a=C(i.selections);return t.dispatch({changes:{from:o.location,to:o.location+o.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,n,t,r,a);if((0,u.fz)(a))return function(e,n,t,r,i){return!!x(e,n,r,i.filePath,i.revisionId)&&(t.dispatch(t.state.replaceSelection(i.text)),!0)}(e,n,t,r,a);if((0,u.T$)(a))!function(e,n,t,r,i){!!x(e,n,r,i.filePath,i.revisionId)&&(0,h.l)({filePath:e,view:t,clipboardText:i.text})}(e,n,t,r,a);else{if(!(0,u.aB)(a))throw new Error("Invalid payload.");switch(a.action){case u.b9.REQUEST_BLUR:return function(e,n,t,r,i,o){if(!x(e,n,r,i,o))return!1;t.contentDOM.blur()}(e,n,t,r,a.filePath,a.revisionId);case u.b9.REQUEST_UNDO:return function(e,n,t,r,i,o){if(!x(e,n,r,i,o))return!1;return(0,f.Yw)(t),!0}(e,n,t,r,a.filePath,a.revisionId);case u.b9.REQUEST_REDO:return function(e,n,t,r,i,o){if(!x(e,n,r,i,o))return!1;return(0,f.KX)(t),!0}(e,n,t,r,a.filePath,a.revisionId);case u.b9.REQUEST_INDENT_SELECTION:return function(e,n,t,r,i){return!!x(e,n,r,i.filePath,i.revisionId)&&(f.at(t),!0)}(e,n,t,r,a);case u.b9.REQUEST_DEDENT_SELECTION:return function(e,n,t,r,i){return!!x(e,n,r,i.filePath,i.revisionId)&&(f.xi(t),!0)}(e,n,t,r,a);case u.b9.REQUEST_TOGGLE_COMMENT:return function(e,n,t,r,i){return!!x(e,n,r,i.filePath,i.revisionId)&&(f.O8(t),!0)}(e,n,t,r,a);case u.b9.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION:return function(e,n,t,r,i,o){return!!x(e,n,r,i.filePath,i.revisionId)&&!!(0,s.$o)(t)&&((0,g.j)(g.U3.CODE_SUGGESTION_USED,{type:"suggestionAccepted",language:(0,m.Sf)(e),engine:o}),y.n_({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),(0,v._B)(t),!0)}(e,n,t,r,a,o);case u.b9.REQUEST_FOCUS:return function(e){return e.focus(),!0}(t);default:throw new Error("Unknown BridgeTextEditorAction.")}}}var S=t(30265),T=t(40951),E=t(21942),R=t(91309);function I(e){var n=e.view,t=e.filePath,o=(0,c.useRouter)(),s=(0,S.Vg)(o),d=(0,r.useRef)({revisionId:a()(),textEditorState:Z(t),hasGhostwriterSuggestion:!1}),f=(0,r.useRef)(t),h=(0,T.L)().engine,v=(0,l.Z)({view:n});(0,r.useEffect)((function(){if(n&&s){var e=b(t,n);d.current={revisionId:a()(),textEditorState:e,hasGhostwriterSuggestion:d.current.hasGhostwriterSuggestion},w(t,n,d.current);return n.dispatch({effects:v.reconfigure(i.tk.updateListener.of((function(r){!function(r){var i,o=(0,E.Z)(n.state),l=(null===(i=d.current)||void 0===i?void 0:i.hasGhostwriterSuggestion)!==o;r.docChanged?(d.current={revisionId:a()(),textEditorState:e,hasGhostwriterSuggestion:o},w(t,n,d.current)):(r.selectionSet||r.focusChanged||l)&&(d.current={revisionId:d.current.revisionId,textEditorState:e,hasGhostwriterSuggestion:o},w(t,n,d.current))}(r)})))}),function(){n.dispatch({effects:v.reconfigure([])})}}}),[n,t,v,s]),(0,r.useEffect)((function(){if(n&&s){var e=function(e){w(t,n,d.current,e.messageId)},r=function(r){k(t,f.current,n,d.current,r,h)?e(r):(0,p.pl)(r.messageId)},i=function(i){try{var o=i.data;if(!(0,u.CF)(o))return;if(o.protocolVersion!==u.Wj)return;var a=o.payload;o.messageDirection===u.s1.TO_NATIVE&&(0,u.H7)(a)&&(f.current=a.activePaneFilePath),(0,p.fp)(i,(function(i){var a=i.type;switch(a){case u.cF.TEXT_EDITOR_STATE_REQUEST:e(o);break;case u.cF.REQUEST_SET_SELECTION:case u.cF.REQUEST_REPLACE_SELECTION:case u.cF.REQUEST_SET_TEXT:case u.cF.REQUEST_INSERT_TEXT:case u.cF.REQUEST_PASTE_TEXT:r(o);break;case u.cF.TEXT_EDITOR_REQUEST_ACTION:!function(r){k(t,f.current,n,d.current,r,h)?e(r):(0,p.pl)(r.messageId)}(o);break;default:(0,R.Z)(a)}}))}catch(l){throw new Error("Invalid message: ".concat(l))}};return window.addEventListener("message",i),w(t,n,d.current),function(){!function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a()(),t={messageType:u.cF.TEXT_EDITOR_CLOSED,filePath:e};(0,p.bG)(t,n)}(t),window.removeEventListener("message",i)}}}),[n,t,s,h])}},45685:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(2272),i=t(4541),o=(t(50959),t(25776)),a=t(22167),l=t(55544),c=t(98260),u=t(62830),s=t(72006),d=t(43119),f=t(71440),p=t(51340),h=t(59187);function v(){var e=(0,d.Z)(["\n  mutation UnpublishReplUnpublish($input: UnpublishReplFromCommunityInput!) {\n    unpublishReplFromCommunity(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplActionsPermissions\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var m={},g=(0,f.Ps)(v(),p.jN);var y=t(46598),Z=t(91355),b=t(52308),w=o.K.form;function x(e){var n=e.repl,t=e.source,d=e.onDone,f=(0,y.Z)(),p=f.showConfirm,v=f.showError,x=(0,r.Z)(function(e){var n=(0,s.Z)({},m,e);return h.D(g,n)}({variables:{input:{replId:n.id}},onCompleted:function(e){if("Repl"===e.unpublishReplFromCommunity.__typename){var r=e.unpublishReplFromCommunity,i=r.runCount,o=r.likeCount,a=r.commentCount;(0,Z.j)(Z.U3.REPL_UNPUBLISHED,{source:t,numRuns:i,numLikes:o,numComments:a,replType:n.publishedAs===u.O2.Template?"template_repl":"regular_repl"}),p("Repl removed from the community.")}else"NotFoundError"===e.unpublishReplFromCommunity.__typename||"UnauthorizedError"===e.unpublishReplFromCommunity.__typename?v(e.unpublishReplFromCommunity.message):v("An unexpected error occurred.");d()},onError:function(){v("Something went wrong. Please try again.")},update:function(e){e.modify({id:e.identify({__typename:"Repl",id:n.id}),fields:{comments:function(e,n){return n.DELETE},tags:function(e,n){return n.DELETE}}})}}),2),C=x[0],k=x[1].loading;return(0,i.BX)(o.G,{css:[a.l0.colWithGap(24)],children:[(0,i.tZ)(l.xv,{multiline:!0,variant:"subheadBig",children:"Unpublish this Repl from the Community"}),(0,i.BX)(w,{onSubmit:function(e){e.preventDefault(),C()},css:[a.l0.colWithGap(32)],children:[(0,i.tZ)(l.xv,{multiline:!0,children:"Unpublishing a Repl will remove it from the Community. This action will delete all associated posts and tags. The Repl and all its comments will still be visible in your profile, but will not be shown in the Community or Trending views anymore. You can always re-publish the Repl again later."}),(0,i.BX)(o.G,{css:[a.l0.rowWithGap(8),a.l0.justify.end],children:[(0,i.tZ)(o.G,{children:(0,i.tZ)(c.zx,{type:"button",text:"Cancel",onClick:function(){return d()}})}),(0,i.tZ)(o.G,{children:(0,i.tZ)(c.zx,{disabled:k,colorway:"negative",text:k?"Unpublishing...":"Yes, unpublish this Repl",type:"submit",iconLeft:(0,i.tZ)(b.Z,{})})})]})]})]})}},97387:function(e,n,t){t.d(n,{Z:function(){return C}});var r=t(72006),i=t(4405),o=t(77637),a=t(4541),l=t(11122),c=t(50959),u=t(7579),s=t(25776),d=t(42735),f=t(22167),p=t(55544),h=t(97774),v=t(75916),m=t(31802),g=t(40306);var y={success:(0,l.iv)({":not([disabled])":{borderColor:f.TV.accentPositiveStrongest}}),error:(0,l.iv)({":not([disabled])":{borderColor:f.TV.accentNegativeStrongest}}),warning:(0,l.iv)({":not([disabled])":{borderColor:f.TV.yellowStrongest}}),default:void 0,loading:void 0},Z={success:(0,l.iv)([{color:f.TV.accentPositiveStrongest}]),error:(0,l.iv)([{color:f.TV.accentNegativeStrongest}]),warning:(0,l.iv)([{color:f.TV.yellowStrongest}]),default:void 0,loading:void 0},b={success:(0,a.tZ)(v.Z,{}),error:(0,a.tZ)(m.Z,{}),warning:(0,a.tZ)(g.Z,{}),default:void 0,loading:(0,a.tZ)(h.Z,{})},w=function(e){var n=b[e.state];return(0,a.BX)(s.G,{css:[Z[e.state],f.l0.rowWithGap(4)],children:[c.isValidElement(n)?c.cloneElement(n,{size:12}):null,(0,a.tZ)(p.xv,{variant:"small",children:e.message})]})},x=(0,l.iv)("display:grid;grid-gap:",f.TV.space8,";grid-template-areas:'label . status'\n    'input input input'\n    'validation validation validation'\n    'details details details';> .label{grid-area:label;}> .status{grid-area:status;}> .input{grid-area:input;}> .details{grid-area:details;}> .validation{grid-area:validation;}"),C=function(e){var n,t=e.id,l=e.label,c=e.status,s=e.description,h=e["aria-describedby"],v=e.error,m=e.isValid,g=e.touched,b=e.value,C=e.warning,k=e.successText,S=(0,o.Z)(e,["id","label","status","description","aria-describedby","error","isValid","touched","value","warning","successText"]),T=(0,u.H)(),E=t||T("input"),R=c&&T("status"),I=s?T("description"):void 0,G=[R,I,h].filter(Boolean).join(" "),D=!(n={description:s,error:v,isValid:m,touched:g,value:b,warning:C,successText:k}).touched&&n.description?{state:"default",message:n.description}:n.error?{message:n.error.message,state:"error"}:n.warning?{message:n.warning.message,state:"warning"}:n.isValid?{message:n.successText||"",state:"success"}:n.touched?{message:"",state:"loading"}:void 0;return(0,a.BX)("div",{css:x,children:[(0,a.tZ)("label",{htmlFor:E,className:"label",children:(0,a.tZ)(p.xv,{variant:"small",color:"dimmer",children:l})}),c?(0,a.tZ)(p.xv,{variant:"small",color:"dimmer",css:[f.l0.textAlign.right],className:"status",children:c}):null,(0,a.tZ)(d.II,(0,i.Z)((0,r.Z)({id:E,className:"input",value:b,css:[y[(null===D||void 0===D?void 0:D.state)||"default"]]},S),{"aria-describedby":G,"aria-invalid":"error"===(null===D||void 0===D?void 0:D.state)})),(0,a.tZ)("div",{id:I,className:"validation",css:[Z[(null===D||void 0===D?void 0:D.state)||"default"]],"aria-live":"default"!==(null===D||void 0===D?void 0:D.state)?"polite":void 0,children:D?(0,a.tZ)(w,(0,r.Z)({},D)):null})]})}},75088:function(e,n,t){var r=t(72006),i=t(4405),o=t(4541),a=t(11122),l=function(e){return{animationDuration:e?"2000ms":"800ms",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}},c=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, 80px) }\n  50% { transform: translate(100px, 80px) }\n  75% { transform: translate(100px, 160px) }\n  100% { transform: translate(0px, 160px) }\n"),u=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, -80px) }\n  50% { transform: translate(-100px, -80px) }\n  100% { transform: translate(-100px, -80px) }\n"),s=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  50% { transform: translate(0px, 0px) }\n  75% { transform: translate(0px, -80px) }\n  100% { transform: translate(100px, -80px) }\n");n.Z=function(e){var n=e.height,t=void 0===n?24:n,a=e.color,d=void 0===a?"#F26207":a,f=e.slow,p=void 0!==f&&f,h={width:84,height:64,fill:d,rx:12};return(0,o.BX)("svg",{width:t/1.2,height:t,viewBox:"0 0 200 240",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(p),{animationName:c}]},h),{x:8,y:8})),(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(p),{animationName:u}]},h),{x:108,y:88})),(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(p),{animationName:s}]},h),{x:8,y:168}))]})}},64444:function(e,n,t){t.d(n,{J:function(){return Z}});var r=t(72006),i=t(4405),o=t(77637),a=t(4541),l=t(50959),c=t(11122),u=t(53088),s=t(89853),d=t(38231),f=t(47409),p=t(22167),h=t(47287),v=t(25776),m=(0,c.F4)("0%{transform:translate(1px,1px) rotate(0deg);}10%{transform:translate(-1px,-1px) rotate(-1deg);}20%{transform:translate(-1px,0px) rotate(1deg);}30%{transform:translate(1px,1px) rotate(0deg);}40%{transform:translate(1px,-1px) rotate(1deg);}50%{transform:translate(-1px,1px) rotate(-1deg);}60%{transform:translate(-1px,1px) rotate(0deg);}70%{transform:translate(1px,1px) rotate(-1deg);}80%{transform:translate(-1px,-1px) rotate(1deg);}90%{transform:translate(1px,1px) rotate(0deg);}100%{transform:translate(1px,-1px) rotate(-1deg);}"),g=(0,c.F4)("from{opacity:0}to{opacity:1}"),y=(0,s.X)({self:[p.l0.flex.row,p.l0.flex.growAndShrink(1),p.l0.height(p.TV.space12),p.l0.borderRadius(16),p.l0.position.relative,d.gU.filledAndOutlined],progressWrapper:[p.l0.flex.row,p.l0.flex.growAndShrink(1),p.l0.height("100%"),p.l0.width("100%"),p.l0.borderRadius(16),p.l0.overflow("clip"),p.l0.position.relative],progress:[p.l0.position.relative,p.l0.width("100%"),p.l0.height("100%"),{top:0,left:0}],loading:f.p.backgroundPulse(),smoke:[p.l0.width("100%"),p.l0.height("500%"),p.l0.position.absolute,p.l0.left("50%"),p.l0.top("100%"),{opacity:.4,transition:"1s opacity",transform:"translate(-50%, -100%)",pointerEvents:"none"}],fadeInAnim:{animation:"".concat(g," 120ms forwards ease-out alternate")},shakeAnim:{animation:"".concat(m," 0.2s ease infinite")}});function Z(e){var n=e.total,t=e.tooltip,c=e.className,s=e.disabled,d=void 0!==s&&s,f=e.shake,p=void 0!==f&&f,m=e.smoke,g=void 0!==m&&m,Z=e.loading,w=void 0!==Z&&Z,x=(0,o.Z)(e,["total","tooltip","className","disabled","shake","smoke","loading"]),C=!(0,u.T)(),k=null;if(t)k=t;else if("current"in x)k="".concat(x.current||"0","/").concat(n);else if("data"in x){var S;k=null===(S=x.data)||void 0===S?void 0:S.map((function(e){var t=e.current;return"".concat(t||"0","/").concat(n)})).join(" | ")}return(0,a.tZ)(h.u,{placement:"top",tooltip:k,maxWidth:280,isDisabled:w,children:function(e,t){var o;if(w)o=null;else if("current"in x&&x.current)o=(0,a.tZ)(b,{total:n,disabled:d,current:x.current,color:x.color});else if("data"in x){var u;o=null===(u=x.data)||void 0===u?void 0:u.map((function(e,t){var o;return(0,l.createElement)(b,(0,i.Z)((0,r.Z)({},e),{key:"measure-bar-".concat(t),total:n,disabled:d,isLast:t+1===(null===(o=x.data)||void 0===o?void 0:o.length)}))}))}return(0,l.createElement)(v.G,(0,i.Z)((0,r.Z)({},e),{css:[y.self,y.fadeInAnim,w&&y.loading,C&&p&&y.shakeAnim],className:c,innerRef:t,onClick:void 0,key:w?"loadingMeasureBar":"finishedLoadingMeasureBar",role:"group",children:[(0,a.tZ)(v.G,{css:y.progressWrapper,children:o},"measureBarProgress"),C?(0,a.tZ)("img",{src:"/public/images/smoke.gif",alt:"",style:{opacity:g?void 0:0},css:y.smoke},"measureBarSmoke"):null]}))}})}function b(e){var n=e.current,t=e.total,i=e.color,o=void 0===i?p.TV.accentPrimaryDefault:i,l=e.disabled,c=void 0!==l&&l,u=e.isLast,s=void 0!==u&&u,d=(0,r.Z)({backgroundColor:c?p.TV.outlineDefault:o,width:w(n,t)+"%"},s?{borderTopRightRadius:p.TV.borderRadiusRound,borderBottomRightRadius:p.TV.borderRadiusRound}:{});return(0,a.tZ)(v.G,{css:y.progress,style:d,role:"meter","aria-label":"".concat(n," out of ").concat(t),"aria-valuemin":0,"aria-valuenow":n,"aria-valuemax":t})}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===n||0===e?0:Math.max(0,Math.min(100,e/n*100))}},59698:function(e,n,t){t.d(n,{T:function(){return s}});var r=t(72006),i=t(4405),o=t(77637),a=t(4541),l=(t(50959),t(25776)),c=t(24793),u=l.K.button;function s(e){var n=e.iconLeft,t=e.iconRight,l=e.text,s=e.innerRef,d=e.colorway,f=(0,o.Z)(e,["iconLeft","iconRight","text","innerRef","colorway"]);return(0,a.BX)(u,(0,i.Z)((0,r.Z)({ref:s},f),{css:[(0,c.E)({colorway:d,clickable:!0,iconLeft:!!n,iconRight:!!t}),{color:"inherit"}],children:[n,(0,a.tZ)("span",{children:l}),t]}))}},36291:function(e,n,t){t.d(n,{u:function(){return g}});var r=t(4541),i=t(50959),o=t(99214),a=t.n(o),l=t(93955),c=t(38231),u=t(55544),s=t(22167),d=t(25776),f=t(37676),p=t(24403),h=t(3668),v=d.K.a,m=d.K.button,g=i.forwardRef((function(e,n){var t=e.className,o=e.colorway,g=e.closable,y=e.icon,Z=e.text,b=e.closeAction,w=(0,r.BX)(r.HY,{children:[y&&i.cloneElement(y,{size:16}),(0,r.tZ)(u.xv,{css:s.l0.flex.growAndShrink(1),variant:"small",multiline:!0,children:Z})]}),x=o?l.Br[o].default:s.TV.accentPrimaryDefault,C=[s.l0.rowWithGap(4),s.l0.align.center,s.l0.p(4),s.l0.pl(8),s.l0.borderRadius(8),s.l0.flex.growAndShrink(1),o?(0,l.Ss)(o):c.gU.filledAndOutlined,{"&:focus-within":{boxShadow:"0 0 0 2px "+x}}];return(0,r.BX)(d.G,{css:C,children:["href"in e?(0,r.tZ)(a(),{as:e.as,href:e.href,passHref:!0,prefetch:e.prefetch,replace:e.replace,scroll:e.scroll,shallow:e.shallow,children:(0,r.tZ)(v,{ref:n,className:t,rel:e.rel,role:"link",target:e.target,css:[s.l0.reset.button,s.l0.rowWithGap(8),s.l0.center,s.l0.flex.growAndShrink(1)],children:w})}):(0,r.tZ)(m,{ref:n,className:t,onClick:e.onClick,type:e.type,css:[s.l0.reset.button,s.l0.rowWithGap(8),s.l0.center,s.l0.flex.growAndShrink(1)],children:w}),g?(0,r.tZ)(f.T,{elevated:!0,css:[s.l0.flex.grow(0),{background:"transparent"}],children:(0,r.tZ)(h.h,{alt:"Close",tooltipHidden:!0,colorway:o,onClick:b,children:(0,r.tZ)(p.Z,{})})}):null]})}));g.displayName="StatusBannerButton"},57004:function(e,n,t){t.d(n,{r:function(){return C}});var r=t(72006),i=t(4405),o=t(77637),a=t(4541),l=t(50959),c=t(18693),u=t(17074),s=t(64346),d=t(55544),f=t(25776),p=t(22167),h=t(38231),v=t(18988),m=t(53674),g=t(93955),y=t(89853),Z=f.K.label,b=(0,y.X)({label:[p.l0.rowWithGap(8),p.l0.align.center],background:{transition:"fill 100ms ease-out"},button:{transition:"x 100ms ease-out"},outline:{transition:"stroke 100ms ease-out"}}),w=function(e,n,t,r){return n?t||r?e.dimmer:e.default:h.vb.interactiveBorder},x=function(e,n,t,r,i){return!r||n||t?"transparent":i?e.strongest:h.vb.interactiveBorderHover},C=function(e){var n=e.colorway,t=void 0===n?"primary":n,f=e.dataCy,h=(0,o.Z)(e,["colorway","dataCy"]),y=g.Br[t],C=l.useRef(null),k=(0,s.l)(h),S=(0,c.h)(h,k,C).inputProps,T=(0,v.Fx)(h),E=T.focusProps,R=T.isFocusVisible,I=(0,m.XI)(h),G=I.hoverProps,D=I.isHovered,_=k.isSelected,P=h.isDisabled||!1,B=h.isReadOnly||!1,A=l.Children.count(h.children)>0;void 0!==h["aria-label"]||h["aria-labelledby"];var U=(0,a.BX)("svg",(0,i.Z)((0,r.Z)({"aria-hidden":"true"},G),{width:"40",height:"24",viewBox:"-1 -1 39 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",overflow:R?"visible":"hidden",children:[(0,a.tZ)("rect",{x:"0.5",y:"0.5",width:"35",height:"21",rx:"10.5",fill:w(y,_,P,B),css:b.background}),(0,a.tZ)("rect",{x:_?"17":"3",y:"3",width:"16",height:"16",rx:"8",fill:p.TV.white,opacity:P?.7:1,css:b.button}),(0,a.tZ)("rect",{x:"0.5",y:"0.5",width:"35",height:"21",rx:"10.5",stroke:x(y,P,B,D,_),css:b.outline}),(0,a.tZ)("rect",{x:"-1",y:"-1",width:"38",height:"24",rx:"12",stroke:R?y.stronger:"transparent",strokeWidth:"2"})]}));return A?(0,a.BX)(Z,{css:b.label,children:[(0,a.tZ)(u.T,{children:(0,a.tZ)("input",(0,i.Z)((0,r.Z)({},S,E),{ref:C,"data-cy":f}))}),U,(0,a.tZ)(d.xv,{children:h.children})]}):(0,a.BX)(Z,{css:b.label,children:[(0,a.tZ)(u.T,{children:(0,a.tZ)("input",(0,i.Z)((0,r.Z)({},S,E),{ref:C,"data-cy":f}))}),U]})}},78284:function(e,n,t){t.d(n,{O:function(){return h}});var r=t(4541),i=t(93955),o=t(55544),a=t(22167),l=t(25776),c=t(3668),u=t(98260),s=t(24403),d=t(3778),f=t(74330),p=t(17074);function h(e){var n=e.title,t=e.content,p=e.colorway,h=void 0===p?"primary":p,m=e.totalSteps,g=void 0===m?1:m,y=e.currentStepIndex,Z=void 0===y?0:y,b=e.onDismiss,w=e.onCurrentStepChange,x=e.cypressCloseData;return(0,r.BX)(l.G,{css:[a.l0.p(8),{paddingBottom:12,paddingRight:n?void 0:32,backgroundColor:i.Br[h].dimmest,border:"1px solid "+i.Br[h].dimmer,position:"relative"},a.l0.borderRadius(8),a.l0.shadow(2),a.l0.colWithGap(8)],children:[(0,r.tZ)(c.h,{alt:"Close",colorway:h,css:{position:"absolute",top:a.TV.space8,right:a.TV.space8},onClick:b,dataCy:x,children:(0,r.tZ)(s.Z,{})}),n?(0,r.tZ)(o.xv,{variant:"subheadBig",children:n}):null,"function"===typeof t?(0,r.tZ)(t,{}):(0,r.tZ)(o.xv,{multiline:!0,children:t}),g>1&&w?(0,r.BX)(l.G,{css:[a.l0.flex.row,a.l0.align.center,a.l0.justify.spaceBetween],children:[(0,r.tZ)(u.zx,{css:{visibility:Z<=0?"hidden":void 0},colorway:h,text:"Back",iconLeft:(0,r.tZ)(d.Z,{}),onClick:function(){return w(Z-1)}}),(0,r.tZ)(v,{colorway:h,total:g,current:Z}),(0,r.tZ)(u.zx,{"data-autofocus":!0,colorway:h,text:Z>=g-1?"Done":"Next",iconLeft:(0,r.tZ)(f.Z,{}),onClick:function(){return Z>=g-1?b():w(Z+1)}})]}):null]})}function v(e){var n=e.total,t=e.current,o=e.colorway;return(0,r.BX)(l.G,{children:[(0,r.tZ)(p.T,{children:(0,r.tZ)("progress",{value:t+1,max:n,"aria-label":"Step"})}),(0,r.tZ)(l.G,{"aria-hidden":!0,css:a.l0.rowWithGap(8),children:new Array(n).fill(0).map((function(e,n){return(0,r.tZ)(l.G,{css:[a.l0.borderRadius("full"),{width:a.TV.space8,height:a.TV.space8,backgroundColor:n===t?i.Br[o].stronger:i.Br[o].dimmer}]},n)}))})]})}},91184:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(50959),i=t(8189);function o(){var e=(0,i.Z)().container,n=(0,r.useState)(e.getConnectionState()),t=n[0],o=n[1];return(0,r.useEffect)((function(){return e.onConnectionStateChanged(o)}),[e]),t}},14830:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(57135),i=t(2272),o=t(96583),a=t(50959),l=t(1089),c=t(98689);function u(e){var n=(0,l.Z)({container:e,service:"exec"}).channel,t=(0,a.useRef)(!1),u=(0,a.useRef)([]),s=(0,c.Z)((0,r.Z)((function(){var e,r,a,l,c,d,f,p,h,v;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(t.current)return[2];if(!u.current.length)return[2];if("open"!==(null===n||void 0===n?void 0:n.status))return[2];if(!(e=u.current.pop()))throw new Error("Expected request");return r=(0,i.Z)(e,2),a=r[0],l=a.args,c=a.env,d=r[1],f="",p=n.onCommand((function(e){e.output&&(f+=e.output)})),t.current=!0,[4,n.request({exec:{args:l,env:c}})];case 1:return h=o.sent(),t.current=!1,p(),v=h.channelClosed?"Channel closed":h.error,d(v?{error:v,output:f||null}:{output:f,error:null}),s.current(),[2]}}))}))),d=null===n||void 0===n?void 0:n.status;return(0,a.useEffect)((function(){"open"===d&&s.current()}),[d,s]),(0,a.useCallback)((function(e){var n=e.args,t=e.env;return new Promise((function(e){u.current.push([{args:n,env:t},e]),s.current()}))}),[s])}},39771:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(2272),i=t(50959),o=t(8189),a=t(78214);function l(){var e,n,t=(0,o.Z)().container,l=(0,r.Z)(i.useState(null!==(n=null===(e=t.getContext())||void 0===e?void 0:e.repl)&&void 0!==n?n:null),2),c=l[0],u=l[1];return i.useEffect((function(){return t.onConnectionStateChanged((function(e){var n,r;e===a.em.CONNECTED&&u(null!==(r=null===(n=t.getContext())||void 0===n?void 0:n.repl)&&void 0!==r?r:null)}))}),[u,t]),c}},16701:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(2272),i=t(50959);function o(e,n){var t=(0,r.Z)(i.useState(null),2),o=t[0],a=t[1];return i.useEffect((function(){var t=!1;return e.readFile(n).then((function(e){t||a(e)})),function(){t=!0}}),[e,n]),o}},63884:function(e,n,t){t.d(n,{IL:function(){return f},ZP:function(){return h},e_:function(){return r}});var r,i=t(57135),o=t(2272),a=t(9970),l=t(96583),c=t(50959),u=t(73758),s=t(98491),d=t(27963);function f(e){return p.apply(this,arguments)}function p(){return p=(0,i.Z)((function(e){var n,t,o,c,f,p,h,v,m,g,y,Z;return(0,l.__generator)(this,(function(b){switch(b.label){case 0:return n=e.parentPath,t=e.overwrite,o=e.fs,c=e.files,f=e.shouldUseFileTransferAPI,p=e.onStart,h=e.onUpload,v=e.onError,m=e.onDone,g=function(){var e=(0,i.Z)((function(e){var n,i,a,c,s,p,m;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return n=e.targetPath,i=e.file,a=e.progress,t?[3,2]:[4,o.stat(n)];case 1:if(l.sent().exists)return c={file:i,path:n,error:r.AlreadyExists},v(c),[2,c];l.label=2;case 2:s=null,l.label=3;case 3:return l.trys.push([3,5,,6]),[4,(0,d.pV)(i)];case 4:return s=l.sent(),[3,6];case 5:return l.sent(),p={file:i,path:n,error:r.FileRead},v(p),[2,p];case 6:return m=u.Z.from(s),f?[4,o.transferFile(n,m,(function(e,n){a.current=n/e}))]:[3,8];case 7:return l.sent(),[3,10];case 8:return[4,o.writeFile(n,m)];case 9:l.sent(),l.label=10;case 10:return h({file:i,path:n}),[2,{path:n,file:i}]}}))}));return function(n){return e.apply(this,arguments)}}(),y=c.map((function(e){var t=e.dirPath||e.webkitRelativePath||e.name;return{targetPath:n?n+"/"+t:t,progress:(0,s.u)(0),file:e}})),p(y),[4,Promise.all(y.map(g))];case 1:return Z=b.sent(),m({parentPath:n,uploads:Z.filter((function(e){return!("error"in e)})),errors:Z.reduce((function(e,n){return"error"in n?(0,a.Z)(e).concat([n]):e}),[])}),[2]}}))})),p.apply(this,arguments)}function h(e){var n=e.fs,t=e.onDone,r=(0,o.Z)(c.useState([]),2),i=r[0],l=r[1],u=c.useRef(t);c.useEffect((function(){u.current=t}),[t]);var s=c.useCallback((function(e){var t=e.parentPath,r=e.files;f({overwrite:e.overwrite,parentPath:t,files:r.filter(Boolean),fs:n,shouldUseFileTransferAPI:!0,onStart:function(e){return l((function(n){return(0,a.Z)(n).concat((0,a.Z)(e))}))},onUpload:function(e){l((function(n){return n.filter((function(n){return n.targetPath!==e.path}))}))},onError:function(e){l((function(n){return n.filter((function(n){return n.targetPath!==e.path}))}))},onDone:function(e){u.current&&u.current(e)}})}),[n,l]);return{uploadFiles:s,pendingUploads:i}}!function(e){e.AlreadyExists="ALREADY_EXIST",e.FileRead="FILE_READ",e.Network="NETWORK"}(r||(r={}))},60043:function(e,n,t){function r(e){var n,t=e.getServerCapabilities();return{isAutoCompleteSupported:Boolean(null===t||void 0===t?void 0:t.completionProvider),isCompletionItemResolveSupported:Boolean(null===t||void 0===t||null===(n=t.completionProvider)||void 0===n?void 0:n.resolveProvider),isDocumentSymbolSupported:Boolean(null===t||void 0===t?void 0:t.documentSymbolProvider),isFindReferencesSupported:Boolean(null===t||void 0===t?void 0:t.referencesProvider),isFindDefinitionSupported:Boolean(null===t||void 0===t?void 0:t.definitionProvider),isFindTypeDefinitionSupported:Boolean(null===t||void 0===t?void 0:t.typeDefinitionProvider),isFindImplementationSupported:Boolean(null===t||void 0===t?void 0:t.implementationProvider),isTextDocumentSyncSupported:Boolean(null===t||void 0===t?void 0:t.textDocumentSync),isHoverSupported:Boolean(null===t||void 0===t?void 0:t.hoverProvider),isRenameSupported:Boolean(null===t||void 0===t?void 0:t.renameProvider),isCodeActionsSupported:Boolean(null===t||void 0===t?void 0:t.codeActionProvider),isSignatureHelpSupported:Boolean(null===t||void 0===t?void 0:t.signatureHelpProvider)}}t.d(n,{Z:function(){return r}})},72402:function(e,n,t){t.d(n,{Z:function(){return b},X:function(){return Z}});var r=t(2272),i=t(50959),o=t(8189),a=t(72006),l=t(4405),c=t(16783),u=t.n(c),s=t(47843),d=t(52662);function f(e){return Math.floor(performance.now()-e.startTime)}var p=new WeakSet;function h(e){var n=e.client,t=e.replId,r=e.language;if(!p.has(n)){p.add(n);var i=new Map,o=function(e){return{method:e.method,replid:t,language:r,startTime:Math.floor(e.startTime)}},c=u()((function(e,n){var t=f(n);t>1e4&&s.kg.time("LSP unresponsive request",t,o(n))})),h=setInterval((function(){i.forEach((function(e){c(e.id,e)}))}),2e3);return(0,d.uf)([n.onRequest((function(e){var n=e.id,t=e.data;Math.random()<.01&&i.set(n,{id:n,method:t.method,startTime:performance.now()})})),n.onResponse((function(e){var n=e.id,t=e.error,r=i.get(n);null!=r&&(i.delete(n),s.kg.time("LSP request",f(r),(0,l.Z)((0,a.Z)({},o(r)),{result:null==t?"ok":"error"})))})),n.onCancelRequest((function(e){var n=i.get(e);null!=n&&(i.delete(e),s.kg.time("LSP request",f(n),(0,l.Z)((0,a.Z)({},o(n)),{result:"cancelled"})))})),function(){return clearInterval(h)},function(){return p.delete(n)}])}}var v=t(69658),m=t(35813),g=t(30241),y=t(39771);function Z(){var e=(0,y.Z)(),n=(0,r.Z)(i.useState(null),2),t=n[0],o=n[1];return i.useEffect((function(){(null===e||void 0===e?void 0:e.language)&&o(e.language.startsWith("nix")||e.language.startsWith("html"))}),[e]),t}function b(e){var n=(0,g.Z)(),t=(0,m.Z)(),a=(0,o.Z)(),l=a.lsp,c=a.lspnix,u=(0,r.Z)(i.useState(null),2),s=u[0],d=u[1],f=Z();return i.useEffect((function(){if(null!==f&&e){var n,t;if(f)n=c.onClient(e,d);else(null===(t=l.getClient())||void 0===t?void 0:t.isSupportedFile(e))?d(l.getClient()):d(null),n=l.onClient((function(n){(null===n||void 0===n?void 0:n.isSupportedFile(e))?d(n):d(null)}));return function(){n(),d(null)}}}),[l,c,e,f]),i.useEffect((function(){if(s)return h({client:s,replId:n,language:(0,v.D)(e,t)})}),[s,n,e,t]),s}},38986:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(2272),i=t(50959),o=t(60043);function a(e){var n=(0,r.Z)(i.useState(null),2),t=n[0],a=n[1];return i.useEffect((function(){if(e)return a((0,o.Z)(e)),e.onServerCapabilitiesChange((function(){a((0,o.Z)(e))}));a(null)}),[e]),t}},37380:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(2272),i=t(50959),o=t(8189);function a(){var e=(0,o.Z)().presence,n=(0,r.Z)(i.useState(e.getFollowedUser()),2),t=n[0],a=n[1];return i.useEffect((function(){return a(e.getFollowedUser()),e.onFollowedUserChanged(a)}),[e]),t}},17042:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(37380);function i(){var e=(0,r.Z)();return e?e.color:null}},51486:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(50959),i=t(73691),o=t(75030),a=t(86763),l=t.n(a),c=t(33163),u=t(7247);function s(e){var n=e.view,t=e.filePath,a=(0,o.Z)({view:n}),s=(0,c.K)((0,u.Z)((function(){return{path:t}}),[t]));(0,r.useEffect)((function(){if(n){var e=i.tk.domEventHandlers({scroll:l()((function(){var e=0,t=0,r=!0,i=!1,o=void 0;try{for(var a,l=n.visibleRanges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;e=Math.min(e,c.from),t=Math.max(e,c.to)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}s("user:scroll",{visibleLines:{from:n.state.doc.lineAt(e).number,to:n.state.doc.lineAt(t).number}})}),250)}),t=l()((function(e,n,t){s("user:selection",{inputMethod:t,from:e,to:n})}),250),r=i.tk.updateListener.of((function(e){var n=e.transactions,r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.isUserEvent("input.paste")&&s("user:paste",{}),c.isUserEvent("input.drop")&&s("user:new-drop",{}),c.isUserEvent("move.drop")&&s("user:move-drop",{}),c.isUserEvent("delete.cut")&&s("user:cut",{}),c.isUserEvent("input.complete")&&s("user:complete",{}),c.isUserEvent("select")&&t(c.newSelection.main.from,c.newSelection.main.to,c.isUserEvent("select.pointer")?"pointer":"keyboard"),c.isUserEvent("undo")&&s("user:undo",{}),c.isUserEvent("redo")&&s("user:redo",{})}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}));return n.dispatch({effects:a.reconfigure([e,r])}),function(){n.dispatch({effects:a.reconfigure([])})}}}),[n,a,s])}},19978:function(e,n,t){t.d(n,{P:function(){return W},T:function(){return F}});var r=t(2272),i=t(9970),o=t(4541),a=t(50959),l=t(25776),c=t(89853),u=t(22167),s=t(57389),d=t(72006),f=t(4405),p=t(52422),h=t(29126),v=t(99214),m=t.n(v),g=t(38559),y=t(47287),Z=t(55544),b=t(59389),w=t(590),x=(0,c.X)({self:[u.l0.rowWithGap(8),u.l0.align.center],dot:[u.l0.width(8),u.l0.height(8),{borderRadius:"50%"}],title:[u.l0.flex.grow(1)]}),C=function(e){var n=e.title,t=e.usage,r=e.iconUrl;return(0,o.BX)(l.G,{css:x.self,children:["string"===typeof r?(0,o.tZ)(w.ZP,{size:16,iconUrl:r,alt:n}):null,(0,o.tZ)(Z.xv,{css:x.title,children:n}),(0,o.tZ)(Z.xv,{color:"dimmer",children:(0,b.fZ)(t)})]})},k=(0,c.X)({self:[u.l0.height("100%")],empty:[u.l0.height("100%")]}),S=l.K.a,T=function(e){var n=e.percentage,t=e.color,r=e.linkedRepl,i=e.usage,l=e.count,c=r?(0,h.aq)(r):g.$I,u=(0,a.useState)(!1),v=u[0],Z=u[1];return(0,o.tZ)(y.u,{tooltip:r?(0,o.tZ)(C,{title:r.title,usage:i,iconUrl:r.iconUrl}):(0,o.tZ)(C,{title:"+".concat(l," more"),usage:i}),placement:"top",delay:"none",isOpen:v,maxWidth:400,children:function(e,r){return(0,o.tZ)(m(),(0,f.Z)((0,d.Z)({},c),{passHref:!0,children:(0,o.tZ)(S,{onMouseOver:function(){return Z(!0)},onMouseLeave:function(){return Z(!1)},ref:r,css:k.self,style:(0,s.Z)({minWidth:"calc(".concat(100*p.$,"%)"),width:"calc(".concat(n,"% - 1px)"),backgroundColor:t},"&:lastOfType",{width:"".concat(n,"%")})})}))}})},E=t(54427),R=t(47409),I=t(3668),G=t(49615),D=t(4536),_=t(57332),P=(0,c.X)({self:[u.l0.rowWithGap(8),u.l0.align.center],dot:[u.l0.flex.grow(1),u.l0.width(8),u.l0.height(8),u.l0.minWidth(8),u.l0.maxHeight(8),{borderRadius:"50%"}],title:[u.l0.flex.grow(1),u.l0.color.foregroundDefault],line:[u.l0.flex.growAndShrink(1),u.l0.height(8),u.l0.width("100%")]}),B=l.K.a,A=l.K.li,U=function(e){var n=e.color,t=e.title,r=e.usage,i=e.linkedRepl,a=e.username,c=i?(0,h.aq)(i):(0,_.Ru)(a);return(0,o.tZ)(A,{children:(0,o.tZ)(m(),(0,f.Z)((0,d.Z)({},c),{passHref:!0,children:(0,o.tZ)(B,{children:(0,o.BX)(l.G,{css:P.self,children:[(0,o.tZ)("div",{css:P.dot,style:{backgroundColor:n}}),i?(0,o.tZ)(w.ZP,{size:16,iconUrl:i.iconUrl,alt:t}):null,(0,o.tZ)(Z.xv,{css:P.title,children:t}),(0,o.tZ)(l.G,{css:P.line,children:(0,o.tZ)("svg",{width:"100%",xmlns:"http://www.w3.org/2000/svg",children:(0,o.tZ)("line",{x1:"0%",y1:"50%",x2:"100%",y2:"50%",stroke:u.TV.outlineDefault})})}),(0,o.tZ)(Z.xv,{color:"dimmer",children:(0,b.fZ)(r)})]})})}))})},N=(0,c.X)({self:[u.l0.colWithGap(4)]}),L=l.K.ul,X=function(e){var n=e.topRepls,t=e.groupedRepls,r=e.groupedTotal,i=e.context,a=e.username;if("workspace_info_modal"===i.type){var c=n.findIndex((function(e){return e.repl.id===i.replId}));return-1===c?(0,o.tZ)(l.G,{css:N.self,children:(0,o.tZ)(Z.xv,{children:"No storage usage"})}):(0,o.BX)(L,{css:N.self,children:[n.map((function(e,n){return(0,o.tZ)(U,{color:n===c?u.TV.accentPrimaryDefault:u.TV.accentPrimaryDimmer,title:e.repl.title,usage:e.usage,linkedRepl:e.repl,username:a},n)})),0!==t.length?(0,o.tZ)(U,{color:u.TV.backgroundHighest,title:"+".concat(t.length," more"),usage:r,username:a}):null]})}return(0,o.BX)(L,{css:N.self,children:[0===n.length?(0,o.tZ)(Z.xv,{children:"No storage usage"}):null,n.map((function(e,n){return(0,o.tZ)(U,{color:p.D[n%p.D.length],title:e.repl.title,usage:e.usage,linkedRepl:e.repl,username:a},n)})),0!==t.length?(0,o.tZ)(U,{color:u.TV.backgroundHighest,title:"+".concat(t.length," more"),usage:r,username:a}):null]})},M=t(72428),O=(0,c.X)({bar:[u.l0.width("100%"),u.l0.rowWithGap(1),u.l0.height(16),u.l0.borderRadius(4),u.l0.overflow("hidden"),u.l0.backgroundColor.backgroundHigher],selfPlaceholder:[u.l0.width("100%"),u.l0.rowWithGap(1),u.l0.height(16),u.l0.borderRadius(4),u.l0.overflow("hidden"),u.l0.backgroundColor.backgroundHigher,R.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot)],barWrapper:[u.l0.flex.grow(1)],barAndTriggerWrapper:[u.l0.rowWithGap(8),u.l0.align.center],self:[u.l0.colWithGap(8)]}),F=function(e){var n=e.summary,t=e.context,c=e.username,u=(0,a.useState)(!1),s=u[0],d=u[1],f=n.perRepl,p=n.total,h=n.limit,v=Math.max(p,h),m=(0,i.Z)(f).filter((function(e){return e.percentage>0})).sort((function(e,n){return n.usage-e.usage})),g=(0,r.Z)(function(e,n){if("account_page"===n.type)return[e.slice(0,8),e.slice(8)];var t=e.findIndex((function(e){return e.repl.id===n.replId}));if(t<8)return[e.slice(0,8),e.slice(8)];var r=e[t];return[e.slice(0,8).concat(r),e.slice(8,t).concat(e.slice(t+1))]}(m,t),2),y=g[0],Z=g[1],b=new Map(y.map((function(e){return[e.repl.id,e]}))),w=Z.reduce((function(e,n){return e+n.usage}),0),x=0===v?0:w/v,C=new Set(Z.map((function(e){return e.repl.id}))),k=(0,E.b)(y,x,C),S="workspace_info_modal"===t.type;return(0,o.BX)(l.G,{css:O.self,children:[(0,o.BX)(l.G,{css:O.barAndTriggerWrapper,children:[(0,o.tZ)(l.G,{css:O.barWrapper,children:(0,o.tZ)(l.G,{css:O.bar,children:k.map((function(e,n){var r,i=b.get(V(e));return(0,o.tZ)(T,{percentage:100*e.percentage,color:S?H(e,t.replId):z(e,n),linkedRepl:null===i||void 0===i?void 0:i.repl,count:e.replIds.size,usage:null!==(r=null===i||void 0===i?void 0:i.usage)&&void 0!==r?r:w},n)}))})}),(0,o.tZ)(I.h,{alt:s?"Hide Repls":"Show Repls",children:s?(0,o.tZ)(D.Z,{onClick:function(){return d(!s)}}):(0,o.tZ)(G.Z,{onClick:function(){return d(!s)}})})]}),s?(0,o.BX)(o.HY,{children:[(0,o.tZ)(X,{topRepls:y,groupedRepls:Z,groupedTotal:w,context:t,username:c}),S?(0,o.tZ)(M.R,{}):null]}):null]})},W=function(){return(0,o.tZ)(l.G,{children:(0,o.tZ)(l.G,{css:O.selfPlaceholder})})},H=function(e,n){return e.replIds.has(n)?u.TV.accentPrimaryDefault:u.TV.accentPrimaryDimmest},z=function(e,n){return e.grouped?u.TV.backgroundHighest:p.D[n%p.D.length]},V=function(e){return e.replIds.keys().next().value}},35748:function(e,n,t){t.d(n,{Pf:function(){return v},mE:function(){return g}});var r=t(72006),i=t(43119),o=t(71440),a=t(67216);function l(){var e=(0,i.Z)(["\n  fragment AccountStorageUtilization on AccountStorageUtilization {\n    __typename\n    total\n    perRepl {\n      __typename\n      usage\n      percentage\n      repl {\n        __typename\n        id\n        slug\n        url\n        title\n        nextPagePathname\n        iconUrl\n      }\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query ManageAccountStorageUtilizationCurrentUser {\n    currentUser {\n      __typename\n      id\n      username\n      userSubscriptionType\n      storageInfo {\n        __typename\n        storageQuota {\n          ... on StorageQuota {\n            __typename\n            quota\n          }\n        }\n        storageQuotaStatus2 {\n          ... on StorageQuotaStatus {\n            __typename\n            status\n          }\n          ... on ServiceUnavailable {\n            __typename\n            message\n          }\n        }\n        accountStorageUtilization {\n          ...AccountStorageUtilization\n          ... on UnauthorizedError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query ManageAccountStorageUtilizationCurrentRepl($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        owner {\n          ... on Team {\n            __typename\n            id\n          }\n          ... on User {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query ManageAccountStorageUtilizationStorageQuota {\n    currentUser {\n      __typename\n      id\n      storageInfo {\n        storageQuota {\n          ... on StorageQuota {\n            __typename\n            quota\n          }\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation ManageAccountStorageSetUserStorageQuota {\n    setUserStorageQuota {\n      ... on SetUserStorageQuotaSuccess {\n        __typename\n        quota\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}var f={},p=(0,o.Ps)(l()),h=(0,o.Ps)(c(),p);function v(e){var n=(0,r.Z)({},f,e);return a.a(h,n)}var m=(0,o.Ps)(u());function g(e){var n=(0,r.Z)({},f,e);return a.a(m,n)}s();d()},94514:function(e,n,t){t.d(n,{a:function(){return c}});var r=t(4541),i=t(11122),o=function(e){return(0,i.iv)({"body *":{cursor:"".concat(e," !important")}})},a=(0,i.iv)({"body *":{userSelect:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none"}}),l={"n-resize":o("n-resize"),"ne-resize":o("ne-resize"),"nesw-resize":o("nesw-resize"),"s-resize":o("s-resize"),"se-resize":o("se-resize"),"sw-resize":o("sw-resize"),"e-resize":o("e-resize"),"ew-resize":o("ew-resize"),"row-resize":o("row-resize"),"col-resize":o("col-resize"),grabbing:o("grabbing")};function c(e){var n=e.cursor;return(0,r.tZ)(i.xB,{styles:[a,l[n]]})}},51725:function(e,n,t){t.d(n,{g:function(){return o}});var r=t(4541),i=t(11122);function o(){return(0,r.tZ)(i.xB,{styles:[{body:{overflow:"hidden"}}]})}},5473:function(e,n,t){t.d(n,{k:function(){return h}});var r=t(72006),i=t(4405),o=t(4541),a=t(47287),l=t(78284),c=t(50959),u=t(10422),s=t(33105),d=t(93955),f=t(22167),p=t(84445);function h(e){var n=e.targetElement,t=e.activeStep,h=e.goto,v=e.currentStepIndex,m=e.totalSteps,g=e.done,y=e.disableAnimation,Z=e.placement,b=void 0===Z?"right":Z,w=e.innerRef,x=(0,c.useState)(null),C=x[0],k=x[1],S=(0,c.useState)(null),T=S[0],E=S[1],R=(0,s.D)(n,C,{placement:b,modifiers:[{name:"arrow",options:{element:T,padding:8}},{name:"offset",options:{offset:[0,16]}},{name:"preventOverflow",options:{padding:8}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}},{name:"computeStyles",options:{adaptive:!1}}]}),I=(0,p.Z)((function(){var e;null===(e=R.update)||void 0===e||e.call(R)}),{type:"throttle",wait:100});return(0,c.useEffect)((function(){I(n)}),[n,I]),(0,c.useImperativeHandle)(w,(function(){return{updateTooltip:function(){var e;null===(e=R.update)||void 0===e||e.call(R)}}})),(0,u.createPortal)((0,o.BX)("div",(0,i.Z)((0,r.Z)({ref:k,style:R.styles.popper,css:{transition:y?"all":"all 0.5s ease-out",zIndex:f.n0+2,width:320}},R.attributes.popper),{children:[(0,o.tZ)(l.O,{title:t.title,content:t.content,onDismiss:function(){g()},currentStepIndex:v,onCurrentStepChange:h,totalSteps:m,cypressCloseData:"tour-tooltip-close-button"}),(0,o.tZ)("span",{style:R.styles.arrow,css:[a.wk,{"&::after":{backgroundColor:d.Br.primary.dimmest,border:"1px solid "+d.Br.primary.dimmer}}],ref:E})]})),document.body)}},47134:function(e,n,t){t.d(n,{r:function(){return k},e:function(){return S.e}});var r=t(57389),i=t(72006),o=t(4405),a=t(2272),l=t(4541),c=t(54994),u=t(50959),s=t(13924),d=t(78284),f=t(35021);function p(){var e=(0,s.X)();if(!e)return null;var n=e.activeStep,t=e.goto,r=e.steps,i=e.done;return(0,l.tZ)(f.u,{preventClose:!0,isOpen:Boolean(n.isModal),onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,children:(0,l.tZ)(d.O,{title:n.title,content:n.content,onDismiss:function(){i()},currentStepIndex:r.findIndex((function(e){return n.id===e.id})),onCurrentStepChange:t,totalSteps:r.length,cypressCloseData:"tour-tooltip-close-button"})})}var h=t(30826),v=t.n(h),m=t(10422),g=t(11122),y=t(84445),Z=t(22167);function b(e){var n=e.targetElement,t=(0,u.useState)(null),r=t[0],o=t[1],a=(0,y.Z)((function(){n&&o({rect:n.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),{type:"throttle",wait:100});if((0,u.useEffect)((function(){n&&a(n)}),[n,a]),(0,u.useEffect)((function(){if(n){var e=v()((function(){o({rect:n.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),100);return window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}}),[n]),!r||!n)return null;var c=(0,g.iv)({backgroundColor:Z.TV.backgroundOverlay,zIndex:Z.n0+1,position:"fixed",transition:"all 0.5s ease-out"});return(0,m.createPortal)((0,l.BX)(l.HY,{children:[(0,l.tZ)("div",{id:"wat",css:[w((0,i.Z)({side:"left-top"},r)),c]}),(0,l.tZ)("div",{css:[w((0,i.Z)({side:"top-right"},r)),c]}),(0,l.tZ)("div",{css:[w((0,i.Z)({side:"right-bottom"},r)),c]}),(0,l.tZ)("div",{css:[w((0,i.Z)({side:"bottom-left"},r)),c]})]}),document.body)}function w(e){var n=e.side,t=e.rect,r=e.docWidth,i=e.docHeight;switch(n){case"left-top":return(0,g.iv)({top:0,left:0,width:Math.max(0,t.left),height:Math.max(0,t.bottom)});case"top-right":return(0,g.iv)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,t.left),"px)"),height:Math.max(0,t.top)});case"right-bottom":return(0,g.iv)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,t.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,t.top),"px)")});case"bottom-left":return(0,g.iv)({bottom:0,left:0,width:Math.max(0,t.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,t.bottom),"px)")})}}var x=t(5473),C=t(49500);function k(e){var n,t=e.children,d=e.tour,f=e.isDoneInitialOverride,h=e.onStep,v=e.onDone,m=function(){_(!0),null===v||void 0===v||v(k.id)},g=function(e){B.current=k,null===h||void 0===h||h(e.id),S(e)},y=function(e){var n;if("number"===typeof e)n=e;else{var t=e;n=d.steps.findIndex((function(e){return t===e.id}))}if(!(n<0||n>=d.steps.length)){for(var r=d.steps[n],i=n<P;!E[r.id]&&r.autoSkipIfNoTarget;){if((n=i?n-1:n+1)<0||n>=d.steps.length)return;r=d.steps[n]}g(r)}},Z=function(){y(0),_(!1)},w=(0,u.useState)(d.steps[0]),k=w[0],S=w[1],T=(0,u.useState)({}),E=T[0],R=T[1],I=function(e,n){var t,r=(0,c.Pp)({variables:{tours:e}}),i=r.data,o=r.loading,l=(0,a.Z)((0,c.oe)({variables:{name:e},optimisticResponse:{__typename:"RootMutationType",markTourAsSeen:{__typename:"TourSeen",id:e,seen:!0}}}),1)[0],s=(0,u.useState)(n),d=s[0],f=s[1],p=Boolean(null===i||void 0===i||null===(t=i.currentUser)||void 0===t?void 0:t.toursSeen[0].seen);return"boolean"===typeof d&&(p=d),{isLoading:o,isDone:p,setIsDone:function(e){f(e),e&&l()}}}(d.id,f),G=I.isDone,D=I.isLoading,_=I.setIsDone,P=d.steps.findIndex((function(e){return k.id===e.id}));if(-1===P)throw new Error("Current tour step is not in tour steps");var B=(0,u.useRef)(),A=(0,u.useCallback)((function(e,n){var t=d.steps.findIndex((function(n){return e===n.id}));if(-1===t)throw new Error("Invalid step id");if(d.steps[t].isModal)throw new Error("Trying to set a target element for a modal step");R((function(t){return t[e]===n?t:(0,o.Z)((0,i.Z)({},t),(0,r.Z)({},e,n))}))}),[d]),U=E[k.id],N=!G&&!D;window.startTour=function(){C.log("starting tour:",d.id,"from",d.steps[0].id),Z()};var L=d.steps.filter((function(e){return!e.autoSkipIfNoTarget||Boolean(E[e.id])})),X=L.findIndex((function(e){return k.id===e.id}));return(0,l.BX)(s.z,{value:(0,o.Z)((0,i.Z)({},d),{setStepTargetElement:A,activeStep:k,next:function(){var e=d.steps[P+1];if(e&&e.autoSkipIfNoTarget)for(var n=P+1;e&&e.autoSkipIfNoTarget&&!E[e.id];)n++,e=d.steps[n];e?g(e):m()},prev:function(){var e=d.steps[P-1];if(e&&e.autoSkipIfNoTarget)for(var n=P-1;e&&e.autoSkipIfNoTarget&&!E[e.id];)n--,e=d.steps[n];e&&g(e)},goto:y,isDone:G,isLoading:D,done:m,restart:Z}),children:[N&&k.isModal?(0,l.tZ)(p,{}):null,N&&U?(0,l.BX)(l.HY,{children:[(0,l.tZ)(b,{targetElement:U}),(0,l.tZ)(x.k,{targetElement:U,activeStep:k,currentStepIndex:X,done:m,goto:function(e){y(e+P-X)},totalSteps:L.length,disableAnimation:Boolean(0===P||(null===(n=B.current)||void 0===n?void 0:n.isModal))})]}):null,t]})}var S=t(58925)},19448:function(e,n,t){var r;t.d(n,{z:function(){return r}}),function(e){e.FileNode="FILE_NODE",e.FileHeaderTab="FILE_HEADER_TAB",e.Code="CODE",e.Pane="PANE",e.NewPane="NEW_PANE"}(r||(r={}))},28021:function(e,n,t){t.d(n,{Y:function(){return x},Z:function(){return T}});var r=t(4541),i=t(50959),o=t(12417),a=t(14806),l=t(73691),c=t(75030),u=t(50260),s=t(78457),d=t(98491),f=t(22167),p=t(25776),h=t(79197),v=t(52662),m=t(64302),g=(0,d.u)(null),y=(0,d.u)(null),Z=(0,d.u)({from:0,to:0}),b=l.p.mark({class:"ast-hover"}),w=l.tk.baseTheme({".ast-hover":{background:f.TV.backgroundHighest}});function x(e){var n=e.view,t=(0,c.Z)({view:n}),r=(0,m.k)();(0,i.useEffect)((function(){if(r&&n){g.current=n.state;var e=a.Py.define(),i=(0,v.uf)([y.subscribe((function(t){n.dispatch({effects:e.of(t)})})),Z.subscribe((function(e){n.dispatch({selection:{anchor:e.from,head:e.to}})}))]);return n.dispatch({effects:t.reconfigure([l.tk.updateListener.of((function(e){(e.selectionSet||e.docChanged)&&(g.current=e.state)})),a.QQ.define({create:function(){return l.p.none},update:function(n,t){return n=n.map(t.changes),(0,u.j)(t,e,(function(e){n=null==e.value?l.p.none:l.p.set([b.range(e.value.from,e.value.to)])})),n},provide:function(e){return l.tk.decorations.from(e)}}),w])}),function(){g.current=null,i(),n.dispatch({effects:t.reconfigure([])})}}}),[n,r,t])}var C=(0,i.memo)((function(e){var n=e.node,t=e.index,i=e.active,o=e.terminal,a=n.type.name,l={from:n.from,to:n.to};return(0,r.BX)(p.G,{css:[{marginLeft:4*t+(o?4:0)},f.l0.mb(4),f.l0.rowWithGap(2),f.l0.align.center,f.l0.cursor.pointer],onMouseEnter:function(){y.current=l},onClick:function(){y.current=null,Z.current=l},children:[(0,r.tZ)(h.Z,{size:"small",fontFamily:a.length>1?"sans-serif":"monospace",fontWeight:i?"bold":"regular",children:a}),(0,r.BX)(h.Z,{size:"xsmall",truncate:!0,children:["(",n.from," \u2013 ",n.to,")"]})]})}));function k(e,n){for(var t=[];n(e);)t.push(e.node);return t}var S=(0,i.memo)((function(e){var n=e.state,t=(0,o.qz)(n),a=n.selection.main.head,l=(0,i.useMemo)((function(){return k(t.cursorAt(a),(function(e){return e.parent()})).reverse()}),[t,a]),c=(0,i.useMemo)((function(){return k(t.cursorAt(a),(function(e){return e.prevSibling()}))}),[t,a]),u=(0,i.useMemo)((function(){return k(t.cursorAt(a),(function(e){return e.nextSibling()}))}),[t,a]);return(0,r.BX)(p.G,{css:f.l0.ml(4),onMouseLeave:function(){y.current=null},children:[l.map((function(e,n){return(0,r.tZ)(C,{node:e,index:n},n)})),c.map((function(e,n){return(0,r.tZ)(C,{node:e,index:l.length,terminal:!0},n)})),(0,r.tZ)(C,{node:t.resolveInner(n.selection.main.head),index:l.length,terminal:!0,active:!0}),u.map((function(e,n){return(0,r.tZ)(C,{node:e,index:l.length,terminal:!0},n)}))]})}));function T(){var e=(0,s.Z)(g);return e?(0,r.tZ)(S,{state:e}):null}},56139:function(e,n,t){t.d(n,{YX:function(){return b},ho:function(){return w}});var r=t(66091),i=t(72006),o=t(4405),a=t(2272),l=t(4541),c=t(50959),u=t(22167),s=t(55544),d=t(25776),f=t(7395),p=t(97774),h=t(78241),v=t(75916),m=t(27662),g=t(78457),y=t(98491),Z=t(89166),b=new(function(){function e(){var n=this;(0,r.Z)(this,e),this.counter=0,this.enabled=!1,this.maxEntries=10,this.logs=(0,y.u)([]),this.clear=function(){n.logs.current=[]}}var n=e.prototype;return n.toggle=function(e){this.enabled=e},n.add=function(e){var n=this;if(!this.enabled)return{id:-1};var t=this.counter++,r={id:t,request:e,requestTime:Date.now()};return this.logs.update((function(e){return[r].concat(e).slice(0,n.maxEntries)})),{id:t}},n.update=function(e,n){this.enabled&&this.logs.update((function(t){var r=t.findIndex((function(n){return n.id===e.id}));if(-1===r)return t;var i=t.slice();return i[r]=n(i[r]),i}))},n.complete=function(e,n){this.update(e,(function(e){return(0,o.Z)((0,i.Z)({},e),{response:n,responseTime:Date.now()})}))},n.abort=function(e){this.logs.update((function(n){return n.filter((function(n){return n.id!==e.id||null!=n.responseTime}))}))},e}()),w=function(){var e,n=(0,g.Z)(b.logs);return(0,l.BX)(d.G,{css:[u.l0.flex.column],children:[(0,l.BX)(d.G,{css:[u.l0.flex.row,u.l0.align.center,u.l0.m(4),u.l0.position.sticky,u.l0.top(0),u.l0.backgroundColor.backgroundDefault,u.l0.zIndex(1)],children:[(0,l.tZ)(s.xv,{css:u.l0.flex.grow(1),children:"Requests"}),(0,l.tZ)(f.Z,{onClick:b.clear})]}),(0,l.BX)(d.G,{css:[u.l0.flex.grow(1),u.l0.flex.column,u.l0.overflow("auto")],children:[n.map((function(n){return(0,l.tZ)(x,{log:n},null!==(e=n.id)&&void 0!==e?e:n.requestTime.valueOf())})),!n.length&&(0,l.tZ)(d.G,{css:u.l0.m(4),children:"\ud83d\ude14 No logs yet..."})]})]})},x=(0,c.memo)((function(e){var n=e.log,t=n.requestTime,r=n.responseTime,i=n.request,o=n.response,c=(0,a.Z)((0,m.Z)(!0),2),f=c[0],p=c[1],h=i.code.length>20?"...".concat(i.code.slice(-20)):i.code;return(0,l.BX)(d.G,{css:[u.l0.my(4),u.l0.mx(4)],children:[(0,l.BX)(d.G,{role:"button",onClick:p,onKeyDown:p,tabIndex:0,css:[u.l0.flex.row,u.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(d.G,{css:[u.l0.flex.grow(1),u.l0.rowWithGap(2)],children:[(0,l.tZ)(s.xv,{children:C(n)}),(0,l.tZ)(s.xv,{children:(0,l.tZ)("code",{children:h})})]}),(0,l.tZ)(d.G,{css:{opacity:.5},children:null!=r&&(0,l.BX)(s.xv,{css:u.l0.fontSize(13),children:[r.valueOf()-t.valueOf()," ms"]})})]}),!f&&(0,l.BX)(l.HY,{children:[void 0!==i&&(0,l.tZ)(Z.g,{name:"request",src:i}),void 0!==o&&("CompleteCodeResult"===o.__typename?(0,l.BX)("details",{children:[(0,l.tZ)("summary",{children:"Response"}),(0,l.tZ)("pre",{css:[u.l0.overflow("scroll"),u.l0.borderRadius(4),u.l0.p(4),{border:"1px solid ".concat(u.TV.outlineDimmest)}],children:o.code})]}):(0,l.tZ)(Z.g,{name:"response",src:o}))]})]})}));function C(e){var n=e.response;return n?"CompleteCodeResult"===n.__typename?(0,l.tZ)(v.Z,{}):(0,l.tZ)(h.Z,{}):(0,l.tZ)(p.Z,{})}},66261:function(e,n,t){t.d(n,{Sj:function(){return c},Th:function(){return a},UB:function(){return u},a0:function(){return s},ot:function(){return l}});var r=t(72006),i=t(4405),o=t(47236);var a=(0,o.cn)([]),l=(0,o.cn)({regexp:null,direction:"",highlightOnly:!0}),c=(0,o.cn)((function(e){return function(e,n){if(!n.regexp&&!n.direction)return e.map((function(e){return(0,i.Z)((0,r.Z)({},e),{highlighted:!1})}));var t=function(e){var t=e.dir,r=e.channel,i=e.cmd;return(!n.direction||t===n.direction)&&!!(!n.regexp||!n.regexp.test||r.name&&n.regexp.test(r.name)||r.service&&n.regexp.test(r.service)||n.regexp.test(JSON.stringify(i)))};return n.highlightOnly?e.map((function(e){return t(e)?(0,i.Z)((0,r.Z)({},e),{highlighted:!0}):e})):e.filter(t)}(e(a),e(l))})),u=(0,o.cn)(null,(function(e,n){n(a,[])})),s=(0,o.cn)(!1)},62093:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(2272),i=t(9970),o=t(8189),a=t(47236),l=t(94370),c=t(50959),u=t(66261);function s(){var e=(0,l.useRouter)(),n=(0,o.Z)().container,t=(0,r.Z)((0,a.KO)(u.a0),2),s=t[0],d=t[1],f=(0,a.b9)(u.Th);(0,c.useEffect)((function(){e.query.debug&&d(!0)}),[d,e.query.debug]),(0,c.useEffect)((function(){if(s)return n.client().onDebugLog((function(e){if("log"===e.type){var t;if(e.log.channel)if(t={name:e.log.channel.name,service:null},"string"===typeof e.log.channel.service)t.service=e.log.channel.service;else if(e.log.channel.service){var r=n.getContext();r&&(t.service=e.log.channel.service(r))}f((function(n){return(0,i.Z)(n).concat([{index:n[n.length-1]?n[n.length-1].index+1:0,channel:t,dir:e.log.direction,cmd:e.log.cmd,timestamp:window.performance.now()}])}))}}))}),[s,f,n])}},89166:function(e,n,t){t.d(n,{L:function(){return _},g:function(){return B}});var r=t(57389),i=t(72006),o=t(4405),a=t(2272),l=t(4541),c=t(50959),u=t(7579),s=t(77542),d=t(72402),f=t(3668),p=t(42735),h=t(22167),v=t(55544),m=t(25776),g=t(7395),y=t(66466),Z=t(84404),b=t(97774),w=t(99190),x=t(75149),C=t(62907),k=t(394),S=t(51609),T=t(4574),E=t(24403),R=t(75916),I=t(27662),G=t(52662),D=t(81007);var _=function(){var e,n=function(){var e=(0,c.useState)(null),n=e[0],t=e[1],r=(0,s.R3)();return(0,c.useEffect)((function(){r!==n&&null!=r&&t(r)}),[r,n]),n}(),t=(0,d.Z)(n||""),r=(0,u.H)(),b=(0,a.Z)((0,I.Z)(!0),2),x=b[0],C=b[1],k=(0,c.useState)(""),S=k[0],E=k[1],R=(0,c.useState)((function(){return[]})),D=R[0],_=R[1],B=(0,a.Z)((0,I.Z)(!0),2),U=B[0],N=B[1],L=(0,a.Z)((0,I.Z)(!0),2),X=L[0],M=L[1],O=(0,c.useCallback)((function(e){_((function(n){return[e].concat(n)}))}),[]),F=(0,c.useCallback)((function(e,n){_((function(t){return t.map((function(t){return t.id===e?n(t):t}))}))}),[]),W=(0,c.useCallback)((function(){_([])}),[]),H=null===t||void 0===t?void 0:t.isOpen(n||""),z=(0,c.useCallback)((function(){O({canceled:!1,notification:{method:"probe",params:{filePath:n,state:null===t||void 0===t?void 0:t.getServerState(),capabilities:null===t||void 0===t?void 0:t.getServerCapabilities(),diagnostics:H?null===t||void 0===t?void 0:t.getDiagnostics(n||""):[],isOpen:H,isSupportedFile:null===t||void 0===t?void 0:t.isSupportedFile(n||"")}},requestTime:new Date,type:"probe"})}),[O,t,n,H]),V=(0,c.useMemo)((function(){var e=S.split(",").map((function(e){return e.trim()})),n=D;return U||(n=n.filter((function(e){return null==e.notification}))),X||(n=n.filter((function(e){return null==e.request}))),S&&(n=n.filter((function(n){return e.some((function(e){var t;return null===(t=n.request||n.notification)||void 0===t?void 0:t.method.toLowerCase().includes(e.toLowerCase())}))}))),n}),[D,U,X,S]);return(0,c.useEffect)((function(){return(0,G.uf)([null===t||void 0===t?void 0:t.onRequest((function(e){x&&O({id:e.id,canceled:!1,request:e.data,requestTime:new Date})})),null===t||void 0===t?void 0:t.onResponse((function(e){x&&F(e.id,(function(n){return(0,i.Z)((0,o.Z)((0,i.Z)({},n),{responseTime:new Date}),void 0!==e.result?{response:e.result}:{error:e.error})}))})),null===t||void 0===t?void 0:t.onCancelRequest((function(e){x&&F(e,(function(e){return(0,o.Z)((0,i.Z)({},e),{canceled:!0})}))})),null===t||void 0===t?void 0:t.onDiagnostics((function(e){x&&O({canceled:!1,notification:{method:"textDocument/publishDiagnostics",params:e},requestTime:new Date,type:"diagnostics"})})),null===t||void 0===t?void 0:t.onServerStateChange((function(e){x&&O({canceled:!1,notification:{method:"state",params:{serverState:e}},requestTime:new Date,type:"state"})})),null===t||void 0===t?void 0:t.onServerCapabilitiesChange((function(e){x&&O({canceled:!1,notification:{method:"capabilities",params:{serverCapabilities:e}},requestTime:new Date,type:"capabilities"})})),null===t||void 0===t?void 0:t.onSendNotification((function(e){x&&O({canceled:!1,notification:e,requestTime:new Date})}))])}),[t,O,F,x]),(0,l.BX)(m.G,{css:[h.l0.flex.column],children:[(0,l.BX)(m.G,{css:[h.l0.flex.row,h.l0.align.center,h.l0.m(4),h.l0.position.sticky,h.l0.top(0),h.l0.backgroundColor.backgroundDefault,h.l0.zIndex(1)],children:[(0,l.tZ)(v.xv,{children:t?(0,l.BX)(l.HY,{children:[(0,l.tZ)(A,{})," logs for ",(0,l.tZ)("code",{children:n})]}):"No LSP client available"}),(0,l.tZ)(f.h,{alt:"Probe LSP",onClick:z,children:(0,l.tZ)(w.Z,{})}),(0,l.tZ)(m.G,{css:h.l0.flex.grow(1)}),(0,l.tZ)(Z.Z,{id:"toggleIsLogging",isOn:x,onChange:C})," "]}),(0,l.BX)(m.G,{css:[h.l0.rowWithGap(8),h.l0.m(4),h.l0.mb(8)],children:[(0,l.BX)(m.G,{css:h.l0.rowWithGap(4),children:[(0,l.tZ)(T.Z,{}),(0,l.tZ)(v.xv,{children:"Show"})]}),(0,l.BX)(m.G,{css:h.l0.rowWithGap(4),children:[(0,l.tZ)(y.X,{id:r("showNotifications"),checked:U,onChange:N}),(0,l.tZ)("label",{htmlFor:r("showNotifications"),children:" Notifications"})]}),(0,l.BX)(m.G,{css:h.l0.rowWithGap(4),children:[(0,l.tZ)(y.X,{id:r("showRequests"),checked:X,onChange:M}),(0,l.tZ)("label",{htmlFor:r("showRequests"),children:" Requests"})]}),(0,l.tZ)(m.G,{css:h.l0.flex.growAndShrink(1)}),(0,l.tZ)(m.G,{css:h.l0.rowWithGap(4),children:(0,l.tZ)(g.Z,{onClick:W})})]}),(0,l.tZ)(m.G,{css:h.l0.rowWithGap(4),children:(0,l.tZ)(p.II,{id:r("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return E(e.target.value)},value:S})}),(0,l.BX)(m.G,{css:[h.l0.flex.grow(1),h.l0.flex.column,h.l0.overflow("auto")],children:[V.map((function(n){return(0,l.tZ)(P,{log:n},null!==(e=n.id)&&void 0!==e?e:n.requestTime.valueOf())})),!V.length&&(0,l.tZ)(m.G,{css:h.l0.m(4),children:"\ud83d\ude14 No logs yet..."})]})]})},P=c.memo((function(e){var n,t=e.log,r=t.requestTime,i=t.responseTime,o=t.request,c=t.response,u=t.notification,s=t.id,d=(0,a.Z)((0,I.Z)(!0),2),f=d[0],p=d[1];return(0,l.BX)(m.G,{css:[h.l0.my(4),h.l0.mx(4)],children:[(0,l.BX)(m.G,{role:"button",onClick:p,onKeyDown:p,tabIndex:0,css:[h.l0.flex.row,h.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(m.G,{css:[h.l0.flex.grow(1),h.l0.rowWithGap(2)],children:[(0,l.tZ)(v.xv,{className:"lspLog-emoji",children:U(t)}),(0,l.BX)(v.xv,{className:"lspLog-requestMethod",children:[(0,l.tZ)("code",{children:null===(n=o||u)||void 0===n?void 0:n.method}),null!=s&&(0,l.BX)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",s]})]})]}),(0,l.tZ)(m.G,{css:{opacity:.5},children:null!=i&&(0,l.BX)(v.xv,{css:h.l0.fontSize(13),children:[i.valueOf()-r.valueOf()," ms"]})})]}),!f&&(0,l.BX)(l.HY,{children:[void 0!==o&&(0,l.tZ)(B,{name:"request.params",src:o.params}),void 0!==u&&(0,l.tZ)(B,{name:"notification.params",src:u.params}),void 0!==c&&(0,l.tZ)(B,{name:"response",src:c})]})]})})),B=(0,c.memo)((function(e){var n=e.name,t=e.src;return(0,l.tZ)(m.G,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,l.tZ)(D.Z,{json:(0,r.Z)({},n,t)})})})),A=function(){return(0,l.tZ)(v.xv,{css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(h.TV.redDimmer," 2px 2px")},children:"LSP"})};function U(e){var n=e.type,t=e.canceled,r=e.response,i=e.notification;return"state"===n?(0,l.tZ)(k.Z,{}):"diagnostics"===n?(0,l.tZ)(x.Z,{}):"capabilities"===n?(0,l.tZ)(C.Z,{}):"probe"===n?(0,l.tZ)(w.Z,{}):t?(0,l.tZ)(E.Z,{}):i?(0,l.tZ)(S.Z,{}):void 0!==r?(0,l.tZ)(R.Z,{}):(0,l.tZ)(b.Z,{})}},27662:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(50959);function i(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,r.useState)(e),t=n[0],i=n[1],o=(0,r.useCallback)((function(){return i((function(e){return!e}))}),[]);return[t,o]}},60470:function(e,n,t){t.d(n,{AA:function(){return k},CH:function(){return y},Gg:function(){return m},Ne:function(){return T},pV:function(){return x},vk:function(){return b}});var r=t(72006),i=t(43119),o=t(71440),a=t(69383),l=t(67216),c=t(59187);function u(){var e=(0,i.Z)(["\n  fragment AutograderTest on ReplTemplateTest {\n    id\n    name\n    input\n    output\n    name\n    type\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query Autograder($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        currentUserPermissions {\n          writeTests\n        }\n        template {\n          id\n        }\n        ioTests {\n          id\n          ...AutograderTest\n        }\n        unitTests {\n          meta {\n            id\n            ...UnitTestsReplUnitTestMeta\n          }\n          tests {\n            id\n            ...UnitTestsReplUnitTest\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                status\n              }\n              ... on UserError {\n                message\n              }\n            }\n          }\n        }\n        isProject\n        isProjectFork\n        owner {\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation SaveIOTestResults(\n    $teamId: Int!\n    $replId: String!\n    $results: [IOTestResultInput!]!\n  ) {\n    saveIOTestResults(teamId: $teamId, replId: $replId, results: $results) {\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation CreateAutograderTest($input: CreateTemplateTestInput!) {\n    createTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation UpdateAutograderTest($input: UpdateTemplateTestInput!) {\n    updateTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation DeleteAutograderTest($testId: Int!) {\n    deleteTemplateTest(testId: $testId) {\n      ... on ReplTemplate {\n        id\n        tests {\n          id\n          ...AutograderTest\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var v={},m=(0,o.Ps)(u()),g=(0,o.Ps)(s(),m,a.aA,a.Rb);function y(e){var n=(0,r.Z)({},v,e);return l.a(g,n)}var Z=(0,o.Ps)(d());function b(e){var n=(0,r.Z)({},v,e);return c.D(Z,n)}var w=(0,o.Ps)(f(),m);function x(e){var n=(0,r.Z)({},v,e);return c.D(w,n)}var C=(0,o.Ps)(p(),m);function k(e){var n=(0,r.Z)({},v,e);return c.D(C,n)}var S=(0,o.Ps)(h(),m);function T(e){var n=(0,r.Z)({},v,e);return c.D(S,n)}},12824:function(e,n,t){t.d(n,{ZP:function(){return s}});var r=t(50959),i=t(73691),o=t(75030),a=t(30265),l=t(94370),c=i.tk.theme({".cm-content":{paddingBottom:"".concat(80,"px")}}),u=i.tk.theme({".cm-content":{paddingBottom:"".concat(400,"px")}});function s(e){var n=e.view,t=(0,o.Z)({view:n}),i=(0,a.Vg)((0,l.useRouter)())?c:u;r.useEffect((function(){if(n)return n.dispatch({effects:t.reconfigure(i)}),function(){n.dispatch({effects:t.reconfigure([])})}}),[n,t,i])}},21611:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(81962),i=t(50959);function o(e){var n=e.view,t=e.isLoading,o=e.autoFocus;i.useEffect((function(){o&&(n&&(t||(0,r.Z)(document.activeElement,HTMLBodyElement)&&n.focus()))}),[n,t,o])}},63934:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(50959),i=t(47843),o=t(14806),a=t(73691),l=t(75030),c=t(92079);function u(e){var n=e.view,t=function(e,n){var t=performance.now();i.kg.time(e,t-n)},u=(0,l.Z)({view:n}),s=(0,c.d)()?.01:.001;r.useEffect((function(){if(n)return n.dispatch({effects:u.reconfigure(o.Wl.highest(a.tk.domEventHandlers({keydown:function(e){if(Math.random()<s){var n=e.timeStamp;requestAnimationFrame((function(){t("editor input latency",n),"undefined"!==typeof requestIdleCallback?requestIdleCallback((function(){t("editor input latency after layout",n)})):setTimeout((function(){t("editor input latency after layout",n)}))}))}}})))}),function(){n.dispatch({effects:u.reconfigure([])})}}),[n,u,s])}},42362:function(e,n,t){t.d(n,{Z:function(){return s},l:function(){return u}});var r=t(50959),i=t(73691),o=t(14806),a=t(75030),l=t(94635),c=t(37248);function u(e){var n=e.view,t=e.event,r=e.clipboardText,i=e.filePath,a=n.state.selection,u=function(){if(!t){var e=r||"";if(a.main.empty){var i=a.main.from+e.length;n.dispatch({changes:[{from:a.main.from,insert:e}],selection:o.jT.range(i,i)})}else n.dispatch(n.state.replaceSelection(e))}};if((0,c.gK)(i))if(a.ranges.length>1)u();else if(a.main.from!==a.main.to)if(r&&(0,l.Z)(r)){t&&t.preventDefault();var s=n.state.sliceDoc(a.main.from,a.main.to),d="[".concat(s,"](").concat(r,")"),f=a.main.from+d.length;n.dispatch({changes:{from:a.main.from,to:a.main.to,insert:d},selection:o.jT.range(f,f)})}else u();else u();else u()}function s(e){var n=e.view,t=e.filePath,o=(0,a.Z)({view:n});r.useEffect((function(){if(n)return n.dispatch({effects:o.reconfigure(i.tk.domEventHandlers({paste:function(e){var r;u({filePath:t,view:n,event:e,clipboardText:null===(r=e.clipboardData)||void 0===r?void 0:r.getData("Text")})}}))}),function(){n.dispatch({effects:o.reconfigure([])})}}),[n,o,t])}},38276:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(50959),i=t(73691),o=t(14806),a=t(75030),l=t(37248),c=t(30826),u=t.n(c),s=t(91355),d=new Set,f=u()((function(){var e=!0,n=!1,t=void 0;try{for(var r,i=d[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;(0,s.j)(s.U3.WS_TYPED,{fileExt:o})}}catch(a){n=!0,t=a}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}d.clear()}),6e4);function p(e){var n=e.view,t=e.onType,c=e.filePath,u=(0,a.Z)({view:n});r.useEffect((function(){if(n&&t&&c){var e=(0,l.r6)(c)||(0,l.UO)(c);return n.dispatch({effects:u.reconfigure(i.tk.updateListener.of((function(n){n.docChanged&&(n.transactions.some((function(e){return e.annotation(o.YW.remote)}))||function(e){d.has(e)||(d.add(e),f())}(e))})))}),function(){n.dispatch({effects:u.reconfigure([])})}}}),[n,t,c,u])}},47019:function(e,n,t){t.d(n,{Mp:function(){return l},ac:function(){return a},ev:function(){return o},ov:function(){return c}});var r=t(11122),i=t(22167),o=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",zIndex:3}),a=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",fontSize:"14px",backgroundColor:i.TV.backgroundDefault}),l=(0,r.iv)({display:"flex",alignItems:"stretch",width:"100%",height:"100%","& > .cm-editor":{flex:"1 1 auto",width:"100%"}}),c=(0,r.iv)({position:"absolute",padding:"8px",height:"100%",width:"100%",overflow:"hidden",zIndex:5})},4106:function(e,n,t){t.d(n,{Rz:function(){return y},xy:function(){return b}});var r=t(57135),i=t(9970),o=t(96583),a=t(4541),l=t(99726),c=t(32079),u=t(89853),s=t(22167),d=t(25776),f=t(42858),p=t(37248),h=(0,u.X)({root:[s.l0.rowWithGap(8),s.l0.align.center,s.l0.flex.growAndShrink(1),s.l0.px(8),{userSelect:"none"}],header:[{fontSize:s.TV.fontSizeSmall,opacity:.6},s.l0.color.foregroundDimmest,s.l0.truncate],result:[s.l0.colWithGap(0)],fileName:[s.l0.truncate,s.l0.flex.row]});function v(e){var n=e.height,t=e.active,r=e.match,i=r.directory,o=r.filename;return(0,a.BX)(d.G,{css:h.root,style:{height:n},children:[(0,a.tZ)(f.Z,{path:o.text,size:16}),(0,a.BX)(d.G,{css:h.result,children:[i?(0,a.tZ)(d.G,{css:h.header,children:(0,a.tZ)(c.x,{text:i.text+"/",highlight:i.ranges,dimmed:!t})}):null,(0,a.tZ)(d.G,{css:h.fileName,children:(0,a.tZ)(c.x,{text:o.text,highlight:o.ranges,dimmed:!t})})]})]})}var m={match:l.kN,forward:!1,tiebreakers:[function(e,n,t){return t(e.item).trim().length-t(n.item).trim().length}]};function g(e){for(var n=(0,i.Z)(e.values()).sort((function(e,n){return e-n})),t=[],r=n[0],o=n[0],a=1;a<n.length;a++)n[a]===o+1?o++:(t.push({from:r,to:o+1}),r=n[a],o=n[a]);return t.push({from:r,to:o+1}),t}function y(e,n){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)((function(e,n){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,new l.Zn(n,m).find(e)];case 1:return[2,t.sent().map((function(e){return{path:e.item,score:e.score,ranges:g(e.positions)}}))]}}))}))).apply(this,arguments)}function b(e){var n=e.path,t=e.ranges,r=function(e){var n=e.ranges,t=e.path,r=(0,p.UO)(t),i=(0,p.Il)(t);if(!i)return{filename:{text:r,ranges:n.length?n:void 0}};var o=i.length,a=o+1,l=[],c=[],u=!0,s=!1,d=void 0;try{for(var f,h=n[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var v=f.value;if(v.from<o){l.push({from:v.from,to:Math.min(v.to,o)});var m=v.to-a;if(m<=0)continue;c.push({from:0,to:m})}else v.from<a||c.push({from:v.from-a,to:v.to-a})}}catch(g){s=!0,d=g}finally{try{u||null==h.return||h.return()}finally{if(s)throw d}}return{filename:{text:r,ranges:c.length?c:void 0},directory:{text:i,ranges:l.length?l:void 0}}}({path:n,ranges:null!==t&&void 0!==t?t:[]}),i=r.directory?44:32;return{height:i,content:(0,a.tZ)(v,{match:r,height:i})}}},61128:function(e,n,t){t.d(n,{i:function(){return b},w:function(){return g}});var r=t(57135),i=t(2272),o=t(96583),a=t(4541),l=(t(50959),t(31230)),c=t(40306),u=t(81974),s=t(42858),d=t(25776),f=t(55544),p=t(22167),h=t(73758),v=t(4106),m=t(70788);function g(e){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)((function(e){var n,t,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return n=e.search,t=e.paths,r=e.run,n?[4,(0,v.Rz)(n,t)]:[2,t.map((function(e){return{data:{type:"action",label:e,icon:(0,a.tZ)(s.Z,{path:e}),run:function(){return r(e)}},match:function(){return{score:1,render:(0,v.xy)({path:e})}}}}))];case 1:return[2,i.sent().map((function(e){var n=e.path,t=e.score,i=e.ranges;return{data:{type:"action",label:n,icon:(0,a.tZ)(s.Z,{path:n}),run:function(){return r(n)}},match:function(){return{score:t,render:(0,v.xy)({path:n,ranges:i})}}}}))]}}))}))).apply(this,arguments)}function Z(){return(0,a.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[(0,a.tZ)(c.Z,{}),(0,a.tZ)(f.xv,{color:"dimmest",children:"Something went wrong searching your Repl's files. Please try again."})]})}function b(e){return(0,u.fA)({type:"context",label:"Files",description:"Find a file",icon:(0,a.tZ)(l.Z,{}),keyboardShortcut:e.keyboardShortcut?e.keyboardShortcut:void 0},{match:(0,u.zf)({defaultScore:3}),commands:function(){var n=(0,r.Z)((function(n){var t,l,u,d,f,p,v,y,b,w,x,C,k,S,T,E;return(0,o.__generator)(this,(function(R){switch(R.label){case 0:return t=e.fs,l=e.shouldHideFile,n.search||n.active&&!e.lazyLoad?[4,Promise.resolve(e.getRecentFiles())]:[2,[]];case 1:return u=R.sent(),d=[],n.search||n.active?[4,t.listFiles()]:[3,3];case 2:if((f=R.sent()).error)return[2,[{data:{type:"error",label:f.error,icon:(0,a.tZ)(c.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(Z,{})}}}}]];if(!f.files)throw new Error("Expected files");p=!0,v=!1,y=void 0;try{for(b=f.files[Symbol.iterator]();!(p=(w=b.next()).done);p=!0)x=w.value,l(x)||u.includes(x)||d.push(x)}catch(I){v=!0,y=I}finally{try{p||null==b.return||b.return()}finally{if(v)throw y}}R.label=3;case 3:return C=[],[4,Promise.all([g({search:n.search,paths:u,run:function(n){e.openFile({path:n})}}),g({search:n.search,paths:d,run:function(n){e.openFile({path:n})}})])];case 4:return k=i.Z.apply(void 0,[R.sent(),2]),S=k[0],T=k[1],S.length&&C.push({data:{type:"context",label:"Recent",icon:(0,a.tZ)(m.Z,{})},commands:function(){return S}}),T.length&&C.push({data:{type:"group",key:"files"},commands:function(){return T}}),0===T.length&&0===S.length&&n.active&&(E=n.search,C.push({data:{label:E,description:"Create a new file",icon:(0,a.tZ)(s.Z,{path:E}),type:"action",run:(0,r.Z)((function(){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,t.writeFile(E,h.Z.from(""))];case 1:return n.sent().error?[2,{type:"error",message:'Could not create "'+E+'"'}]:(e.openFile({path:E}),[2])}}))}))},match:function(){return{score:1}}})),[2,C]}}))}));return function(e){return n.apply(this,arguments)}}()})}},81974:function(e,n,t){t.d(n,{Nv:function(){return l},fA:function(){return i},pl:function(){return a},zf:function(){return o}});var r=t(80722);function i(e,n){var t=n.commands;return{data:e,match:n.match,commands:t}}function o(e){var n=e.defaultScore,t=void 0===n?1:n;return function(e){var n=e.search,i=e.data,o=e.active;if("group"===i.type)return null;if(!n&&o)return{score:t};if(!n)return{score:t};var a=r.Z.match(n,i.label);return a?{score:a.score,render:{ranges:a.ranges}}:null}}var a=o({defaultScore:1});function l(e){return e.map((function(e){return"group"===e.data.type?e.data.key:e.data.key||e.data.label})).join(":")}},64641:function(e,n,t){t.d(n,{F:function(){return A},q:function(){return B}});var r=t(57135),i=t(77637),o=t(2272),a=t(96583),l=t(4541),c=(t(50959),t(80722)),u=t(86763),s=t.n(u),d=t(81974),f=t(87245),p=t(47274),h=t(40306),v=t(9970),m=t(88254),g=t(95269),y=100,Z="signal: broken pipe",b=["exit status 1",Z];function w(){return(w=(0,r.Z)((function(e){var n,t,r,i,l,c,u,s,d,f,p,h,w,x,C,k,S,T,E,R,I,G,D,_,P;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=e.query,t=e.container,[4,(r=t).exec.apply(r,["ag"].concat((0,v.Z)(g.h.map((function(e){return"--ignore-dir=".concat(e)}))),["--noaffinity","--context=0","--workers=1","--literal","--ackmate","--pager","head -".concat(300),"--",n]))];case 1:if(i=a.sent(),l=i.output,c=i.error,c&&!b.includes(c))return m.Tb(new Error("Search command failed with error: ".concat(c))),[2,{error:c,results:null,isPartialResult:!1}];if(!l)return[2,{error:null,results:{},isPartialResult:!1}];u=l.split("\n"),s={},d="",f=0,p=c===Z,h=!0,w=!1,x=void 0;try{for(C=u[Symbol.iterator]();!(h=(k=C.next()).done);h=!0)if(S=k.value)if(S.startsWith(":"))d=S.slice(1),s[d]=[];else{if(f>=y){p=!0;break}T=S.indexOf(";"),E=parseInt(S.slice(0,T),10),R=S.slice(T+1),I=R.indexOf(":"),G=R.slice(0,I).split(","),D=G.map((function(e){var n=(0,o.Z)(e.split(" "),2),t=n[0],r=n[1];return{column:parseInt(t,10),length:parseInt(r,10)}})),_=R.slice(I+1),P=_.length>151?_.substring(0,149)+"\u2026":_,f++,s[d].push({content:P,lineNumber:E,matches:D})}}catch(B){w=!0,x=B}finally{try{h||null==C.return||C.return()}finally{if(w)throw x}}return[2,{error:null,results:s,isPartialResult:p}]}}))}))).apply(this,arguments)}var x=t(22167),C=t(25776),k=t(55544),S=t(89853),T=t(42858),E=t(47308),R=t(21396),I=(0,S.X)({root:[x.l0.colWithGap(4),x.l0.align.start,x.l0.flex.growAndShrink(1),x.l0.p(8)],header:[x.l0.rowWithGap(4)],singleLine:[{whiteSpace:"nowrap",fontFamily:x.TV.fontFamilyCode},x.l0.truncate,x.l0.color.foregroundDimmest]});function G(e){var n=e.path,t=e.line;return(0,l.BX)(C.G,{css:I.root,children:[(0,l.BX)(C.G,{css:I.header,children:[(0,l.tZ)(T.Z,{path:n,size:12}),(0,l.BX)(k.xv,{variant:"small",color:"dimmest",children:[n.replace(/^\.\//,""),":",t.lineNumber]})]}),(0,l.tZ)(C.G,{css:I.singleLine,children:(0,l.tZ)(f.xK,{source:t.content,matches:t.matches})})]})}function D(){return(0,l.BX)(C.G,{css:[x.l0.px(8),x.l0.rowWithGap(8),x.l0.align.center],children:[(0,l.tZ)(h.Z,{}),(0,l.tZ)(k.xv,{color:"dimmest",children:"Something went wrong searching your Repl's contents. Please try again."})]})}function _(){return(0,l.BX)(C.G,{css:[x.l0.rowWithGap(8),x.l0.p(8),x.l0.align.center],children:[(0,l.tZ)(h.Z,{}),(0,l.tZ)(k.xv,{color:"dimmest",children:"Displaying only part of the results, try being more specific with your search."})]})}function P(){return(0,l.tZ)(C.G,{css:[x.l0.rowWithGap(8),x.l0.p(8),x.l0.align.center],children:(0,l.tZ)(k.xv,{color:"dimmest",children:"Nothing came up searching your Repl's content."})})}var B=(0,E.l2)({cmdOrCtrl:!0,shift:!0,key:"f"});function A(e){var n,t=e.flagSearchReplaceCLUI,u=void 0!==t&&t,f=(0,i.Z)(e,["flagSearchReplaceCLUI"]),v=s()((function(e,n,t){(function(e){return w.apply(this,arguments)})(e).then(n).catch(t)}),200),m=(0,R.e)({container:f.container});return(0,d.fA)({type:"context",description:"Search through your files",label:"Search",icon:(0,l.tZ)(p.Z,{}),keyboardShortcut:f.keyboardShortcut?B:void 0},{match:(0,d.zf)({defaultScore:2}),commands:function(){var e=(0,r.Z)((function(e){var t,r,i,s,d,p,g,y,Z,b,w,x;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return e.search?!e.active&&f.activeOnly?[2,[]]:(t=Math.random(),n=t,[4,u?m({query:e.search}):new Promise((function(n,t){v({query:e.search,container:f.container},n,t)}))]):[2,[]];case 1:if(r=a.sent(),i=r.results,s=r.error,d=r.isPartialResult,t!==n)return[2,[]];if(null!==s)return e.active?[2,[{data:{type:"error",label:"error",icon:(0,l.tZ)(h.Z,{})},match:function(){return{score:1,render:{content:(0,l.tZ)(D,{})}}}}]]:[2,[]];p=[],g=!0,y=!1,Z=void 0;try{for(b=function(){var n=(0,o.Z)(x.value,2),t=n[0];n[1].forEach((function(n){var r=n.matches[0].column;p.push({match:function(){var r=c.Z.match(e.search,n.content);return{score:(null===r||void 0===r?void 0:r.score)||1,render:{height:60,content:(0,l.tZ)(G,{path:t,line:n})}}},data:{type:"action",label:t,icon:(0,l.tZ)(T.Z,{path:t}),key:[t,n.lineNumber,r].join(":"),run:function(){f.openFile({path:t,line:n.lineNumber,col:r})}}})}))},w=Object.entries(i)[Symbol.iterator]();!(g=(x=w.next()).done);g=!0)b()}catch(k){y=!0,Z=k}finally{try{g||null==w.return||w.return()}finally{if(y)throw Z}}if(0===p.length&&e.active)return[2,[{data:{type:"output",label:"",icon:(0,l.tZ)(C.G,{})},match:function(){return{score:1,render:{content:(0,l.tZ)(P,{})}}}}]];if(e.active){if(0===p.length)return[2,[{data:{type:"output",label:"",icon:(0,l.tZ)(C.G,{})},match:function(){return{score:1,render:{content:(0,l.tZ)(P,{})}}}}]];d&&p.push({data:{type:"error",label:"error",icon:(0,l.tZ)(h.Z,{})},match:function(){return{score:1/0,render:{content:(0,l.tZ)(_,{})}}}})}return[2,p]}}))}));return function(n){return e.apply(this,arguments)}}()})}},15456:function(e,n,t){t.d(n,{Z:function(){return Ce}});var r=t(57135),i=t(72006),o=t(4405),a=t(2272),l=t(96583),c=t(4541),u=t(50959),s=t(85068),d=t(32343),f=t(95980),p=t.n(f),h=function(e){var n=(0,d.Z)({},e);return(0,c.BX)(c.HY,{children:[(0,c.tZ)(p(),{id:"fcfe85a13ecbf46b",children:".one.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:0s;-moz-animation-delay:0s;-o-animation-delay:0s;animation-delay:0s}.two.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.1s;-moz-animation-delay:.1s;-o-animation-delay:.1s;animation-delay:.1s}.three.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}@-webkit-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-moz-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-o-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }"}),(0,c.tZ)("span",(0,o.Z)((0,i.Z)({},n),{className:"jsx-fcfe85a13ecbf46b "+(n&&null!=n.className&&n.className||"one"),children:"."})),(0,c.tZ)("span",(0,o.Z)((0,i.Z)({},n),{className:"jsx-fcfe85a13ecbf46b "+(n&&null!=n.className&&n.className||"two"),children:"."})),(0,c.tZ)("span",(0,o.Z)((0,i.Z)({},n),{className:"jsx-fcfe85a13ecbf46b "+(n&&null!=n.className&&n.className||"three"),children:"."}))]})},v=t(42735),m=t(55544),g=t(98260),y=t(43119),Z=t(71440),b=t(67216),w=t(59187);function x(){var e=(0,y.Z)(["\n  query ConfigReplLanguage($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n      }\n    }\n  }\n"]);return x=function(){return e},e}function C(){var e=(0,y.Z)(["\n  mutation ConfigUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n      }\n    }\n  }\n"]);return C=function(){return e},e}var k={},S=(0,Z.Ps)(x());var T=(0,Z.Ps)(C());var E=t(8189),R=t(35021),I=t(26430),G=t(22167),D=t(38231),_=t(25776),P=t(30249),B=t(40306),A=t(43855),U=t(30241),N=t(54907),L=t(33229),X=t(98689),M=t(63764),O=t(47274),F=t(80722),W=t(21371);function H(e){var n,t=e.options,r=e.initialSelectedOption,l=e.inputRef,c=e.setInputValue,s=(0,a.Z)(u.useState(""),2),d=s[0],f=s[1],p=(n={options:t,filter:d},u.useMemo((function(){return n.filter?F.Z.filter(n.filter.toLowerCase(),n.options).map((function(e){return e.original})):n.options}),[n.options,n.filter])),h=(0,W.Kb)({items:p,initialHighlightedIndex:0,initialSelectedItem:r,stateReducer:function(e,n){var t,r,a=n.type,u=n.changes;(a===W.Kb.stateChangeTypes.ItemClick||a===W.Kb.stateChangeTypes.InputKeyDownEnter&&u.selectedItem)&&(null===(t=l.current)||void 0===t||t.blur());return a!==W.Kb.stateChangeTypes.InputBlur||u.selectedItem?a===W.Kb.stateChangeTypes.InputBlur&&u.selectedItem?(c(null!==(r=u.selectedItem)&&void 0!==r?r:""),u):u:(0,o.Z)((0,i.Z)({},u),{isOpen:!0})}});return{filteredOptions:p,combobox:h,setFilter:f,filter:d}}var z=t(62223),V=t(11122),j=t(33022),q=t(53993),$=(0,V.iv)([G.l0.py(8),G.l0.pl(8),G.l0.pr(32),{color:"inherit",outline:"0 none",border:"1px solid",fontSize:"inherit",lineHeight:G.TV.space16,display:"block",width:"100%","::placeholder, :disabled":{color:G.TV.foregroundDimmer,borderColor:"transparent"},cursor:"text"}]),Y=(0,V.iv)([G.l0.reset.button,D.gU.listItem,G.l0.borderRadius(8),G.l0.center,{width:24,height:24}]),K=_.K.button;function Q(e){var n=e.id,t=e.onSelect,r=e.onInit,l=e.options,s=e.initialSelectedOption,d=e.placeholderText,f=e.autoFocus,p=e.disabled,h=u.useRef(null),g=(0,a.Z)(u.useState(null!==s&&void 0!==s?s:""),2),y=g[0],Z=g[1],b=H({options:l,initialSelectedOption:s,inputRef:h,setInputValue:Z}),w=b.filteredOptions,x=b.filter,C=b.combobox,k=b.setFilter,S=(0,X.Z)(t),T=(0,X.Z)(r);return u.useEffect((function(){s&&(T.current(s),Z(s),k(""))}),[s]),(0,M.Z)((function(){var e;C.selectedItem&&(null===(e=h.current)||void 0===e||e.blur(),S.current(C.selectedItem),Z(C.selectedItem),k(""))}),[C.selectedItem,S]),u.useEffect((function(){s&&(C.selectItem(s),Z(s),k(""))}),[s]),(0,c.BX)(_.G,{children:[(0,c.tZ)("div",(0,o.Z)((0,i.Z)({},C.getComboboxProps()),{children:(0,c.BX)(_.G,{css:[G.l0.flex.row,{position:"relative"}],children:[(0,c.tZ)(_.G,{css:[G.l0.flex.growAndShrink(1)],children:(0,c.tZ)(v.II,(0,o.Z)((0,i.Z)({},C.getInputProps({id:n,spellCheck:!1,autoFocus:f,onChange:function(e){k(e.currentTarget.value.toLowerCase()),Z(e.currentTarget.value)},ref:h,onFocus:function(e){C.openMenu(),e.currentTarget.select()}})),{value:y,placeholder:null!==s&&void 0!==s?s:d,css:[$],disabled:p,dataCy:"import-config-entrypoint-input"}))}),p?null:(0,c.tZ)(_.G,{css:[{position:"absolute",top:0,right:0,height:"100%"},G.l0.center],children:(0,c.tZ)(K,(0,o.Z)((0,i.Z)({},C.getToggleButtonProps()),{css:Y,type:"button",children:C.inputValue&&!C.isOpen?(0,c.tZ)(z.Z,{}):(0,c.tZ)(O.Z,{})}))})]})})),(0,c.BX)("div",(0,o.Z)((0,i.Z)({},C.getMenuProps()),{css:{position:"relative"},children:[C.isOpen&&w.length?(0,c.tZ)(j.Z,{children:(0,c.tZ)("ul",{css:[G.l0.pt(4),G.l0.pb(8)],children:w.map((function(e,n){return(0,c.tZ)("li",(0,o.Z)((0,i.Z)({},C.getItemProps({item:e,index:n})),{children:(0,c.tZ)(q.Z,(0,o.Z)((0,i.Z)({},J(e)),{filter:x,selected:C.selectedItem===e,highlighted:C.highlightedIndex===n}))}),e.toLowerCase())}))})}):null,x&&!w.length&&C.isOpen?(0,c.tZ)(j.Z,{children:(0,c.tZ)(_.G,{css:[G.l0.p(16),G.l0.colWithGap(4)],children:(0,c.BX)(m.xv,{color:"dimmer",children:['No results for "',x,'"']})})}):null]}))]})}function J(e){return{title:e,key:e.toLowerCase()}}var ee,ne=t(37676),te=t(37248);!function(e){e.Unknown="UNKNOWN",e.Npm="NPM",e.Django="DJANGO",e.Rails="RAILS",e.DotNet="DOTNET",e.Cargo="CARGO",e.Make="MAKE",e.RegularRun="REGULAR_RUN"}(ee||(ee={}));var re=new RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i"),ie=new RegExp("((node_modules)|(venv)|(bower_components)|(vendor)|(build)|(dist)|(target)|(\\.git)|(\\.vscode)|(\\.idea)).+$","i");function oe(e){var n=e.initRunCommand,t=e.isCompiled,r=e.allFiles,i=new Set(r);return i.has("Makefile")||i.has("makefile")?ee.Make:i.has("package.json")?ee.Npm:i.has("Cargo.toml")?ee.Cargo:t?ee.Unknown:i.has("config/application.rb")?ee.Rails:function(e,n){return e.some((function(e){return(0,te.r6)(e)===n}))}(r,"csproj")?ee.DotNet:i.has("manage.py")?ee.Django:re.test(n)?ee.RegularRun:ee.Unknown}function ae(e,n){var t=n.initRunCommand,r=n.allFiles;switch(e){case ee.Npm:return"npm run start";case ee.RegularRun:var i=function(e){var n;return null!==(n=e.filter((function(e){return!ie.test(e)})).find((function(e){return re.test(e)})))&&void 0!==n?n:null}(r);return null==i?null:t.replace(re,i);case ee.Django:return"python3 manage.py runserver 0.0.0.0:3000";case ee.Rails:return"bundle exec rails server --binding=0.0.0.0";case ee.DotNet:return"dotnet run";case ee.Cargo:return"cargo run";case ee.Make:case ee.Unknown:default:return null}}function le(e){switch(e){case ee.Make:return"make";case ee.Cargo:case ee.DotNet:case ee.Npm:return"";default:return null}}function ce(e,n,t){if(0===t.length)return{projType:ee.Unknown,runCommand:null,compileCommand:null};var r={initRunCommand:e,isCompiled:n,allFiles:t},i=oe(r);return{projType:i,runCommand:ae(i,r),compileCommand:le(i)}}var ue=t(91355),se=t(57107),de=t(51042),fe=t(96642);var pe=t(35196),he=t(6601),ve=t(70515),me=t(83094),ge=t(61848),ye=t(97774);function Ze(e){var n=e.children;return(0,c.BX)(ne.T,{background:"default",css:[G.l0.borderRadius(8),{width:"100%",height:"calc(100% - var(--space-2))",backgroundColor:"var(--background-default)",overflowY:"auto",marginTop:"0px"}],children:[(0,c.tZ)(_.G,{children:(0,c.tZ)(m.xv,{variant:"subheadDefault",css:[G.l0.color.foregroundDimmest,G.l0.pl(16),G.l0.pt(16)],children:".replit"})}),(0,c.tZ)(_.G,{css:[G.l0.p(16),G.l0.justify.center,G.l0.align.center,{flex:"1 1 auto"}],children:n})]})}function be(e){var n,t=Boolean(e.hasInterpreter),d=e.initialRun,f=null!==(n=e.initialCompile)&&void 0!==n?n:"",p=e.isFrameworkRecommended,h=!!e.projType&&e.projType===ee.Rails,y=e.isApplyingConfig,Z=(0,a.Z)(u.useState("Unknown"===s.Z.get(e.initialLanguage).displayName?"bash":e.initialLanguage),2),b=Z[0],w=(Z[1],(0,P.Y)(e.initialRun,(function(e){if(!e)return{message:"Add a run command"}}))),x=(0,a.Z)(u.useState(e.initialCompile),2),C=x[0],k=x[1];u.useEffect((function(){w.setValue(d)}),[d]),u.useEffect((function(){k(null!==f&&void 0!==f?f:"")}),[f]);var S=(0,P.Y)("",(function(e){if(!e)return{message:"Choose an entry point file"}})),T=(0,a.Z)(u.useState(Boolean(t&&!p)),2),U=T[0],X=T[1];u.useEffect((function(){X(Boolean(t&&!p))}),[t,p]);var M=_.K.a,O=(0,a.Z)(u.useState([]),2),F=O[0],W=O[1],H=(0,L.Z)(),z=function(){var e=(0,E.Z)(),n=e.fs,t=e.dotReplit,i=(0,pe.P)(t),o=(0,L.Z)(),c=(0,a.Z)(u.useState(null),2),s=c[0],d=c[1];return u.useEffect((function(){var e=function(){var e=(0,r.Z)((function(){var e,t,r,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return i?[4,n.listFiles()]:[2];case 1:return e=l.sent(),o.current?e.error||!e.files?(d([]),[2]):[4,n.readFile(A.l)]:[2];case 2:return t=l.sent(),r=e.files,a=ve.uP.concat(ve.nh),d(r.filter((function(e){return(t.error===he.Df.NotFound||!i.some((function(n){return function(e){var n=e.split("/");if(1===n.length)return n;for(var t=[],r=0;r<n.length;r++)t.push(n.slice(0,r+1).join("/"));return t}(e).some((function(e){return null!=e.match(n)}))})))&&!a.includes(e)}))),[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[i,n,o]),s}();return u.useEffect((function(){z&&H.current&&W(z)}),[H,z]),(0,c.BX)("form",{onSubmit:function(n){n.preventDefault(),e.setIsApplyingConfig(!0),w.value||U?e.onSubmit({run:w.value,compile:null!==C&&void 0!==C?C:"",entry:S.value,deleteInterp:!U,onDone:e.closeConfigPane,runChanged:w.value!==d,compileChanged:C!==f,projType:e.projType}):w.validate()},css:[G.l0.maxWidth(400),{width:"100%"}],children:[(0,c.BX)(_.G,{css:[G.l0.colWithGap(8)],children:[e.hasProcfile?(0,c.tZ)(_.G,{css:[G.l0.colWithGap(8)],children:(0,c.BX)(m.xv,{variant:"small",multiline:!0,css:[G.l0.mb(24)],children:["Looks like you came from Heroku!",(0,c.tZ)(M,{target:"_blank",href:"https://docs.replit.com/tutorials/import-heroku",rel:"noopener noreferrer",children:"Read more about Replit and Heroku here."})]})}):null,t?(0,c.tZ)(_.G,{css:[G.l0.pb(16)],children:(0,c.BX)(N.hE,{disabled:y,name:"interpreterView",value:U.toString(),row:!0,onChange:function(){return X((function(e){return!e}))},stretch:!0,primary:!0,children:[(0,c.tZ)(N.rK,{id:"interpreterFalse",value:"false",text:"Use run command"}),(0,c.tZ)(N.rK,{id:"interpreterTrue",value:"true",text:"Use default interpreter"})]})}):null,(0,c.BX)(_.G,{css:[G.l0.height(e.initialCompile?210:170),G.l0.colWithGap(8)],children:[U?null:(0,c.BX)(_.G,{css:[G.l0.maxWidth(400),G.l0.colWithGap(8)],children:[e.initialCompile?(0,c.BX)(_.G,{css:[G.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:"compile-sel",children:"Configure the Compile Command"}),(0,c.tZ)(m.xv,{multiline:!0,variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,c.tZ)(v.II,{disabled:y,id:"compile-sel",type:"text",value:C,placeholder:"Enter a command to compile the program",onChange:function(e){k(e.currentTarget.value)},css:{"&:disabled":{color:G.TV.foregroundDimmer}}})]}):null,(0,c.tZ)("label",{htmlFor:"run-sel",css:[G.l0.mt(4)],children:"Configure the Run Command"}),(0,c.tZ)(v.II,{disabled:y,id:"run-sel",type:"text",value:w.value,placeholder:"Enter a command to run the program",onChange:function(e){w.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:G.TV.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),h?(0,c.BX)(m.xv,{multiline:!0,variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,c.BX)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/misc/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replit\u2019s features."]}):null,w.error||!w.value?(0,c.BX)(_.G,{css:[G.l0.color.accentNegativeDefault,G.l0.rowWithGap(4),G.l0.align.center],children:[(0,c.tZ)(B.Z,{size:12}),(0,c.tZ)(_.G,{children:w.error?w.error.message:"Add a run command"})]}):null]}),U?(0,c.BX)(_.G,{css:[{maxWidth:400},G.l0.colWithGap(8)],children:[(0,c.tZ)("label",{htmlFor:"entry-sel","data-cy":"import-config-entrypoint",children:"Configure entry point"}),(0,c.tZ)(m.xv,{variant:"small",css:[G.l0.color.foregroundDimmest],multiline:!0,children:"The entry point is the file that\u2019s run by default and shown first."}),0!==F.length?(0,c.tZ)(Q,(0,o.Z)((0,i.Z)({id:"config-selector",onSelect:S.setValue,onInit:S.setValue,options:F},F.length&&Boolean(z)&&{initialSelectedOption:F[0]}),{disabled:y})):(0,c.tZ)(v.II,{disabled:y,id:"entry-sel",type:"text",value:S.value,placeholder:"Choose entry point file",onChange:function(e){S.setValue(e.currentTarget.value)},css:[D.gU.filled,{cursor:"text"}]}),S.error?(0,c.BX)(_.G,{css:[{color:"var(--accent-negative-default)"},G.l0.rowWithGap(4),G.l0.align.center],children:[(0,c.tZ)(B.Z,{size:12}),(0,c.tZ)(_.G,{children:S.error.message})]}):null]}):null,(0,c.tZ)(M,{css:[G.l0.color.accentPrimaryStronger,{fontWeight:G.TV.fontWeightMedium}],target:"_blank",href:"https://docs.replit.com/programming-ide/running-github-repositories-replit",rel:"noopener noreferrer",children:"Not sure what to do?"}),(0,c.tZ)(_.G,{css:[G.l0.flex.row,G.l0.pt(16)],children:(0,c.tZ)(g.zx,{colorway:"primary",outlined:!0,type:"submit",text:y?"Saving...":"Done",disabled:y||!U&&(Boolean(w.error)||!w.value),css:[D.gU.filledAndOutlined,{fontWeight:G.TV.fontWeightMedium,color:G.TV.accentPrimaryStronger}],dataCy:"import-config-done"})})]})]}),(0,c.tZ)(R.u,{isOpen:!1,preventClose:!0,onRequestClose:function(){},children:(0,c.tZ)(_.G,{css:[G.l0.borderRadius(16),G.l0.p(32),{backgroundColor:"var(--background-default)"}],children:(0,c.BX)(I.gC,{align:"center",spacing:1,children:[(0,c.tZ)(ye.Z,{size:32}),(0,c.BX)(m.xv,{children:["Upgrading to ",s.Z.get(b).displayName]})]})})})]})}function we(){return(0,c.BX)(_.G,{children:[(0,c.tZ)(_.G,{children:".replit looks a lil messed up :/"}),(0,c.tZ)("a",{css:[G.l0.pt(8),{fontSize:G.TV.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/programming-ide/configuring-repl",children:"View docs"})]})}function xe(){return(0,c.tZ)(_.G,{children:(0,c.BX)("p",{children:["Initializing run configuration",(0,c.tZ)(h,{style:{color:"var(--foreground-default)"}})]})})}var Ce=function(e){var n,t=(0,U.Z)(),o=(0,E.Z)(),s=o.fs,d=o.dotReplit,f=(0,a.Z)(function(e){var n=(0,i.Z)({},k,e);return w.D(T,n)}(),1)[0],p=(0,L.Z)(),h=function(e){var n=(0,i.Z)({},k,e);return b.a(S,n)}({variables:{replId:t}}),v="Repl"===(null===(n=h.data)||void 0===n?void 0:n.repl.__typename)?h.data.repl:null,m=e.useReadFile(s,A.l),g=(0,a.Z)(u.useState(!1),2),y=g[0],Z=g[1],x=(0,a.Z)(u.useState(!1),2),C=x[0],R=x[1],I=m&&!m.error?m.content.toString("utf8"):"",G=(0,a.Z)(u.useState(""),2),D=G[0],_=G[1],P=(0,a.Z)(u.useState(""),2),B=P[0],N=P[1],X=(0,a.Z)(u.useState(!1),2),M=X[0],O=X[1],F=(0,a.Z)(u.useState(ee.Unknown),2),W=F[0],H=F[1],z=(0,a.Z)(u.useState(!1),2),V=z[0],j=z[1];u.useEffect((function(){function e(){return e=(0,r.Z)((function(){var e,n,t,r,i,o,a,c,u,f,h,v,m,g,b,w;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return[4,d.getConfig()];case 1:return e=l.sent(),n=e.config,e.error?[2]:(r=(0,me.Cq)(null!==(t=n.run)&&void 0!==t?t:void 0),o=(0,me.Cq)(null!==(i=n.compile)&&void 0!==i?i:void 0),a=Boolean(n.compile),c=Boolean(n.interpreter),[4,s.listFiles()]);case 2:return u=l.sent(),p.current?(null!=u.error||null==u.files||0===u.files.length||(f=u.files,h=ce(r,a,f),v=h.projType,m=h.runCommand,g=h.compileCommand,b=y?null!==r&&void 0!==r?r:m:null!==m&&void 0!==m?m:r,w=null!==g&&void 0!==g?g:o,Z(f.includes(ge.E)),_(b),N(w),O(v!==ee.Unknown&&v!==ee.RegularRun),H(v),j(c)),[2]):[2]}}))})),e.apply(this,arguments)}I&&function(){e.apply(this,arguments)}()}),[I,p]),u.useEffect((function(){(0,ue.j)(ue.U3.NIX_GH_IMPORT_USED,{action:se.D.ImportEnded,replId:t})}),[t]);var q=(0,de.Z)();u.useEffect((function(){q(!1)}),[]);var $=function(){var e=(0,r.Z)((function(e){var n,r,i,o,a,c,u,p,h,v;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return n=e.run,r=e.compile,i=e.entry,o=e.deleteInterp,a=e.onDone,c=e.runChanged,u=e.compileChanged,p=e.projType,(0,ue.j)(ue.U3.NIX_GH_IMPORT_USED,{action:se.D.ConfigDone,interpUsed:!o,isCompiled:""!==r,runChanged:c,compileChanged:u,projType:p,replId:t}),h=function(e,n,t,r){var i=[];return r?(i.push((0,fe.xz)("interpreter")),i.push((0,fe.xz)("entrypoint")),i.push((0,fe.KQ)(e)),i.push((0,fe.X6)(e)),t?(i.push((0,fe.D3)(t)),i.push((0,fe.pi)(t))):(i.push((0,fe.xz)("compile")),i.push((0,fe.xz)("deployment/build")))):(i.push((0,fe.xz)("run")),i.push((0,fe.If)(n))),i}(n,i,r,o),v=f({variables:{input:{id:t}}}),[4,d.updateDotReplit(h)];case 1:return l.sent(),s.flush().then((function(){s.persist({skipDebounce:!0})})),[4,v];case 2:return l.sent(),a(),[2]}}))}));return function(n){return e.apply(this,arguments)}}();return v&&m?(null===m||void 0===m?void 0:m.error)?(0,c.tZ)(Ze,{children:(0,c.tZ)(we,{})}):(0,c.tZ)(Ze,{children:(0,c.tZ)(be,{initialLanguage:"",initialRun:D,initialCompile:B,hasInterpreter:V,fs:s,hasProcfile:y,isApplyingConfig:C,setIsApplyingConfig:R,onSubmit:$,isFrameworkRecommended:M,projType:W,closeConfigPane:e.closeConfigPane})}):(0,c.tZ)(Ze,{children:(0,c.tZ)(xe,{})})}},69167:function(e,n,t){var r=t(4541),i=t(50959),o=t(25776),a=t(78566),l=t(22167),c=t(75088),u=t(55544),s=function(e){var n=e.reason;return(0,r.BX)(o.G,{css:[l.l0.center,l.l0.minWidth(225),l.l0.height(225),l.l0.p(16),l.l0.color.foregroundDefault,l.l0.borderRadius(8),l.l0.backgroundColor.backgroundOverlay,l.l0.zIndex(5e5),{cursor:"not-allowed"}],children:[(0,r.tZ)(c.Z,{height:80}),(0,r.BX)(u.xv,{variant:"subheadBig",css:[l.l0.mt(32)],dataCy:"import-loading-spinner",children:[n,"..."]})]})};function d(e){var n=e.reason;return(0,r.tZ)(a.h,{children:(0,r.tZ)(o.G,{css:[l.l0.position.fixed,l.l0.flex.row,l.l0.align.center,l.l0.justify.center,l.l0.backgroundColor.backgroundOverlay,{top:0,bottom:0,left:0,right:0,zIndex:5e5,cursor:"not-allowed"}],children:(0,r.tZ)(s,{reason:null!==n&&void 0!==n?n:"Importing"})})})}n.Z=(0,i.memo)(d)},51992:function(e,n,t){var r=t(4541),i=t(65001);n.Z=function(e){var n,t=e.lang;return n=t.isVnc?"VNC deployments are not currently supported.":"html"===t.id?"HTML deployments are not currently supported but are coming soon.":"You will need to upgrade your ".concat(t.displayName," Repl to a Nix template in order to deploy."),(0,r.tZ)(i.E,{colorway:"warning",text:n})}},7885:function(e,n,t){t.d(n,{JP:function(){return i},Vj:function(){return o},y5:function(){return a}});var r=t(91355),i=function(){(0,r.j)(r.U3.RELEASE_POPOVER_VIEWED)},o=function(){(0,r.j)(r.U3.PUBLISH_SELECTED,{source:"release_popover"})},a=function(e){var n=e.context;(0,r.j)(r.U3.DEPLOYMENT_SECTION_VIEWED,{context:n})}},69940:function(e,n,t){var r,i,o;t.d(n,{ap:function(){return o},kO:function(){return i},pS:function(){return r}}),function(e){e.Ready="ready",e.Deploying="deploying",e.Loading="loading",e.Refetch="refetch"}(r||(r={})),function(e){e.Deployment="deployment",e.Domains="domains",e.History="history",e.Analytics="analytics",e.Logs="logs",e.Settings="settings"}(i||(i={})),function(e){e.SetHostingTier="set_hosting_tier",e.ManageHostingTier="manage_hosting_tier",e.SendDeploymentLifecycleCommand="send_deployment_lifecycle_command",e.ChangeView="change_view"}(o||(o={}))},46747:function(e,n,t){t.d(n,{e:function(){return h},z:function(){return g}});var r=t(72006),i=t(4405),o=t(4541),a=t(50959),l=t(54301),c=t(53674),u=t(34204),s=t(11122),d=t(38231),f=t(22167),p=t(25776),h=(0,s.iv)([d.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),v={button:(0,s.iv)([f.l0.reset.button,f.l0.p(2),f.l0.rowWithGap(4),f.l0.align.center,h]),text:(0,s.iv)({fontSize:f.TV.fontSizeSmall})},m={opacity:1};function g(e){var n=e.icon,t=e.text,s=e.innerRef,d=e.ariaProps,f=e.active,h=(0,l.U)(d,s).buttonProps,g=(0,c.XI)({}),y=g.hoverProps,Z=g.isHovered;return(0,o.BX)(p.G,(0,i.Z)((0,r.Z)({tag:"button",css:v.button,style:Z||f?m:void 0,innerRef:s},(0,u.dG)(h,y)),{children:[n?(0,a.cloneElement)(n,{size:16}):null,(0,o.tZ)(p.G,{css:v.text,children:t})]}))}},84265:function(e,n,t){t.d(n,{J:function(){return h}});var r=t(72006),i=t(4405),o=t(2272),a=t(4541),l=t(25776),c=t(37676),u=t(22167),s=t(50671),d=t(71251),f=t(11122),p={underlay:(0,f.iv)([u.l0.coverContainer,u.l0.position.fixed]),surface:(0,f.iv)([u.l0.borderRadius(8),{boxShadow:u.TV.shadow2,border:"1px solid",borderColor:u.TV.backgroundHighest}])};function h(e){var n=e.state,t=e.triggerRef,u=e.placement,f=e.children,h=(0,o.Z)((0,d.Z)(),2),v=h[0],m=h[1],g=(0,s.Sv)({placement:u,triggerRef:t,popoverRef:v,offset:8},n),y=g.popoverProps,Z=g.underlayProps;return(0,a.BX)(s.aV,{children:[(0,a.tZ)(l.G,(0,i.Z)((0,r.Z)({},Z),{css:p.underlay})),(0,a.BX)(c.T,(0,i.Z)((0,r.Z)({elevated:!0,css:p.surface,innerRef:m},y),{children:[(0,a.tZ)(s.U4,{onDismiss:n.close}),f,(0,a.tZ)(s.U4,{onDismiss:n.close})]}))]})}},58076:function(e,n,t){t.d(n,{t:function(){return E}});var r=t(4541),i=t(50959),o=t(6601),a=t(22167),l=t(25776),c=t(11122),u=t(10224),s=t(42858),d=t(37248),f=t(98143),p=t(51129),h=t(46747),v=t(84265),m=t(74330),g=t(89700),y=t(8189),Z=t(62487),b=t(89853),w=t(31518);function x(e){var n=e.node;return n.type===o.Tv.Directory?(0,r.tZ)(u.Z,{size:16}):(0,r.tZ)(s.Z,{size:16,path:n.path})}var C=(0,b.X)({root:[a.l0.maxHeight(400),{"& > div":[a.l0.maxHeight(400)]}]});function k(e){var n=e.node,t=e.openFile,o=(0,f.W)({closeOnSelect:!1}),a=(0,i.useRef)(null),l=(0,p.u4)({},o,a).menuTriggerProps,c=(0,d.Il)(n.path)||".",u=(0,d.UO)(n.path);return(0,r.BX)(r.HY,{children:[(0,r.tZ)(h.z,{text:u,icon:(0,r.tZ)(x,{node:n}),innerRef:a,ariaProps:l,active:o.isOpen}),o.isOpen?(0,r.tZ)(v.J,{state:o,triggerRef:a,placement:"bottom start",children:(0,r.tZ)(S,{openFile:t,parentPath:c,currentPath:n.path})}):null]})}function S(e){var n=(0,y.Z)().fs,t=(0,w.Z)().preferences,o=(0,Z.T)(!0),a=(0,i.useCallback)((function(e){return!o(e.filename)}),[o]),c=(0,g.pR)({fs:n,filter:a,focusedPath:e.currentPath,fontSize:t.fontSize,root:e.parentPath,manageWidth:!0,onFileSelect:function(n){var t=n.path;e.openFile(t)},readOnly:!0});return(0,r.tZ)(l.G,{css:C.root,children:(0,r.tZ)(g.s8,{store:c.store})})}var T=(0,c.iv)([a.l0.flex.row,a.l0.align.center,a.l0.height("100%"),a.l0.px(2)]),E=(0,i.memo)((function(e){var n=e.path,t=e.onFileClick,a=e.children,c=function(e){var n=e.split("/"),t=n.length;return n.map((function(e,r){return{type:r===t-1?o.Tv.File:o.Tv.Directory,path:n.slice(0,r+1).join("/")}}))}(n);return(0,r.BX)(l.G,{css:T,children:[c.map((function(e){return(0,r.BX)(i.Fragment,{children:[(0,r.tZ)(k,{node:e,openFile:t}),e.type===o.Tv.Directory?(0,r.tZ)(m.Z,{size:12}):null]},function(e){return CSS.escape(e.path)}(e))})),a||null]})}))},96009:function(e,n,t){t.d(n,{VY:function(){return U},HK:function(){return L},h4:function(){return _},Qc:function(){return B},$E:function(){return N},Mp:function(){return H}});var r=t(57135),i=t(96583),o=t(4541),a=t(22167),l=t(25776),c=t(11122),u=t(58076),s=t(50959),d=t(20866),f=t(94370),p=t.n(f),h=t(7247),v=t(81974),m=t(2884),g=t(37195),y=t(44882),Z=t(35238),b=t(76197),w=t(77542),x=t(8189),C=t(57493),k=t(37248),S=t(96324);function T(e,n){return E.apply(this,arguments)}function E(){return(E=(0,r.Z)((function(e,n){var t,r,o,a,l,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=(0,k.Il)(e),[4,n.readDir(0===t.length?S.Ql:t)];case 1:if((r=i.sent()).error)throw r.error;return o=new Set(r.children.map((function(e){return e.filename}))),a=(0,C.Z)((0,k.UO)(e),o),l=t?"".concat(t,"/").concat(a):a,[4,n.copyFile(e,l)];case 2:if((c=i.sent()).error)throw c.error;return[2,l]}}))}))).apply(this,arguments)}var R=t(34592),I=t(62510),G=t(3220),D=(0,c.iv)([a.l0.height(28),a.l0.flex.row,a.l0.align.center,{borderBottom:"1px solid ".concat(a.TV.backgroundHigher),opacity:.8,":hover":{opacity:1}}]);function _(e){return"/replEnvironmentDesktop"===p().pathname?(0,o.tZ)(l.G,{css:D,children:e.children}):null}var P=(0,c.iv)([a.l0.flex.row,a.l0.align.center,a.l0.flex.growAndShrink(1),a.l0.overflowX("auto"),a.l0.height("100%"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}]);function B(e){return(0,o.tZ)(l.G,{css:P,children:e.children})}var A=(0,c.iv)([a.l0.flex.growAndShrink(1),a.l0.position.relative]);function U(e){return(0,o.tZ)(l.G,{css:[A,e.children&&a.l0.center],children:e.children})}function N(e){return{type:(0,d.Dp)({path:e}),data:{path:e}}}function L(e){var n=e.path,t=e.performPaneOperation,r=(0,s.useCallback)((function(e){t({operation:"replace",pane:N(e)})}),[t]);return(0,o.tZ)(_,{children:(0,o.tZ)(B,{children:(0,o.tZ)(u.t,{path:n,onFileClick:r})})})}function X(e){return{match:v.pl,data:{label:"Copy file path",icon:(0,o.tZ)(R.Z,{}),type:"action",run:function(){(0,g.Z)(e)}}}}function M(e){return{match:v.pl,data:{label:"Copy link",icon:(0,o.tZ)(Z.Z,{}),type:"action",run:function(){var n=(0,y.dr)({path:e});(0,g.Z)(n)}}}}function O(e,n,t){return{match:v.pl,data:{label:"Duplicate file",icon:(0,o.tZ)(m.Z,{}),type:"action",run:function(){return(0,r.Z)((function(){var r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,T(e,n)];case 1:return r=i.sent(),[3,3];case 2:return i.sent(),[2,{type:"error",message:"Error duplicating file"}];case 3:return t(r),[2]}}))}))()}}}}function F(e,n){return{match:v.pl,data:{label:"Download",icon:(0,o.tZ)(b.Z,{}),type:"action",run:function(){return(0,r.Z)((function(){var t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.readFile(e)];case 1:return(t=r.sent()).error?[2,{type:"error",message:"Error downloading file"}]:[4,(0,I.Z)(e,t.content)];case 2:return r.sent(),[2]}}))}))()}}}}function W(e,n){return{match:v.pl,data:{label:"Delete",icon:(0,o.tZ)(G.Z,{}),type:"action",run:function(){n(e)}}}}function H(e){var n=e.path,t=e.performPaneOperation,r=(0,x.Z)(),i=(0,w._o)();return(0,h.Z)((function(){return n?[X(n),M(n),O(n,r.fs,(function(e){t({operation:"replace",pane:{type:(0,d.Dp)({path:e}),data:{path:e}}})})),F(n,r.fs),W(n,i)]:null}),[n,r.fs,t,i])}},39994:function(e,n,t){t.d(n,{T:function(){return f},c:function(){return h}});var r=t(4541),i=t(50959),o=t(8189),a=t(6601),l=t(89853),c=t(22167),u=t(65001),s=t(25776),d=t(40306);function f(e){var n=(0,o.Z)().fs,t=(0,i.useState)(null),r=t[0],a=t[1];return(0,i.useEffect)((function(){if(e){var t=n.watchTextFile(e,{onError:function(e){a(e)}});return function(){t(),a(null)}}}),[n,e]),r}var p=(0,l.X)({root:[c.l0.coverContainer,c.l0.center,c.l0.p(16)]});function h(e){var n=function(e,n){switch(e.code){case a.Df.NotFound:return'"'.concat(n,"\" doesn't exist");case a.Df.IsDirectory:return'"'.concat(n,'" is a directory');case a.Df.DiskQuotaExceeded:return"This Repl ran out of disk space";case a.Df.InvalidPath:return'"'.concat(n,'" is not allowed');default:return'An error occurred reading "'.concat(n,'"')}}(e.error,e.path);return(0,r.tZ)(s.G,{css:p.root,children:(0,r.tZ)(s.G,{children:(0,r.tZ)(u.E,{icon:(0,r.tZ)(d.Z,{}),colorway:"orange",text:n})})})}},3069:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(4541),i=(t(50959),t(37248)),o=t(55544),a=t(25776),l=t(22167),c=t(98260),u=t(54548);function s(e){var n,t=e.paths,s=e.onCancel,d=e.onConfirm;return(0,r.BX)(a.G,{css:[l.l0.colWithGap(24)],children:[(0,r.tZ)(o.h4,{level:1,variant:"headerDefault",children:t.length>1?"Overwrite files?":"Overwrite file?"}),(0,r.BX)(o.xv,{multiline:!0,children:[(n=t,(n=n.map(i.UO)).length<2?n[0]:"".concat(n.slice(0,-1).join(", ")," and ").concat(n.slice(-1)))," already"," ",t.length>1?"exist":"exists"," in the destination, are you sure you want to overwrite ",t.length>1?"them":"it","? This cannot be undone."]}),(0,r.BX)(a.G,{css:[l.l0.rowWithGap(12),l.l0.justify.end],children:[(0,r.tZ)(c.zx,{onClick:function(){return s()},text:"Cancel"}),(0,r.tZ)(c.zx,{colorway:"negative",onClick:function(){return d()},text:"Yes, overwrite ".concat(t.length>1?"these files":"this file"),iconLeft:(0,r.tZ)(u.Z,{})})]})]})}},4996:function(e,n,t){t.d(n,{Q:function(){return o}});var r=t(4541),i=t(50959);function o(e){var n=e.uploadFiles,t=e.fileUploadInputRef,o=e.dirUploadInputRef,a=(0,i.useRef)(Math.random().toString(36));return(0,r.BX)(r.HY,{children:[(0,r.tZ)("input",{style:{display:"none"},ref:t,id:"file-upload-input-".concat(a.current),type:"file",onChange:function(e){var t=e.target.files;t&&n({files:Array.from(t)})},onClick:function(e){e.currentTarget.value=""},multiple:!0,accept:"*"}),(0,r.tZ)("input",{style:{display:"none"},ref:o,id:"dir-upload-input-".concat(a.current),type:"file",onChange:function(e){var t=e.target.files;t&&n({files:Array.from(t)})},onClick:function(e){e.currentTarget.value=""},webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",accept:"*"})]})}},50851:function(e,n,t){t.d(n,{N:function(){return i},Z:function(){return o}});var r=t(50959);function i(){if("undefined"===typeof document)return!1;var e=document.createElement("input");return"webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e}function o(){return(0,r.useMemo)((function(){return i()}),[])}},94384:function(e,n,t){t.d(n,{R:function(){return s}});var r=t(57135),i=t(96583),o=t(98298),a=t(43119),l=t(71440);function c(){var e=(0,a.Z)(["\n  query FiletreeDownloadZip($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u=(0,l.Ps)(c());function s(e){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)((function(e){var n,t,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,null===o.l||void 0===o.l?void 0:o.l.query({query:u,variables:{replId:e}})];case 1:return t=i.sent(),r="Repl"===(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.repl.__typename)?t.data.repl.url:window.location.pathname,window.open(r+".zip","_blank"),[2]}}))}))).apply(this,arguments)}},57493:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(37248),i=/\(copy\)( \d+)?$/,o=/\d+$/;function a(e,n){for(var t=(0,r.r6)(e),a=(0,r.eb)(e),l=i.test(a)?e:"".concat(a," (copy)").concat(t.length>0?".".concat(t):""),c=1;c<=n.size;c++){if(!n.has(l))return l;var u=(0,r.eb)(l),s=u.split(" ");o.test(u)&&s.pop(),l="".concat(s.join(" ")," ").concat(c),t.length>0&&(l+=".".concat(t))}return l}},80221:function(e,n,t){t.d(n,{Z:function(){return Ze}});var r=t(57135),i=t(2272),o=t(96583),a=t(4541),l=t(50959),c=t(6601),u=t(96324),s=t(8189),d=t(72851),f=t(92402),p=t(2874),h=t(63884),v=t(77434),m=t(6706),g=t(30241),y=t(88665),Z=t(30265),b=t(94370),w=t(50851),x=t(4996),C=t(77542),k=t(92079);function S(e){var n=e.onDownloadZip,t=e.readOnly,r=void 0!==t&&t,i=(0,y.y)().uploadFiles,o=l.useRef(null),u=l.useRef(null),s=(0,g.Z)(),d=(0,C.OM)(),f=(0,C.t9)(),p=(0,k.d)({tablet:!1}),h=(0,b.useRouter)(),S=l.useMemo((function(){if("undefined"===typeof document)return[];if(r)return[f?m.st.HideHiddenFiles:m.st.ShowHiddenFiles];var e=(0,w.N)(),n=[m.st.UploadFile];return e&&!p&&n.push(m.st.UploadFolder),(0,Z.Vg)(h)||n.push(m.st.DownloadZip),n.push(f?m.st.HideHiddenFiles:m.st.ShowHiddenFiles),n}),[f,r,h,p]);return(0,a.BX)(a.HY,{children:[(0,a.tZ)(x.Q,{fileUploadInputRef:o,dirUploadInputRef:u,uploadFiles:i}),(0,a.tZ)(m.ZP,{actions:S,onAction:function(e){switch(e.type){case m.st.UploadFile.type:if(!o.current)return;return o.current.click(),void(0,v.Z)({replId:s,action:"uploaded",fileType:c.Tv.File});case m.st.UploadFolder.type:if(!u.current)return;return u.current.click(),void(0,v.Z)({replId:s,action:"uploaded",fileType:c.Tv.Directory});case m.st.DownloadZip.type:return n(),void(0,v.Z)({replId:s,action:"zipDownloaded"});case m.st.ShowHiddenFiles.type:return void d(!0);case m.st.HideHiddenFiles.type:d(!1)}}})]})}var T=t(92928),E=t(35021),R=t(3069),I=t(46598),G=t(3668),D=t(30260),_=t(1436),P=t(37248),B=t(57493),A=t(22167),U=t(25776),N=t(81743),L=t(26782),X=t(42204),M=t(58841),O=function(e){var n=e.filetreeApi,t=e.fileOpeners;return(0,N.S)(n),(0,X.xj)(t),(0,M.Yc)(),(0,L.C5)(),null},F=t(94384),W=t(96262),H=t(47236),z=t(14124),V=t(67265),j=t(27633),q=function(){var e=(0,z.lV)((0,l.useCallback)((function(e,n){n(V.tO,[])}),[]),j.l),n=(0,z.lV)((0,l.useCallback)(function(){var e=(0,r.Z)((function(e,n){var t;return(0,o.__generator)(this,(function(r){return t=e(V.tO),n(V._7,t),n(V.tO,[]),[2]}))}));return function(n,t){return e.apply(this,arguments)}}(),[]),j.l),t=(0,H.Dv)(V.tO,j.l),i=(0,H.Dv)(V.Fe,j.l),c=(0,H.Dv)(V.zA,j.l);return(0,a.tZ)(E.u,{isOpen:Boolean(t.length>0),onRequestClose:e,children:t.length>0?(0,a.tZ)(W.Z,{name:t.length>1?c:i,description:i,confirmDescription:c,hideModal:e,delete:n}):null})},$=t(2843),Y=t(29373),K=function(){var e=(0,i.Z)((0,H.KO)(Y.oV,j.l),2),n=e[0],t=e[1],c=(0,H.b9)(Y.nx,j.l),u=l.useCallback((function(){t([]),c([])}),[t,c]),s=(0,z.lV)(l.useCallback(function(){var e=(0,r.Z)((function(e,t){var r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:if(0===(r=e(Y.nx)).length)return[2];i.label=1;case 1:return i.trys.push([1,,3,4]),[4,t(Y.GC,{moveOps:r,dstConflicts:n})];case 2:return i.sent(),[3,4];case 3:return t(Y.oV,[]),t(Y.nx,[]),[7];case 4:return[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),[n]),j.l);return(0,a.tZ)(E.u,{isOpen:n.length>0,onRequestClose:u,children:n.length>0?(0,a.tZ)(R.Z,{paths:n.map((function(e){return e.path})),onCancel:u,onConfirm:s}):null})},Q=t(57261),J=t(9970),ee=t(11122),ne=t(53849),te=t(87062),re=t(24793),ie=t(99425),oe=t(29679),ae=t(94514),le=U.K.div,ce={position:"fixed",pointerEvents:"none",zIndex:oe.MI.filetreeDragLayer,left:0,top:0,width:"100%",height:"100%"},ue=Math.floor(16),se=[A.l0.display.flex,A.l0.flex.row,A.l0.align.center,A.l0.overflow("hidden"),A.l0.flex.grow(1),A.l0.width(160)],de=(0,ee.iv)((0,J.Z)(se).concat([{opacity:.75,zIndex:1}])),fe=(0,ee.iv)([[{transform:"rotate(1deg) translate(-4px, -4px)",opacity:.5},A.l0.position.absolute]]),pe=(0,ee.iv)([(0,J.Z)(se).concat([{opacity:0}])]),he=function(){var e=(0,ie.u)();if(!e.display)return null;var n=e.item,t=e.monitor.getClientOffset();if(!t)return null;if("dirContent"in n)return null;var r=t.x,i=t.y,o={transform:"translate(".concat(r,"px, ").concat(i-ue,"px)")},l=n.nodes.length,c=n.previewNode,u=c.path,s=c.type,d=(0,P.UO)(u);return(0,a.tZ)(le,{css:[o,A.l0.position.relative,A.l0.width(160)],children:(0,a.BX)(le,{css:[{transform:"scale(".concat(.9,")")},A.l0.position.absolute,A.l0.left("-".concat("40%")),A.l0.shadow(3),A.l0.borderRadius(8)],children:[(0,a.tZ)(te.ZP,{active:!0,selected:!0,children:(0,a.BX)(le,{css:de,children:[(0,a.tZ)(te.qh,{type:s,path:u,active:!0}),(0,a.tZ)(te.tJ,{title:d,children:d})]})}),l>1?(0,a.tZ)(le,{css:fe,children:(0,a.tZ)(te.ZP,{active:!0,selected:!0,children:(0,a.BX)(le,{css:pe,children:[(0,a.tZ)(te.qh,{type:s,path:u,active:!0}),(0,a.tZ)(te.tJ,{title:d,children:d})]})})}):null,l>1?(0,a.tZ)(re.D,{text:String(l),css:[A.l0.backgroundColor.accentPrimaryDimmest,A.l0.color.accentPrimaryStrongest,A.l0.fontWeight.medium,A.l0.position.absolute,A.l0.left("40%"),A.l0.top("calc(100% - 4px)")]}):null]})})},ve=function(){var e=(0,ne.f)((function(e){return{item:e.getItem(),itemType:e.getItemType(),isDragging:e.isDragging()}})),n=e.isDragging,t=e.itemType,r=t===c.Tv.File||t===c.Tv.Directory;return n&&r?(0,a.BX)("div",{style:ce,children:[(0,a.tZ)(he,{}),(0,a.tZ)(ae.a,{cursor:"grabbing"})]}):null},me=t(47843),ge=t(89853),ye=l.forwardRef((function(e,n){return(0,a.tZ)(N.D,{children:(0,a.BX)(a.HY,{children:[(0,a.tZ)(O,{filetreeApi:e.filetreeApi,fileOpeners:e.fileOpeners||[]}),(0,a.tZ)(xe,{ref:n,readOnly:e.readOnly,showResources:e.showResources,showHeader:e.showHeader})]})})}));ye.displayName="FiletreeWithJotaiProvider";var Ze=ye,be=(0,ge.X)({header:[A.l0.flex.row,A.l0.justify.spaceBetween,A.l0.p(8)],headerText:{userSelect:"none"},headerActions:[A.l0.flex.row,A.l0.align.center],headerActionButton:A.l0.color.foregroundDimmer,headerActionDivider:{height:6,width:0,marginLeft:4,marginRight:4,borderRight:"1px solid var(--foreground-dimmest)"},dirNodeWrapper:[A.l0.flex.growAndShrink(1),{overflowY:"auto"}]}),we=l.forwardRef((function(e,n){var t=e.readOnly,v=void 0!==t&&t,m=e.showResources,Z=void 0===m||m,b=e.showHeader,w=void 0===b||b,x=(0,I.Z)().showError,C=(0,k.d)(),N=(0,g.Z)(),L=(0,s.Z)().fs,X=(0,$.Hl)(),M=(0,i.Z)(l.useState(null),2),O=M[0],W=M[1],H=(0,h.ZP)({onDone:function(e){var n=e.parentPath,t=e.errors;if(t.length){var r=t.filter((function(e){return e.error===h.e_.AlreadyExists}));r.length&&W({parentPath:n,errors:r});var i=t.filter((function(e){return e.error!==h.e_.AlreadyExists}));i.length&&(me.kg.error("Error uploading files",{uploadSource:"filetree",parentPath:n,errors:i.map((function(e){var n=e.path,t=e.error;return"".concat(n,": ").concat(t,"}")})).join("\n")}),x("There was an error uploading: ".concat(i.map((function(e){return e.path})).join(", "))))}else me.kg.info("Successfully uploaded files",{uploadSource:"filetree",parentPath:n})},fs:L}),z=H.uploadFiles,V=H.pendingUploads,j=(0,Q.D3)();return l.useImperativeHandle(n,(function(){return{uploadFiles:z,addFileType:X}})),(0,a.tZ)(y.i.Provider,{value:{fs:L,pendingUploads:V,uploadFiles:z,duplicateFile:function(){var e=(0,r.Z)((function(e,n){var t,r,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=(0,B.Z)((0,P.UO)(e),new Set(n)),r=(0,P.Il)(e),i=r?"".concat(r,"/").concat(t):t,[4,L.copyFile(e,i)];case 1:return(a=o.sent()).error?(x(a.error),[2]):(j(i),[2])}}))}));return function(n,t){return e.apply(this,arguments)}}()},children:(0,a.BX)(p.Z,{children:[(0,a.tZ)(ve,{}),(0,a.BX)(U.G,{css:[A.l0.height("100%"),C&&A.l0.backgroundColor.backgroundDefault],children:[w?(0,a.BX)(U.G,{css:be.header,children:[(0,a.tZ)(d.Z,{level:4,css:be.headerText,children:"Files"}),(0,a.BX)(U.G,{css:be.headerActions,children:[v?null:(0,a.BX)(a.HY,{children:[(0,a.tZ)(G.h,{css:be.headerActionButton,onClick:function(){X(c.Tv.File)},"data-cy":"filetree-add-file",alt:"Add file",children:(0,a.tZ)(D.Z,{})}),(0,a.tZ)(U.G,{css:be.headerActionDivider}),(0,a.tZ)(G.h,{css:be.headerActionButton,onClick:function(){X(c.Tv.Directory)},alt:"Add folder",children:(0,a.tZ)(_.Z,{})})]}),(0,a.tZ)(S,{readOnly:v,onDownloadZip:function(){return(0,F.R)(N)}})]})]}):null,(0,a.tZ)(U.G,{css:be.dirNodeWrapper,children:(0,a.tZ)(f.Z,{siblings:[],readOnly:v,path:u.Ql})}),Z?(0,a.tZ)(T.w3,{}):null,(0,a.tZ)(E.u,{isOpen:Boolean(O),onRequestClose:function(){return W(null)},children:O?(0,a.tZ)(R.Z,{paths:O.errors.map((function(e){return e.path})),onCancel:function(){return W(null)},onConfirm:function(){z({overwrite:!0,parentPath:O.parentPath,files:O.errors.map((function(e){return e.file}))}),W(null)}}):null}),(0,a.tZ)(K,{}),(0,a.tZ)(q,{})]})]})})}));we.displayName="Filetree";var xe=l.memo(we)},89700:function(e,n,t){t.d(n,{s8:function(){return Vt},pR:function(){return zt},ND:function(){return jt}});var r=t(57389),i=t(9970),o=t(4541),a=t(2272),l=t(50959),c=t(36730),u=t(34152),s=t(40120),d=t(29524),f=t(6601),p=t(92153),h=t(96324),v=t(37248),m=t(70515),g=t(51101),y="No files",Z="Loading...",b=t(57);function w(e,n){return e.y+e.height===n}function x(e,n){var t=n.fromIndex;if("next"===n.dir){for(var r=t+1;r<e.length;r++){var i=e.at(r);if("dir"===(null===i||void 0===i?void 0:i.type)||"file"===(null===i||void 0===i?void 0:i.type))return i}return null}for(var o=t-1;o>=0;o--){var a=e.at(o);if("dir"===(null===a||void 0===a?void 0:a.type)||"file"===(null===a||void 0===a?void 0:a.type))return a}return null}function C(e,n){return n.type===f.Tv.Directory&&e.type!==f.Tv.Directory?1:e.type===f.Tv.Directory&&n.type!==f.Tv.Directory?-1:(0,v.IV)(e.filename,n.filename)}function k(e){var n=e.row,t=e.baseDepth,r="dir"===n.type||"file"===n.type||"upload"===n.type?(0,v.Il)(n.path):n.dir;return r&&r!==h.Ql?(0,v.U$)(r)-t:0}function S(e){var n=e.row,t=k({row:n,baseDepth:e.baseDepth});switch(n.type){case"file":case"dir":case"upload":return{text:(0,v.UO)(n.path),depth:t};case"error":return{text:n.message,depth:t};case"divider":return{text:n.label,depth:t};case"create":case"emptyDir":return{text:y,depth:t}}}var T=function(e,n){return e===h.Ql?n:e+"/"+n},E=function(e,n){return e===h.Ql&&1===(0,v.U$)(n)||(0,b.pC)(e,n)};function R(e){var n=e.root,t=void 0===n?h.Ql:n,r=e.dirInfo,o=e.filter,l=e.sort,c=e.getSection,u=e.readOnly,s=e.pendingUploads,d=e.pendingMoves,p=e.pathBeingRenamed,m=[],y=(null===s||void 0===s?void 0:s.length)?function(e){var n=new Map,t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=(0,v.Il)(l.targetPath)||h.Ql,u=n.get(c),s={filename:(0,v.UO)(l.targetPath),progress:l.progress};u?u.push(s):n.set(c,[s])}}catch(d){r=!0,i=d}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}(s):null,Z=new Map,b=new Map;if(null===d||void 0===d?void 0:d.length){var w=!0,x=!1,C=void 0;try{for(var k,S=d[Symbol.iterator]();!(w=(k=S.next()).done);w=!0){var R=k.value,I=R.from,G=R.to;Z.set(I.path,I.type),b.set(G,I.type)}}catch(D){x=!0,C=D}finally{try{w||null==S.return||S.return()}finally{if(x)throw C}}}return function e(n){var s=r.get(n);if(s&&!Z.has(n)&&s.expanded)if(n!==t||!s.loading||s.children)if(s.error)m.push({type:"error",message:s.error.message,dir:n});else{var d=s.children?(0,i.Z)(s.children):void 0;d&&Z.size>0&&(d=d.filter((function(e){return!Z.has(T(n,e.filename))})));var w=!0,x=!1,C=void 0;try{for(var k,S=function(){var e=(0,a.Z)(k.value,2),t=e[0],r=e[1];if(!E(n,t))return"continue";var i=(0,v.UO)(t);if(null===d||void 0===d?void 0:d.some((function(e){return e.filename===i})))return"continue";d||(d=[]),d.push({filename:i,type:r})},R=b[Symbol.iterator]();!(w=(k=R.next()).done);w=!0)S()}catch(D){x=!0,C=D}finally{try{w||null==R.return||R.return()}finally{if(x)throw C}}var I=null===y||void 0===y?void 0:y.get(n);if(I){d||(d=[]);var G=!0,_=!1,P=void 0;try{for(var B,A=I[Symbol.iterator]();!(G=(B=A.next()).done);G=!0){var U=B.value,N=U.filename,L=U.progress;d.push({filename:N,type:f.Tv.File,progress:L})}}catch(D){_=!0,P=D}finally{try{G||null==A.return||A.return()}finally{if(_)throw P}}}if(d)if(s.create||I||!d||0!==d.length){var X=function(e,n){var t=n.getSection,r=[],i=new Map,o=!0,l=!1,c=void 0;try{for(var u,s=e[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var d=u.value,p=t(d),h=d.progress?{type:"upload",progress:d.progress,filename:d.filename}:{type:d.type===f.Tv.File?"file":"dir",filename:d.filename};if(p){var v=i.get(p);v?v.push(h):i.set(p,[h])}else r.push(h)}}catch(D){l=!0,c=D}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}var m=!0,y=!1,Z=void 0;try{for(var b,w=i[Symbol.iterator]();!(m=(b=w.next()).done);m=!0){var x=(0,a.Z)(b.value,2),C=x[0],k=x[1];r.push({type:"divider",label:C}),(0,g.f)(r,k)}}catch(D){y=!0,Z=D}finally{try{m||null==w.return||w.return()}finally{if(y)throw Z}}return r}(d.filter(o).sort(l),{getSection:n===h.Ql?c:function(){return null}}),M=-1,O=!0,F=!1,W=void 0;try{for(var H,z=function(){var t=H.value;if("error"===t.type||"emptyDir"===t.type)throw new Error("Expected dir, file, or divider row");if("divider"===t.type)return-1===M&&(M=m.length),m.push({type:"divider",dir:n,label:t.label}),"continue";var i=T(n,t.filename);if("dir"===t.type){var o={type:"dir",path:i};if(p===i&&(o.rename=!0),b.has(i)&&(o.pending=!0),m.push(o),!r.get(i))return"continue";e(i)}else if("upload"===t.type)m.push({type:"upload",path:i,progress:t.progress});else if(!I||!I.some((function(e){return e.filename===t.filename}))){var a={type:"file",path:i};p===i&&(a.rename=!0),b.has(i)&&(a.pending=!0),m.push(a)}},V=X[Symbol.iterator]();!(O=(H=V.next()).done);O=!0)z()}catch(D){F=!0,W=D}finally{try{O||null==V.return||V.return()}finally{if(F)throw W}}if(s.create){var j={type:"create",dir:n,fileType:s.create?s.create:void 0};-1===M?m.push(j):m.splice(M,0,j)}}else m.push({type:u?"emptyDir":"create",dir:n})}else m.push({type:"dir",path:n})}(t),m}var I,G,D=t(10161),_=(0,c.cn)(new Map),P=(0,c.cn)({width:0,height:0}),B=(0,c.cn)(0),A=(0,c.cn)(null),U=(0,c.cn)(new Map),N=(0,c.cn)((function(e){return null!==(I=e(z).root)&&void 0!==I?I:h.Ql})),L=(0,c.cn)(null),X=(0,c.cn)(null),M=(0,c.cn)(null,(function(e,n,t){e(z).readOnly||n(X,t)})),O=(0,c.cn)((function(e){var n=e(z).root,t=void 0===n?h.Ql:n;return t===h.Ql?0:(0,v.U$)(t)})),F=(0,c.cn)((function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=[],r=0,o=null,l=!0,c=!1,u=void 0;try{for(var s,d=e[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=(0,a.Z)(s.value,2),p=(f[0],f[1]);null===o&&(o=p.y);var h={height:p.height,cols:[]};if(t.push(h),0!==p.depth){var m=p.depth+n;m>r&&(r=m);for(var g="divider"===p.row.type||"error"===p.row.type||"create"===p.row.type||"emptyDir"===p.row.type?p.row.dir:(0,v.Il)(p.row.path),y=g.split("/"),Z=0;Z<(0,v.U$)(g);Z++){var b=y.slice(0,Number(Z+1)).join("/");h.cols.push(b)}}}}catch(H){c=!0,u=H}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}for(var x=new Map,C=n;C<r;C++){var k=[];x.set(C,k);var S=null!==o&&void 0!==o?o:0,T=!0,E=!1,R=void 0;try{for(var I,G=t[Symbol.iterator]();!(T=(I=G.next()).done);T=!0){var D=I.value,_=D.cols[C],P=S;if(_){var B=k.at(-1);B&&w(B,P)?B.height+=D.height:k.push({y:P,height:D.height,dir:_,depth:C-n})}S+=D.height}}catch(H){E=!0,R=H}finally{try{T||null==G.return||G.return()}finally{if(E)throw R}}}var A=[],U=!0,N=!1,L=void 0;try{for(var X,M=x[Symbol.iterator]();!(U=(X=M.next()).done);U=!0){var O,F=(0,a.Z)(X.value,2),W=(F[0],F[1]);(O=A).push.apply(O,(0,i.Z)(W))}}catch(H){N=!0,L=H}finally{try{U||null==M.return||M.return()}finally{if(N)throw L}}return A}(e(U),e(O))})),W=(0,c.cn)((function(e){var n,t=e(z).root||h.Ql;return!1===(null===(n=e(te).get(t))||void 0===n?void 0:n.loading)})),H=(0,c.cn)(null,(function(e,n,t){var r=new Map,i=e(ae),o=e(O),a=!0,l=!1,c=void 0;try{for(var u,s=t.rows[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value,f=d.key.toString(),p=i.at(d.index);if(p){var h=k({row:p,baseDepth:o});r.set(d.index,{y:d.start,height:d.size,index:d.index,key:f,depth:h,row:p})}}}catch(v){l=!0,c=v}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}n(U,r),n(B,t.scrollHeight)})),z=(0,c.cn)({}),V=(0,D.kv)(z,(function(e){return Boolean(e.readOnly)})),j=(0,c.cn)((function(e){return null!==(G=e(z).fontSize)&&void 0!==G?G:14})),q=function(e,n){if("divider"===n)switch(e){case 10:return 20;case 12:case 14:return 24;case 18:return 28;default:return 32}switch(e){case 10:return 16;case 12:return 24;case 14:return 32;case 18:return 38;default:return 40}},$=(0,c.cn)((function(e){return q(e(j),"file")})),Y=(0,c.cn)((function(e){return function(e){switch(e){case 10:case 12:return 12;case 14:return 16;case 18:return 20;default:return 24}}(e(j))})),K=(0,c.cn)((function(e){return e(j)<14?4:8})),Q=(0,c.cn)((function(e){return e(j)<14?4:8})),J=(0,c.cn)((function(e){return e(j)<16?4:8})),ee=(0,c.cn)((function(e){return function(e){switch(e){case 10:return 10;case 12:case 14:return 12;case 18:return 14;default:return 18}}(e(j))})),ne=(0,c.cn)((function(e){return function(e){switch(e){case 10:case 12:return 10;case 14:case 18:return 16;default:return 20}}(e(j))})),te=(0,c.cn)(new Map);function re(e){var n=e.filename;return m.nh.includes(n)?"Config files":m.uP.includes(n)?"Packager files":null}var ie=(0,c.cn)([]),oe=(0,c.cn)([]),ae=(0,c.cn)((function(e){var n,t,r=e(z),i=r.filter,o=r.root,a=void 0===o?h.Ql:o,l=r.sort,c=void 0===l?C:l,u=r.readOnly,s=void 0!==u&&u;return R({root:a,dirInfo:e(te),filter:i,sort:c,readOnly:s,getSection:re,pendingUploads:e(ie),pathBeingRenamed:null!==(n=e(X))&&void 0!==n?n:void 0,pendingMoves:null!==(t=e(oe))&&void 0!==t?t:void 0})})),le=(0,c.cn)((function(e){var n=e(A);if(!n)return null;var t=e(ae).findIndex((function(e){return("file"===e.type||"dir"===e.type)&&e.path===n}));return-1!==t?t:null})),ce=(0,c.cn)(null,(function(e,n,t){var r=e(le),i=e(A);if(null!==r&&null!==i){var o=e(ae);switch(t.key){case"ArrowDown":t.preventDefault();var a=x(o,{dir:"next",fromIndex:r});return void("dir"!==(null===a||void 0===a?void 0:a.type)&&"file"!==(null===a||void 0===a?void 0:a.type)||n(A,a.path));case"ArrowUp":t.preventDefault();var l=x(o,{dir:"previous",fromIndex:r});return void("dir"!==(null===l||void 0===l?void 0:l.type)&&"file"!==(null===l||void 0===l?void 0:l.type)||n(A,l.path));case"ArrowLeft":case"ArrowRight":t.preventDefault();var c=e(te).get(i);if(!c)return;return void("ArrowLeft"===t.key&&c.expanded?n(de,i):"ArrowRight"!==t.key||c.expanded||n(pe,i));case"Enter":case" ":if("Enter"===t.key&&!e(z).readOnly)return;return e(te).has(i)?void n(he,i):void e(z).onFileSelect({event:t,path:i,type:"keydown"})}}})),ue=(0,c.cn)(null,(function(e,n,t){n(te,(function(e){return(0,p.ZP)(e,(function(e){var n=t.path===h.Ql?null:t.path+"/",r=!0,i=!1,o=void 0;try{for(var a,l=t.children[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c,u=a.value,s=n?n+u.filename:u.filename,d=e.get(s);if(u.type===f.Tv.Directory)d||e.set(s,{expanded:!1});else d&&(null===(c=d.disposeWatcher)||void 0===c||c.call(d),e.delete(s))}}catch(v){i=!0,o=v}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var p=e.get(t.path);p&&(p.children=t.children,p.loading=!1,p.error=void 0)}))}))})),se=(0,c.cn)(null,(function(e,n,t){n(te,(function(e){return(0,p.ZP)(e,(function(e){var n,r=e.get(t.path);r&&(r.loading=!1,r.error=t.error,null===(n=r.disposeWatcher)||void 0===n||n.call(r),r.disposeWatcher=null)}))}))})),de=(0,c.cn)(null,(function(e,n,t){var r=[t];n(te,(function(e){return(0,p.ZP)(e,(function(e){var n=!0,t=!1,i=void 0;try{for(var o,a=r[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=e.get(l);c&&(c.expanded=!1,c.loading=!1,c.disposeWatcher&&(c.disposeWatcher(),c.disposeWatcher=null))}}catch(u){t=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}}))}))})),fe=(0,c.cn)(null,(function(e,n,t){n(te,(function(e){return(0,p.ZP)(e,(function(e){var n,r=e.get(t);r&&(null===(n=r.disposeWatcher)||void 0===n||n.call(r),e.delete(t))}))}))})),pe=(0,c.cn)(null,(function(e,n,t){var r=Array.isArray(t)?t:[t],i=e(z).fs;n(te,(function(e){return(0,p.ZP)(e,(function(e){var t=!0,o=!1,a=void 0;try{for(var l,c=function(){var t,r=l.value,o=null!==(t=e.get(r))&&void 0!==t?t:{expanded:!0};e.has(r)?o.expanded=!0:e.set(r,o),o.disposeWatcher?o.disposeWatcher():o.loading=!0,o.disposeWatcher=i.watchDir(r,{onError:function(e){return n(se,{path:r,error:e})},onChange:function(e){return n(ue,{path:r,children:e})},onMoveOrDelete:function(){return n(fe,r)}})},u=r[Symbol.iterator]();!(t=(l=u.next()).done);t=!0)c()}catch(s){o=!0,a=s}finally{try{t||null==u.return||u.return()}finally{if(o)throw a}}}))}))})),he=(0,c.cn)(null,(function(e,n,t){var r=e(te).get(t);if(!r)return!1;r.expanded?n(de,t):n(pe,t)})),ve=(0,c.cn)((function(e){return e(z).manageWidth?e(W)?function(e){var n=e.rows,t=e.baseDepth,r=[],i=new Map,o=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var d=u.value,f=S({row:d,baseDepth:t}),p=f.depth,h=f.text,v=i.get(p);if(v){var m=v.get(d.type);m&&(null===m||void 0===m?void 0:m.length)>h.length||v.set(d.type,h)}else i.set(p,new Map([[d.type,h]]))}}catch(B){l=!0,c=B}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}var g=!0,y=!1,Z=void 0;try{for(var b,w=i[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var x=(0,a.Z)(b.value,2),C=x[0],k=x[1],T=!0,E=!1,R=void 0;try{for(var I,G=k[Symbol.iterator]();!(T=(I=G.next()).done);T=!0){var D=(0,a.Z)(I.value,2),_=D[0],P=D[1];r.push({depth:C,type:_,text:P})}}catch(B){E=!0,R=B}finally{try{T||null==G.return||G.return()}finally{if(E)throw R}}}}catch(B){y=!0,Z=B}finally{try{g||null==w.return||w.return()}finally{if(y)throw Z}}return r}({rows:e(ae),baseDepth:e(O)}):[{type:"dir",text:Z,depth:1}]:null})),me=(0,c.cn)(null,(function(e,n,t){n(te,(function(e){return(0,p.ZP)(e,(function(e){var n=e.get(t.parentPath);n&&(n.create=t.fileType,n.expanded=!0)}))})),n(A,null)})),ge=(0,c.cn)(null,(function(e,n,t){n(te,(function(e){return(0,p.ZP)(e,(function(e){var n=e.get(t);n&&(n.create=void 0)}))}))})),ye=(0,c.cn)(null,(function(e,n,t){n(A,t.path),n(te,(function(e){return(0,p.ZP)(e,(function(e){var n=e.get(t.parentPath);n&&(n.create=void 0)}))})),t.fileType===f.Tv.Directory&&n(pe,t.path)})),Ze=(0,c.cn)(new Map),be=(0,c.cn)(null),we=(0,c.cn)(!0),xe=(0,c.cn)(null,(function(e,n,t){var r=t.node,i=t.mode,o=e(ae),l=e(be);n(we,!i),n(Ze,(function(e){return(0,p.ZP)(e,(function(e){!function(e,n){var t=n.node,r=n.rows,i=n.mode,o=n.anchor;if(!i)return e.clear(),void e.set(t.path,t.type);if("multi"===i&&e.has(t.path))e.delete(t.path);else if("multi"!==i){var a=t.type===f.Tv.Directory?"dir":"file",l=r.findIndex((function(e){return e.type===a&&e.path===t.path}));if(-1!==l){var c=(null===o||void 0===o?void 0:o.type)===f.Tv.Directory?"dir":"file",u=o?r.findIndex((function(e){return e.type===c&&e.path===o.path})):-1;if(-1!==u){var s=u<l?r.slice(u,l+1):r.slice(l,u+1),d=!0,p=!1,h=void 0;try{for(var v,m=r[Symbol.iterator]();!(d=(v=m.next()).done);d=!0){var g=v.value;"file"!==g.type&&"dir"!==g.type||(s.includes(g)?e.set(g.path,"file"===g.type?f.Tv.File:f.Tv.Directory):e.delete(g.path))}}catch(y){p=!0,h=y}finally{try{d||null==m.return||m.return()}finally{if(p)throw h}}}}}else e.set(t.path,t.type)}(e,{node:r,rows:o,mode:i,anchor:l})}))}));var c=e(Ze);if(!(c.size>1)){var u=!0,s=!1,d=void 0;try{for(var h,v=c[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){var m=(0,a.Z)(h.value,2),g=m[0],y=m[1];n(be,{path:g,type:y})}}catch(Z){s=!0,d=Z}finally{try{u||null==v.return||v.return()}finally{if(s)throw d}}}})),Ce=t(57135),ke=t(96583);function Se(e,n){return n!==e.path&&(!((0,b.pC)(n,e.path)||n===h.Ql&&1===(0,v.U$)(e.path))&&!(0,b.yr)(e.path,n))}var Te=(0,c.cn)(null,function(){var e=(0,Ce.Z)((function(e,n,t){var r,i,o,a,l,c,u,s,d;return(0,ke.__generator)(this,(function(p){switch(p.label){case 0:return r=e(te).get(t.to),(i=null===r||void 0===r?void 0:r.children)?[3,2]:[4,e(z).fs.readDir(t.to)];case 1:if((o=p.sent()).error)return[2];i=o.children,p.label=2;case 2:if(!i)throw new Error("Expected children");return a=function(e,n,t){return e.reduce((function(e,r){var i=(0,v.UO)(r.path),o=null===t||void 0===t?void 0:t.find((function(e){return e.filename===i}));return o&&e.push({type:o.type,path:n===h.Ql?o.filename:n+"/"+o.filename}),e}),[])}(t.nodes,t.to,i),(l=function(e,n){var t=(0,v.RQ)(e);return t.every((function(e){return Se(e,n)}))?t.map((function(e){var t=(0,v.UO)(e.path);return{from:e,to:n===h.Ql?t:n+"/"+t}})):null}(t.nodes,t.to))?a.length&&!t.overwrite?(null===(c=e(z).onConflicts)||void 0===c||c({type:"move",nodes:t.nodes,to:t.to,conflics:a}),[2]):(u=e(z).fs,a.length?a.some((function(e){return l.some((function(n){var t=n.from;return(0,b.yr)(e.path,t.path)}))}))?[2]:[4,Promise.all(a.map(function(){var e=(0,Ce.Z)((function(e){var n;return(0,ke.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.type===f.Tv.Directory?u.deleteDir(e.path):u.deleteFile(e.path)];case 1:return[2,(n=t.sent()).error?{error:n.error,node:e}:null]}}))}));return function(n){return e.apply(this,arguments)}}()))]:[3,4]):[2];case 3:if(s=p.sent(),s.filter(Boolean).length)return[2];p.label=4;case 4:return n(oe,l),[4,Promise.all(l.map(function(){var e=(0,Ce.Z)((function(e){var n,t,r;return(0,ke.__generator)(this,(function(i){switch(i.label){case 0:return n=e.from,t=e.to,[4,n.type===f.Tv.Directory?u.moveDir(n.path,t):u.moveFile(n.path,t)];case 1:return[2,(r=i.sent()).error?{error:r.error,from:n,to:t}:null]}}))}));return function(n){return e.apply(this,arguments)}}()))];case 5:return d=p.sent(),n(oe,[]),d.filter(Boolean).length?[2]:(n(Ze,new Map(l.map((function(e){return[e.to,e.from.type]})))),[2])}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),Ee=t(63884),Re=(0,c.cn)(null,function(){var e=(0,Ce.Z)((function(e,n,t){var r,i,o,a,l,c,u,s,d;return(0,ke.__generator)(this,(function(v){switch(v.label){case 0:return r=e(z).fs,i=t.parentPath||h.Ql,o=e(te).get(i),(a=null===o||void 0===o?void 0:o.children)?[3,2]:[4,r.readDir(i)];case 1:if((l=v.sent()).error)return[2];a=l.children,v.label=2;case 2:if(!a)throw new Error("Expected children");return c=a.filter((function(e){return t.files.some((function(n){return n.name===e.filename}))})),(u=c.length?c.map((function(e){return{path:i===h.Ql?e.filename:i+"/"+e.filename,type:e.type}})):null)&&!t.overwrite?(null===(s=e(z).onConflicts)||void 0===s||s({type:"upload",files:t.files,to:i,conflics:c.map((function(e){return{path:i===h.Ql?e.filename:i+"/"+e.filename,type:e.type}}))}),[2]):u?[4,Promise.all(u.map(function(){var e=(0,Ce.Z)((function(e){var n;return(0,ke.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.type===f.Tv.Directory?r.deleteDir(e.path):r.deleteFile(e.path)];case 1:return[2,(n=t.sent()).error?{error:n.error,node:e}:null]}}))}));return function(n){return e.apply(this,arguments)}}()))]:[3,4];case 3:if(d=v.sent(),d.filter(Boolean).length)return[2];v.label=4;case 4:return(0,Ee.IL)({parentPath:t.parentPath,files:t.files,fs:r,shouldUseFileTransferAPI:!0,onStart:function(e){n(ie,(function(n){return(0,p.ZP)(n,(function(n){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push(l)}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}}))}))},onUpload:function(e){n(ie,(function(n){return(0,p.ZP)(n,(function(n){var t=n.findIndex((function(n){return n.targetPath===e.path}));-1!==t&&n.splice(t,1)}))}))},onError:function(e){n(ie,(function(n){return(0,p.ZP)(n,(function(n){var t=n.findIndex((function(n){return n.targetPath===e.path}));-1!==t&&n.splice(t,1)}))}))},onDone:function(e){}}),[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}());var Ie=(0,l.createContext)(null);function Ge(e){return(0,o.tZ)(Ie.Provider,{value:e.store,children:e.children})}function De(){var e=(0,l.useContext)(Ie);if(!e)throw new Error("Expected store in context");return e}function _e(e){return(0,u.Dv)(e,{store:De()})}function Pe(e){return(0,d.b)(e,De())}var Be=function(e){return(0,u.b9)(e,{store:De()})};function Ae(e){return(0,s.lV)((0,l.useCallback)((function(n){return n(e)}),[e]),{store:De()})}var Ue=t(22167),Ne=t(89853),Le=t(25776),Xe=t(71573),Me=t(94629),Oe=t(85092),Fe=t(98689),We=t(7247),He=(0,t(40502).$)(["scrollHeight","fontSize","fontSizeSmall","iconSize","horizontalPadding","borderRadius","gutterWidth","minHeight","iconTextGap","rowWidth","rowHeight","rowLeftIndent","rowY","dropPreviewDepth","dropPreviewHeight","dropPreviewY","strokeDashoffset","statusColor","statusBackgroundColor","dirStatusIconSize","nodeBackgroundColor","dragPreviewX","dragPreviewY"]),ze=He.cssVars,Ve=He.styleTokens,je={paddingLeft:Ve.horizontalPadding,paddingRight:Ve.horizontalPadding},qe={"&& svg":{minWidth:Ve.iconSize,minHeight:Ve.iconSize,width:Ve.iconSize,height:Ve.iconSize}},$e=[Ue.l0.truncate,{fontSize:Ve.fontSize}],Ye=t(73758),Ke=t(31540),Qe=t(83871);function Je(e,n){return e.shiftKey?"bulk":"altKey"===n&&e.altKey||"cmdOrCtrlKey"===n&&(0,Qe.j)(e)?"multi":void 0}var en=(0,c.cn)(null,(function(e,n,t){var r=t.event,i=t.path;n(A,i);var o=e(z).multiselectModifierKey;n(xe,{node:{path:i,type:f.Tv.Directory},mode:o?Je(r,o):void 0}),r.shiftKey||r.altKey||(0,Qe.j)(r)||n(he,i)}));function nn(e,n){return(null===e||void 0===e?void 0:e.height)===(null===n||void 0===n?void 0:n.height)&&(null===e||void 0===e?void 0:e.y)===(null===n||void 0===n?void 0:n.y)&&(null===e||void 0===e?void 0:e.key)===(null===n||void 0===n?void 0:n.key)}function tn(e){return _e(function(e){return(0,We.Z)((function(){var n;return(0,c.cn)((function(t){var r;return null!==(n=null===(r=t(U).get(e))||void 0===r?void 0:r.row)&&void 0!==n?n:null}))}),[e])}(e))}function rn(){return{fontSize:Pe(j),fontSizeSmall:Pe(ee),iconSize:Pe(Y),scrollHeight:Pe(B),horizontalPadding:Pe(K),borderRadius:Pe(Q),gutterWidth:Pe(ne),minHeight:Pe($),iconTextGap:Pe(J)}}function on(e){return _e(function(e){return(0,We.Z)((function(){return(0,D.kv)(te,(function(n){var t;return Boolean(null===(t=n.get(e))||void 0===t?void 0:t.loading)}))}),[e])}(e))}function an(e){return _e(function(e){return(0,We.Z)((function(){return(0,D.kv)(te,(function(n){var t;return Boolean(null===(t=n.get(e))||void 0===t?void 0:t.expanded)}))}),[e])}(e))}function ln(e){return _e((0,We.Z)((function(){return(0,D.kv)(A,(function(n){return n===e?0:-1}))}),[e]))}function cn(){var e,n=(0,l.useRef)(null),t=_e(ae),r=function(){var e=Ae(ae),n=Ae(j);return(0,We.Z)((function(){return function(t){var r=e()[t];return r?q(n(),r.type):0}}),[e,n])}(),o=Ae(z),a=Pe(le),c=(0,Me.MG)({count:t.length,overscan:null!==(e=o().overscan)&&void 0!==e?e:100,getScrollElement:function(){return n.current},getItemKey:function(e){var n=t.at(e);return n?"error"===n.type?"error:"+n.dir+n.message:"divider"===n.type?"divider:"+n.dir+n.label:"emptyDir"===n.type?"emptyDir:"+n.dir:"create"===n.type?"create:"+n.dir:n.type+":"+n.path:""},estimateSize:r,rangeExtractor:function(e){var n=(0,Oe.MK)(e);return null===a.current||n.includes(a.current)||void 0===t[a.current]?n:(0,i.Z)(n).concat([a.current])}}),u=Be(H),s=c.getVirtualItems(),d=c.getTotalSize();(0,l.useEffect)((function(){u({rows:s,scrollHeight:d})}),[u,s,d]);var f=_e(W);return(0,l.useEffect)((function(){if(f){var e=function(e){null!==e&&c.getVirtualItems()[e]&&c.scrollToIndex(e,{align:"auto",behavior:"auto"})};return setTimeout((function(){return e(a.current)})),a.subscribe(e)}}),[c,a,f]),{scrollRef:n,virtualizer:c}}function un(e){var n=(0,l.useRef)(null),t=Pe((0,We.Z)((function(){return(0,D.kv)(U,(function(n){return n.get(e)}),nn)}),[e]));return(0,Xe.jv)(n,t,(function(e){return e?(n={},(0,r.Z)(n,ze.rowHeight,e.height+"px"),(0,r.Z)(n,ze.rowY,e.y+"px"),(0,r.Z)(n,ze.rowLeftIndent,"calc(".concat(e.depth," * ").concat(Ve.gutterWidth,")")),n):null;var n})),n}function sn(e){var n=(0,l.useRef)(null),t=Pe(A);return(0,l.useEffect)((function(){var r=function(t){null!==i&&clearTimeout(i),t===e&&(i=setTimeout((function(){var e;null===(e=n.current)||void 0===e||e.focus()}),50))},i=null;r(t.current);var o=t.subscribe(r);return function(){null!==i&&clearTimeout(i),o()}}),[t,e]),n}function dn(){return Be(M)}function fn(e){return Pe((0,We.Z)((function(){return(0,D.kv)(Ze,(function(n){return n.has(e)}))}),[e]))}var pn=t(42858),hn=t(10224),vn=t(91875),mn=t(97774),gn=t(46419),yn=t(40306),Zn=t(38231),bn=t(55544),wn=t(76530),xn=t(7579),Cn=t(72006),kn=t(4405),Sn=t(81962),Tn={name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var n=e.state;n.styles.popper.width="".concat(n.rects.reference.width,"px")},effect:function(e){var n=e.state;(0,Sn.Z)(n.elements.reference,HTMLElement)&&(n.elements.popper.style.width="".concat(n.elements.reference.offsetWidth,"px"))}},En=t(47409),Rn=t(78566),In=t(37676),Gn=t(33105),Dn=[Ve.horizontalPadding,Ve.iconSize,Ve.iconTextGap].join(" + "),_n=[Zn.gU.filled,{height:"100%",width:"100%",paddingLeft:"calc(".concat(Dn,")"),paddingRight:Ve.horizontalPadding}];var Pn=(0,Ne.X)({root:[Ue.l0.flex.row,je,{padding:Ve.horizontalPadding}],icon:[qe,Ue.l0.color.accentNegativeDefault,{marginRight:Ve.iconTextGap}],text:[{fontSize:Ve.fontSize},Ue.l0.color.foregroundDimmer,Ue.l0.flex.growAndShrink(1)]});function Bn(e){return(0,o.BX)(Le.G,{css:Pn.root,children:[(0,o.tZ)(Le.G,{css:Pn.icon,children:(0,o.tZ)(yn.Z,{})}),(0,o.tZ)(Le.G,{css:Pn.text,children:e.message})]})}var An=(0,Ne.X)({root:[Ue.l0.position.relative,Ue.l0.flex.growAndShrink(1),{height:"100%"}],icon:[qe,Ue.l0.position.absolute,Ue.l0.left(Ve.horizontalPadding),Ue.l0.top("50%"),{transform:"translateY(-50%)"}],input:_n,inputLoading:[_n,En.p.backgroundPulse()],menu:[{borderRadius:Ve.borderRadius,border:"1px solid",borderColor:Ue.TV.outlineDefault}]});function Un(e){var n=function(){var e=(0,l.useRef)(null),n=rn();(0,Xe.jv)(e,n.fontSize,(function(e){return(0,r.Z)({},ze.fontSize,e+"px")})),(0,Xe.jv)(e,n.iconTextGap,(function(e){return(0,r.Z)({},ze.iconTextGap,e+"px")})),(0,Xe.jv)(e,n.borderRadius,(function(e){return(0,r.Z)({},ze.borderRadius,e+"px")})),(0,Xe.jv)(e,n.horizontalPadding,(function(e){return(0,r.Z)({},ze.horizontalPadding,e+"px")}));var t=(0,l.useState)(null),i=t[0],o=t[1],a=(0,l.useState)(null),c=a[0],u=a[1],s=(0,Gn.D)(i,c,{modifiers:[{name:"offset",options:{offset:[0,4]}},Tn],placement:"bottom-start"}),d=s.styles,f=s.attributes;return{menuRef:(0,wn.l)(e,u),menuAnchorRef:o,styles:d.popper,attributes:f.popper}}();return(0,o.BX)(o.HY,{children:[(0,o.BX)(Le.G,{css:An.root,innerRef:n.menuAnchorRef,children:[(0,o.tZ)(Le.G,{css:An.icon,children:e.fileType===f.Tv.Directory?(0,o.tZ)(hn.Z,{}):(0,o.tZ)(pn.Z,{path:e.value})}),(0,o.tZ)("input",{autoFocus:!0,id:e.id,ref:e.inputRef,css:e.loading?An.inputLoading:An.input,value:e.value,onChange:e.loading?void 0:e.onChange,onKeyDown:e.onKeyDown,onBlur:e.onBlur})]}),(0,o.tZ)(Rn.h,{children:(0,o.tZ)(In.T,(0,kn.Z)((0,Cn.Z)({css:An.menu,elevated:!0,innerRef:n.menuRef,style:(0,kn.Z)((0,Cn.Z)({},n.styles),{display:e.error?"block":"none"})},n.attributes),{children:e.error?(0,o.tZ)(Bn,{message:e.error}):null}))})]})}var Nn=(0,Ne.X)({createFilePicker:[Ue.l0.align.center,Ue.l0.rowWithGap(4),{fontSize:Ve.fontSize,paddingRight:Ve.horizontalPadding,paddingLeft:Ve.horizontalPadding}],button:[Ue.l0.reset.button,Ue.l0.p(2),Zn.gU.filled,Ue.l0.color.foregroundDimmer,{fontSize:"inherit"}],text:[$e,Ue.l0.color.foregroundDimmest],label:[Ue.l0.visuallyHidden]});function Ln(e){var n=function(e){var n,t,r,i=Be(me),o=Be(ge),a=Be(ye),c=(0,l.useState)(""),u=c[0],s=c[1],d=Ae(z),p=(0,l.useState)(!1),v=p[0],m=p[1],g=(0,l.useState)(null),y=g[0],Z=g[1],b=(0,We.Z)((function(){return(0,D.kv)(te,(function(n){return n.get(e)}))}),[e]),w=(0,We.Z)((function(){return(0,D.kv)(b,(function(e){return null!==(n=null===e||void 0===e?void 0:e.create)&&void 0!==n?n:null}))}),[b]),x=_e((0,We.Z)((function(){return(0,D.kv)(b,(function(e){return null!==(t=null===e||void 0===e?void 0:e.children)&&void 0!==t?t:null}))}),[b])),C=_e(w),k=(0,Fe.Z)({fileType:C,siblings:x,value:u}),S=(0,We.Z)((function(){return(0,Ce.Z)((function(){var n,t,r,i,o,l,c,u;return(0,ke.__generator)(this,(function(s){switch(s.label){case 0:return(t=k.current).fileType&&t.value?(i=(0,Ke.z)({fileName:t.value,siblingNames:null!==(r=null===(n=t.siblings)||void 0===n?void 0:n.map((function(e){return e.filename})))&&void 0!==r?r:[],parentPath:e}))?(Z(i),[2]):(o=e===h.Ql?null:e+"/",l=o?o+t.value:t.value,c=d().fs,m(!0),t.fileType!==f.Tv.Directory?[3,2]:[4,c.createDir(l)]):[2];case 1:return u=s.sent(),[3,4];case 2:return[4,c.writeFile(l,new Ye.Z(""))];case 3:u=s.sent(),s.label=4;case 4:return u.error?(Z("Something went wrong"),[2]):(m(!1),a({parentPath:e,path:l,fileType:t.fileType}),[2])}}))}))}),[e,d,a,k]);return{value:u,setValue:s,fileType:C,create:S,creating:v,error:y||(0,Ke.z)({fileName:u,siblingNames:null!==(r=null===x||void 0===x?void 0:x.map((function(e){return e.filename})))&&void 0!==r?r:[],parentPath:e}),cancel:(0,We.Z)((function(){return function(){return o(e)}}),[e,o]),start:(0,We.Z)((function(){return function(n){return i({parentPath:e,fileType:n})}}),[e,i])}}(e.dir),t=(0,xn.H)()("filename");return n.fileType?(0,o.BX)(o.HY,{children:[(0,o.tZ)("label",{css:Nn.label,htmlFor:t,children:"file name"}),(0,o.tZ)(Un,{id:t,loading:n.creating,error:n.error,value:n.value,fileType:n.fileType,onBlur:function(){n.cancel()},onChange:function(e){n.setValue(e.currentTarget.value)},onKeyDown:function(e){"Escape"!==e.key?"Enter"===e.key&&n.create():n.cancel()}})]}):(0,o.BX)(Le.G,{css:Nn.createFilePicker,children:[(0,o.tZ)(Le.G,{css:Nn.text,children:"Add a"}),(0,o.tZ)(Le.G,{tag:"button",css:Nn.button,onClick:function(){return n.start(f.Tv.File)},children:"file"}),(0,o.tZ)(Le.G,{css:Nn.text,children:"or "}),(0,o.tZ)(Le.G,{tag:"button",css:Nn.button,onClick:function(){return n.start(f.Tv.Directory)},children:"folder"})]})}var Xn=t(44945),Mn=t(24497),On=t(64174),Fn=t(53849),Wn=t(6191),Hn=t(30826),zn=t.n(Hn),Vn=t(6490),jn=t(10422),qn=(0,c.cn)(0),$n=(0,c.cn)(null),Yn=(0,c.cn)((function(e){var n=e(U),t=e($n);if(null!==t){var r=n.get(t);if(0!==(null===r||void 0===r?void 0:r.depth)||"dir"===r.row.type)return function(e,n){var t=e.get(n);if(!t)return null;var r=0,i=t.height,o="dir"===t.row.type?t.depth+1:t.depth;if("dir"===t.row.type)o=t.depth+1,r=t.y;else{o=t.depth;for(var a=n-1;a>=0;a--){var l=e.get(a);if(!l)break;if("dir"===l.row.type&&("file"===t.row.type||"upload"===t.row.type?E(l.row.path,t.row.path):l.row.path===t.row.dir)){i+=l.height,r=l.y;break}l.depth>=t.depth&&(i+=l.height)}}for(var c=n+1;c<e.size;c++){var u=e.get(c);if(!u)break;if(u.depth<=("dir"===t.row.type?t.depth:t.depth-1))break;i+=u.height}return{y:r,height:i,depth:o}}(n,t)}return e(ct)?{y:0,depth:1,height:e(P).height-8}:null})),Kn="(".concat(Ve.dropPreviewDepth," - 1) * ").concat(Ve.gutterWidth),Qn=(0,Ne.X)({root:[Ue.l0.position.absolute,Ue.l0.top(0),Ue.l0.left(0),Ue.l0.borderRadius(8),{pointerEvents:"none",transform:"translate(calc(".concat(Kn,"), ").concat(Ve.dropPreviewY,")"),width:"calc(100% - ".concat(Kn,")"),height:Ve.dropPreviewHeight,outline:"1px dashed "+Ue.TV.accentPrimaryDefault,outlineOffset:-1}]}),Jn=(0,l.memo)((function(){var e,n,t,i=Pe(Yn),a=(0,l.useRef)(null);return(0,Xe.jv)(a,i,(function(i){var o;return o={},(0,r.Z)(o,ze.dropPreviewY,(null!==(e=null===i||void 0===i?void 0:i.y)&&void 0!==e?e:0)+"px"),(0,r.Z)(o,ze.dropPreviewHeight,(null!==(n=null===i||void 0===i?void 0:i.height)&&void 0!==n?n:0)+"px"),(0,r.Z)(o,ze.dropPreviewDepth,null!==(t=null===i||void 0===i?void 0:i.depth.toString())&&void 0!==t?t:"0"),o})),(0,o.tZ)(Le.G,{innerRef:a,css:Qn.root})})),et=(0,c.cn)(null,(function(e,n,t){if(null!==t){var r=!0,i=!1,o=void 0;try{for(var l,c=e(U)[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=(0,a.Z)(l.value,2),s=u[0],d=u[1];if(!(t.y<d.y)&&!(t.y>d.y+d.height))return n($n,s),d}}catch(f){i=!0,o=f}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}n($n,null)}})),nt=Xn.z.object({type:Xn.z.literal("nodes"),width:Xn.z.number(),height:Xn.z.number(),nodes:Xn.z.array(Xn.z.object({path:Xn.z.string(),type:Xn.z.nativeEnum(f.Tv)}))});function tt(){var e=Be(et),n=Be($n),t=(0,l.useRef)(null),r=(0,l.useRef)(null),i=(0,l.useRef)(null),o=Ae(qn),c=Be(Re),u=Be(Te),s=(0,l.useRef)(null),d=Ae(te),p=Ae(N),m=Be(P),g=Be(pe),y=_e(V),Z=(0,a.Z)((0,Mn.L)((function(){return{accept:[f.Tv.File,f.Tv.Directory,Wn.FILE],canDrop:function(){return!0},hover:function(n,r){var a=i.current;if(a){var l=r.getClientOffset();if(l){var c,u=e({x:l.x-a.x,y:l.y-a.y+o()});u?"file"===u.row.type||"upload"===u.row.type?t.current=(0,v.Il)(u.row.path)||h.Ql:"dir"===u.row.type?t.current=u.row.path:t.current=u.row.dir:t.current=p();var f="nodes"!==n.type||(0,v.RQ)(n.nodes).every((function(e){return Se(e,null!==(c=t.current)&&void 0!==c?c:p())}));if("dir"===(null===u||void 0===u?void 0:u.row.type)){var m=u.row.path;if(s.current){if(s.current.dir===m)return;clearTimeout(s.current.timer),s.current=null}if(f){var y=setTimeout((function(){var e;(null===(e=d().get(m))||void 0===e?void 0:e.expanded)||g(m)}),200);s.current={dir:m,timer:y}}}else s.current&&(clearTimeout(s.current.timer),s.current=null)}}},drop:function(e,n){var r,i=null!==(r=t.current)&&void 0!==r?r:p();if("nodes"===e.type)return u({to:i,nodes:e.nodes}),void(t.current=null);e.dirContent.then((function(e){c({parentPath:i===h.Ql?void 0:i,files:e.filter(Boolean)})})),t.current=null},collect:function(e){return{isOver:e.isOver()}}}}),[]),2),b=Z[0].isOver,w=Z[1];(0,l.useEffect)((function(){if(b){var e,o=null===(e=r.current)||void 0===e?void 0:e.getBoundingClientRect();return i.current=o?{x:o.x,y:o.y}:null,void(o&&m({width:o.width,height:o.height}))}s.current&&(clearTimeout(s.current.timer),s.current=null),t.current=null,n(null)}),[b,n,m]);var x=Be(qn);return(0,l.useEffect)((function(){var e=r.current;if(e){var n=zn()((function(){x(e.scrollTop)}),200);return e.addEventListener("scroll",n),function(){n.cancel(),e.removeEventListener("scroll",n)}}}),[x]),{isOver:b,dropRef:y?void 0:w,containerRef:r}}var rt=(0,c.cn)(null,(function(e,n,t){n(Ze,(function(e){return(0,p.ZP)(e,(function(e){e.set(t.path,t.type)}))}));var r=[t];if(e(we))return r;var i=!0,o=!1,l=void 0;try{for(var c,u=e(Ze)[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var s=(0,a.Z)(c.value,2),d=s[0],f=s[1];d!==t.path&&r.push({path:d,type:f})}}catch(h){o=!0,l=h}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}return r}));function it(e){var n=Be($n),t=Be(rt),r=_e(V),i=(0,l.useRef)(null),o=(0,a.Z)((0,On.c)({type:e.type,item:function(){var n,r,o=t(e),a=null!==(r=null===(n=i.current)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==r?r:{width:160,height:32};return{nodes:o,type:"nodes",width:a.width,height:a.height}},collect:function(n){var t=n.getItem();return{isDragging:Boolean("nodes"===(null===t||void 0===t?void 0:t.type)&&t.nodes.some((function(n){return n.path===e.path})))}},end:function(){n(null)}}),3),c=o[0],u=o[1],s=o[2],d=c.isDragging;return(0,Vn.K)(s),{isDragging:d,dragRef:r?void 0:u,sizeRef:i}}var ot=(0,Ne.X)({root:[Ue.l0.position.absolute,{left:0,top:0,transform:"translate(".concat(Ve.dragPreviewX,", ").concat(Ve.dragPreviewY,")"),pointerEvents:"none"}],item:[Ue.l0.backgroundColor.backgroundHighest,Ue.l0.flex.row,Ue.l0.align.center,Ue.l0.shadow(3),je,{height:Ve.rowHeight,borderRadius:Ve.borderRadius}],icon:[qe,{marginRight:Ve.iconTextGap}],text:[$e,Ue.l0.flex.growAndShrink(1),{color:Ve.statusColor}],count:[$e,Ue.l0.backgroundColor.accentPrimaryDimmest,Ue.l0.color.accentPrimaryStrongest,Ue.l0.fontWeight.medium,Ue.l0.position.absolute,Ue.l0.left("calc(50% - 4px)"),Ue.l0.top("calc(100% - 4px)"),Ue.l0.borderRadius("full"),Ue.l0.px(4),Ue.l0.center,{fontSize:Ve.fontSizeSmall}]}),at=(0,l.memo)((function(e){var n=(0,l.useRef)(null),t=rn(),i=Pe(lt);return(0,Xe.jv)(n,i,(function(e){var n;return n={},(0,r.Z)(n,ze.dragPreviewX,(e?e.x:0)+"px"),(0,r.Z)(n,ze.dragPreviewY,(e?e.y:0)+"px"),n})),(0,Xe.jv)(n,t.horizontalPadding,(function(e){return(0,r.Z)({},ze.horizontalPadding,e+"px")})),(0,Xe.jv)(n,t.fontSize,(function(e){return(0,r.Z)({},ze.fontSize,e+"px")})),(0,Xe.jv)(n,t.fontSizeSmall,(function(e){return(0,r.Z)({},ze.fontSizeSmall,e+"px")})),(0,Xe.jv)(n,t.iconSize,(function(e){return(0,r.Z)({},ze.iconSize,e+"px")})),(0,Xe.jv)(n,t.iconTextGap,(function(e){return(0,r.Z)({},ze.iconTextGap,e+"px")})),(0,Xe.jv)(n,t.borderRadius,(function(e){return(0,r.Z)({},ze.borderRadius,e+"px")})),(0,Xe.jv)(n,t.gutterWidth,(function(e){return(0,r.Z)({},ze.gutterWidth,e+"px")})),(0,o.tZ)(Le.G,{innerRef:n,css:ot.root,children:(0,o.BX)(Le.G,{css:ot.item,style:{width:e.width,height:e.height},children:[(0,o.tZ)(Le.G,{css:ot.icon,children:e.type===f.Tv.File?(0,o.tZ)(pn.Z,{path:e.path}):(0,o.tZ)(hn.Z,{})}),(0,o.tZ)(Le.G,{css:ot.text,children:(0,v.UO)(e.path)}),e.count>1?(0,o.tZ)(Le.G,{css:ot.count,children:e.count}):null]})})})),lt=(0,c.cn)(null),ct=(0,c.cn)((function(e){return null!==e(lt)}));function ut(){var e=(0,Fn.f)((function(e){return{item:e.getItem(),isDragging:e.isDragging(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset()}})),n=e.isDragging,t=e.item,r=e.currentOffset,i=Be(lt);if((0,l.useEffect)((function(){i(r?{x:r.x,y:r.y}:null)}),[i,r]),!n)return null;var c=nt.safeParse(t);if(!c.success)return null;var u=c.data,s=u.nodes,d=u.width,f=u.height,p=(0,a.Z)(s,1)[0];return p?(0,jn.createPortal)((0,o.tZ)(at,{type:p.type,path:p.path,count:s.length,width:d,height:f}),document.body):null}var st=(0,Ne.X)({root:[{marginLeft:"auto",paddingLeft:Ve.horizontalPadding}],svg:[{transform:"rotate(-90deg)",transformOrigin:"center center","& .inner-cirlce":{strokeDashoffset:Ve.strokeDashoffset}}]});function dt(e){var n=_e(j)/2,t=n/2,i=2*t*Math.PI,a=(0,l.useRef)(null);return(0,Xe.jv)(a,e.progress,(function(e){return(0,r.Z)({},ze.strokeDashoffset,(i-e*i).toString())})),(0,o.tZ)(Le.G,{innerRef:a,css:st.root,children:(0,o.BX)("svg",{css:st.svg,height:2*n,width:2*n,children:[(0,o.tZ)("circle",{fill:Ue.TV.backgroundHigher,r:n,cx:n,cy:n}),(0,o.tZ)("circle",{className:"inner-cirlce",stroke:Ue.TV.foregroundDimmest,fill:"transparent",strokeWidth:n,strokeDasharray:i+" "+i,r:t,cx:n,cy:n})]})})}var ft=t(81202),pt=t.n(ft),ht=t(74008),vt=t(75986),mt={color:Ve.statusColor,fontSize:Ve.fontSizeSmall,minWidth:Ve.dirStatusIconSize,height:Ve.dirStatusIconSize},gt=(0,Ne.X)({fileIcon:[Ue.l0.fontWeight.bold,Ue.l0.px(2),Ue.l0.center,mt],directoryCountIcon:[Ue.l0.fontWeight.medium,Ue.l0.borderRadius(4),Ue.l0.px(2),Ue.l0.center,mt,{backgroundColor:Ve.statusBackgroundColor}]});function yt(e){return(0,o.tZ)(Le.G,{css:gt.fileIcon,children:(0,o.tZ)(Le.G,{children:e.text})})}function Zt(e){return(0,o.tZ)(Le.G,{css:gt.directoryCountIcon,children:(0,o.tZ)(Le.G,{children:e.count})})}function bt(e){return _e((0,We.Z)((function(){return(0,D.kv)(L,(function(n){return n?function(e,n){var t=null===e||void 0===e?void 0:e.get(n);if(!t)return null;var r=null;return t.worktree!==ht.h.UNMODIFIED?r=t.worktree:t.index!==ht.h.UNMODIFIED&&(r=t.index),r&&(0,vt.QO)(r)?{color:vt.$_[r],text:vt.fL[r]}:null}(n,e):null}),pt())}),[e]))}function wt(e){var n=(0,We.Z)((function(){return(0,D.kv)(L,(function(n){return n?function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=(0,a.Z)(l.value,2),s=u[0],d=u[1],f=d.index,p=d.worktree;(0,b.yr)(n,s)&&t.push({path:s,index:f,worktree:p})}}catch(m){i=!0,o=m}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}if(0===t.length)return null;var h=t.every((function(e){return e.index===ht.h.ADDED||e.worktree===ht.h.UNTRACKED}))?ht.h.ADDED:ht.h.MODIFIED;if(!(0,vt.QO)(h))return null;var v=t.length;return{color:vt.$_[h],backgroundColor:vt.Oq[h],count:v}}(n,e):null}),pt())}),[e]);return _e(n)}var xt=(0,Ne.X)({text:[$e,Ue.l0.color.foregroundDimmest],label:[Ue.l0.visuallyHidden]});function Ct(e){var n=(0,a.Z)(function(e){var n,t=Ae(z),r=(0,l.useState)(null),i=r[0],o=r[1],a=(0,v.Il)(e.path),c=(0,v.UO)(e.path),u=Be(X),s=Be(A),d=(0,l.useState)(c),p=d[0],m=d[1],g=(0,l.useState)(!1),y=g[0],Z=g[1],b=(0,We.Z)((function(){return(0,D.kv)(te,(function(e){var n;return null===(n=e.get(a||h.Ql))||void 0===n?void 0:n.children}))}),[a]),w=p!==c,x=_e(b),C=w?(0,Ke.z)({fileName:p,siblingNames:null!==(n=null===x||void 0===x?void 0:x.map((function(e){return e.filename})))&&void 0!==n?n:[],parentPath:a}):null,k=Boolean(p)&&w&&!C,S=function(){var n=(0,Ce.Z)((function(){var n,r,i,l;return(0,ke.__generator)(this,(function(c){switch(c.label){case 0:return k?(Z(!0),r=(n=a?a+"/":null)?n+p:p,i=t().fs,e.type!==f.Tv.Directory?[3,2]:[4,i.moveDir(e.path,r)]):[2];case 1:return l=c.sent(),[3,4];case 2:return[4,i.moveFile(e.path,r)];case 3:l=c.sent(),c.label=4;case 4:return l.error?(o("Something went wrong"),Z(!1),[2]):(u(null),s(r),[2])}}))}));return function(){return n.apply(this,arguments)}}();return[{canRename:k,value:p,renaming:y,error:i||C},{setValue:m,rename:S,cancel:function(){u(null),s(e.path)}}]}({path:e.path,type:e.fileType}),2),t=n[0],r=n[1],i=r.setValue,c=r.rename,u=r.cancel,s=(0,xn.H)()("filename"),d=(0,l.useRef)(null),p=(0,l.useRef)(t.value);return(0,l.useEffect)((function(){if(d.current){var e=p.current;if(e){var n=e.lastIndexOf(".");-1===n&&(n=e.length),d.current.setSelectionRange(0,n)}}}),[]),(0,o.BX)(o.HY,{children:[(0,o.tZ)("label",{css:xt.label,htmlFor:s,children:"file name"}),(0,o.tZ)(Un,{id:s,inputRef:d,loading:t.renaming,error:t.error,value:t.value,fileType:e.fileType,onBlur:function(){t.canRename?c():t.error||u()},onChange:function(e){i(e.currentTarget.value)},onKeyDown:function(e){"Escape"!==e.key?"Enter"===e.key&&(t.canRename?c():t.error||u()):u()}})]})}var kt=[Ue.l0.position.absolute,Ue.l0.top(0),Ue.l0.left(0),{width:"calc(100% - ".concat(Ve.rowLeftIndent,")"),height:Ve.rowHeight,transform:"translateY(".concat(Ve.rowY,")"),marginLeft:Ve.rowLeftIndent}],St=(0,Ne.X)({divider:(0,i.Z)(kt).concat([je,Ue.l0.flex.growAndShrink(1),Ue.l0.justify.end,{paddingBottom:2}]),dividerInner:[Ue.l0.truncate,Ue.l0.color.foregroundDimmer,{paddingTop:"1%",borderTop:"1px dashed",borderColor:Ue.TV.outlineDimmest,fontSize:Ve.fontSizeSmall}],error:(0,i.Z)(kt).concat([Ue.l0.rowWithGap(4),Ue.l0.align.center,je]),emptyDir:(0,i.Z)(kt).concat([je,Ue.l0.color.foregroundDimmest,Ue.l0.justify.center,{paddingLeft:Ve.iconSize,paddingRight:Ve.horizontalPadding}]),row:(0,i.Z)(kt).concat([je,Ue.l0.flex.growAndShrink(1),Ue.l0.flex.row,Ue.l0.align.center,Zn.gU.nofill,{backgroundColor:Ve.nodeBackgroundColor,borderRadius:Ve.borderRadius,opacity:.6,cursor:"pointer","&:hover":{opacity:1},"&:focus":{boxShadow:"0 0 0 2px "+Ue.TV.accentPrimaryDefault}}]),createRow:(0,i.Z)(kt).concat([Ue.l0.justify.center]),icon:[qe,{marginRight:Ve.iconTextGap}],fileInput:[Ue.l0.flex.row,Ue.l0.align.center],text:[$e,Ue.l0.flex.growAndShrink(1),{color:Ve.statusColor}]});function Tt(e){var n=function(e){var n=(0,We.Z)((function(){var n;return(0,c.cn)((function(t){return null!==(n=t(_).get(e))&&void 0!==n?n:null}))}),[e]);return _e(n)}(e.path);return(null===n||void 0===n?void 0:n.length)?(0,o.tZ)(gn.Z,{activeUsers:n}):null}function Et(e){var n,t=(n=e.path,_e((0,We.Z)((function(){return(0,c.cn)((function(e){var t=[],r=!0,o=!1,l=void 0;try{for(var c,u=e(_)[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var s,d=(0,a.Z)(c.value,2),f=d[0],p=d[1];if(!(0,b.yr)(n,f))return;(s=t).push.apply(s,(0,i.Z)(p))}}catch(h){o=!0,l=h}finally{try{r||null==u.return||u.return()}finally{if(o)throw l}}return t.length?t:null}))}),[n])));return(null===t||void 0===t?void 0:t.length)?(0,o.tZ)(gn.Z,{activeUsers:t}):null}var Rt=(0,l.memo)((function(e){var n,t=un(e.index),i=an(e.path),a=on(e.path),l=dn(),c=ln(e.path),u=function(e){var n=Be(en);return(0,We.Z)((function(){return function(t){n({event:t,path:e})}}),[n,e])}(e.path),s=sn(e.path),d=e.path===h.Ql&&a?Z:(0,v.UO)(e.path),p=it({path:e.path,type:f.Tv.Directory}),m=p.dragRef,g=p.sizeRef,y=p.isDragging,b=wt(e.path),w=fn(e.path);return(0,Xe.jv)(t,w,(function(e){return(0,r.Z)({},ze.nodeBackgroundColor,e?Ue.TV.backgroundHigher:"transparent")})),(0,o.BX)(Le.G,{style:(n={},(0,r.Z)(n,ze.statusColor,null===b||void 0===b?void 0:b.color),(0,r.Z)(n,ze.statusBackgroundColor,null===b||void 0===b?void 0:b.backgroundColor),(0,r.Z)(n,"opacity",y?.1:void 0),n),tabIndex:c,role:"treeitem","aria-expanded":i,css:St.row,innerRef:(0,wn.l)(t,s,g,e.pending?void 0:m),onClick:e.pending?void 0:u,onKeyDown:e.pending?void 0:function(n){"Enter"===n.key&&l(e.path)},children:[(0,o.tZ)(Le.G,{css:St.icon,children:a?(0,o.tZ)(mn.Z,{}):(0,o.tZ)(o.HY,{children:i?(0,o.tZ)(vn.Z,{}):(0,o.tZ)(hn.Z,{})})}),(0,o.tZ)(Le.G,{css:St.text,children:d}),b?(0,o.tZ)(Zt,{count:b.count}):null,i?null:(0,o.tZ)(Et,{path:e.path})]})})),It=(0,l.memo)((function(e){var n=un(e.index),t=function(e){var n=Ae(z),t=Be(xe);return(0,We.Z)((function(){return{onClick:function(r){var i=n(),o=i.onFileSelect,a=i.multiselectModifierKey;o({path:e,event:r,type:"click"}),t({node:{path:e,type:f.Tv.File},mode:a?Je(r,a):void 0})},onDoubleClick:function(t){var r=n().onFileDoubleClick;null===r||void 0===r||r(t,e)}}}),[e,n,t])}(e.path),i=t.onClick,a=t.onDoubleClick,l=ln(e.path),c=dn(),u=sn(e.path),s=(0,v.UO)(e.path),d=it({path:e.path,type:f.Tv.File}),p=d.dragRef,h=d.sizeRef,m=d.isDragging,g=fn(e.path);(0,Xe.jv)(n,g,(function(e){return(0,r.Z)({},ze.nodeBackgroundColor,e?Ue.TV.backgroundHigher:"transparent")}));var y,Z=bt(e.path);return(0,o.BX)(Le.G,{style:(y={},(0,r.Z)(y,ze.statusColor,null===Z||void 0===Z?void 0:Z.color),(0,r.Z)(y,"opacity",m?.1:void 0),y),tabIndex:l,css:St.row,innerRef:(0,wn.l)(n,u,h,e.pending?void 0:p),role:"treeitem","aria-label":s,onClick:e.pending?void 0:i,onDoubleClick:e.pending?void 0:a,onKeyDown:e.pending?void 0:function(n){"Enter"===n.key&&c(e.path)},children:[(0,o.tZ)(Le.G,{css:St.icon,children:(0,o.tZ)(pn.Z,{path:e.path})}),(0,o.tZ)(Le.G,{css:St.text,children:s}),Z?(0,o.tZ)(yt,{text:Z.text}):null,(0,o.tZ)(Tt,{path:e.path})]})})),Gt=(0,l.memo)((function(e){var n=un(e.index);return(0,o.tZ)(Le.G,{css:St.divider,innerRef:n,role:"treeitem",children:(0,o.tZ)(Le.G,{css:St.dividerInner,children:e.label})})})),Dt=(0,l.memo)((function(e){var n=un(e.index);return(0,o.BX)(Le.G,{css:St.error,innerRef:n,role:"treeitem",children:[(0,o.tZ)(yn.Z,{}),(0,o.tZ)(bn.xv,{children:e.message})]})})),_t=(0,l.memo)((function(e){var n=un(e.index);return(0,o.tZ)(Le.G,{css:St.emptyDir,innerRef:n,role:"treeitem",children:(0,o.tZ)(Le.G,{css:St.text,children:y})})})),Pt=(0,l.memo)((function(e){var n=un(e.index);return(0,o.tZ)(Le.G,{css:St.createRow,innerRef:n,role:"treeitem",children:(0,o.tZ)(Ln,{dir:e.dir})})})),Bt=(0,l.memo)((function(e){var n=un(e.index),t=(0,v.UO)(e.path);return(0,o.tZ)(Le.G,{css:St.createRow,innerRef:n,role:"treeitem","aria-label":t,children:(0,o.tZ)(Ct,{path:e.path,fileType:e.fileType})})})),At=(0,l.memo)((function(e){var n=un(e.index),t=(0,v.UO)(e.path);return(0,o.BX)(Le.G,{css:St.row,innerRef:n,role:"treeitem","aria-label":t,children:[(0,o.tZ)(Le.G,{css:St.icon,children:(0,o.tZ)(pn.Z,{path:e.path})}),(0,o.tZ)(Le.G,{css:St.text,children:t}),(0,o.tZ)(dt,{progress:e.progress})]})})),Ut=(0,l.memo)((function(e){var n=tn(e.index);return n?"error"===n.type?(0,o.tZ)(Dt,{index:e.index,message:n.message}):"divider"===n.type?(0,o.tZ)(Gt,{index:e.index,label:n.label}):"emptyDir"===n.type?(0,o.tZ)(_t,{index:e.index}):"create"===n.type?(0,o.tZ)(Pt,{index:e.index,dir:n.dir}):"upload"===n.type?(0,o.tZ)(At,{index:e.index,path:n.path,progress:n.progress}):n.rename?(0,o.tZ)(Bt,{index:e.index,path:n.path,fileType:"file"===n.type?f.Tv.File:f.Tv.Directory}):"file"===n.type?(0,o.tZ)(It,{index:e.index,path:n.path,pending:Boolean(n.pending)}):(0,o.tZ)(Rt,{index:e.index,path:n.path,pending:Boolean(n.pending)}):null})),Nt=[Ve.horizontalPadding,Ve.rowLeftIndent,Ve.iconSize,Ve.iconTextGap].join(" + "),Lt=(0,Ne.X)({root:[Ue.l0.overflow("hidden"),Ue.l0.height(0),{pointerEvents:"none"}],file:[{paddingLeft:"calc(".concat(Nt,")"),paddingRight:Ve.horizontalPadding}]}),Xt=(0,l.memo)((function(){var e=_e(ve);return e?(0,o.tZ)(Le.G,{css:Lt.root,children:e.map((function(e){var n=e.type,t=e.text,i=e.depth,a=(0,r.Z)({},ze.rowLeftIndent,"calc(".concat(i," * ").concat(Ve.gutterWidth,")")),l=n+i;return"divider"===n?(0,o.tZ)(Le.G,{style:a,css:St.dividerInner,children:(0,o.tZ)(bn.xv,{css:St.dividerInner,children:t.toUpperCase()})},l):(0,o.tZ)(Le.G,{css:Lt.file,style:a,children:(0,o.tZ)(Le.G,{css:St.text,children:t.toUpperCase()})},l)}))}):null})),Mt=t(12018),Ot=(0,Ne.X)({content:[Ue.l0.p(2),Ue.l0.position.relative,{overflowY:"auto",height:"100%",minHeight:Ve.minHeight}],scroll:[{position:"relative",height:Ve.scrollHeight}],root:[Ue.l0.rowWithGap(0),Ue.l0.align.center],gutter:[Ue.l0.position.absolute,Ue.l0.top(0),Ue.l0.left(0),Ue.l0.reset.button,Ue.l0.align.end,Ue.l0.cursor.pointer,{width:Ve.gutterWidth,"& > div":[Ue.l0.height("100%"),Ue.l0.width(1),{marginRight:"25%",opacity:.2,backgroundColor:Ue.TV.foregroundDimmest}],"&:hover > div":{backgroundColor:Ue.TV.accentPrimaryDefault,opacity:1}}]}),Ft=(0,l.memo)((function(e){var n=_e(U),t=rn();(0,Xe.jv)(e.scrollRef,t.fontSize,(function(e){var n;return n={},(0,r.Z)(n,ze.fontSize,e+"px"),(0,r.Z)(n,ze.dirStatusIconSize,e+"px"),n})),(0,Xe.jv)(e.scrollRef,t.fontSizeSmall,(function(e){return(0,r.Z)({},ze.fontSizeSmall,e+"px")})),(0,Xe.jv)(e.scrollRef,t.iconSize,(function(e){return(0,r.Z)({},ze.iconSize,e+"px")})),(0,Xe.jv)(e.scrollRef,t.iconTextGap,(function(e){return(0,r.Z)({},ze.iconTextGap,e+"px")})),(0,Xe.jv)(e.scrollRef,t.horizontalPadding,(function(e){return(0,r.Z)({},ze.horizontalPadding,e+"px")})),(0,Xe.jv)(e.scrollRef,t.borderRadius,(function(e){return(0,r.Z)({},ze.borderRadius,e+"px")})),(0,Xe.jv)(e.scrollRef,t.scrollHeight,(function(e){return(0,r.Z)({},ze.scrollHeight,e+"px")})),(0,Xe.jv)(e.scrollRef,t.gutterWidth,(function(e){return(0,r.Z)({},ze.gutterWidth,e+"px")})),(0,Xe.jv)(e.scrollRef,t.minHeight,(function(e){return(0,r.Z)({},ze.minHeight,e+"px")}));var a=Be(ce),l=tt(),c=l.dropRef,u=l.containerRef;return(0,o.BX)(Le.G,{css:Ot.content,innerRef:(0,wn.l)(e.scrollRef,c,u),onKeyDown:a,children:[(0,o.tZ)(Xt,{}),(0,o.BX)(Le.G,{css:Ot.scroll,role:"tree",children:[(0,i.Z)(n.values()).map((function(e){var n=e.key,t=e.index;return(0,o.tZ)(Ut,{index:t},n)})),(0,o.tZ)(Ht,{}),(0,o.tZ)(Jn,{}),(0,o.tZ)(ut,{})]})]})})),Wt=(0,l.memo)((function(){var e=cn().scrollRef;return(0,o.tZ)(Ft,{scrollRef:e})})),Ht=(0,l.memo)((function(){var e=_e(F),n=Be(de);return(0,o.tZ)(o.HY,{children:e.map((function(e){return(0,o.tZ)(Le.G,{tag:"button",onClick:function(){return n(e.dir)},css:Ot.gutter,style:{height:e.height,transform:"translate(calc(".concat(e.depth," * ").concat(Ve.gutterWidth,"), ").concat(e.y,"px)")},children:(0,o.tZ)(Le.G,{})},"gutter"+e.dir+e.depth)}))})}));function zt(e){return function(e){var n=(0,l.useState)((function(){var n,t=(0,c.MT)();t.set(z,e);var r=null!==(n=e.root)&&void 0!==n?n:h.Ql,i=new Map([[r,{path:r,expanded:!0}]]);return t.set(te,i),t.set(pe,r),e.focusedPath&&t.set(A,e.focusedPath),{store:t,create:function(e){var n,i,o=null!==(i=null===(n=t.get(be))||void 0===n?void 0:n.path)&&void 0!==i?i:r;t.set(me,{parentPath:o,fileType:e})},setPresenceState:function(e){t.set(_,e)},setFileStatus:function(e){t.set(L,e)},rename:function(e){t.set(M,e)},move:function(e){t.set(Te,e)},upload:function(e){t.set(Re,e)}}})),t=n[0];return(0,l.useEffect)((function(){t.store.set(z,e)}),[t.store,e]),(0,l.useEffect)((function(){return function(){var e=!0,n=!1,r=void 0;try{for(var i,o=t.store.get(te)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var l,c=(0,a.Z)(i.value,2),u=(c[0],c[1]);null===(l=u.disposeWatcher)||void 0===l||l.call(u)}}catch(s){n=!0,r=s}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}}),[t.store]),t}(e)}function Vt(e){return(0,o.tZ)(Ge,{store:e.store,children:(0,o.tZ)(Wt,{})})}function jt(){return(0,Mt.P5)({controlName:"flag-virtualized-filetree"})}},52298:function(e,n,t){var r=t(4541),i=(t(50959),t(35021)),o=t(55544),a=t(98260),l=t(25776),c=t(94370),u=t(17772),s=t(22167);n.Z=function(e){var n=e.isOpen,t=(0,c.useRouter)();return(0,r.tZ)(i.u,{preventClose:!0,isOpen:n,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(l.G,{css:[s.l0.colWithGap(32)],children:[(0,r.BX)(l.G,{css:[s.l0.rowWithGap(16),s.l0.align.center],children:[(0,r.tZ)(u.Z,{size:24,css:[s.l0.color.orangeStrongest]}),(0,r.tZ)(o.h4,{css:[{width:"fit-content"}],level:2,variant:"headerDefault",children:"You can\u2019t join this Repl from Firewall Mode."})]}),(0,r.BX)(l.G,{css:[s.l0.pr(32),s.l0.colWithGap(16)],children:[(0,r.tZ)(o.xv,{multiline:!0,children:"This Repl was started by someone not in Firewall Mode. If you would like to join, please do one of the following:"}),(0,r.BX)(l.G,{css:[s.l0.colWithGap(16),s.l0.pl(16)],children:[(0,r.tZ)(o.xv,{children:"\u2022 Exit Firewall Mode."}),(0,r.tZ)(o.xv,{children:"\u2022 Ask the creator to open this Repl in Firewall Mode."})]})]}),(0,r.BX)(l.G,{css:[s.l0.rowWithGap(16),s.l0.justify.end],children:[(0,r.tZ)(a.zx,{text:"Exit Firewall Mode",onClick:function(){window.location.href="https://www.replit.com".concat(t.asPath)}}),(0,r.tZ)(a.zx,{text:"Leave",onClick:function(){t.push("/home","~/")}})]})]})})}},48803:function(e,n,t){t.d(n,{qe:function(){return B},kq:function(){return P},Gb:function(){return _}});var r=t(4541),i=t(95980),o=t.n(i),a=t(37248),l=t(3668),c=t(97774),u=t(22167),s=t(94517),d=t(6897),f=t(98260),p=t(57135),h=t(2272),v=t(96583),m=t(50959),g=t(8189),y=t(1089),Z=t(73758),b=t(85068),w=t(46598),x=t(75214);function C(e){var n=e.filePath,t=e.replLanguage,r=(0,g.Z)(),i=r.fs,o=r.container,a=(0,y.Z)({container:o,service:"format",skip:!b.Z.supportsFormatting(t)}).channel,l=(0,h.Z)(m.useState(!1),2),c=l[0],u=l[1],s=(0,w.Z)().showError,d=function(){return u(!1)};return m.useEffect((function(){if(c&&a){var e=!1,t=null,r=i.watchTextFile(n,{onReady:function(e){!function(e,n){o.apply(this,arguments)}(e.initialContent,e.writeChange)},onChange:function(e){var n=e.changes;t=t?t.compose(n):n},onError:function(){d()},onMoveOrDelete:function(){d()}});return function(){e=!0,r()}}function o(){return(o=(0,p.Z)((function(r,i){var o,l,c,u;return(0,v.__generator)(this,(function(f){switch(f.label){case 0:return e||!a?[2]:0===r.length?(d(),[2]):[4,a.request({file:{path:n,content:Z.Z.from(r).toBuffer()}})];case 1:return o=f.sent(),e?[2]:o.error||!o.file?(s("Failed to format ".concat(n),1500),d(),[2]):0===(l=Z.Z.from(o.file.content).toString()).length||0===(c=(0,x.F)(r,l)).length||0===(u=t?c.map(c,!0):c).length?(d(),[2]):(i(u),d(),[2])}}))}))).apply(this,arguments)}}),[a,n,i,c,s]),m.useEffect(d,[n]),b.Z.supportsFormatting(t)?function(){return u(!0)}:null}var k=t(9970),S=t(31518),T=t(72402),E=t(84736);var R=t(91355);var I=t(35813),G=36,D=function(){return(0,r.BX)("div",{className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[G]]])+" file-header-format-button",children:[(0,r.tZ)("div",{className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[G]]])+" file-header-format-icon",children:(0,r.BX)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16.581 16.428",className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[G]]]),children:[(0,r.tZ)("path",{d:"M13.26.747H3.323A2.569,2.569,0,0,0,.754,3.316h0v9.795a2.569,2.569,0,0,0,2.568,2.57h9.937a2.569,2.569,0,0,0,2.569-2.569h0V3.316A2.569,2.569,0,0,0,13.26.747Z",className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[G]]])+" cls-1"}),(0,r.tZ)("path",{d:"M13.118,11.269a.759.759,0,0,1-.759.759H3.921a.759.759,0,0,1-.759-.759V11.23a.671.671,0,0,1,.689-.653l.07.006h8.438a.671.671,0,0,1,.753.578.7.7,0,0,1,.006.069ZM3.161,5.111V5.073a.759.759,0,0,1,.759-.759h8.439a.759.759,0,0,1,.759.759v.038a.759.759,0,0,1-.759.759H3.921a.759.759,0,0,1-.76-.758ZM3.148,8.2a.759.759,0,0,1,.758-.76H8.4a.759.759,0,0,1,.759.759v.038a.759.759,0,0,1-.759.759H3.907a.759.759,0,0,1-.759-.759Z",className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[G]]])+" cls-2"})]})}),(0,r.tZ)(o(),{id:"3e741e4d889c73d",children:".file-header-format-button.jsx-3e741e4d889c73d .cls-1{fill:var(--foreground-default)}.file-header-format-button.jsx-3e741e4d889c73d .cls-2{fill:var(--background-default)}"}),(0,r.tZ)(o(),{id:"7b5cc3030f1a201a",dynamic:[G],children:".file-header-format-button.__jsx-style-dynamic-selector{padding:0 10px;height:100%;width:".concat(G,"px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;opacity:.7}.file-header-format-button.__jsx-style-dynamic-selector:hover{opacity:1}.file-header-format-icon.__jsx-style-dynamic-selector{height:16px;width:16px;cursor:pointer}")})]})};function _(e){var n=e.filePath,t=e.onComplete,r=(0,I.Z)(),i=C({filePath:n,replLanguage:r}),o=function(e){var n,t=e.filePath,r=(0,S.Z)().preferences,i=(0,g.Z)().fs,o=(0,T.Z)(t),a=Boolean(null===(n=null===o||void 0===o?void 0:o.getServerCapabilities())||void 0===n?void 0:n.documentFormattingProvider),l=(0,m.useState)([]),c=l[0],u=l[1],s=(0,w.Z)(),d=s.showError,f=s.showConfirm;return a?{fn:function(){if(!c.includes(t)){u((function(e){return(0,k.Z)(e).concat([t])}));var e=null,n=function(e){e?d("Sorry, formatting ".concat(t," failed"),1500):f("Formatted ".concat(t," successfully"),1500),a(),u((function(e){return e.filter((function(e){return e!==t}))}))},a=i.watchTextFile(t,{onReady:function(){var i=(0,p.Z)((function(i){var a,l,c,u,s;return(0,v.__generator)(this,(function(d){switch(d.label){case 0:if(a=i.initialContent,l=i.writeChange,!o)throw new Error("LSP client not found");return[4,o.request.format(t,{insertSpaces:r.indentIsSpaces,tabSize:r.indentSize})];case 1:return"error"in(c=d.sent())||c.cancelled?(n(!0),[2]):c.result?(u=(0,E.Z)(c.result,a.toString()),0===(s=e?u.map(e,!0):u).length?(n(),[2]):(l(s),n(),[2])):(n(!0),[2])}}))}));return function(e){return i.apply(this,arguments)}}(),onChange:function(n){var t=n.changes;e=e?e.compose(t):t}})}},isFormatting:c.includes(t)}:null}({filePath:n});return(0,a.Mb)(n)&&(o||i)?{format:function(){!function(e){var n=e.formatWithLsp,t=e.formatWithService,r=e.replLanguage,i=e.filePath,o=(null===n||void 0===n?void 0:n.fn)||t;if(!o)throw new Error("Expected format function");(0,R.j)(R.U3.AUTO_FORMAT_USED,{language:r,extension:(0,a.r6)(i)}),o()}({formatWithLsp:o,formatWithService:i,replLanguage:r,filePath:n}),t&&t()},isFormatting:Boolean(null===o||void 0===o?void 0:o.isFormatting)}:null}var P={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"},B=function(e){var n=e.filePath,t=e.inline,i=e.onComplete,o=e.disableKeyboardShortcut,p=_({filePath:n,onComplete:i});if((0,s.x)(P,{enabled:Boolean(!o&&p),run:function(){null===p||void 0===p||p.format()}}),!p)return null;var h=(0,a.eb)(n);return t?(0,r.tZ)(f.zx,{text:"Format",iconLeft:(0,r.tZ)(d.Z,{}),onClick:function(){return p.format()}}):(0,r.tZ)(l.h,{css:[u.l0.zIndex(1),{alignSelf:"center"}],alt:p.isFormatting?"Formatting ".concat(h,", please wait"):"Format ".concat(h," code"),tooltipPlacement:"left-end",onClick:function(){return p.format()},children:(null===p||void 0===p?void 0:p.isFormatting)?(0,r.tZ)(c.Z,{}):(0,r.tZ)(D,{})})}},86430:function(e,n,t){t.d(n,{e:function(){return y},f:function(){return g}});var r=t(4541),i=t(26673),o=t(77542),a=t(89853),l=t(98260),c=t(22167),u=t(50959),s=t(11122),d=t(54039),f=t(37195),p=t(2884),h=t(91355),v=(0,s.F4)({"0%":{opacity:0,transform:"translateX(8px)"},"10%":{opacity:1,transform:"translateX(0)"},"95%":{opacity:1},"100%":{opacity:0}}),m=(0,a.X)({buttonContainer:[c.l0.position.relative,{transition:"opacity 75ms linear",opacity:1}],button:[c.l0.backgroundColor.backgroundDefault],buttonToast:{position:"absolute",display:"block",bottom:"100%",paddingBottom:c.TV.space4,paddingRight:c.TV.space8,animation:"".concat(v," 3s"),fontFamily:c.TV.fontFamilyDefault,fontSize:c.TV.fontSizeDefault,whiteSpace:"nowrap",userSelect:"none"}}),g=function(e){var n=e.code,t=(0,u.useState)(!1),i=t[0],o=t[1];return(0,r.BX)("div",{css:m.buttonContainer,children:[i?(0,r.tZ)("span",{css:m.buttonToast,onAnimationEnd:function(){requestAnimationFrame((function(){o(!1)}))},"aria-hidden":!0,children:"Copied!"}):null,(0,r.tZ)(l.zx,{css:m.button,text:"Copy",small:!0,iconLeft:(0,r.tZ)(p.Z,{}),onClick:function(){(0,h.j)(h.U3.GHOSTWRITER_CHAT_CODE_COPIED),(0,f.Z)(n),o(!0)}})]})},y=function(e){var n=e.code,t=(0,o.R3)(),a=(0,i.Z)(t),c=(0,o.Qt)(),s=(0,u.useState)(!1),f=s[0],p=s[1];return(0,r.BX)("div",{css:m.buttonContainer,children:[f?(0,r.tZ)("span",{css:m.buttonToast,onAnimationEnd:function(){requestAnimationFrame((function(){p(!1)}))},"aria-hidden":!0,children:"Inserted!"}):null,(0,r.tZ)(l.zx,{css:m.button,text:"Insert",small:!0,iconLeft:(0,r.tZ)(d.Z,{}),onClick:function(){var e,t;a&&((0,h.j)(h.U3.GHOSTWRITER_CHAT_CODE_INSERTED),a({code:n,insertAt:null!==(t=null===(e=c())||void 0===e?void 0:e.position.offset)&&void 0!==t?t:"end"}),p(!0))}})]})}},56774:function(e,n,t){t.d(n,{b:function(){return R}});var r=t(89130),i=t(7247),o=t(57135),a=t(96583),l=t(8189),c=t(77542),u=t(52993),s=t(64920),d=t(9970),f=t(37248),p=t(83905),h=t(96324),v=t(6601),m=t(98423),g=t(33165);function y(e){var n=(0,f.r6)(e),t=g.hI.some((function(n){return e.endsWith(n)})),r=g.HH.some((function(n){return e.endsWith(n)})),i=g.Fv.some((function(n){return e.split("/").some((function(e){return e.includes(n)}))}));return!n||t||r||i}function Z(e){var n=e.length;if(0===n)return!1;var t=0,r=Math.min(n,512);if(n>=3&&239===e[0]&&187===e[1]&&191===e[2])return!1;if(n>=4&&0===e[0]&&0===e[1]&&254===e[2]&&255===e[3])return!1;if(n>=4&&255===e[0]&&254===e[1]&&0===e[2]&&0===e[3])return!1;if(n>=4&&132===e[0]&&49===e[1]&&149===e[2]&&51===e[3])return!1;if(r>=5&&"%PDF-"===e.slice(0,5).toString())return!0;if(n>=2&&254===e[0]&&255===e[1])return!1;if(n>=2&&255===e[0]&&254===e[1])return!1;for(var i=0;i<r;i++){if(0===e[i])return!0;if((e[i]<7||e[i]>14)&&(e[i]<32||e[i]>127)){if(e[i]>193&&e[i]<224&&i+1<r){if(e[++i]>127&&e[i]<192)continue}else if(e[i]>223&&e[i]<240&&i+2<r&&e[++i]>127&&e[i]<192&&e[i+1]>127&&e[i+1]<192){i++;continue}if(t++,i>=32&&100*t/r>10)return!0}}return 100*t/r>10}var b=t(83886),w=t(85068);function x(e){return C.apply(this,arguments)}function C(){return(C=(0,o.Z)((function(e){var n,t,r,i,o,l,c,u,s,g,x,C,k,S,T,E,R,I,G,D,_,P;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=e.recentFiles,t=e.fs,r=e.dotReplit,i=e.maxCharacters,o=e.replLanguage,[4,r.getConfig()];case 1:return c=a.sent().config,u=(null===c||void 0===c?void 0:c.entrypoint)||w.Z.getMainFileName(o)||null,s=((null===c||void 0===c?void 0:c.hidden)||[]).map((function(e){return(0,p.Z)(e)})).filter(Boolean),(l=g=[]).push.apply(l,(0,d.Z)(n)),u&&g.length<10?(g.push(u),x=(0,f.Il)(u),C=""===x?h.Ql:x,[4,t.readDir(C)]):[3,3];case 2:"children"in(k=a.sent())&&(S=g).push.apply(S,(0,d.Z)(k.children.filter((function(e){return e.type===v.Tv.File})).map((function(e){return C===h.Ql?e.filename:"".concat(x,"/").concat(e.filename)})))),a.label=3;case 3:return 0===(T=(0,d.Z)(new Set(g)).filter((function(e){return!y(e)&&!(0,m.lv)(e,s)&&(0,f.Mb)(e)})).slice(0,10)).length?[2,[]]:[4,Promise.all(T.map((function(e){return t.readFile(e)})))];case 4:for(var B in E=a.sent(),R=[],I=i,T)if(G=T[B],D=(0,b.Sf)(G),!(_=E[B]).error&&!Z(_.content.toBuffer())&&(P=_.content.toString().slice(0,I),R.push({filePath:G,language:D,code:P}),(I-=P.length)<=0))return[2,R];return[2,R]}}))}))).apply(this,arguments)}var k=t(50959),S=t(35813),T=t(86430),E=t(93413);function R(){var e=function(){var e=(0,l.Z)(),n=e.fs,t=e.dotReplit,i=(0,r.c1)(s.aK),d=(0,c.AA)(),f=(0,S.Z)();return(0,k.useCallback)((0,o.Z)((function(){var e,r;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:if(!n||!t)throw new Error("Expected fs and dotReplit services");return e=(0,u.yL)(i).fileContextCharacters,[4,x({recentFiles:r=d(),fs:n,dotReplit:t,maxCharacters:e,replLanguage:f})];case 1:return[2,{fileContext:o.sent(),mostRecentFile:r[0]||null}]}}))})),[n,t,i,d,f])}(),n=(0,r.Uu)(),t=(0,i.Z)((function(){return{getGhostwriterWorkspaceFileContext:e,insertCodeButtonComponent:T.e}}),[e]);(0,k.useEffect)((function(){return n.set(E.Vx,t),function(){n.set(E.Vx,E.f9)}}),[t,n])}},47159:function(e,n,t){t.d(n,{CN:function(){return o},CT:function(){return i},bO:function(){return a}});var r=t(47308),i="git",o={gitCommit:{id:"git.commit",name:"Git: Commit",scope:i,default:(0,r.l2)({cmdOrCtrl:!0,key:"Enter"})}},a=Object.values(o)},66834:function(e,n,t){t.d(n,{BI:function(){return f},EI:function(){return Z},Jp:function(){return p},_H:function(){return h},bA:function(){return g},ox:function(){return y}});var r,i,o,a,l=t(72006),c=t(98491),u=t(47799),s=t(47236),d=t(50959),f=(0,c.u)((function(){return null})),p=(0,c.u)((function(){return null}));function h(e){var n=p.current();(0,d.useEffect)((function(){e!==n&&p.set((function(){return e}))}),[e,n])}var v=(0,s.cn)(null),m=(0,s.cn)((function(e){return e(v)}),(function(e,n,t){if(null===t)n(v,null);else{var c=e(v),u=c?(0,l.Z)({},c,t):(0,l.Z)({},t);if(!u.filePath||!u.changes)throw new Error('"filePath", "changes" required when initializing history state');f.set((function(){return u}));var s,d,p,h,m=u.changes.length;if(0===m)return u.users={},u.version=0,u.playing=!1,u.comparing=!1,u.count=0,void n(v,u);null!==(s=(r=u).count)&&void 0!==s||(r.count=m),null!==(d=(i=u).version)&&void 0!==d||(i.version=m-1),null!==(p=(o=u).playing)&&void 0!==p||(o.playing=!1),null!==(h=(a=u).comparing)&&void 0!==h||(a.comparing=!1),(null===c||void 0===c?void 0:c.changes)&&u.changes!==c.changes&&(u.count=m,u.version=Math.min(u.version,m-1),u.playing=!1,u.comparing=!1),u.version===m-1&&(u.playing=!1),n(v,u)}}));function g(){return(0,s.KO)(m,u.d8)}var y=(0,d.createContext)({});function Z(e,n){return(0,d.useMemo)((function(){return{openHistory:function(){return n({operation:"replace",pane:{type:"history",data:{path:e}}})},closeHistory:function(){return n({operation:"replace",pane:{type:"codeEditor",data:{path:e}}})}}}),[e,n])}},76286:function(e,n,t){t.d(n,{j:function(){return u},p:function(){return s}});var r=t(72006),i=t(91355),o=t(37192),a=t(50959),l=t(61382),c=t(66834);function u(){var e=(0,o.uV)();return(0,a.useCallback)((function(n,t,i){e({origin:"History2: useHistoryBSOD",error:n,tags:{source:"ws-history2",type:t},extras:(0,r.Z)({state:c.BI.current()},i)})}),[e])}function s(e){(0,i.j)(l.U3.HISTORY_USED,{action:e,which:"ws"})}},90888:function(e,n,t){t.d(n,{h:function(){return T},w:function(){return k}});var r=t(72006),i=t(4405),o=t(4541),a=t(83871),l=t(42735),c=t(50959),u=t(92153),s=t(36730),d=t(34152);function f(){return(0,c.useState)((function(){return(0,s.MT)()}))[0]}var p=(0,c.createContext)(null);function h(){var e=(0,c.useContext)(p);if(!e)throw new Error("Expected store in context");return e}var v=function(e){return(0,d.b9)(e,{store:h()})};var m=t(7247),g=(0,s.cn)(-1),y=(0,s.cn)([]),Z=(0,s.cn)(void 0),b=(0,s.cn)(null,(function(e,n,t){var r=e(Z);switch(r&&(clearTimeout(r.id),r.cb()),t){case"forward":n(g,(function(n){return Math.min(e(y).length,n+1)}));break;case"backward":n(g,(function(e){return Math.max(0,e-1)}))}var i=e(y),o=e(g);return o>=i.length?"":i[o]})),w=(0,s.cn)(null,(function(e,n,t){var r;clearTimeout(null===(r=e(Z))||void 0===r?void 0:r.id);var i=function(){if(t.length>0){var r=!1;n(y,(function(n){return(0,u.ZP)(n,(function(n){if(t!==n[e(g)])for(r=!0,n.push(t);n.length>20;)n.shift()}))})),r&&n(g,e(y).length-1)}n(Z,void 0)};n(Z,{id:setTimeout(i,2e3),cb:i})}));function x(e){var n=v(w),t=function(){var e=v(b);return{forward:(0,m.Z)((function(){return function(){return e("forward")}}),[e]),backward:(0,m.Z)((function(){return function(){return e("backward")}}),[e])}}(),o=t.forward,l=t.backward,u=(0,c.useRef)(e.value);return(0,c.useEffect)((function(){e.value!==(null===u||void 0===u?void 0:u.current)&&(e.value&&n(e.value),u.current=e.value)}),[n,e.value]),(0,i.Z)((0,r.Z)({},e),{onKeyDown:(0,m.Z)((function(){return function(n){var t;if(null===(t=e.onKeyDown)||void 0===t||t.call(e,n),!n.shiftKey&&!(0,a.j)(n)){var r=n.currentTarget,i=Boolean(r.value.match(/\n/));if("ArrowUp"===n.key){if(i&&r.selectionStart&&r.selectionStart>0)return;e.onChange(l()),n.preventDefault(),n.stopPropagation()}if("ArrowDown"===n.key){if(i&&r.selectionEnd&&r.selectionEnd<r.value.length)return;e.onChange(o()),n.preventDefault(),n.stopPropagation()}}}}),[l,o,e]),onChange:(0,m.Z)((function(){return function(n){e.onChange(n.target.value)}}),[e])})}var C=c.forwardRef((function(e,n){var t=x(e);return(0,o.tZ)(l.B,(0,r.Z)({ref:n},t))})),k=c.forwardRef((function(e,n){var t=f();return(0,o.tZ)(p.Provider,{value:t,children:(0,o.tZ)(C,(0,r.Z)({ref:n},e))})})),S=c.forwardRef((function(e,n){var t=x(e);return(0,o.tZ)(l.II,(0,r.Z)({ref:n},e,t))})),T=c.forwardRef((function(e,n){var t=f();return(0,o.tZ)(p.Provider,{value:t,children:(0,o.tZ)(S,(0,r.Z)({ref:n},e))})}))},42533:function(e,n,t){t.d(n,{m:function(){return h}});var r=t(4541),i=(t(50959),t(11122)),o=t(25776),a=t(22167),l=t(47287),c=t(61643),u=t(85348),s=t(72251),d=t(40681),f=(0,i.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}"),p={root:(0,i.iv)([a.l0.height(20),a.l0.width(20),a.l0.center]),pulse:(0,i.iv)({animation:"".concat(f," 2s infinite")})};function h(){var e=(0,c.Z)(),n=e.isSaving;return e.isOffline?(0,r.tZ)(l.u,{tooltip:"Reconnecting, changes will be synced when you\u2019re online",placement:"right",children:(0,r.tZ)(o.G,{css:p.root,children:(0,r.tZ)(u.Z,{size:16,color:a.TV.redDefault})})}):n?(0,r.tZ)(l.u,{tooltip:"Saving",placement:"right",children:(0,r.tZ)(o.G,{css:[p.root,p.pulse],children:(0,r.tZ)(s.Z,{size:16,color:a.TV.foregroundDimmest})})}):(0,r.tZ)(l.u,{tooltip:"Saved",placement:"right",children:(0,r.tZ)(o.G,{css:p.root,children:(0,r.tZ)(d.Z,{size:16,color:a.TV.foregroundDimmest})})})}},26555:function(e,n,t){t.d(n,{B:function(){return c}});var r=t(4541),i=t(11122),o=t(22167),a=t(25776),l=(0,i.iv)([o.l0.borderRadius("full"),o.l0.position.absolute,o.l0.top(-3),o.l0.right(-3)]);function c(e){var n=e.color,t=void 0===n?o.TV.redStronger:n,i=e.small?6:8;return(0,r.tZ)(a.G,{style:{backgroundColor:t,width:i,height:i},css:l})}},89263:function(e,n,t){t.d(n,{I:function(){return u}});var r=t(72006),i=t(4405),o=t(50959),a=t(39771),l=t(9495),c={nodejs:["package.json","package-lock.json","yarn.lock","node_modules"],python:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function u(){var e=(0,a.Z)(),n=(0,l.T)();return(0,o.useMemo)((function(){var t=(null===n||void 0===n?void 0:n.packagers)||[],o=(null===t||void 0===t?void 0:t.map((function(e){return(0,i.Z)((0,r.Z)({},e),{title:e.language,packagerFiles:e.packagerFiles||c[e.language]||[]})})))||[];return"html"!==(null===e||void 0===e?void 0:e.language)&&"html_beta"!==(null===e||void 0===e?void 0:e.language)||o.push({id:"html",title:"html",name:"HTML Packager",language:"html",packageSearch:!0,guessImports:!1,packagerFiles:[]}),o}),[n,e])}},49534:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(9970),i=t(4541),o=t(44093),a=t.n(o),l=t(77542);function c(e){var n=e.replTitle,t=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,r.Z)(n.filter(Boolean)).concat(["Replit"]).join(" - ")}((0,l.ex)(),n);return(0,i.tZ)(a(),{children:(0,i.tZ)("title",{children:t},"title")})}},5768:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(4541),i=t(95980),o=t.n(i),a=(t(50959),t(84626)),l=t(17042),c=t(22167);function u(e){var n=e.preventHighlightBorder,t=(0,l.Z)();return(0,r.BX)("div",{className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])+" loader",children:[(0,r.tZ)("div",{className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])+" wrap",children:(0,r.BX)(a.Z,{backgroundColor:c.TV.backgroundHighest,foregroundColor:c.TV.backgroundHigher,uniqueKey:"editorLoader",children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])})]})}),(0,r.tZ)(o(),{id:"b8bdeb39d1178985",dynamic:[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"],children:".loader.__jsx-style-dynamic-selector{z-index:3;height:100%;width:100%;background-color:var(--background-default);overflow:hidden;padding:var(--space-16);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);-webkit-border-bottom-left-radius:var(--border-radius-4);-moz-border-radius-bottomleft:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);-webkit-box-shadow:".concat(t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)",";-moz-box-shadow:").concat(t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)",";box-shadow:").concat(t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)","}.wrap.__jsx-style-dynamic-selector{overflow:hidden}.wrap.__jsx-style-dynamic-selector>svg{max-width:640px;min-width:500px;height:auto}@media screen and (min-width:900px){.loader.__jsx-style-dynamic-selector{padding:30px}}")})]})}},84376:function(e,n,t){t.d(n,{M:function(){return T}});var r=t(4541),i=t(2272),o=t(98260),a=t(3668),l=t(25776),c=t(24403),u=t(8126),s=t(22167),d=t(50959),f=t(33405);function p(e){var n=e.onDismiss,t=e.context,p=(0,i.Z)(d.useState(!1),2),h=p[0],v=p[1];return(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:[s.l0.rowWithGap(4),s.l0.align.center,s.l0.justify.start],dataCy:"ghostwriter-opt-in-banner",children:[(0,r.tZ)(o.zx,{iconLeft:(0,r.tZ)(u.Z,{}),text:"Try Ghostwriter",colorway:"blurple",css:[s.l0.flex.grow(1),s.l0.flex.shrink(0),{">div":[s.l0.align.center]}],onClick:function(){return v(!0)}}),(0,r.tZ)(a.h,{onClick:n,tooltipHidden:!0,alt:"Close banner",children:(0,r.tZ)(c.Z,{})})]}),(0,r.tZ)(f.Z,{context:t,isOpen:h,onRequestClose:function(){return v(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}var h=t(72428),v=t(55544),m=t(41068),g=t(28858);function y(e){var n=e.context,t=(0,m.s)(),a=t.cta,c=t.trialExpiryDate,p=(0,i.Z)(d.useState(!1),2),y=p[0],Z=p[1];if(a!==m.m.TrialOngoing&&a!==m.m.TrialExpired)return null;var b=(0,g.X)(c);return(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:[s.l0.colWithGap(8)],dataCy:"ghostwriter-trial-expiry-banner",children:[(0,r.BX)(l.G,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,{flexWrap:"wrap",gap:"8px"}],children:[(0,r.BX)(l.G,{css:[s.l0.align.center,s.l0.rowWithGap(8)],children:[(0,r.tZ)(u.Z,{}),(0,r.tZ)(v.xv,{children:"Ghostwriter Trial"})]}),(0,r.tZ)(v.xv,{color:"dimmer",children:a===m.m.TrialOngoing?b:"Ended"})]}),(0,r.tZ)(o.zx,{onClick:function(){return Z(!0)},text:a===m.m.TrialOngoing?"Subscribe Now":"Reactivate",colorway:"blurple"}),(0,r.tZ)(h.R,{})]}),(0,r.tZ)(f.Z,{context:n,isOpen:y,onRequestClose:function(){return Z(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}var Z=t(54233),b=t(10601);function w(e){var n=e.context,t=(0,m.s)(),i=t.cta,o=t.trialExpiryDate,a=i===m.m.TrialOngoing&&(0,b.Z)(o,new Date)<=3,l=i===m.m.TrialExpired;return a?(0,r.tZ)(x,{context:n}):l?(0,r.tZ)(C,{context:n}):null}function x(e){var n=e.context,t=(0,Z.Z)("workspace","ghostwriter-trial-3-day-left-modal"),i=t.shouldDisplay,o=t.dismiss,a=t.register;return d.useEffect((function(){a()}),[a]),(0,r.tZ)(f.Z,{context:n,isOpen:i,onRequestClose:o,powerUp:"ghostwriter",isAutoTriggered:!0,uponPurchaseGoTo:"cyclesPage"})}function C(e){var n=e.context,t=(0,Z.Z)("workspace","ghostwriter-trial-expired-modal"),i=t.shouldDisplay,o=t.dismiss,a=t.register;return d.useEffect((function(){a()}),[a]),(0,r.tZ)(f.Z,{context:n,isOpen:i,onRequestClose:o,powerUp:"ghostwriter",isAutoTriggered:!0,uponPurchaseGoTo:"cyclesPage"})}var k=t(36832),S=t(91309);function T(){var e=(0,m.s)(),n=e.cta,t=e.loading,i=(0,k.o)("ghostwriter-repl-resources-cta"),o=i.isLoading,a=i.isDone,l=i.setAsDone;if(o||t)return null;switch(n){case m.m.None:case m.m.Activated:return null;case m.m.TrialOngoing:case m.m.TrialExpired:return(0,r.BX)(r.HY,{children:[(0,r.tZ)(w,{context:"repl_resources"}),(0,r.tZ)(y,{context:"repl_resources"})]});case m.m.Activate:return a||o?null:(0,r.tZ)(p,{onDismiss:l,context:"repl_resources"});default:(0,S.Z)(n)}}},36726:function(e,n,t){t.d(n,{ky:function(){return f},qo:function(){return s}});var r=t(72006),i=t(43119),o=t(71440),a=t(67216);function l(){var e=(0,i.Z)(["\n  fragment PowerUpActionsMultiBoostToggle on Repl {\n    id\n    powerUps {\n      __typename\n      ... on ReplPowerUpTypes {\n        boost {\n          __typename\n          sku\n          methodOfPayment\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query MultiBoostToggle($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        ...PowerUpActionsMultiBoostToggle\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function f(e){var n=(0,r.Z)({},u,e);return a.a(d,n)}},62247:function(e,n,t){t.d(n,{Z:function(){return Ye}});var r=t(9970),i=t(4541),o=t(50959),a=t(51609),l=t(31518),c=t(90189),u=t(91355),s=t(25776),d=t(55544),f=t(22167),p=t(7579);function h(e){var n=e.id,t=e.title,r=e.children,a=(0,p.H)()(n);return(0,i.BX)(s.G,{css:[f.l0.colWithGap(8)],children:[(0,i.tZ)(s.G,{tag:"label",htmlFor:a,children:"string"===typeof t?(0,i.tZ)(d.xv,{children:t}):t}),o.cloneElement(r,{id:a})]})}var v=t(29708),m=t(41068),g=t(69632),y=t(37676),Z=t(8126),b=t(97774),w=t(30265),x=t(91309),C=t(57389),k=t(40951),S=t(75242),T=t(77408),E=t(12018),R=t(3668),I=t(47287),G=t(74783),D=t(78421),_=t(75201),P=t(55510),B=t.n(P),A=t(85599),U=t(72006),N=t(43119),L=t(71440),X=t(67216);function M(){var e=(0,N.Z)(["\n  query CodeSuggestionPreferences {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return M=function(){return e},e}var O={},F=(0,L.Ps)(M());var W=[{title:"enabled",value:!0},{title:"disabled",value:!1}],H=Array.from(A.vw,(function(e){return{title:e,value:e}}));function z(){var e,n,t=!(0,S.S)(),o=(0,E.P5)({controlName:"flag-code-suggestion-engine"}),c=function(e){var n=(0,U.Z)({},O,e);return X.a(F,n)}().data,p="UserPowerUpsTypes"===(null===c||void 0===c||null===(e=c.currentUser)||void 0===e?void 0:e.userPowerUpsByType.__typename)&&c.currentUser.userPowerUpsByType.ghostwriter.active,v=(0,l.Z)(),m=v.preferences,g=v.update,Z=(0,k.L)().engine,b={value:null,title:"default"},w=function(e,n){g((0,C.Z)({},e,n)),(0,u.j)(u.U3.SETTINGS_TOGGLED,{settingChanged:e,updatedValue:n})};return p?(0,i.BX)(i.HY,{children:[(0,i.tZ)(h,{id:"codeSuggestionToggle",title:(0,i.BX)("div",{css:[f.l0.flex.row,f.l0.rowWithGap(8),f.l0.center,f.l0.justify.start],children:[(0,i.tZ)(y.T,{css:[f.l0.width(16),f.l0.height(16)],children:(0,i.tZ)(B(),{alt:"Blue and purple fortune telling crystal ball icon used to symbolize Ghostwriter",src:"/public/images/ghostwriter/blurple-circle.svg",width:16,height:16})}),(0,i.tZ)(d.xv,{children:"Ghostwriter Complete Code"}),(0,i.tZ)("a",{href:T.qw,target:"_blank",css:f.l0.color.foregroundDefault,onClick:function(){return(0,u.j)(u.U3.EXTERNAL_LINK_VIEWED,{url:T.qw,source:"repl_settings"})},children:(0,i.tZ)(R.h,{alt:"Learn more",tooltipDelay:"none",tooltipContents:"This feature is powered by Ghostwriter. Click to read more.",type:"button",css:[f.l0.width(16),f.l0.height(16)],children:(0,i.tZ)(a.Z,{color:f.TV.foregroundDefault})})})]}),children:(0,i.BX)(i.HY,{children:[(0,i.tZ)(G.P,{initialSelectedItem:W.find((function(e){return e.value===m.codeSuggestion})),onChange:function(e){return w("codeSuggestion",null===e||void 0===e?void 0:e.value)},items:W}),t?(0,i.tZ)(d.xv,{multiline:!0,children:"Complete Code is currently disabled while there are multiple players in your Repl."}):(0,i.BX)(d.xv,{multiline:!0,children:["Complete Code provides inline \u201cghost text\u201d suggestions while you code. Press ",(0,i.tZ)(_.ZP,{shortcut:{key:"TAB"}})," or swipe right on your mobile device to accept."]})]})}),o?(0,i.tZ)(h,{id:"completeCodeEngine",title:(0,i.BX)(s.G,{css:[f.l0.flex.row,f.l0.rowWithGap(8),f.l0.center,f.l0.justify.start],children:[(0,i.tZ)(d.xv,{children:"Ghostwriter Complete Code Engine (override) "}),(0,i.tZ)(I.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,i.tZ)(D.Z,{})})]}),children:(0,i.BX)(i.HY,{children:[(0,i.tZ)(G.P,{initialSelectedItem:null!==(n=H.find((function(e){return e.value===m.completeCodeEngine})))&&void 0!==n?n:b,onChange:function(e){return w("completeCodeEngine",null===e||void 0===e?void 0:e.value)},items:[b].concat((0,r.Z)(H))}),(0,i.BX)(d.xv,{multiline:!0,children:["Current applied engine: ",Z]})]})}):null]}):null}var V={titleContainer:[f.l0.rowWithGap(8),f.l0.align.center],surface:[f.l0.p(8),f.l0.colWithGap(8),f.l0.borderRadius(8),f.l0.align.start]};function j(){var e=(0,m.s)(),n=e.cta,t=e.loading,r=(0,w.rv)();if(t)return(0,i.tZ)(h,{id:"ghostwriter",title:"Ghostwriter",children:(0,i.tZ)(b.Z,{})});switch(n){case m.m.None:return null;case m.m.Activated:case m.m.TrialOngoing:return(0,i.tZ)(z,{});case m.m.TrialExpired:case m.m.Activate:return r?null:(0,i.tZ)(h,{id:"ghostwriter",title:(0,i.BX)(s.G,{css:V.titleContainer,children:[(0,i.tZ)(Z.Z,{size:16}),(0,i.tZ)(d.xv,{children:"Ghostwriter"}),(0,i.tZ)(g.Z,{context:"workspace_settings_pane",powerUp:"ghostwriter"})]}),children:(0,i.BX)(y.T,{background:"higher",css:V.surface,children:[(0,i.tZ)(d.xv,{multiline:!0,color:"dimmer",children:"Replit's AI pair programmer can complete, generate, explain, and transform code."}),(0,i.tZ)(v.Z,{context:"workspace_settings_pane"})]})});default:(0,x.Z)(n)}}var q=t(98260),$=t(22847),Y=t(94370),K=t(83871),Q=t(16829),J=t(52993),ee=t(10275),ne=Array.from(J.ce,(function(e){return{title:e,value:e}}));function te(){var e,n=(0,ee.d)(),t=(0,E.P5)({controlName:"flag-ghostwriter-chat-engine-override"}),o=(0,l.Z)(),a=o.preferences,c=o.update,p=(0,Q.v)(),v={value:null,title:"default"};return(0,i.tZ)(i.HY,{children:n&&t?(0,i.tZ)(h,{id:"completeCodeEngine",title:(0,i.BX)(s.G,{css:[f.l0.flex.row,f.l0.rowWithGap(8),f.l0.center,f.l0.justify.start],children:[(0,i.tZ)(d.xv,{children:"Ghostwriter Chat Engine (override) "}),(0,i.tZ)(I.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,i.tZ)(D.Z,{})})]}),children:(0,i.BX)(i.HY,{children:[(0,i.tZ)(G.P,{initialSelectedItem:null!==(e=ne.find((function(e){return e.value===a.chatEngine})))&&void 0!==e?e:v,onChange:function(e){return n="chatEngine",t=null===e||void 0===e?void 0:e.value,c((0,C.Z)({},n,t)),void(0,u.j)(u.U3.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t});var n,t},items:[v].concat((0,r.Z)(ne))}),(0,i.BX)(d.xv,{multiline:!0,children:["Current applied engine: ",p]})]})}):null})}var re=t(20324),ie=t(89853),oe=t(42735),ae=t(38231),le=t(8415),ce=t(65001),ue=t(47923),se=t(58975),de=t(74043),fe=t(44867),pe=t(18988),he=t(40306),ve=t(47308),me=t(43754),ge=t(80722),ye=t(61939),Ze=t(97413),be=t(32079),we=t(60109),xe=t(7247),Ce=t(11122);function ke(e){var n=function(){r.current&&clearTimeout(r.current),i.current=[]},t=function(t){e({type:"success",shortcut:t.length>1?[t[0],t[1]]:t[0]}),n()},r=(0,o.useRef)(null),i=(0,o.useRef)([]);return{onKeyDown:function(n){var o=r.current,a=i.current;n.preventDefault(),n.stopPropagation(),o&&clearTimeout(o);var l=(0,ve.lc)(n);if(l)if((0,ve.ZG)(l))e({type:"update",recorded:a.length?[a[0],l]:[l]});else if(a.length>0&&"Enter"===l)t(a);else{a.push(l),e({type:"update",recorded:a});var c=2===a.length?0:600;r.current=setTimeout((function(){return t(a)}),c)}},startRecording:function(){n(),e({type:"start"})},stopRecording:function(){n(),e({type:"stop"})}}}var Se=(0,ie.X)({root:[f.l0.colWithGap(8)],row:[f.l0.rowWithGap(8),f.l0.align.center,f.l0.minHeight(28)],left:[f.l0.colWithGap(2),f.l0.flex.grow(0),f.l0.flex.shrink(1)],right:[f.l0.rowWithGap(4),f.l0.align.center,f.l0.justify.end,f.l0.position.relative,f.l0.flex.grow(1),f.l0.flex.shrink(0)],recordingRow:[f.l0.flex.column,f.l0.align.center,f.l0.justify.end,f.l0.pr(24)],recordingRowInner:[f.l0.rowWithGap(8),f.l0.align.center],recordingRowKeys:[f.l0.position.relative],recordingRowHint:[f.l0.position.absolute,f.l0.top(20),f.l0.right(0),{fontStyle:"italic"}],recordingRowPlaceholder:[f.l0.display.flex,f.l0.align.baseline,f.l0.rowWithGap(4),{fontStyle:"italic"}],keys:[f.l0.display.inlineFlex,f.l0.rowWithGap(12)],secondaryText:[f.l0.display.flex,f.l0.flex.row,f.l0.align.center,f.l0.rowWithGap(4)],secondaryTextId:[f.l0.flex.grow(1),f.l0.flex.shrink(0)],secondaryTextDescription:[f.l0.flex.grow(0),f.l0.flex.shrink(1)],buttons:[f.l0.pl(8),f.l0.display.flex,f.l0.flex.row]}),Te=[f.l0.reset.button,ae.gU.listItem,f.l0.height(24),f.l0.width(24),f.l0.p(2)],Ee=(0,ie.X)({root:[f.l0.rowWithGap(8),f.l0.align.center],recordingRow:[f.l0.rowWithGap(4),f.l0.align.center]});function Re(e){var n,t,r,a,l=e.command,c=e.filter,u=(0,re.w0)(),f=u.enableRunner,p=u.disableRunner,h=(0,re.r3)(),v=(0,re.wU)(),m=(0,re.V_)(l.id),g=(0,o.useState)(null),y=g[0],Z=g[1],b=(0,o.useState)(null),w=b[0],x=b[1],C=ke((function(e){switch(e.type){case"start":return p(),x({recorded:[]}),void Z(null);case"stop":return f(),x(null),void Z(null);case"update":return x({recorded:e.recorded}),void Z(null);case"success":f();var n=(0,ve.SG)(e.shortcut);if(!n)return x(null),void Z(null);var t=h(l.id,n);return t?(x(null),void Z('This shortcut conflicts with "'.concat(t.conflict.name,'"'))):void x(null);case"error":var r;return void x((function(n){return{error:e.message,recorded:null!==(r=null===n||void 0===n?void 0:n.recorded)&&void 0!==r?r:[]}}))}})),k=C.stopRecording,S=C.startRecording,T=C.onKeyDown,E=(0,fe.Z)((function(){return k()}),[]),I=Boolean(w);De(I);var G=null!==(a=null===w||void 0===w?void 0:w.recorded)&&void 0!==a?a:[],D=null===w||void 0===w?void 0:w.error,_=c.length>0,P=null===(n=ge.Z.match(c,l.name))||void 0===n?void 0:n.ranges,B=null===(t=ge.Z.match(c,l.id))||void 0===t?void 0:t.ranges,A=(null===l||void 0===l?void 0:l.description)?null===(r=ge.Z.match(c,l.description))||void 0===r?void 0:r.ranges:void 0,U=(0,xe.Z)((function(){return c.replaceAll('"',"").split("-").map((function(e){return e.toLowerCase()}))}),[c]),N=[{label:"Remove",key:"remove"}];m&&m!==l.shortcut&&N.push({label:"Reset",key:"reset"});var L,X=(0,xe.Z)((function(){return function(e){switch(e){case"remove":v(l.id);break;case"reset":var n=h(l.id,m);n&&Z("".concat(m,' conflicts with "').concat(n.conflict.name,'"'))}}}),[l.id,m,h,v]);return(0,i.BX)(s.G,{css:Se.root,children:[(0,i.BX)(s.G,{css:Se.row,children:[(0,i.BX)(s.G,{css:Se.left,children:[(0,i.tZ)(be.x,{text:l.name,highlight:P,dimmed:_}),(0,i.BX)(d.xv,{variant:"small",css:Se.secondaryText,children:[_?(0,i.tZ)(be.x,{css:Se.secondaryTextId,text:l.id,highlight:B,dimmed:_}):null,l.description?(0,i.BX)(i.HY,{children:[_?(0,i.tZ)(d.xv,{color:"dimmest",children:"\u2022"}):null,(0,i.tZ)(be.x,{css:Se.secondaryTextDescription,text:l.description,highlight:A,dimmed:_})]}):null]})]}),(0,i.BX)(s.G,{innerRef:I?E:void 0,css:Se.right,children:[I?(0,i.tZ)(pe.MT,{autoFocus:!0,restoreFocus:!0,children:(0,i.tZ)("input",{onKeyDown:T,css:{opacity:0,width:1}})}):null,l.shortcut&&!I?(0,i.tZ)(me.bM,{small:!0,keyCombo:l.shortcut,match:U}):null,l.shortcut||I?null:(0,i.tZ)(q.zx,{small:!0,outlined:!0,iconLeft:(0,i.tZ)(se.Z,{}),text:"Add shortcut",onClick:function(){return S()}}),I?(0,i.tZ)(s.G,{css:Se.recordingRow,children:(0,i.BX)(s.G,{css:Se.recordingRowInner,children:[(0,i.tZ)(s.G,{css:Se.recordingRowKeys,children:G.length>0?(0,i.tZ)(s.G,{css:[Se.keys],children:G.map((function(e,n){return(0,i.tZ)(me.bM,{small:!0,keyCombo:e},"".concat(e,"-").concat(n))}))}):(0,i.tZ)(d.xv,{color:"dimmest",css:Se.recordingRowPlaceholder,children:"Recording..."})}),(0,i.tZ)(R.h,{alt:"Stop",onClick:function(){return k()},children:(0,i.tZ)(Be,{})})]})}):null,l.shortcut&&!I?(0,i.BX)(s.G,{css:Se.buttons,children:[(0,i.tZ)(R.h,{alt:"Change",onClick:function(){return S()},children:(0,i.tZ)(ue.Z,{})}),(0,i.tZ)(le.ZE,{"aria-label":"More",cssProps:Te,items:N,icon:(0,i.tZ)(we.Z,{size:12}),placement:"bottom-end",onAction:X,children:N.map((function(e){return(0,i.tZ)(le.ck,{textValue:e.label,children:(0,i.tZ)(d.xv,{children:e.label})},e.key)}))})]}):null]})]}),D?(0,i.tZ)(ce.E,{icon:(0,i.tZ)(he.Z,{}),colorway:"warning",text:D,closable:!0,closeAction:function(){return x((function(e){return{recorded:null!==(L=null===e||void 0===e?void 0:e.recorded)&&void 0!==L?L:[]}}))}}):null,y?(0,i.tZ)(ce.E,{icon:(0,i.tZ)(he.Z,{}),colorway:"warning",text:y,closable:!0,closeAction:function(){return Z(null)}}):null]})}var Ie=(0,ie.X)({root:[f.l0.colWithGap(8),f.l0.p(0)],surface:[f.l0.p(8),f.l0.borderRadius(8),f.l0.colWithGap(12)]});function Ge(){var e=(0,re.w0)(),n=e.enableRunner,t=e.disableRunner,a=(0,o.useState)(""),l=a[0],c=a[1],u=(0,re.xF)(),f=(0,xe.Z)((function(){return(0,r.Z)(u.values())}),[u]);function p(e){var n=e.flat();return n.length>1?n.map((function(e){return p([e])})).join(" "):(0,ve.QR)(n[0]).map((function(e){return'"'.concat(e,'"')})).join("-").replaceAll(" ","space")}var h=ge.Z.filter(l,f,{extract:function(e){var n="".concat(e.name," ").concat(e.id);return e.description&&(n+=" ".concat(e.description)),e.shortcut&&(n+=" ".concat(p([e.shortcut]))),n}}),v=(0,o.useRef)(null),m=(0,o.useState)(!1),g=m[0],Z=m[1];De(g);var b=ke((function(e){switch(e.type){case"start":var r;return t(),Z(!0),c(""),void(null===v||void 0===v||null===(r=v.current)||void 0===r||r.focus());case"stop":case"error":var i,o;return n(),Z(!1),null===v||void 0===v||null===(i=v.current)||void 0===i||i.focus(),void(null===v||void 0===v||null===(o=v.current)||void 0===o||o.select());case"success":return void c(p([e.shortcut]));case"update":return void c(p(e.recorded))}})),w=b.stopRecording,x=b.startRecording,C=b.onKeyDown;return(0,i.BX)(s.G,{css:Ie.root,children:[(0,i.BX)(s.G,{css:Ee.root,children:[(0,i.tZ)(pe.MT,{children:(0,i.tZ)(oe.II,{ref:v,placeholder:g?"Recording keys. Press Escape to exit":"Type to search keyboard shortcuts",onBlur:g?w:void 0,onChange:function(e){return c(e.target.value)},onKeyDown:g?function(e){"Escape"===e.key?w():C(e)}:void 0,value:l})}),(0,i.tZ)(s.G,{css:Ee.recordingRow,children:g?(0,i.BX)(i.HY,{children:[(0,i.tZ)(d.xv,{color:"dimmest",css:[{fontStyle:"italic"}],children:"Recording..."}),(0,i.tZ)(R.h,{alt:"Stop Recording",onClick:w,children:(0,i.tZ)(Be,{})})]}):(0,i.tZ)(R.h,{alt:"Record Keys",onClick:x,children:(0,i.tZ)(Ze.Z,{})})}),(0,i.tZ)(R.h,{alt:"Clear Input",disabled:0===l.length,onClick:function(){var e;c(""),null===v||void 0===v||null===(e=v.current)||void 0===e||e.focus()},children:(0,i.tZ)(ye.Z,{})})]}),h.length>0?(0,i.tZ)(y.T,{css:Ie.surface,elevated:!0,children:h.map((function(e,n){return(0,i.BX)(o.Fragment,{children:[n>0?(0,i.tZ)(y.T,{elevated:!0,style:{height:1}}):null,(0,i.tZ)(Re,{command:e.original,filter:l})]},e.original.id)}))}):null]})}function De(e){var n="You have unsaved changes";(0,o.useEffect)((function(){var t=function(e){return e.preventDefault(),e.returnValue=n,n};if(e)return window.addEventListener("beforeunload",t),function(){window.removeEventListener("beforeunload",t)}}),[e])}var _e=(0,Ce.F4)("0%{transform:scale(1);}40%{transform:scale(1.3);}100%{transform:scale(1);}"),Pe=(0,ie.X)({background:[{animationName:_e,animation:"".concat(_e," 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"),boxShadow:"0 0 10px ".concat(f.TV.redStronger)},f.l0.height(11),f.l0.width(11),f.l0.borderRadius("full"),f.l0.position.absolute],container:[f.l0.position.relative,f.l0.align.center,f.l0.justify.center],icon:[{zIndex:1}]});function Be(){return(0,i.BX)(s.G,{css:Pe.container,children:[(0,i.tZ)(de.Z,{css:Pe.icon,color:f.TV.redStronger}),(0,i.tZ)(s.G,{css:Pe.background})]})}var Ae=t(55047),Ue=t(56820),Ne=[{value:"side-by-side",title:"side-by-side"},{value:"stacked",title:"stacked"}],Le=[{value:10,title:"tiny"},{value:12,title:"small"},{value:14,title:"normal"},{value:18,title:"large"},{value:24,title:"huge"}],Xe=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],Me=[{value:2,title:"2"},{value:4,title:"4"},{value:8,title:"8"}],Oe=[{value:"default",title:"default"},{value:"emacs",title:"emacs"},{value:"vim",title:"vim"}],Fe=[{value:"none",title:"none"},{value:"soft",title:"soft wrap"}],We=[{value:"disabled",title:"disabled"},{value:"enabled",title:"enabled"}],He=[{value:"disabled",title:"disabled"},{value:"enabled",title:"enabled"}],ze=[{value:"none",title:"none"},{value:"blocks",title:"blocks"},{value:"characters",title:"characters"}],Ve=["cmdOrCtrlKey","altKey"].map((function(e){return{value:e,title:K.U[e]}})),je=[{value:"disabled",title:"disabled"},{value:"enabled",title:"enabled"}],qe=s.K.div;function $e(){var e=(0,o.useState)(!1),n=e[0],t=e[1],r=(0,o.useState)(!1),l=r[0],u=r[1],p=(0,o.useRef)(!1);return(0,o.useEffect)((function(){p.current=!0;var e=setTimeout((function(){u(n)}),200);return function(){clearTimeout(e)}}),[n]),(0,i.BX)(s.G,{css:[f.l0.rowWithGap(8),f.l0.justify.start,f.l0.align.center],onMouseEnter:function(){return t(!0)},onMouseLeave:function(){return t(!1)},children:[(0,i.tZ)(d.xv,{children:"Code intelligence"}),(0,i.BX)(c.Z,{isOpen:l,onClickOutside:function(){return u(!1)},padding:8,children:[(0,i.tZ)(qe,{children:(0,i.tZ)(a.Z,{})}),(0,i.tZ)(s.G,{css:[f.l0.maxWidth(240)],children:(0,i.BX)(d.xv,{multiline:!0,children:["Code intelligence gives you autocomplete, helpful info, and hints as you type. See more"," ",(0,i.tZ)("a",{href:"https://replit.com/site/blog/intel",target:"_blank",rel:"noreferrer noopener",children:"here."})]})})]})]})}function Ye(e){var n=e.onBeforePreferencesUpdate,t=e.hideLayoutControl,o=e.className,a=e.resetLayout,c=(0,l.Z)(),p=c.preferences,v=c.update,m=(0,w.Vg)((0,Y.useRouter)()),g=(0,w.T3)(),Z=(0,E.P5)({controlName:"flag-ws-minimap"}),x=function(e){n&&n(e),Object.keys(e).forEach((function(n){var t=e[n];(0,u.j)(u.U3.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t})})),v(e)};return p?(0,i.BX)(y.T,{className:o,background:"default",css:[f.l0.p(16),f.l0.colWithGap(32),{paddingBottom:"5em"}],children:[t?null:(0,i.tZ)(h,{id:"layout",title:"Default layout",children:(0,i.BX)(s.G,{css:[f.l0.colWithGap(8)],children:[(0,i.tZ)(G.P,{initialSelectedItem:Ne.find((function(e){return p.isLayoutStacked?"stacked"===e.value:"side-by-side"===e.value})),onChange:function(e){var n="stacked"===(null===e||void 0===e?void 0:e.value);x({isLayoutStacked:n})},items:(0,r.Z)(Ne)}),a?(0,i.tZ)(q.zx,{iconLeft:a.reseting?(0,i.tZ)(b.Z,{}):(0,i.tZ)($.Z,{}),text:"Reset layout",onClick:function(){a.reset()}}):null]})}),(0,i.tZ)(h,{id:"fontSize",title:"Font size",children:(0,i.tZ)(G.P,{initialSelectedItem:Le.find((function(e){return e.value===p.fontSize})),onChange:function(e){var n="number"===typeof(null===e||void 0===e?void 0:e.value)?e.value:14;x({fontSize:n})},items:(0,r.Z)(Le)})}),(0,i.tZ)(h,{id:"indentType",title:"Indent type",children:(0,i.tZ)(G.P,{initialSelectedItem:Xe.find((function(e){return e.value===(p.indentIsSpaces?"spaces":"tabs")})),onChange:function(e){var n="spaces"===(null===e||void 0===e?void 0:e.value);x({indentIsSpaces:n})},items:(0,r.Z)(Xe)})}),(0,i.tZ)(h,{id:"indentSize",title:"Indent size",children:(0,i.tZ)(G.P,{initialSelectedItem:Me.find((function(e){return e.value===p.indentSize})),onChange:function(e){var n="number"===typeof(null===e||void 0===e?void 0:e.value)?e.value:2;x({indentSize:n})},items:(0,r.Z)(Me)})}),(0,i.tZ)(h,{id:"keybinds",title:"Keybinds",children:(0,i.tZ)(G.P,{initialSelectedItem:Oe.find((function(e){return["vim","emacs"].includes(e.value)?e.value===p.keyboardHandler:"default"===e.value&&!p.keyboardHandler})),onChange:function(e){var n=["vim","emacs"].includes(e.value)?e.value:null;x({keyboardHandler:n})},items:(0,r.Z)(Oe),dataCy:"keybinds"})}),(0,i.tZ)(h,{id:"wrapping",title:"Wrapping",children:(0,i.tZ)(G.P,{initialSelectedItem:Fe.find((function(e){return e.value===(p.wrapping?"soft":"none")})),onChange:function(e){var n="soft"===(null===e||void 0===e?void 0:e.value);x({wrapping:n})},items:(0,r.Z)(Fe)})}),(0,i.tZ)(j,{}),(0,i.tZ)(te,{}),(0,i.tZ)(h,{id:"codeIntelligence",title:(0,i.tZ)($e,{}),children:(0,i.tZ)(G.P,{initialSelectedItem:je.find((function(e){return e.value===(p.codeIntelligence?"enabled":"disabled")})),onChange:function(e){var n="enabled"===(null===e||void 0===e?void 0:e.value);x({codeIntelligence:n})},items:(0,r.Z)(je)})}),(0,i.tZ)(h,{id:"accessibleTerminal",title:(0,i.BX)(i.HY,{children:[(0,i.tZ)(d.xv,{children:"Accessible Terminal Output"}),(0,i.tZ)(d.xv,{css:[f.l0.color.foregroundDimmest,f.l0.pt(4)],multiline:!0,children:"Enable this setting to use a screen reader. Warning: this can affect performance."})]}),children:(0,i.tZ)(G.P,{initialSelectedItem:He.find((function(e){return e.value===(p.accessibleTerminal?"enabled":"disabled")})),onChange:function(e){var n="enabled"===(null===e||void 0===e?void 0:e.value);x({accessibleTerminal:n})},items:(0,r.Z)(He)})}),(0,i.tZ)(h,{id:"multiselectModifier",title:(0,i.BX)(i.HY,{children:[(0,i.tZ)(d.xv,{children:"Multiselect modifier key"}),(0,i.tZ)(d.xv,{css:[f.l0.color.foregroundDimmest,f.l0.pt(4)],multiline:!0,children:"Modifier key for selecting multiple items in the filetree."})]}),children:(0,i.tZ)(G.P,{initialSelectedItem:Ve.find((function(e){return e.value===p.multiselectModifierKey})),onChange:function(e){x({multiselectModifierKey:e.value})},items:(0,r.Z)(Ve)})}),(0,i.tZ)(h,{id:"webviewAutoOpenOnPortOpened",title:(0,i.tZ)(i.HY,{children:(0,i.tZ)(d.xv,{children:"Automatically open Webview when a port is open"})}),children:(0,i.tZ)(G.P,{initialSelectedItem:We.find((function(e){return e.value===(p.webviewAutoOpenOnPortOpened?"enabled":"disabled")})),onChange:function(e){var n="enabled"===(null===e||void 0===e?void 0:e.value);x({webviewAutoOpenOnPortOpened:n})},items:(0,r.Z)(We)})}),Z&&!g?(0,i.tZ)(h,{id:"minimap",title:"Minimap",children:(0,i.tZ)(G.P,{initialSelectedItem:ze.find((function(e){return e.value===p.minimapDisplay})),onChange:function(e){x({minimapDisplay:e.value})},items:(0,r.Z)(ze)})}):null,m?null:(0,i.tZ)(h,{id:"theme",title:"Theme",children:(0,i.tZ)(Ae.Z,{context:Ue.HY.WorkspacePreferencesPane})}),g?null:(0,i.tZ)(h,{id:"keyboard_shortcuts",title:"Keyboard Shortcuts",children:(0,i.tZ)(Ge,{})})]}):null}},31389:function(e,n,t){t.d(n,{BZ:function(){return D},HX:function(){return I},WM:function(){return B},ap:function(){return O},gF:function(){return N},l9:function(){return A},pr:function(){return W},vN:function(){return z},vi:function(){return X},zu:function(){return P}});var r=t(72006),i=t(43119),o=t(71440),a=t(18012),l=t(88156),c=t(74486),u=t(79181),s=t(36726),d=t(11138),f=t(25037),p=t(62052),h=t(24170),v=t(67216),m=t(59187);function g(){var e=(0,i.Z)(["\n  fragment ReplPowerUpCosts on Repl {\n    id\n    powerUpCosts {\n      ... on PowerUpCostsType {\n        alwaysOn {\n          cycles\n          explanation\n        }\n        gpu {\n          cycles\n          explanation\n        }\n      }\n    }\n  }\n"]);return g=function(){return e},e}function y(){var e=(0,i.Z)(["\n  fragment WorkspaceHeaderReplInfoRepl on Repl {\n    id\n    title\n    rawTemplateLabel: templateLabel(disableFallbackToTitle: true)\n    description\n    isPrivate\n    isRenamed\n    url\n    slug\n    workspaceCta\n    isAlwaysOn\n    isBoosted\n    hasGpu\n    lastPublishedAt\n    publishedAs\n    currentUserPermissions {\n      containerAttach\n      changeIconUrl\n      changeTemplateLabel\n      changeTitle\n      changeDescription\n      changePrivacy\n      delete\n      changeAlwaysOn\n      publish\n      fork\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    user {\n      id\n      image\n      ...UserLinkUser\n    }\n    ...WorkspaceHeaderReplMetadataRepl\n    ...ReplEnvironmentWebviewRepl\n    ...PublishReleaseFormRepl\n    ...PowerUpActionsMultiBoostToggle\n    ...ReplInfoEditReplTitleRepl\n    ...ReplInfoEditReplDescriptionRepl\n    ...ReplInfoEditReplTemplateLabelRepl\n    ...ReplPowerUpCosts\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return y=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  query WorkspaceHeaderReplInfo($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function b(){var e=(0,i.Z)(["\n  query CurrentUserStates {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userSubscriptionType\n      }\n    }\n  }\n"]);return b=function(){return e},e}function w(){var e=(0,i.Z)(["\n  query ReplPowerUpStatus {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userPowerUpsByType {\n          ... on UserPowerUpsTypes {\n            privateRepls {\n              active\n              cost {\n                cycles\n                explanation\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return w=function(){return e},e}function x(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function C(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return C=function(){return e},e}function k(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return k=function(){return e},e}function S(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoSetAlwaysOn(\n    $replId: ID!\n    $enabled: Boolean!\n  ) {\n    setAlwaysOn(replId: $replId, enabled: $enabled) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n        ...ReplPowerUpCosts\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return S=function(){return e},e}function T(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoSetGpu($replId: ID!, $enabled: Boolean!) {\n    setGpu(replId: $replId, enabled: $enabled) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n        ...ReplPowerUpCosts\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return T=function(){return e},e}var E={},R=(0,o.Ps)(g()),I=(0,o.Ps)(y(),a._,l.s,c.sY,u.wd,s.qo,d.Zx,f.LU,p.Jr,R),G=(0,o.Ps)(Z(),I);function D(e){var n=(0,r.Z)({},E,e);return v.a(G,n)}var _=(0,o.Ps)(b());function P(e){var n=(0,r.Z)({},E,e);return v.a(_,n)}var B=(0,o.Ps)(w());function A(e){var n=(0,r.Z)({},E,e);return v.a(B,n)}var U=(0,o.Ps)(x(),h.FW);function N(e){var n=(0,r.Z)({},E,e);return m.D(U,n)}var L=(0,o.Ps)(C(),I);function X(e){var n=(0,r.Z)({},E,e);return m.D(L,n)}var M=(0,o.Ps)(k());function O(e){var n=(0,r.Z)({},E,e);return m.D(M,n)}var F=(0,o.Ps)(S(),I,R);function W(e){var n=(0,r.Z)({},E,e);return m.D(F,n)}var H=(0,o.Ps)(T(),I,R);function z(e){var n=(0,r.Z)({},E,e);return m.D(H,n)}},62171:function(e,n,t){t.d(n,{Z:function(){return Ln}});var r=t(57135),i=t(72006),o=t(4405),a=t(2272),l=t(96583),c=t(4541),u=t(95980),s=t.n(u),d=t(88254),f=t(50959),p=t(11414),h=t(96262),v=t(79836),m=t(89853),g=t(3668),y=t(22167),Z=t(55544),b=t(25776),w=t(47923),x=t(86763),C=t.n(x),k=t(42735),S=t(98260),T=t(11138),E=t(40306),R=t(75916),I=t(7247),G=t(97774),D=t(24403),_=t(7579),P={positive:y.TV.accentPositiveDefault,warning:y.TV.orangeDefault,dimmer:y.TV.foregroundDimmer,error:y.TV.redDefault},B=(0,m.X)({root:[y.l0.rowWithGap(4),{"& > *":{color:"inherit"}}]});function A(e){return(0,c.BX)(b.G,{style:{color:P[e.color]},css:B.root,children:[(0,f.cloneElement)(e.icon,{size:12}),(0,c.tZ)(Z.xv,{variant:"small",children:e.text})]})}var U=(0,m.X)({root:[y.l0.colWithGap(8)],controls:[y.l0.rowWithGap(8),y.l0.justify.end],inputRow:[y.l0.rowWithGap(8)],messages:[y.l0.colWithGap(4)],positiveText:[y.l0.color.accentPositiveDefault,y.l0.rowWithGap(4)],warningText:[y.l0.color.orangeDefault,y.l0.rowWithGap(4)],loadingText:[y.l0.color.foregroundDimmer,y.l0.rowWithGap(4)],input:[y.l0.flex.growAndShrink(1)],hidden:[y.l0.visibility.hidden]});function N(e){var n,t=e.repl,r=e.done,i=(0,f.useState)(t.title),o=i[0],l=i[1],u=(0,f.useState)(null),s=u[0],d=u[1],p=(0,_.H)()("title"),h=(0,a.Z)((0,T.uB)({onCompleted:function(){r()},onError:function(){d("Something went wrong")}}),2),v=h[0],m=h[1],g="Team"===(null===(n=t.owner)||void 0===n?void 0:n.__typename)?t.owner.id:null,y=t.title!==o,w=function(e){var n=(0,f.useState)(null),t=n[0],r=n[1],i=(0,a.Z)((0,T.C4)({onCompleted:function(e){var n="AvailableReplTitleResult"===e.availableReplTitle.__typename?e.availableReplTitle:null;r(n?{type:"result",isAvailable:n.isAvailable}:{type:"error",message:"Something went wrong"})},onError:function(){r({type:"error",message:"Something went wrong"})}}),1)[0],o=(0,I.Z)((function(){return C()(i)}),[i]),l=null===e||void 0===e?void 0:e.title,c=null===e||void 0===e?void 0:e.teamId;return(0,f.useEffect)((function(){l&&(r({type:"loading"}),o({variables:{input:{title:l,teamId:c}}}))}),[o,l,c]),t}(y?{title:o,teamId:g}:null),x="result"===(null===w||void 0===w?void 0:w.type)&&w.isAvailable,P="result"===(null===w||void 0===w?void 0:w.type)&&!w.isAvailable,B=y&&x&&o;return(0,c.BX)(b.G,{tag:"form",onSubmit:function(e){e.preventDefault(),v({variables:{input:{title:o,id:t.id}}})},css:U.root,children:[(0,c.tZ)(b.G,{tag:"label",htmlFor:p,children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Name"})}),(0,c.BX)(b.G,{css:U.inputRow,children:[(0,c.tZ)(k.II,{placeholder:t.title,id:p,value:o,onChange:function(e){s&&d(null);var n=e.currentTarget.value;l(n.length>60?n.slice(0,60):n)},autoFocus:!0}),(0,c.BX)(b.G,{css:U.controls,children:[(0,c.tZ)(S.zx,{text:"Cancel",onClick:function(){return r()}}),m.loading?(0,c.tZ)(S.zx,{disabled:!0,text:"Renaming",colorway:"primary"}):(0,c.tZ)(S.zx,{type:"submit",disabled:!B,text:"Rename",colorway:"primary"})]})]}),(0,c.BX)(b.G,{css:U.messages,children:["loading"===(null===w||void 0===w?void 0:w.type)?(0,c.BX)(c.HY,{children:[(0,c.tZ)(A,{icon:(0,c.tZ)(G.Z,{}),text:"Loading...",color:"dimmer"}),(0,c.tZ)(Z.xv,{css:U.hidden,variant:"small",children:"..."})]}):null,B?(0,c.BX)(c.HY,{children:[(0,c.tZ)(A,{icon:(0,c.tZ)(R.Z,{}),text:"\u201c".concat(o,"\u201d is available"),color:"positive"}),(0,c.tZ)(A,{icon:(0,c.tZ)(E.Z,{}),text:"Your Repl will momentarily turn off while the Workspace reloads.",color:"warning"})]}):null,P?(0,c.tZ)(A,{icon:(0,c.tZ)(D.Z,{}),text:"The Repl \u201c".concat(o,"\u201d already exists on this account."),color:"error"}):null,s?(0,c.tZ)(A,{icon:(0,c.tZ)(E.Z,{}),text:s,color:"warning"}):null]})]})}var L=t(25037),X=t(72186),M=(0,m.X)({root:[y.l0.colWithGap(8)],controls:[y.l0.rowWithGap(8),y.l0.justify.end]});function O(e){var n,t=e.repl,r=e.done,i=(0,_.H)()("description"),o=(0,f.useState)(null!==(n=t.description)&&void 0!==n?n:""),l=o[0],u=o[1],s=(0,f.useState)(null),d=s[0],p=s[1],h=t.description!==l,v=(0,a.Z)((0,L.Ot)({onCompleted:function(){r()},onError:function(){p("Something went wrong")}}),2),m=v[0],g=v[1];return(0,c.BX)(b.G,{tag:"form",css:M.root,onSubmit:function(e){e.preventDefault(),m({variables:{input:{description:l,id:t.id}}})},children:[(0,c.tZ)(b.G,{tag:"label",htmlFor:i,children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Description"})}),(0,c.tZ)(k.B,{autoFocus:!0,placeholder:"What does this Repl do?",id:i,autoSize:!0,value:l,onChange:function(e){d&&p(null);var n=e.currentTarget.value;u(n.length>X.p?n.slice(0,X.p):n)}}),d?(0,c.tZ)(A,{icon:(0,c.tZ)(E.Z,{}),text:d,color:"warning"}):null,(0,c.BX)(b.G,{css:M.controls,children:[(0,c.tZ)(S.zx,{text:"Cancel",onClick:function(){return r()}}),g.loading?(0,c.tZ)(S.zx,{disabled:!0,text:"Saving\u2026",colorway:"primary"}):(0,c.tZ)(S.zx,{disabled:!h,text:"Save description",colorway:"primary",type:"submit"})]})]})}var F=t(62052),W=(0,m.X)({root:[y.l0.colWithGap(8)],inputRow:[y.l0.rowWithGap(8)],controls:[y.l0.rowWithGap(8),y.l0.justify.end]});function H(e){var n,t=e.repl,r=e.done,i=(0,_.H)()("templateLabel"),o=(0,f.useState)(null!==(n=t.templateLabel)&&void 0!==n?n:""),l=o[0],u=o[1],s=(0,f.useState)(null),d=s[0],p=s[1],h=t.templateLabel!==l&&l,v=(0,a.Z)((0,F.ie)({onCompleted:function(){r()},onError:function(){p("Something went wrong")}}),2),m=v[0],g=v[1];return(0,c.BX)(b.G,{tag:"form",css:W.root,onSubmit:function(e){e.preventDefault(),m({variables:{input:{templateLabel:l,id:t.id}}})},children:[(0,c.tZ)(b.G,{tag:"label",htmlFor:i,children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Template label"})}),(0,c.BX)(b.G,{css:W.inputRow,children:[(0,c.tZ)(k.II,{autoFocus:!0,placeholder:"An optional custom title",id:i,value:l,onChange:function(e){d&&p(null),u(e.currentTarget.value)}}),(0,c.BX)(b.G,{css:W.controls,children:[(0,c.tZ)(S.zx,{text:"Cancel",onClick:function(){return r()}}),g.loading?(0,c.tZ)(S.zx,{disabled:!0,text:"Saving\u2026",colorway:"primary"}):(0,c.tZ)(S.zx,{disabled:!h,text:"Save",colorway:"primary",type:"submit"})]})]}),d?(0,c.tZ)(A,{icon:(0,c.tZ)(E.Z,{}),text:d,color:"warning"}):null]})}var z=(0,m.X)({root:[y.l0.colWithGap(0)],row:[y.l0.rowWithGap(8),y.l0.align.center],text:[y.l0.flex.growAndShrink(1)]});function V(e){var n=e.repl,t=(0,f.useState)(!1),r=t[0],i=t[1];return r?(0,c.tZ)(N,{repl:n,done:function(){return i(!1)}}):(0,c.BX)(b.G,{css:z.root,children:[(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Name"}),(0,c.BX)(b.G,{css:z.row,children:[(0,c.BX)(Z.xv,{color:n.isRenamed?void 0:"dimmest",css:z.text,children:[n.isRenamed?null:"Default name: ",n.title]}),(0,c.tZ)(g.h,{alt:"Edit",onClick:function(){return i(!0)},children:(0,c.tZ)(w.Z,{})})]})]})}var j=(0,m.X)({root:[y.l0.colWithGap(0)],row:[y.l0.rowWithGap(8),y.l0.justify.spaceBetween,y.l0.align.start],text:[y.l0.flex.growAndShrink(1)]});function q(e){var n=e.repl,t=(0,f.useState)(!1),r=t[0],i=t[1];return r?(0,c.tZ)(O,{repl:n,done:function(){return i(!1)}}):(0,c.BX)(b.G,{css:j.root,children:[(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Description"}),(0,c.BX)(b.G,{css:j.row,children:[n.description?(0,c.tZ)(Z.xv,{color:"dimmer",css:j.text,maxLines:2,children:n.description}):(0,c.tZ)(Z.xv,{color:"dimmest",css:j.text,children:"No description"}),(0,c.tZ)(g.h,{alt:"Edit",onClick:function(){return i(!0)},children:(0,c.tZ)(w.Z,{})})]})]})}function $(e){var n=e.repl,t=(0,f.useState)(!1),r=t[0],i=t[1];return r?(0,c.tZ)(H,{repl:n,done:function(){return i(!1)}}):(0,c.BX)(b.G,{css:j.root,children:[(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Template label"}),(0,c.BX)(b.G,{css:j.row,children:[n.templateLabel?(0,c.tZ)(Z.xv,{css:j.text,children:n.templateLabel}):(0,c.tZ)(Z.xv,{color:"dimmest",css:j.text,children:"No template label"}),(0,c.tZ)(g.h,{alt:"Edit",onClick:function(){return i(!0)},children:(0,c.tZ)(w.Z,{})})]})]})}var Y=t(90879),K=t(50752),Q=t(33405),J=t(351),ee=t(73135),ne=t(84763),te=t(13040),re=t(19376),ie=t(12018),oe=t(36481),ae=t(33229),le=t(98689),ce=t(46598),ue=t(30241),se=t(29075),de=t(72897),fe=t(87020),pe=t(91355),he=t(53323),ve=t(22529),me=t(78838),ge=t(96035),ye=t(95872),Ze=t(2882),be=t(45685),we=t(54907),xe=t(35021),Ce=t(37676),ke=t(58364),Se=t(3740),Te=t(62374),Ee=t(77770),Re=t(46900),Ie=t(33529),Ge=t(39056),De=t(38559),_e=t(19978),Pe=t(35748),Be=t(46597),Ae=t(59389),Ue=t(27396),Ne=t(62830),Le=t(47409),Xe=t(57332),Me=(0,m.X)({self:[y.l0.flex.column],content:[y.l0.pt(16),y.l0.px(12),y.l0.pb(12),y.l0.colWithGap(16)],header:[y.l0.p(12),y.l0.rowWithGap(8),y.l0.justify.start,y.l0.border({color:y.TV.outlineDefault,width:1,style:"solid",direction:"bottom"})],actions:[y.l0.colWithGap(8)],footer:[y.l0.rowWithGap(16),y.l0.justify.spaceBetween,y.l0.align.center,y.l0.pt(4)],loadingWrapper:[y.l0.center],storageBarWrapper:[y.l0.colWithGap(8)],summaryWrapper:[y.l0.colWithGap(8),y.l0.align.start],totalSummaryDot:[y.l0.backgroundColor.backgroundHigher,y.l0.width(8),y.l0.height(8),{borderRadius:"50%"}],replSummaryDot:[y.l0.backgroundColor.accentPrimaryDefault,y.l0.width(8),y.l0.height(8),{borderRadius:"50%"}],summaryRow:[y.l0.rowWithGap(8),y.l0.justify.start,y.l0.align.center,y.l0.fontSize(14),y.l0.height(14)],replSummaryText:[y.l0.color.accentPrimaryStronger],replSummaryUsage:[y.l0.color.accentPrimaryStrongest],replUsagePlaceholder:[Le.p.backgroundPulse(y.TV.backgroundHigher,y.TV.backgroundRoot),{opacity:.5},y.l0.borderRadius(4),y.l0.height("100%"),y.l0.width(64)],totalUsagePlaceholder:[Le.p.backgroundPulse(y.TV.backgroundHigher,y.TV.backgroundRoot),{opacity:.5},y.l0.borderRadius(4),y.l0.height("100%"),y.l0.width(140)],availablePlaceholder:[Le.p.backgroundPulse(y.TV.backgroundHigher,y.TV.backgroundRoot),{opacity:.5},y.l0.borderRadius(4),y.l0.height("100%"),y.l0.width(64)],availableText:[y.l0.color.foregroundDimmest]}),Oe=function(e){var n,t=e.isOpen,r=e.onRequestClose,a=(0,ue.Z)(),l=(0,ee.Z)(),u=(0,f.useState)(!1),s=u[0],d=u[1],p=(0,f.useState)(!1),h=p[0],v=p[1],m=(0,Pe.Pf)({fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0}),g=m.data,y=m.loading,w=m.refetch,x=(0,ie.P5)({controlName:"flag-storage-dynamic-resize-beta"});if((0,f.useEffect)((function(){var e,n;g&&"AccountStorageUtilization"===(null===(e=g.currentUser)||void 0===e?void 0:e.storageInfo.accountStorageUtilization.__typename)&&"ReplStorageUtilization"===(null===(n=g.currentUser.storageInfo.accountStorageUtilization.perRepl.find((function(e){return e.repl.id===a})))||void 0===n?void 0:n.__typename)&&v(!0)}),[g,a]),y&&!g)return(0,c.tZ)(xe.u,{noPadding:!0,isOpen:t,onRequestClose:r,hideCloseButton:!0,children:(0,c.BX)(b.G,{css:Me.self,children:[(0,c.BX)(b.G,{css:Me.header,children:[(0,c.tZ)(Ge.Z,{size:16,onClick:r}),(0,c.tZ)(Ie.Z,{size:16}),(0,c.tZ)(Z.xv,{variant:"subheadDefault",children:"Repl Storage"})]}),(0,c.BX)(b.G,{css:Me.content,children:[(0,c.BX)(b.G,{css:Me.storageBarWrapper,children:[(0,c.tZ)(_e.P,{}),(0,c.BX)(b.G,{css:Me.summaryWrapper,children:[(0,c.BX)(b.G,{css:Me.summaryRow,children:[(0,c.tZ)("div",{css:Me.replSummaryDot}),(0,c.tZ)(Z.xv,{css:Me.replSummaryText,children:"This Repl:"}),(0,c.tZ)(b.G,{css:Me.replUsagePlaceholder})]}),(0,c.BX)(b.G,{css:Me.summaryRow,children:[(0,c.tZ)("div",{css:Me.totalSummaryDot}),(0,c.tZ)(b.G,{css:Me.totalUsagePlaceholder}),(0,c.tZ)(b.G,{css:Me.availablePlaceholder})]})]})]}),(0,c.tZ)(b.G,{css:Me.footer,children:l?(0,c.tZ)(S.zx,{onClick:function(){J.X.openExternalUrl(De.$I.as)},text:"Manage Repls"}):(0,c.tZ)(Re.Z,{href:De.$I.href,as:De.$I.as,text:"Manage Repls"})})]})]})});if(g&&"CurrentUser"===(null===(n=g.currentUser)||void 0===n?void 0:n.__typename)&&"StorageQuota"===g.currentUser.storageInfo.storageQuota.__typename&&"AccountStorageUtilization"===g.currentUser.storageInfo.accountStorageUtilization.__typename){var C=g.currentUser.username,k=g.currentUser.storageInfo.accountStorageUtilization,T=g.currentUser.storageInfo.storageQuota.quota,E=k.total,R=k.perRepl,I=Number("0"===T?E:T),G=g.currentUser.userSubscriptionType,D=G===Ne.HP.HackerPro,_=Math.max(Number(T)-Number(E),0),P="(".concat((0,Ae.fZ)(_,{precision:2})," available)"),B=R.find((function(e){return e.repl.id===a})),A="0"!==T?(0,c.tZ)(Z.xv,{css:Me.availableText,children:P}):null;return(0,c.BX)(xe.u,{noPadding:!0,isOpen:t,onRequestClose:r,hideCloseButton:!0,children:[(0,c.BX)(b.G,{css:Me.self,children:[(0,c.BX)(b.G,{css:Me.header,children:[(0,c.tZ)(Ge.Z,{size:16,onClick:r}),(0,c.tZ)(Ie.Z,{size:16}),(0,c.tZ)(Z.xv,{variant:"subheadDefault",children:"Repl Storage"})]}),(0,c.BX)(b.G,{css:Me.content,children:[(0,c.BX)(b.G,{css:Me.storageBarWrapper,children:[!y&&h?(0,c.tZ)(_e.T,{context:{type:"workspace_info_modal",replId:a},summary:(0,Be._)((0,o.Z)((0,i.Z)({},k),{quota:T})),username:C}):(0,c.tZ)(_e.P,{}),(0,c.BX)(b.G,{css:Me.summaryWrapper,children:[(0,c.BX)(b.G,{css:Me.summaryRow,children:[(0,c.tZ)("div",{css:Me.replSummaryDot}),(0,c.tZ)(Z.xv,{css:Me.replSummaryText,children:"This Repl:"}),h&&B?(0,c.tZ)(Z.xv,{css:Me.replSummaryUsage,children:(0,Ae.fZ)(Number(B.usage),{precision:2})}):(0,c.tZ)(b.G,{css:Me.replUsagePlaceholder})]}),(0,c.BX)(b.G,{css:Me.summaryRow,children:[(0,c.tZ)("div",{css:Me.totalSummaryDot}),y?(0,c.BX)(c.HY,{children:[(0,c.tZ)(b.G,{css:Me.totalUsagePlaceholder}),(0,c.tZ)(b.G,{css:Me.availablePlaceholder})]}):(0,c.BX)(c.HY,{children:[(0,c.BX)(Z.xv,{children:[Fe(G)," storage:"]}),(0,c.tZ)(Z.xv,{children:(0,Ae.fZ)(Number(I),{precision:2})}),A]})]})]})]}),(0,c.BX)(b.G,{css:Me.footer,children:[(0,c.tZ)(Re.Z,(0,o.Z)((0,i.Z)({},(0,Xe.Ru)(C)),{text:"Manage Repls"})),x&&!D?(0,c.tZ)(S.zx,{colorway:"primary",text:"Upgrade Storage",onClick:function(){return d(!0)}}):null]})]})]}),(0,c.tZ)(Ue.Z,{isOpen:s,initialTab:"plans",context:"workspace_info_modal",uponPurchaseGoTo:"workspace",onPlanCheckoutComplete:function(){w(),d(!1)},onRequestClose:function(){d(!1)}})]})}return(0,c.tZ)(xe.u,{noPadding:!0,isOpen:t,onRequestClose:r,hideCloseButton:!0,children:(0,c.BX)(b.G,{css:Me.self,children:[(0,c.BX)(b.G,{css:Me.header,children:[(0,c.tZ)(Ge.Z,{size:16,onClick:r}),(0,c.tZ)(Ie.Z,{size:16}),(0,c.tZ)(Z.xv,{variant:"subheadDefault",children:"Repl Storage"})]}),(0,c.BX)(b.G,{css:Me.content,children:[(0,c.tZ)(Z.xv,{color:"dimmest",children:"We had trouble loading your storage information. Please try again later."}),(0,c.tZ)(b.G,{css:Me.footer,children:(0,c.tZ)(Re.Z,{href:De.$I.href,as:De.$I.as,text:"Manage Repls"})})]})]})})},Fe=function(e){switch(e){case Ne.HP.HackerPro:return"Pro plan";case Ne.HP.Hacker:return"Hacker plan";default:return"Free plan"}},We=t(3941),He=t(35955),ze=t(94370),Ve=t(91309),je=t(31389),qe=t(57389),$e=t(89632),Ye=t(47287),Ke=t(41099),Qe=t(73483),Je=t(26430),en=t(63067),nn=t(23084),tn=t(95693);function rn(e){var n=f.useRef(null),t=(0,a.Z)(f.useState(e.value),2),r=t[0],i=t[1],o=(0,a.Z)(f.useState(null),2),l=o[0],u=o[1],d=(0,Qe.Z)({onUpload:function(n){var t=n.url;e.onChange(t)},onUploadPreview:function(e){var n=e.dataUrl;i(n)},onError:function(e){u(e.message)}});f.useEffect((function(){i(e.value)}),[e.value]);var p=null===r||void 0===r?void 0:r.startsWith("data:"),h=32;return(0,c.BX)(Je.gC,{spacing:"var(--space-4)",children:[(0,c.BX)("div",{onClick:function(){var e;null===(e=n.current)||void 0===e||e.click()},"aria-label":r?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" "+((r?"update-icon":"add-icon")||""),children:[r?(0,c.BX)(c.HY,{children:[(0,c.tZ)(Ke.Z,{iconUrl:r,size:h,alt:"icon"}),p?(0,c.tZ)("div",{className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" loading-state",children:(0,c.tZ)("div",{className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" loading-icon",children:(0,c.tZ)(G.Z,{})})}):(0,c.tZ)("div",{className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" hover-state",children:(0,c.tZ)(w.Z,{})})]}):(0,c.tZ)(en.Z,{}),(0,c.tZ)("input",{ref:n,accept:nn.W9.join(","),type:"file",onChange:function(e){var n=e.target,t=n.validity,r=n.files;t.valid&&(null===r||void 0===r?void 0:r.length)&&(u(null),d.uploadImage(r[0],tn.N.TemplateIcon))},className:s().dynamic([["5de27f185cb9bc33",[h,h]]])})]}),l?(0,c.tZ)("div",{className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" error",children:l}):null,(0,c.tZ)(s(),{id:"5de27f185cb9bc33",dynamic:[h,h],children:".add-icon.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px dashed var(--foreground-dimmest);background-color:var(--background-root);width:".concat(h,"px;height:").concat(h,"px}.add-icon.__jsx-style-dynamic-selector:hover{color:var(--accent-primary-default);border-color:var(--accent-primary-default)}.add-icon.__jsx-style-dynamic-selector,.update-icon.__jsx-style-dynamic-selector{position:relative;cursor:pointer;background-color:var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:2px}.update-icon.__jsx-style-dynamic-selector:hover .hover-state.__jsx-style-dynamic-selector{opacity:.8}.hover-state.__jsx-style-dynamic-selector{opacity:0}.loading-state.__jsx-style-dynamic-selector{opacity:.8}.loading-icon.__jsx-style-dynamic-selector{-webkit-animation:rotate 1s linear infinite;-moz-animation:rotate 1s linear infinite;-o-animation:rotate 1s linear infinite;animation:rotate 1s linear infinite;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes rotate{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes rotate{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.hover-state.__jsx-style-dynamic-selector,.loading-state.__jsx-style-dynamic-selector{color:var(--accent-primary-default);position:absolute;top:0;left:0;width:100%;height:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);background-color:var(--background-root);overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}input.__jsx-style-dynamic-selector{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1}.error.__jsx-style-dynamic-selector{font-size:var(--font-size-default);color:var(--accent-negative-default)}")})]})}var on,an,ln=t(29126),cn=t(52308),un=t(11115),sn=t(3220),dn=t(84561),fn=t(99190);!function(e){e.DeleteRepl="DeleteRepl",e.PowerUp="PowerUp",e.BuyCycles="BuyCycles",e.ForkRepl="ForkRepl",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings",e.Publish="Publish",e.UpdatePublishedTemplate="UpdatePublishedTemplate",e.UpdatePublishedRepl="UpdatePublishedRepl",e.ManageStorage="ManageStorage"}(on||(on={})),function(e){e.Fork="Fork",e.Delete="Delete",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings"}(an||(an={}));var pn=t(81685),hn=t(8415),vn=t(60109),mn=(0,m.X)({destructiveMenuItem:[y.l0.color.accentNegativeStronger]});function gn(e){var n=e.repl,t=(0,ee.Z)(),r=(0,f.useMemo)((function(){return n.user?{text:n.user.username,css:[{"&, & span":y.l0.flex.shrink(1)}],iconLeft:(0,c.tZ)($e.q,{src:n.user.image,username:n.user.username})}:{text:""}}),[n]);if(!n.user)return null;var a=(0,Xe.Ru)(n.user);return t?(0,c.tZ)(S.zx,(0,o.Z)((0,i.Z)({},r),{onClick:function(){J.X.openExternalUrl(a.as)}})):(0,c.tZ)(Re.Z,(0,o.Z)((0,i.Z)({},r,a),{prefetch:!1}))}function yn(e){var n=e.setActiveDialog,t=e.repl,r=e.isTemplate,a=e.updateIconUrl,l=e.showCloseButton,u=e.setIsEditing,s=e.updateReplInfo,d=(0,pn.Z)(),f=Boolean(t.publishedAs),p=t.currentUserPermissions.publish,h=(0,ee.Z)(),v=!(null===t||void 0===t?void 0:t.publishedAs)&&!h,m=(null===t||void 0===t?void 0:t.publishedAs)===Ne.O2.RegularRepl,x=[];t.currentUserPermissions.fork&&x.push({value:an.Fork,label:"Fork",icon:(0,c.tZ)(un.Z,{})}),t.publishedAs===Ne.O2.RegularRepl&&p&&!h&&x.push({value:an.Unpublish,label:"Unpublish",icon:(0,c.tZ)(cn.Z,{})}),r&&p&&!h&&x.push({value:an.UnpublishTemplate,label:"Unpublish template",icon:(0,c.tZ)(cn.Z,{})}),f&&p&&!h&&x.push({value:an.EditPublishSettings,label:"Edit Publish Settings",icon:(0,c.tZ)(w.Z,{})}),t.currentUserPermissions.delete&&x.push({isDestructive:!0,value:an.Delete,label:"Delete",icon:(0,c.tZ)(sn.Z,{})});var C=(null===t||void 0===t?void 0:t.isPrivate)||!(null===t||void 0===t?void 0:t.isRenamed),k="";return(null===t||void 0===t?void 0:t.isPrivate)?k="This Repl is private. You need to make it public in order to publish it!":(null===t||void 0===t?void 0:t.isRenamed)||(k="You need to give this Repl a name before publishing it."),(0,c.BX)(b.G,{css:[y.l0.colWithGap(8),y.l0.p(8)],children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center,y.l0.justify.spaceBetween,(0,qe.Z)({},y.BC.max("mobileMax"),[y.l0.flex.columnReverse,y.l0.align.start,{gap:y.TV.space8}])],children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.center,y.l0.flex.shrink(1)],children:[(0,c.tZ)(gn,{repl:t}),t.currentUserPermissions.changeIconUrl&&r?(0,c.tZ)(rn,{value:t.iconUrl,onChange:a}):null]}),(0,c.BX)(b.G,{css:[y.l0.align.center,y.l0.rowWithGap(8),(0,qe.Z)({},y.BC.max("mobileMax"),{width:"100%",">*:not(div)":{flex:1}})],children:[h?null:(0,c.tZ)(Re.Z,(0,o.Z)((0,i.Z)({prefetch:!1},(0,ln.j3)(t)),{iconLeft:(0,c.tZ)(fn.Z,{}),colorway:"primary",text:"Cover page",target:"_blank"})),p&&v&&!d?(0,c.tZ)(Ye.u,{tooltip:k,isDisabled:!C,children:(0,c.tZ)(S.zx,{type:"button",iconLeft:(0,c.tZ)(en.Z,{}),onClick:function(){n(on.Publish)},dataCy:"ws-publish-button",text:"Publish",disabled:C})}):null,r&&!h?(0,c.tZ)(S.zx,{type:"button",iconLeft:(0,c.tZ)(en.Z,{}),onClick:function(){return n(on.UpdatePublishedTemplate)},text:"Update"}):null,m&&!h?(0,c.tZ)(S.zx,{type:"button",iconLeft:(0,c.tZ)(dn.Z,{}),onClick:function(){return n(on.UpdatePublishedRepl)},text:"Update"}):null,x.length>0&&(0,c.tZ)(hn.ZE,{icon:(0,c.tZ)(vn.Z,{size:16}),"aria-label":r?"Template Actions":"Repl Actions",cssProps:[y.l0.backgroundColor.backgroundDefault],placement:"bottom-end",onAction:function(e){switch(e){case an.Fork:return void n(on.ForkRepl);case an.Unpublish:return void n(on.Unpublish);case an.UnpublishTemplate:return void n(on.UnpublishTemplate);case an.Delete:return void n(on.DeleteRepl);case an.EditPublishSettings:n(on.EditPublishSettings)}},children:x.map((function(e){return(0,c.tZ)(hn.ck,{children:(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),e.isDestructive&&mn.destructiveMenuItem],children:[e.icon,(0,c.tZ)(b.G,{children:e.label})]})},e.value)}))}),l?(0,c.tZ)(g.h,{alt:"Close",tooltipHidden:!0,onClick:function(){s(),u(!1)},children:(0,c.tZ)(D.Z,{})}):null]})]}),t.lastPublishedAt&&p?(0,c.BX)(Z.xv,{variant:"small",color:"dimmest",children:["Last published on"," ",new Date(t.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]})}var Zn=t(74171),bn=t(77408),wn=t(69632),xn=t(57004),Cn=t(24793),kn=t(47200),Sn=t(47236),Tn=(0,m.X)({self:[y.l0.display.flex,y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],powerupInfo:[y.l0.colWithGap(8)],powerupLabel:[y.l0.rowWithGap(8),y.l0.align.center],editButtonWrapper:[y.l0.rowWithGap(8),y.l0.align.center],pill:[y.l0.border({style:"none"}),y.l0.fontWeight.medium,y.l0.backgroundColor.foregroundDimmer,y.l0.color.backgroundRoot,y.l0.maxWidth("fit-content")],loadingPill:[y.l0.border({style:"none"}),y.l0.fontWeight.medium,y.l0.backgroundColor.foregroundDimmer,y.l0.color.backgroundRoot,y.l0.maxWidth("fit-content"),Le.p.backgroundPulse(y.TV.foregroundDimmer,y.TV.foregroundDimmest),Le.p.foregroundPulse(y.TV.backgroundRoot,y.TV.backgroundHigher)],editButton:[y.l0.p(16),y.l0.backgroundColor.backgroundHigher]}),En=function(e){var n,t=e.showPowerUpModal,r=(0,kn.Z)().dataAtom.disk,i=r.currentAtom,o=r.totalAtom,a=(0,ue.Z)(),l=(0,Sn.Dv)(i),u=(0,Sn.Dv)(o),s=(0,f.useState)(!1),d=s[0],p=s[1],h=(0,Pe.Pf)({pollInterval:3e3,onError:function(e){y()}}),v=h.data,m=h.loading,y=h.stopPolling;(0,f.useEffect)((function(){var e,n,t;return v&&"AccountStorageUtilization"!==(null===(e=v.currentUser)||void 0===e?void 0:e.storageInfo.accountStorageUtilization.__typename)&&y(),v&&"AccountStorageUtilization"===(null===(n=v.currentUser)||void 0===n?void 0:n.storageInfo.accountStorageUtilization.__typename)&&"ReplStorageUtilization"===(null===(t=v.currentUser.storageInfo.accountStorageUtilization.perRepl.find((function(e){return e.repl.id===a})))||void 0===t?void 0:t.__typename)&&(p(!0),y()),function(){y()}}),[v,a,y]);var w=null;if(v&&"CurrentUser"===(null===(n=v.currentUser)||void 0===n?void 0:n.__typename)&&"StorageQuota"===v.currentUser.storageInfo.storageQuota.__typename&&"AccountStorageUtilization"===v.currentUser.storageInfo.accountStorageUtilization.__typename){var x=v.currentUser.storageInfo,C=x.storageQuota.quota,k=x.accountStorageUtilization.total;w="0"===C?k:C}var S=1024*l*1024,T=1024*u*1024,E="".concat((0,Ae.fZ)(S,{precision:1})),R=m||"string"!==typeof w?"".concat((0,Ae.fZ)(T,{precision:1})," Repl"):"".concat((0,Ae.fZ)(Number(w),{precision:1})," Account");return(0,c.BX)(b.G,{css:Tn.self,tag:"li",children:[(0,c.BX)(b.G,{css:Tn.powerupInfo,children:[(0,c.BX)(b.G,{css:Tn.powerupLabel,children:[(0,c.tZ)(Ie.Z,{size:16})," ",(0,c.tZ)(Z.xv,{variant:"subheadDefault",children:"Storage"}),(0,c.tZ)(Zn.Z,{content:"Beta",tooltip:"Storage is currently in beta. Some things may not work as expected."})]}),(0,c.tZ)(Z.xv,{color:"dimmer",children:"Manage disk space"})]}),(0,c.BX)(b.G,{css:Tn.editButtonWrapper,children:[m||!d?(0,c.tZ)(Cn.D,{iconLeft:(0,c.tZ)(G.Z,{size:16}),text:"GiB Account",css:Tn.loadingPill}):(0,c.tZ)(Cn.D,{text:"".concat(E,"/").concat(R),css:Tn.pill}),(0,c.tZ)(g.h,{size:24,css:Tn.editButton,alt:"Manage storage",onClick:function(){return t()},children:(0,c.tZ)(fn.Z,{})})]})]})},Rn=t(394),In=t(39291),Gn=t(63774),Dn=t(36788),_n=t(36726);function Pn(e){var n=e.onRequestPowerUpModal,t=(0,ue.Z)(),r=(0,_n.ky)({variables:{replId:t}}),i=r.data;return r.loading?(0,c.tZ)(G.Z,{}):"Repl"!==(null===i||void 0===i?void 0:i.repl.__typename)||"ReplPowerUpTypes"!==i.repl.powerUps.__typename?null:i.repl.powerUps.boost.sku===Ne.ri.Off?(0,c.tZ)(xn.r,{"aria-label":"Enable Boost",isSelected:!1,onChange:n}):(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,c.tZ)(Gn.Z,{variant:i.repl.powerUps.boost.sku,extraText:"Boosted"}),(0,c.tZ)(g.h,{size:24,css:[y.l0.p(16),{backgroundColor:y.TV.backgroundHigher}],alt:"Change boost",onClick:n,children:(0,c.tZ)(w.Z,{})})]})}function Bn(e){var n=e.context,t=e.goToPowerUpDetails;return(0,c.tZ)(c.HY,{children:(0,c.BX)(b.G,{tag:"li",css:[y.l0.display.flex,y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,c.BX)(b.G,{css:[y.l0.colWithGap(8)],children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,c.tZ)(Dn.Z,{size:16})," ",(0,c.tZ)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:(0,c.tZ)(Z.xv,{variant:"subheadDefault",children:bn.S0.boost.name})}),(0,c.tZ)(wn.Z,{context:n,powerUp:"boost"})]}),(0,c.tZ)(Z.xv,{color:"dimmer",children:bn.S0.boost.description})]}),(0,c.tZ)(Pn,{onRequestPowerUpModal:function(){(0,pe.j)(pe.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"boost",source:n}),t("boost"),(0,pe.j)(pe.U3.BOOST_POPOVER_VIEWED,{source:n})}})]})})}function An(e){var n=e.isAlwaysOn,t=e.isAlwaysOnLoading,r=e.isGpu,i=e.isGpuLoading,o=e.canGpu,a=e.onAlwaysOnChange,l=e.onGpuChange,u=e.showManageStorageModal,s=e.goToPowerUpDetails,d=(0,ie.P5)({controlName:"flag-storage-utilization"}),f=(0,_.H)(),p=f("always-on"),h=f("gpu");return(0,c.BX)(b.G,{css:[y.l0.colWithGap(16)],tag:"ul","aria-label":"Repl Powerups",children:[(0,c.BX)(b.G,{tag:"li",css:[y.l0.display.flex,y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,c.BX)(b.G,{css:[y.l0.colWithGap(8)],children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,c.tZ)(In.Z,{size:16})," ",(0,c.tZ)(Z.xv,{variant:"subheadDefault",id:p,children:bn.S0["always-on"].name}),(0,c.tZ)(wn.Z,{context:"workspace_info_modal",powerUp:"always-on"})]}),(0,c.tZ)(Z.xv,{color:"dimmer",children:bn.S0["always-on"].description})]}),(0,c.tZ)(xn.r,{"aria-labelledby":p,dataCy:"ws-always-on-toggle",isSelected:n,onChange:a,isReadOnly:t,colorway:t?"grey":"primary"})]}),(0,c.tZ)(Bn,{context:"workspace_info_modal",goToPowerUpDetails:s}),d?(0,c.tZ)(En,{showPowerUpModal:u}):null,o?(0,c.BX)(b.G,{tag:"li",css:[y.l0.display.flex,y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,c.BX)(b.G,{css:[y.l0.colWithGap(8)],children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,c.tZ)(Rn.Z,{size:16})," ",(0,c.tZ)(Z.xv,{variant:"subheadDefault",id:h,children:"GPU"}),(0,c.tZ)(Zn.Z,{content:"Beta",link:"https://replit.com/@util/GPU-Beta-Resources?v=1#README.md",tooltip:"GPUs are currently in beta. Some things may not work as expected yet."})]}),(0,c.tZ)(Z.xv,{color:"dimmer",children:"Add an NVIDIA Tesla K80 GPU to the Repl"})]}),(0,c.tZ)(xn.r,{"aria-labelledby":h,dataCy:"ws-gpu-toggle",isSelected:r,onChange:l,isDisabled:i,colorway:i?"grey":"primary"})]}):null]})}var Un={query:re.s8},Nn={query:K.BW};function Ln(e){var n=e.setIsEditing,t=e.showCloseButton,r=e.onDeployClick,i=(0,ue.Z)(),o=(0,je.BZ)({variables:{replId:i}}),a=o.data,l=o.refetch,u="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null;return u?(0,c.tZ)(Mn,{setIsEditing:n,showCloseButton:t,repl:u,refetch:l,onDeployClick:r}):(0,c.tZ)(b.G,{css:[y.l0.center,y.l0.p(16)],children:(0,c.tZ)(G.Z,{})})}var Xn=(0,m.X)({titleDescription:[y.l0.colWithGap(8),y.l0.p(8)]});function Mn(e){var n,t,u,m,g,w,x=e.repl,C=e.showCloseButton,T=e.setIsEditing,E=e.onDeployClick,R=(0,ie.P5)({controlName:"flag-storage-utilization"}),I=(0,ze.useRouter)(),G=(0,ee.Z)(),D=(0,a.Z)(f.useState(null),2),P=D[0],B=D[1],A=(0,a.Z)(f.useState(null),2),U=A[0],N=A[1],L=(0,a.Z)(f.useState(x.hasGpu),2),M=L[0],O=L[1],F=(0,a.Z)(f.useState(x.isRenamed?x.title:""),2),W=F[0],H=F[1],z=(0,a.Z)(f.useState(x.description||""),2),j=z[0],K=z[1],re=(0,a.Z)(f.useState(x.rawTemplateLabel),2),ue=re[0],Re=re[1],Ie=(0,te.Z)({forceFetch:!1}).cycles,Ge=(0,je.zu)().data,De=(0,ce.Z)().showError,_e=x.publishedAs===Ne.O2.Template;f.useEffect((function(){K(x.description||"")}),[x.description]);var Pe=(0,ae.Z)(),Be=(0,he.Z)(),Ae=f.useRef(x),Le=(0,a.Z)((0,je.ap)({variables:{id:x.id},onCompleted:function(){G?J.X.closeCurrentWindow():I.push("/home","/~")},update:function(e,n){var t;(null===(t=n.data)||void 0===t?void 0:t.deleteRepl)&&(e.evict({id:e.identify(n.data.deleteRepl)}),e.gc())},onError:function(e){return De((0,se.Z)(e.message))}}),1),Xe=Le[0],Me=(0,a.Z)((0,je.vi)({onError:function(e){return De((0,se.Z)(e.message))},onCompleted:function(e){var n=e.updateRepl.repl,t=Ae.current,r={};t.description!==n.description&&(r.description=n.description),t.title!==n.title&&(r.title=n.title),t.url!==n.url&&(r.url=n.url,I.push({pathname:Be,query:{replUrl:n.url}},n.url+"#"+window.location.search)),t.isRenamed!==n.isRenamed&&(r.isRenamed=!!n.isRenamed),Ae.current=x,Object.keys(r).length>0&&T(!1)}}),2),Fe=Me[0],qe=Me[1].loading,$e=(0,a.Z)((0,oe.Z)(),2),Ye=$e[0],Ke=$e[1].loading,Qe=(0,a.Z)((0,je.pr)({onCompleted:function(e){"UserError"===e.setAlwaysOn.__typename&&De(e.setAlwaysOn.message)},onError:function(e){return De((0,se.Z)(e.message))},refetchQueries:[Un,Nn]}),2),Je=Qe[0],en=Qe[1].loading,nn=(0,a.Z)((0,je.vN)({onCompleted:function(e){"UserError"!==e.setGpu.__typename&&"UnauthorizedError"!==e.setGpu.__typename?((0,He.Z)({replId:x.id}).catch((function(e){d.Tb(e),Pe.current&&De("Something went wrong when adding a GPU to your Repl. Please refresh or try again.")})),Pe.current&&"Repl"===e.setGpu.__typename&&O(e.setGpu.hasGpu)):De(e.setGpu.message)},onError:function(e){d.Tb(e),De((0,se.Z)(e.message))},refetchQueries:[Un,Nn]}),2),tn=nn[0],rn=nn[1].loading,an=(0,a.Z)((0,je.gF)({variables:{input:{replId:x.id}},onError:function(e){d.Tb(e),De((0,se.Z)(e.message))}}),2),ln=an[0],cn=an[1],un=(0,je.l9)({fetchPolicy:"cache-and-network",ssr:!1}),sn=un.data,dn=un.loading,fn=un.error,pn=f.useMemo((function(){return!(!W||W===x.title)||(ue!==x.rawTemplateLabel||!(""===j&&!x.description)&&j!==x.description)}),[x,W,j,ue]),hn=(0,le.Z)(pn),vn=f.useCallback((function(){if(pn){var e={id:x.id,title:W.trim()||x.title,description:j,templateLabel:x.currentUserPermissions.changeTemplateLabel?ue:void 0};Fe({variables:{input:e}})}}),[pn,Fe,x,W,j,ue]),mn=(0,le.Z)(vn);f.useLayoutEffect((function(){return function(){hn.current&&mn.current()}}),[mn,hn]);var gn,Zn=f.useContext(ne.G).isGooglePlayStoreTWA,bn=f.useCallback((function(e){switch(e){case"always-on":return"PowerUpCostsType"===x.powerUpCosts.__typename?x.powerUpCosts.alwaysOn.explanation:null;case"private":var n,t,r;return"UserPowerUpsTypes"===(null===sn||void 0===sn||null===(n=sn.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)?null===(r=null===(t=sn.currentUser.userPowerUpsByType)||void 0===t?void 0:t.privateRepls.cost)||void 0===r?void 0:r.explanation:null;case"gpu":var i,o;return"PowerUpCostsType"===x.powerUpCosts.__typename?null===(i=x.powerUpCosts)||void 0===i||null===(o=i.gpu)||void 0===o?void 0:o.explanation:null;default:(0,Ve.Z)(e)}}),[sn,x]),wn=function(){Fe({variables:{input:{id:x.id,isPrivate:!x.isPrivate}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,o.Z)((0,i.Z)({},x),{isPrivate:!x.isPrivate})}},refetchQueries:[{query:je.WM,variables:{replId:x.id}},Un,Nn]}),(0,pe.j)(pe.U3.PRIVATE_TOGGLED,{enabled:!x.isPrivate,source:"workspace_info_modal"})},xn=function(){if(!en){var e=!x.isAlwaysOn;Je({variables:{replId:x.id,enabled:e},optimisticResponse:{__typename:"RootMutationType",setAlwaysOn:(0,o.Z)((0,i.Z)({},x),{__typename:"Repl",powerUpCosts:{__typename:"PowerUpCostsType",alwaysOn:{__typename:"PowerUpCostDetailType",cycles:0,explanation:Ne.Ch.ActivateExistingOrder},gpu:{__typename:"PowerUpCostDetailType",cycles:0,explanation:Ne.Ch.ActivateExistingOrder}},isAlwaysOn:e})}})}},Cn=function(){if(!rn){var e=!M;tn({variables:{replId:x.id,enabled:e},optimisticResponse:{__typename:"RootMutationType",setGpu:(0,o.Z)((0,i.Z)({},x),{__typename:"Repl",hasGpu:e,powerUpCosts:{__typename:"PowerUpCostsType",gpu:{__typename:"PowerUpCostDetailType",cycles:0,explanation:Ne.Ch.ActivateExistingOrder},alwaysOn:{__typename:"PowerUpCostDetailType",cycles:0,explanation:Ne.Ch.ActivateExistingOrder}}})}})}},kn=x.isRenamed?"Name your Repl":"Default name: ".concat(x.title),Sn=[Ne.Sy.Submit,Ne.Sy.PublishTemplate,Ne.Sy.EditTemplate].includes(x.workspaceCta),Tn=(0,_.H)(),En=(null===Ge||void 0===Ge||null===(n=Ge.currentUser)||void 0===n?void 0:n.id)===(null===(t=x.user)||void 0===t?void 0:t.id),Rn=(0,de.jX)(null===Ge||void 0===Ge||null===(u=Ge.currentUser)||void 0===u?void 0:u.userSubscriptionType),In=0===Ie&&En&&!Rn,Gn=(0,ie.P5)({controlName:"flag-gpus"}),Dn=(0,ie.P5)({controlName:"flag-edit-repl-info-forms"}),_n=(0,me.P)({step:"not_shown"}),Pn="Team"===(null===(m=x.owner)||void 0===m?void 0:m.__typename),Bn=x.hostingDeploymentPermissions.canDeploy&&"nix"===x.lang.id&&"function"===typeof E,Ln="/replEnvironmentDesktop"===Be&&Bn,Mn="HostingDeployment"===(null===(g=x.hostingDeployment)||void 0===g?void 0:g.__typename)&&x.hostingDeployment.currentBuild;return(0,c.tZ)("div",{css:{overflow:"auto",maxHeight:"80vh"},children:"not_shown"!==_n.currentStep.step?(0,c.tZ)(ve.s,(0,o.Z)((0,i.Z)({},_n),{analyticsContext:"workspace_info_modal"})):(0,c.BX)(c.HY,{children:[(0,c.tZ)(yn,{repl:x,isTemplate:_e,showCloseButton:C,setActiveDialog:B,setIsEditing:T,updateIconUrl:function(e){return Fe({variables:{input:{id:x.id,iconUrl:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,o.Z)((0,i.Z)({},x),{iconUrl:e})}}})},updateReplInfo:vn}),Dn?(0,c.BX)(b.G,{css:Xn.titleDescription,children:[(0,c.tZ)(V,{repl:x}),(0,c.tZ)(q,{repl:x}),_e&&x.currentUserPermissions.changeTemplateLabel?(0,c.tZ)($,{repl:x}):null]}):(0,c.tZ)("form",{onSubmit:function(e){e.preventDefault(),vn()},className:s().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",We.j.mobileMax]]]),children:(0,c.BX)(b.G,{css:[y.l0.align.stretch,y.l0.colWithGap(16)],children:[(0,c.BX)(Ce.T,{background:"default",css:[y.l0.colWithGap(16)],children:[(0,c.tZ)(b.G,{css:[y.l0.flex.column],children:(0,c.BX)(b.G,{css:[y.l0.colWithGap(4)],children:[(0,c.BX)(b.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.end],children:[(0,c.tZ)("label",{htmlFor:Tn("name"),className:s().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",We.j.mobileMax]]]),children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Name"})}),(0,c.tZ)(v.Z,{maxLength:60,value:W,hideLabel:!0})]}),(0,c.tZ)(k.II,{style:{cursor:x.currentUserPermissions.changeTitle?"auto":"not-allowed"},disabled:!x.currentUserPermissions.changeTitle,maxLength:60,placeholder:kn,value:W,onChange:function(e){return H(e.target.value)},spellCheck:!1,id:Tn("name"),dataCy:"ws-repl-info-title-input"})]})}),(0,c.tZ)(b.G,{css:[y.l0.flex.column],children:(0,c.BX)(b.G,{css:[y.l0.colWithGap(4)],children:[(0,c.BX)(b.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.end],children:[(0,c.tZ)("label",{htmlFor:Tn("description"),className:s().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",We.j.mobileMax]]]),children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Description"})}),(0,c.tZ)(v.Z,{maxLength:X.p,value:j,hideLabel:!0})]}),(0,c.tZ)(k.B,{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!x.currentUserPermissions.changeDescription,maxLength:X.p,value:j,onChange:function(e){return K(e.target.value)},placeholder:"What does this Repl do?",css:[y.l0.minHeight(96),y.l0.maxHeight(256),{resize:"vertical"}],id:Tn("description")})]})})]}),_e&&x.currentUserPermissions.changeTemplateLabel?(0,c.tZ)(Ce.T,{background:"default",css:[y.l0.colWithGap(4)],children:(0,c.BX)(b.G,{css:[y.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:Tn("template"),className:s().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",We.j.mobileMax]]]),children:(0,c.tZ)(Z.xv,{color:"dimmer",variant:"small",children:"Template label"})}),(0,c.tZ)(k.II,{value:ue,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return Re(e.target.value)},id:Tn("template")})]})}):null]})}),Sn?null:(0,c.BX)(b.G,{css:[y.l0.colWithGap(24),y.l0.p(8),y.l0.pt(0)],children:[!Zn&&In?(0,c.tZ)(S.zx,{iconLeft:(0,c.tZ)(ke.Z,{}),type:"button",colorway:"primary",stretch:!0,onClick:function(){(0,pe.j)(pe.U3.UPGRADE_SELECTED,{source:"workspace_info_modal"}),B(on.BuyCycles)},text:"Power Up this Repl"}):null,x.currentUserPermissions.changePrivacy===Ne.HA.Allowed&&(0,c.BX)(b.G,{css:[y.l0.colWithGap(8)],children:[(0,c.BX)(we.hE,{tag:"fieldset",name:Tn("privacy"),value:x.isPrivate.toString(),onChange:function(){var e,n,t,r;if(!qe)if(x.isPrivate)wn();else if(x.currentUserPermissions.changePrivacy===Ne.HA.Allowed&&null!=(null===(e=x.user)||void 0===e?void 0:e.id)&&null!=(null===Ge||void 0===Ge||null===(n=Ge.currentUser)||void 0===n?void 0:n.id)&&x.user.id!==Ge.currentUser.id)wn();else{var i="UserPowerUpsTypes"===(null===sn||void 0===sn||null===(t=sn.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)&&(null===(r=sn.currentUser.userPowerUpsByType)||void 0===r?void 0:r.privateRepls.active),o=bn("private");if(null==o||dn)De("You're too fast for us! Please try again in a moment.");else{if(!fn)return(0,pe.j)(pe.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!x.isPrivate,source:"workspace_info_modal",costExplanation:o}),i?void wn():(N("private"),void B(on.PowerUp));De("This action is currently unavailable. Please refresh and try again.")}}},row:!0,primary:!0,stretch:!0,children:[(0,c.tZ)(we.rK,{id:Tn("false"),value:"false",text:"Public",icon:(0,c.tZ)(Te.Z,{})}),(0,c.tZ)(we.rK,{id:Tn("true"),value:"true",text:"Private",icon:(0,c.tZ)(Ee.Z,{})})]}),(0,c.tZ)(Z.xv,{variant:"small",color:"dimmest",multiline:!0,children:(0,fe.Z)(x.isPrivate,Pn)})]}),x.currentUserPermissions.changeAlwaysOn!==Ne.fn.Disallowed&&(0,c.tZ)(An,{isAlwaysOn:x.isAlwaysOn,isAlwaysOnLoading:en||null==bn("always-on"),isGpu:M,isGpuLoading:Boolean(rn||null==bn("gpu")),canGpu:Gn,onAlwaysOnChange:function(){var e=bn("always-on");if(null==e||en)De("You're too fast for us! Please try again in a moment.");else if(fn)De("This action is currently unavailable. Please refresh and try again.");else{if((0,pe.j)(pe.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"always-on",setting:!x.isAlwaysOn,source:"workspace_info_modal",costExplanation:e}),!x.isAlwaysOn&&("NEEDS_CYCLES"===e||"SPEND_CYCLES"===e))return N("always-on"),void B(on.PowerUp);xn()}},onGpuChange:function(){var e=bn("gpu");if(null!=e)if(fn)De("This action is currently unavailable. Please refresh and try again.");else{if((0,pe.j)(pe.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"gpu",setting:!M,source:"workspace_info_modal",costExplanation:e}),!M&&("NEEDS_CYCLES"===e||"SPEND_CYCLES"===e))return N("gpu"),void B(on.PowerUp);Cn()}else De("You're too fast for us! Please try again in a moment.")},showManageStorageModal:function(){return B(on.ManageStorage)},goToPowerUpDetails:function(e){return _n.goTo({step:"power_up_details",powerUpCategory:e})}}),Ln?(0,c.tZ)(b.G,{css:y.l0.colWithGap(8),children:(0,c.tZ)(S.zx,{text:Mn?"Redeploy your project":"Deploy your project",iconLeft:(0,c.tZ)(Se.Z,{}),colorway:Mn?void 0:"primary",onClick:function(){Mn?E("showDeployOptionsOnInsert"):(E("showDeploymentTiersOnInsert"),(0,pe.j)(pe.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_info_modal"}))}})}):null]}),(0,c.tZ)(xe.u,{isOpen:P===on.DeleteRepl,onRequestClose:function(){return B(null)},children:(0,c.tZ)(h.Z,{delete:Xe,entityType:"Repl",hideModal:function(){return B(null)}})}),(0,c.tZ)(Q.Z,{context:"workspace_info_modal",isOpen:P===on.PowerUp,uponPurchaseGoTo:"workspace",replTitle:x.title,onRequestClose:function(e){"InsertDeploymentsPane"===e&&Bn&&(E(),(0,pe.j)(pe.U3.DEPLOY_PROJECT_SELECTED,{source:"power_up_modal"})),B(null)},onRequestPowerUp:(0,r.Z)((function(){return(0,l.__generator)(this,(function(e){switch(e.label){case 0:switch(U){case null:case"boost":case"hosting_tier":break;case"always-on":xn();break;case"private":wn();break;case"gpu":Cn();break;default:(0,Ve.Z)(U)}return[4,new Promise((function(e){return setTimeout(e,3e3)}))];case 1:return e.sent(),B(null),[2]}}))})),powerUp:null!==U&&void 0!==U?U:"boost",canDeploy:Ln},P),R?(0,c.tZ)(Oe,{isOpen:P===on.ManageStorage,onRequestClose:function(){return B(null)}}):null,(0,c.tZ)(Ue.Z,{initialTab:"default",isOpen:P===on.BuyCycles,onRequestClose:function(){return B(null)},uponPurchaseGoTo:"workspace",context:"workspace_info_modal",replTitle:x.title}),(0,c.tZ)(xe.u,{isOpen:P===on.ForkRepl,onRequestClose:function(){return B(null)},children:(0,c.tZ)(Y.Z,{onFork:function(e,n,t,r){Ye({originId:x.id,teamId:e,title:n,description:t,isPrivate:r,forkToPersonal:!e,trackingData:{forkSource:"editReplPopoverMenuItem"}})},initialTitle:x.title,initialDescription:null!==(gn=x.description)&&void 0!==gn?gn:"",initialPrivacy:x.isPrivate,hideModal:function(){Ke||B(null)},teamContext:null===(w=x.user)||void 0===w?void 0:w.username})}),(0,c.tZ)(xe.u,{isOpen:P===on.Unpublish,onRequestClose:function(){return B(null)},children:(0,c.tZ)(be.Z,{repl:x,source:"replEnvironment",onDone:function(){B(null)}})}),(0,c.tZ)(xe.u,{isOpen:P===on.UnpublishTemplate,onRequestClose:function(){return B(null)},children:(0,c.tZ)(p.Z,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return B(null)},onConfirm:function(){cn.loading||(ln(),B(null))},children:"Your Repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,c.tZ)(xe.u,{isOpen:P===on.EditPublishSettings,onRequestClose:function(){return B(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,c.tZ)(ge.Z,{source:"replEnvironment",replId:x.id})}),(0,c.tZ)(xe.u,{isOpen:P===on.Publish,onRequestClose:function(){return B(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,c.tZ)(ge.Z,{source:"replEnvironment",replId:x.id})}),(0,c.tZ)(xe.u,{isOpen:P===on.UpdatePublishedTemplate,onRequestClose:function(){return B(null)},noPadding:!0,children:(0,c.tZ)(ye.Z,{repl:x})}),(0,c.tZ)(xe.u,{isOpen:P===on.UpdatePublishedRepl,onRequestClose:function(){return B(null)},children:(0,c.tZ)(Ze.Z,{repl:x,onDone:function(){return B(null)},source:"replEnvironment"})}),(0,c.tZ)(s(),{id:"7206d0025a598b40",dynamic:[x.currentUserPermissions.changeDescription?"auto":"not-allowed",We.j.mobileMax],children:"form.__jsx-style-dynamic-selector{padding:var(--space-8)}textarea.__jsx-style-dynamic-selector{min-height:42px;height:200px;resize:none;cursor:".concat(x.currentUserPermissions.changeDescription?"auto":"not-allowed",";font-size:var(--font-size-default);font-family:var(--font-family-default);padding:var(--space-8);display:block;width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--outline-dimmest);-webkit-transition:.2s border-color;-moz-transition:.2s border-color;-o-transition:.2s border-color;transition:.2s border-color;background-color:transparent;color:var(--foreground-default)}textarea.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.__jsx-style-dynamic-selector:focus,textarea.__jsx-style-dynamic-selector:active{outline:none;border-color:var(--accent-primary-default)}.edit-repl-actions.__jsx-style-dynamic-selector{padding:0 var(--space-16)}.menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--foreground-default)}.delete-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--accent-negative-default)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4)}.menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4)}.upgrade-button-container.__jsx-style-dynamic-selector{padding:0 var(--space-8)}.upgrade-button-container.__jsx-style-dynamic-selector .sentence-case{text-transform:none}.upgrade-text-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.always-on-indicator.__jsx-style-dynamic-selector{margin-left:var(--space-4);margin-right:var(--space-8);width:8px;height:8px;-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;background-color:var(--accent-green-default);-webkit-box-shadow:0 0 12px var(--accent-green-default);-moz-box-shadow:0 0 12px var(--accent-green-default);box-shadow:0 0 12px var(--accent-green-default)}@media screen and (max-width:").concat(We.j.mobileMax,"px){.edit-repl.__jsx-style-dynamic-selector{width:80vw}}")})]})})}},88156:function(e,n,t){t.d(n,{s:function(){return l}});var r=t(43119),i=t(71440),o=t(18012);function a(){var e=(0,r.Z)(["\n  fragment WorkspaceHeaderReplMetadataRepl on Repl {\n    id\n    title\n    iconUrl\n    user {\n      id\n      ...UserLinkUser\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),o._)},87980:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(57389),i=t(4541),o=(t(50959),t(89853)),a=t(22167),l=t(55544),c=t(25776),u=t(590),s=(0,o.X)({metadata:[a.l0.rowWithGap(8),a.l0.align.center,a.l0.flex.growAndShrink(1)],text:[a.l0.flex.shrink(1),a.l0.colWithGap(2)],username:[a.l0.maxWidth(160),a.l0.truncate,a.l0.flex.shrink(1),a.l0.color.foregroundDimmest,{fontSize:a.TV.fontSizeSmall}],title:[a.l0.flex.shrink(1),a.l0.fontSize(14)]});function d(e){var n=e.repl,t=n.user?(0,i.tZ)(l.xv,{height:"singleLine",css:s.username,children:n.user.username}):null;return(0,i.BX)(c.G,{css:s.metadata,children:[(0,i.tZ)(c.G,{css:[a.l0.display.none,(0,r.Z)({},a.BC.min("tabletMax"),[a.l0.display.flex])],children:(0,i.tZ)(u.ZP,{iconUrl:n.iconUrl,size:32,alt:"Repl icon"})}),(0,i.BX)(c.G,{css:s.text,children:[(0,i.tZ)(l.xv,{css:s.title,height:"singleLine","data-cy":"header-repl-title",children:n.title}),t]})]})}},47321:function(e,n,t){t.d(n,{Z:function(){return te}});var r=t(72006),i=t(4541),o=t(47236),a=t(4405),l=t(11122),c=t(89853),u=t(22167),s=t(55544),d=t(25776),f=t(64444),p=t(43119),h=t(47409),v=t(3668),m=t(7247),g=t(51609),y=t(40306);function Z(e){return(0,o.Dv)((0,m.Z)((function(){return e||(0,o.cn)(null)}),[e]))}function b(){var e=(0,p.Z)(["from { opacity: 0 } to { opacity: 1 }"]);return b=function(){return e},e}var w=(0,c.X)({center:[u.l0.flex.row,u.l0.flex.wrap,u.l0.justify.spaceBetween,u.l0.align.center],text:[u.l0.rowWithGap(2),u.l0.align.center,u.l0.minHeight(u.TV.space24)],textLoading:[u.l0.height(16),u.l0.width(u.TV.space64),h.p.backgroundPulse(),u.l0.borderRadius(4)],textLoadingWrapper:[u.l0.height("fit-content"),{animation:"".concat((0,l.F4)(b())," 120ms forwards ease-out alternate")}],textWarn:[u.l0.rowWithGap(4),u.l0.align.center,u.l0.px(4)],textPadding:[u.l0.height(16),{lineHeight:"16px"}],textHighlight:[u.l0.color.accentPrimaryStronger],selfMini:[u.l0.rowWithGap(4),u.l0.align.center]});function x(e){var n=e.title,t=e.description,r=e.inactive,a=void 0!==r&&r,l=e.limitStatusAtom,c=e.limitTextAtom,f=e.limitTextSecondaryAtom,p=e.mini,h=e.loading,Z=(0,o.Dv)((0,m.Z)((function(){return(0,o.cn)((function(e){return"At limit"===e(l)||"Close to limit"===e(l)}))}),[l]));if(p)return(0,i.BX)(d.G,{css:w.selfMini,children:[(0,i.tZ)(s.xv,{variant:"small",css:u.l0.color.foregroundDimmer,children:a?n+" last run":n}),Z?(0,i.tZ)(y.Z,{color:u.TV.orangeStronger}):null]});var b=null;return b=h?(0,i.tZ)(d.G,{css:w.textLoading}):(0,i.tZ)(s.xv,{variant:"small",css:w.textPadding,children:f?(0,i.BX)(i.HY,{children:[(0,i.BX)("span",{css:w.textHighlight,children:[" ",(0,i.tZ)(C,{text:c})]})," + ",(0,i.tZ)(C,{text:f})]}):(0,i.tZ)(C,{text:c})}),(0,i.BX)(d.G,{css:w.center,children:[(0,i.BX)(d.G,{css:w.text,children:[(0,i.tZ)(s.xv,{css:{fontWeight:u.TV.fontWeightMedium},children:a?n+": last run":n}),t?(0,i.tZ)(v.h,{alt:t,size:24,children:(0,i.tZ)(g.Z,{})}):null,Z?(0,i.BX)(d.G,{css:w.textWarn,children:[(0,i.tZ)(y.Z,{color:u.TV.orangeStronger}),(0,i.tZ)(s.xv,{variant:"small",css:w.textPadding,children:(0,i.tZ)(C,{text:l})})]}):null]}),(0,i.tZ)(d.G,{css:w.textLoadingWrapper,children:b},h?"loadingResources":"finishedLoadingResources")]})}function C(e){var n=Z(e.text);return(0,i.tZ)(i.HY,{children:n})}var k=t(13469);function S(e,n){if(void 0===e)return"empty";var t=e/n;return t>=1?"At limit":t>=.9?"Close to limit":"fine"}function T(e){return"At limit"===e?k.TV.accentNegativeDefault:"Close to limit"===e?k.TV.orangeDefault:void 0}function E(e,n,t,r,i){return"empty"===e||void 0===n?"":"vCPU"===i?Math.round(100*Math.min(1,n/t))+"% of "+r+" vCPUs":Math.round(n).toLocaleString()+"/"+Math.round(t).toLocaleString()+" "+i}var R=t(96092),I={accordionTitle:(0,l.iv)([u.l0.rowWithGap(4),u.l0.align.center]),accordionText:(0,l.iv)([u.l0.color.foregroundDimmer,u.l0.fontSize(12)]),accordionIcon:(0,l.iv)([u.l0.cursor.pointer]),expandedWrapper:(0,l.iv)([u.l0.colWithGap(4),u.l0.py(8),u.l0.border({direction:"bottom",color:u.TV.outlineDefault,width:1})])};function G(){return(0,i.tZ)(R.Q,{headerContent:(0,i.tZ)(s.xv,{css:I.accordionText,children:"About RAM"}),children:(0,i.BX)(d.G,{css:I.expandedWrapper,children:[(0,i.tZ)(B,{type:"Project",text:"is what your programs, code intelligence, and some editor features use. It holds programs that are running right now."}),(0,i.tZ)(B,{type:"Cache",text:"caches file contents, libraries, and executables. If Program Memory gets too high, it will replace Cache Memory. If there\u2019s not enough Cache Memory, processes will slow down."})]})})}var D={self:(0,l.iv)([u.l0.width(8),u.l0.height(8),u.l0.borderRadius(8),u.l0.flex.shrink(0)])};function _(e){var n=e.variant;return(0,i.tZ)("div",{css:[D.self,"primary"===n?u.l0.backgroundColor.accentPrimaryDefault:u.l0.backgroundColor.outlineDefault]})}var P={self:(0,l.iv)([u.l0.rowWithGap(8),u.l0.align.center]),text:(0,l.iv)([u.l0.flex.shrink(1)]),underline:(0,l.iv)({textDecoration:"underline"})};function B(e){var n=e.type,t=e.text;return(0,i.BX)(d.G,{css:P.self,children:[(0,i.tZ)(_,{variant:"Project"===n?"primary":"secondary"}),(0,i.BX)(s.xv,{multiline:!0,variant:"small",css:P.text,children:[(0,i.BX)("span",{css:P.underline,children:[n," Memory"]})," ",t]})]})}var A=(0,c.X)({self:[u.l0.colWithGap(2)],selfMini:[u.l0.colWithGap(4),u.l0.flex.growAndShrink(2),{flexBasis:32}],selfMiniBar:[u.l0.height(8)]});function U(e){var n=e.totalAtom,t=e.currentAtom,l=e.currentSecondaryAtom,c=e.measure,u=e.cpuCountAtom,s=e.title,f=e.description,p=(0,m.Z)((function(){return(0,o.cn)((function(e){return S(e(t),e(n))}))}),[t,n]),h=(0,m.Z)((function(){return(0,o.cn)((function(e){return E(e(p),e(t),e(n),u&&e(u),c)}))}),[p,t,n,u,c]),v=(0,m.Z)((function(){return(0,o.cn)((function(e){return l?E(e(p),e(l),e(n),u&&e(u),c):""}))}),[p,l,n,u,c]),g=(0,m.Z)((function(){return(0,o.cn)((function(e){return l?Math.round(e(t)).toString():e(h)}))}),[l,t,h]);return(0,i.BX)(d.G,{css:e.mini?A.selfMini:A.self,children:[(0,i.tZ)(x,(0,a.Z)((0,r.Z)({title:s,description:f,limitStatusAtom:p,limitTextAtom:g},l?{limitTextSecondaryAtom:v}:{}),{mini:e.mini,loading:e.loading})),(0,i.tZ)(L,(0,a.Z)((0,r.Z)({},e),{limitStatusAtom:p,limitTextAtom:h,limitTextSecondaryAtom:v}))]})}var N={tooltip:(0,l.iv)(u.l0.colWithGap(2)),tooltipItem:(0,l.iv)(u.l0.rowWithGap(4),u.l0.align.center,u.l0.width("100%"),u.l0.flex.growAndShrink(1)),tooltipItemText:(0,l.iv)(u.l0.flex.row,u.l0.align.center,u.l0.justify.spaceBetween,u.l0.flex.growAndShrink(1),{"&>span":u.l0.display.inlineFlex,gap:k.TV.space4})};function L(e){var n=e.currentAtom,t=e.currentLabel,l=e.currentSecondaryAtom,c=e.currentSecondaryLabel,u=e.totalAtom,s=e.mini,p=e.inactive,h=e.limitStatusAtom,v=e.limitTextAtom,g=e.limitTextSecondaryAtom,y=e.loading,b=e.secondaryLimitDeterminesStatus,w=void 0!==b&&b,x=(0,o.Dv)(n),C=Z(l),S=(0,o.Dv)(u),E=(0,o.Dv)(v),R=(0,o.Dv)(g),I=(0,o.Dv)((0,m.Z)((function(){return(0,o.cn)((function(e){return T(e(h))}))}),[h])),G=(0,o.Dv)(h),D="At limit"!==G&&"Close to limit"!==G||!w?k.TV.outlineDimmer:T(G),_={shake:"At limit"===G,smoke:"Close to limit"===G||"At limit"===G};return l?(0,i.tZ)(f.J,(0,a.Z)((0,r.Z)({},_),{loading:y,css:s&&A.selfMiniBar,disabled:p,total:S,tooltip:(0,i.BX)(d.G,{css:N.tooltip,children:[(0,i.tZ)(X,{variant:"primary",label:t,labelValue:E}),(0,i.tZ)(X,{variant:"secondary",label:c,labelValue:R})]}),data:[{current:x,color:I},{current:C||0,color:D}]})):(0,i.tZ)(f.J,(0,a.Z)((0,r.Z)({},_),{loading:y,css:s&&A.selfMiniBar,disabled:p,total:S,current:x,color:I,tooltip:E}))}function X(e){var n=e.variant,t=e.label,r=e.labelValue;return(0,i.BX)(d.G,{css:N.tooltipItem,children:[(0,i.tZ)(_,{variant:n}),(0,i.BX)(s.xv,{css:N.tooltipItemText,children:[(0,i.BX)("span",{children:[t,":"]}),(0,i.tZ)("span",{children:r})]})]})}var M=t(57135),O=t(96583),F=t(35748),W=t(47200),H=t(59389),z=t(50959),V=t(57934),j=t(30241),q=(0,c.X)({self:[u.l0.colWithGap(2)],selfMini:[u.l0.colWithGap(4),u.l0.flex.growAndShrink(2),{flexBasis:32}],selfMiniBar:[u.l0.height(8)]}),$=3e5;function Y(e){var n,t,o=(0,j.Z)(),a=(0,W.Z)(),l=a.dataAtom.disk,c=a.loading,u=(0,F.mE)({variables:{replId:o}}),s=u.data,d=u.loading,f="Repl"===(null===s||void 0===s||null===(n=s.repl)||void 0===n?void 0:n.__typename)&&"Team"===(null===(t=s.repl.owner)||void 0===t?void 0:t.__typename);return d||f?(0,i.tZ)(U,(0,r.Z)({title:"Storage",description:"How much room your Repl has to store files",currentAtom:l.currentAtom,totalAtom:l.totalAtom,measure:"MB",loading:d||c},e)):(0,i.tZ)(K,(0,r.Z)({title:"Storage",description:"How much space your account has to store files",currentLabel:"Repl Storage",currentSecondaryLabel:"Account Storage",resourceData:a},e))}function K(e){var n,t,l=e.title,c=e.description,u=e.resourceData,s=u.dataAtom.disk,f=s.currentAtom,p=s.totalAtom,h=u.loading,v=(0,o.Dv)(p),g=(0,o.Dv)(f),y=(0,F.Pf)({fetchPolicy:"network-only",nextFetchPolicy:"cache-and-network",ssr:!1}),Z=y.data,b=y.loading,w=y.refetch,C=(0,z.useMemo)((function(){return(0,V.Z)((function(){return w()}),{wait:12e4,maxWait:$})}),[w]);(0,z.useEffect)((function(){var e=!1,n=null,t=function(){var r=(0,M.Z)((function(){return(0,O.__generator)(this,(function(r){switch(r.label){case 0:return e?[2]:[4,C()];case 1:return r.sent(),n=setTimeout(t,$),[2]}}))}));return function(){return r.apply(this,arguments)}}();return t(),function(){e=!0,n&&clearTimeout(n),C.isScheduled()&&C.flush()}}),[C,g,v,w]);var k="AccountStorageUtilization"===(null===Z||void 0===Z||null===(n=Z.currentUser)||void 0===n?void 0:n.storageInfo.accountStorageUtilization.__typename)?Number(Z.currentUser.storageInfo.accountStorageUtilization.total):0,T="StorageQuota"===(null===Z||void 0===Z||null===(t=Z.currentUser)||void 0===t?void 0:t.storageInfo.storageQuota.__typename)?Number(Z.currentUser.storageInfo.storageQuota.quota):0,E=!(T>0&&k>0)&&(b||h),R=(0,H.p6)(k),I=(0,H.p6)(T),G=1024*g*1024,D=S(R,I),_=J(G),P=Q(D,k,T),B=Q(D,k,T,G),A=(0,H.$s)(G).toLocaleString(void 0,{maximumFractionDigits:1}),U=(0,m.Z)((function(){return(0,o.cn)(R)}),[R]),N=(0,m.Z)((function(){return(0,o.cn)(I)}),[I]),X=(0,m.Z)((function(){return(0,o.cn)(D)}),[D]),W=(0,m.Z)((function(){return(0,o.cn)(_)}),[_]),j=(0,m.Z)((function(){return(0,o.cn)(P)}),[P]),Y=(0,m.Z)((function(){return(0,o.cn)(B)}),[B]),K=(0,m.Z)((function(){return(0,o.cn)(A)}),[A]);return(0,i.BX)(d.G,{css:e.mini?q.selfMini:q.self,children:[(0,i.tZ)(x,{title:l,description:c,limitStatusAtom:X,limitTextAtom:K,limitTextSecondaryAtom:Y,mini:e.mini,loading:E}),(0,i.tZ)(L,(0,a.Z)((0,r.Z)({},e),{loading:E,currentAtom:f,currentSecondaryAtom:U,totalAtom:N,limitStatusAtom:X,limitTextAtom:W,limitTextSecondaryAtom:j,secondaryLimitDeterminesStatus:!0}))]})}var Q=function(e,n,t,r){if("empty"===e)return"";var i=(0,H.$s)(t).toLocaleString(void 0,{maximumFractionDigits:1});if("undefined"===typeof r){var o=(0,H.$s)(n).toLocaleString(void 0,{maximumFractionDigits:1});return"".concat(o," / ").concat(i," GB")}var a=n-r,l=(0,H.$s)(a).toLocaleString(void 0,{maximumFractionDigits:1});return"".concat(l," / ").concat(i," GB")},J=function(e){return e>2147483648?"".concat((0,H.$s)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GB"):"".concat(Math.round((0,H.p6)(e)).toLocaleString()," MB")},ee=t(12018),ne=Symbol("ReplResources");function te(e){var n=e.resources,t=n.dataAtom,a=t.cpu,l=t.ram,c=t.disk,s=n.loading,f=(0,ee.P5)({controlName:"flag-storage-dynamic-resize-beta"}),p=(0,i.tZ)(U,(0,r.Z)({title:"RAM",description:"How much memory your Repl is using",currentAtom:l.currentRssAtom,currentLabel:"Project Memory",currentSecondaryAtom:l.currentCacheAtom,currentSecondaryLabel:"Cache Memory",totalAtom:l.totalAtom,measure:"MB",loading:s},e));return(0,i.BX)(o.zt,{scope:ne,children:[(0,i.tZ)(U,(0,r.Z)({title:"CPU",description:"How much processing power your Repl is using",currentAtom:a.currentAtom,totalAtom:a.totalAtom,cpuCountAtom:a.cpuCountAtom,measure:"vCPU",loading:s},e)),e.mini?p:(0,i.BX)(d.G,{css:u.l0.colWithGap(4),children:[p,(0,i.tZ)(G,{})]}),f?(0,i.tZ)(Y,(0,r.Z)({},e)):(0,i.tZ)(U,(0,r.Z)({title:"Storage",description:"How much room your Repl has to store files",currentAtom:c.currentAtom,totalAtom:c.totalAtom,measure:"MB",loading:s},e))]})}},92928:function(e,n,t){t.d(n,{hF:function(){return N},w3:function(){return W},Kq:function(){return $},lR:function(){return z}});var r=t(2272),i=t(4541),o=t(11122),a=t(3668),l=t(37676),c=t(55544),u=t(25776),s=t(49615),d=t(4536),f=t(22167),p=t(84376),h=t(47200),v=t(50959),m=t(47321),g=t(36828),y=t(30241),Z=t(30265),b=t(62830),w=t(94370),x=t(72006),C=t(43119),k=t(71440),S=t(67216);function T(){var e=(0,C.Z)(["\n  query ReplResourcesCallToAction($replId: String!) {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return T=function(){return e},e}var E,R={},I=(0,k.Ps)(T());function G(){var e,n,t,r,i=(0,y.Z)(),o=(0,w.useRouter)(),a=function(e){var n=(0,x.Z)({},R,e);return S.a(I,n)}({variables:{replId:i}}).data;return(0,Z.Vg)(o)||"number"===typeof(null===a||void 0===a||null===(e=a.currentUser)||void 0===e?void 0:e.id)&&"Repl"===(null===a||void 0===a?void 0:a.repl.__typename)&&(null===a||void 0===a||null===(n=a.currentUser)||void 0===n?void 0:n.id)!==(null===(t=null===a||void 0===a?void 0:a.repl.owner)||void 0===t?void 0:t.id)||(null===a||void 0===a||null===(r=a.currentUser)||void 0===r?void 0:r.userSubscriptionType)===b.HP.HackerPro?E.Nothing:E.Upgrade}function D(){var e=null;return G()===E.Upgrade&&(e=(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{multiline:!0,children:"Low on resources?"}),(0,i.tZ)(g.Z,{context:"repl_resources_upgrade"})]})),(0,i.BX)(i.HY,{children:[e,(0,i.BX)(c.xv,{multiline:!0,color:"dimmer",variant:"small",children:["These resources are for the cloud machine that hosts this Repl."," ",(0,i.tZ)("a",{href:"https://blog.replit.com/repl-resources",target:"_blank",children:"Learn more"})," ","about resource limits."]})]})}!function(e){e.Upgrade="UPGRADE",e.Nothing="NOTHING"}(E||(E={}));var _=t(7247),P=t(64444),B=(t(51609),t(40306)),A=t(47236);function U(e){var n=e.title,t=e.doWarnAtom,r=e.inactive,o=void 0!==r&&r,a=(0,A.Dv)(t);return(0,i.BX)(u.G,{css:[f.l0.rowWithGap(4),f.l0.align.center],children:[(0,i.tZ)(c.xv,{variant:"small",css:f.l0.color.foregroundDimmer,children:o?n+" last run":n}),a?(0,i.tZ)(B.Z,{color:f.TV.orangeStronger}):null]})}function N(e){var n=e.title,t=e.totalAtom,r=e.currentAtom,o=e.countAtom,a=e.measure,l=e.limitText,c=e.inactive,s=void 0!==c&&c,d=(0,_.Z)((function(){return(0,A.cn)((function(e){return X(e(r),e(t))}))}),[r,t]),p=(0,_.Z)((function(){return(0,A.cn)((function(e){return l||O(e(d),e(r),e(t),o&&e(o),a)}))}),[l,d,r,t,o,a]),h=(0,_.Z)((function(){return(0,A.cn)((function(e){var n=e(d);return"At limit"===n||"Close to limit"===n}))}),[d]);return(0,i.BX)(u.G,{css:[f.l0.colWithGap(4),f.l0.flex.growAndShrink(2),{flexBasis:32}],children:[n?(0,i.tZ)(U,{title:n,doWarnAtom:h,inactive:s}):null,(0,i.tZ)(L,{currentAtom:r,totalAtom:t,inactive:s,limitTextAtom:p,mini:!0})]})}function L(e){var n=e.currentAtom,t=e.totalAtom,r=e.limitTextAtom,o=e.inactive,a=e.mini,l=(0,A.Dv)(t),c=(0,A.Dv)(n),u=(0,A.Dv)(r),s=function(e){switch(e){case"empty":case"fine":default:return;case"At limit":return f.TV.accentNegativeDefault;case"Close to limit":return f.TV.orangeDefault}}(X(c,l));return(0,i.tZ)(P.J,{css:a&&f.l0.height(8),total:l,current:c,color:s,disabled:o,tooltip:u})}function X(e,n){if(void 0===e)return"empty";var t=e/n;return t>=1?"At limit":t>=.9?"Close to limit":"fine"}function M(e){return Math.round(100*(e+Number.EPSILON))/100}function O(e,n,t,r,i){if("empty"!==e&&void 0!==n)return"vCPU"===i?M(100*Math.min(1,n/t))+"% of "+r+" vCPUs":M(n).toLocaleString()+"/"+M(t).toLocaleString()+" "+i}var F={self:(0,o.iv)([f.l0.p(8),f.l0.colWithGap(8),{borderTop:"1px solid ".concat(f.TV.backgroundHigher)}])};function W(){var e=(0,r.Z)(v.useState(!1),2),n=e[0],t=e[1];return(0,i.tZ)(i.HY,{children:(0,i.tZ)(l.T,{css:F.self,children:n?(0,i.tZ)(Y,{onClose:function(){return t(!1)}}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(p.M,{}),(0,i.tZ)(j,{onExpand:function(){return t(!0)}})]})})})}var H={self:(0,o.iv)([f.l0.overflow("hidden"),f.l0.rowWithGap(12),f.l0.flex.grow(1),f.l0.justify.spaceBetween,f.l0.align.center,f.l0.focusRing,f.l0.cursor.pointer])};function z(e){var n=e.inactive,t=void 0!==n&&n,r=(0,h.Z)();return(0,i.tZ)(u.G,{css:H.self,"aria-expanded":!1,children:(0,i.tZ)(m.Z,{mini:!0,inactive:t,resources:r})})}var V={self:(0,o.iv)([f.l0.overflow("hidden"),f.l0.reset.button,f.l0.rowWithGap(12),f.l0.flex.grow(1),f.l0.justify.spaceBetween,f.l0.align.center,f.l0.focusRing,f.l0.cursor.pointer])};function j(e){var n=e.onExpand,t=e.inactive,r=void 0!==t&&t,o=(0,h.Z)();return(0,i.BX)(u.G,{css:V.self,role:"button",tag:"button","aria-expanded":!1,onClick:n,children:[(0,i.tZ)(m.Z,{mini:!0,inactive:r,resources:o}),(0,i.tZ)(d.Z,{})]})}var q={self:(0,o.iv)([f.l0.colWithGap(12),f.l0.p(8)]),selfCollapsable:(0,o.iv)([f.l0.colWithGap(12)]),headerCollapsable:(0,o.iv)([f.l0.flex.row,f.l0.justify.spaceBetween])};function $(e){var n=e.inactive,t=void 0!==n&&n,r=(0,h.Z)();return(0,i.BX)(u.G,{css:q.self,children:[(0,i.tZ)(m.Z,{inactive:t,resources:r}),(0,i.tZ)(D,{})]})}function Y(e){var n=e.inactive,t=void 0!==n&&n,r=e.onClose,o=(0,h.Z)();return(0,i.BX)(u.G,{css:q.selfCollapsable,children:[(0,i.BX)(u.G,{css:[q.headerCollapsable],children:[(0,i.tZ)(c.xv,{variant:"subheadDefault",children:"Repl Resources"}),(0,i.tZ)(a.h,{alt:"collapse",tooltipHidden:!0,onClick:r,"aria-expanded":!0,children:(0,i.tZ)(s.Z,{})})]}),(0,i.tZ)(m.Z,{inactive:t,resources:o}),(0,i.tZ)(D,{})]})}},18841:function(e,n,t){t.d(n,{ZP:function(){return J},al:function(){return q},L7:function(){return K}});var r=t(57135),i=t(57389),o=t(72006),a=t(4405),l=t(96583),c=t(4541),u=t(50959),s=t(43119),d=t(71440),f=t(67216);function p(){var e=(0,s.Z)(["\n  query WorkspaceRunButton($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        language\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return p=function(){return e},e}var h={},v=(0,d.Ps)(p());var m=t(91355),g=t(30241),y=t(95499),Z=t(22167),b=t(25776),w=t(97774),x=t(55544),C=t(47287),k=t(11122),S=t(3941),T=t(2272),E=t(47236),R=t(14124);function I(){var e=(0,s.Z)(["\n  query CelebrateReplRunCurrentUser {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return I=function(){return e},e}var G={},D=(0,d.Ps)(I());var _=t(79948),P=t(88254),B=t(31518),A=new Date("2022-07-08"),U=(0,R.O4)("useCelebrateFirstReplPlay",!1);function N(){var e,n,t=function(e){var n=(0,o.Z)({},G,e);return f.a(D,n)}(),r=(0,B.Z)().preferences.extraDelight,i=(0,_.$0)().fireCircularBurstFrom,a=(0,T.Z)((0,E.KO)(U),2),l=a[0],c=a[1],u=null!==(n=null===(e=t.data)||void 0===e?void 0:e.currentUser)&&void 0!==n?n:null,s=!l&&u&&new Date(u.timeCreated)>=A;return{hasCelebrated:l,celebrate:function(e){e?((r||s)&&i({element:e}),s&&c(!0)):P.Tb(new Error("Cannot find element for celebrate Repl run confetti"))}}}var L,X=t(80877),M=t(70335),O=t(21150),F=t(46598),W=t(47843),H=t(76530),z=t(92003);function V(e){switch(e.runState){case y.A.IDLE:return(0,c.tZ)(X.Z,{size:16});case y.A.RUNNING:return(0,c.tZ)(M.Z,{size:16});default:return(0,c.tZ)(w.Z,{size:16})}}var j=(L={},(0,i.Z)(L,y.A.IDLE,"Run"),(0,i.Z)(L,y.A.RUNNING,"Stop"),(0,i.Z)(L,y.A.STOPPING,"Stopping"),(0,i.Z)(L,y.A.OFFLINE,"Working"),L),q={small:60,large:100},$=(0,k.iv)([Z.l0.py(12),Z.l0.width(q.small),Z.l0.flex.row,Z.l0.center,Z.l0.borderRadius(8),Z.l0.backgroundColor.accentPositiveDimmest,Z.l0.color.accentPositiveStronger,Z.l0.cursor.pointer,(0,i.Z)({transition:"color 0.2s ease 0s, background-color 0.2s ease 0s",border:"1px solid",borderColor:Z.TV.accentPositiveDimmest,lineHeight:1,outline:"0 none","&:hover":[{color:"white"},Z.l0.backgroundColor.accentPositiveDefault]},(0,O.et)("tabletMax"),[Z.l0.width(q.large)])]),Y=(0,k.iv)([Z.l0.color.foregroundDimmer,Z.l0.backgroundColor.backgroundHigher,{borderColor:Z.TV.backgroundHigher,"&:hover":[{color:"white"},Z.l0.backgroundColor.backgroundHighest]}]);function K(e){var n=(0,u.useState)(e.getRunState()),t=n[0],r=n[1];return(0,u.useEffect)((function(){return r(e.getRunState()),e.onStateChanged((function(e){r(e)}))}),[e]),t}var Q=u.forwardRef((function(e,n){var t=e.runner,s=e.runConfig,d=e.onRunInitiated,p=e.style,w=void 0===p?"default":p,k=e.disableTooltip,T=e.shortcut,E=(0,g.Z)(),R=K(t),I=function(e){var n=(0,o.Z)({},h,e);return f.a(v,n)}({variables:{id:E}}).data,G="Repl"===(null===I||void 0===I?void 0:I.repl.__typename)?I.repl:null,D=N().celebrate,_=R!==y.A.IDLE&&R!==y.A.RUNNING,P=(0,F.Z)().showError,B=(0,u.useRef)(null),A=function(){var e=(0,r.Z)((function(){var e,n,r,i,o,a,c,u;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),R!==y.A.IDLE?[3,2]:(d&&d(),B.current&&D(B.current),[4,t.run(s)]);case 1:return l.sent(),G&&(0,m.j)(m.U3.PROJECT_RAN,{language:G.language,replId:G.id,replTitle:G.title,rootOriginReplUrl:G.rootOriginReplUrl,templateTitle:null===(e=G.source)||void 0===e||null===(n=e.release)||void 0===n||null===(r=n.repl)||void 0===r?void 0:r.title,templateOwner:null===(i=G.source)||void 0===i||null===(o=i.release)||void 0===o||null===(a=o.repl)||void 0===a||null===(c=a.owner)||void 0===c?void 0:c.username}),[2];case 2:return R===y.A.RUNNING?[2,t.stopRun()]:[3,4];case 3:return u=l.sent(),P(u.toString()),W.kg.error("run button error",{errorMessage:u.message}),R===y.A.RUNNING?[2,t.stopRun()]:[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();if("floating"===w)return(0,c.tZ)(b.G,{tag:"button",disabled:_,css:[{position:"fixed",right:24,bottom:72,zIndex:1},Z.l0.center,{height:"50px",width:"50px",opacity:"0.5",cursor:"pointer",borderRadius:"100%",border:"solid 2px var(--accent-positive-dimmer)",backgroundColor:Z.TV.accentPositiveDimmest}],onClick:A,innerRef:B,children:(0,c.tZ)(V,{runState:R})});var U=R===y.A.IDLE;return"inline-small"===w?(0,c.BX)("button",{"data-cy":"ws-run-btn",onClick:A,ref:B,disabled:_,css:[Z.l0.p(12),Z.l0.flex.row,Z.l0.center,Z.l0.borderRadius(8),U?Z.l0.backgroundColor.accentPositiveDimmest:Z.l0.backgroundColor.backgroundHigher,U?Z.l0.color.accentPositiveStronger:Z.l0.color.foregroundDimmer,{border:"1px solid",borderColor:U?Z.TV.accentPositiveDimmest:Z.TV.backgroundHigher},Z.l0.width("100%"),Z.l0.height("100%")],children:[(0,c.tZ)(V,{runState:R}),(0,c.tZ)(x.xv,{variant:"subheadDefault",css:[Z.l0.pl(8)],children:j[R]})]}):(0,c.tZ)(C.u,{placement:"bottom",isDisabled:k||!T,tooltip:T?(0,c.tZ)(z.bM,{keyCombo:T}):null,children:function(e,t){return(0,c.BX)("button",(0,a.Z)((0,o.Z)({},e),{onClick:A,ref:(0,H.l)(B,t,n),css:[$,!U&&Y],children:[(0,c.tZ)(V,{runState:R}),(0,c.tZ)(x.xv,{variant:"subheadDefault",css:[Z.l0.pl(8),Z.l0.display.none,(0,i.Z)({lineHeight:1,overflow:"visible"},"@media (min-width: ".concat(S.j.tabletMax,"px)"),[Z.l0.display.block])],children:j[R]})]}))}})})),J=Q},44866:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(4541),i=t(3668),o=t(22167),a=(0,t(89853).X)({checked:[o.l0.width(32),o.l0.height(32),o.l0.backgroundColor.backgroundHigher],unchecked:[o.l0.width(32),o.l0.height(32),o.l0.color.foregroundDimmest]});function l(e){var n=e.alt,t=e.icon,o=e.checked,l=e.onClick;return(0,r.tZ)(i.h,{css:o?a.checked:a.unchecked,alt:"".concat(o?"Disable":"Enable"," ").concat(n),onClick:l,children:t})}},80618:function(e,n,t){t.d(n,{Z:function(){return fe}});var r=t(4541),i=t(12018),o=t(30265),a=t(37676),l=t(25776),c=t(89853),u=t(22167),s=t(57135),d=t(96583),f=t(4808),p=t(7380),h=t(7289),v=t(72006),m=t(77637),g=t(98260),y=(0,c.X)({base:[u.l0.backgroundColor.backgroundDefault,u.l0.color.foregroundDimmer,u.l0.borderRadius(0),u.l0.height("auto"),u.l0.p(4),{"> div":u.l0.rowWithGap(4)}]}),Z=function(e){var n=e.css,t=(0,m.Z)(e,["css"]);return(0,r.tZ)(a.T,{background:"root",children:(0,r.tZ)(g.zx,(0,v.Z)({small:!0,css:[y.base,n]},t))})},b=t(13469);function w(e){var n=e.performPaneOperation,t=(0,p.Z)(function(){var e=(0,s.Z)((function(e){var n,t,r,i;return(0,d.__generator)(this,(function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:return(n=o.sent()).error?[2,n]:(t=n.type,r=null,t===f.y5.INITIALIZING?[3,3]:[4,e.status()]);case 2:if((i=o.sent()).error)return[2,i];r=i,o.label=3;case 3:return[2,{branchName:null===r||void 0===r?void 0:r.branch,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}()),i=!t||t.error?null:t.branchName;return i?(0,r.tZ)(Z,{onClick:function(){return null===n||void 0===n?void 0:n({operation:"open",pane:{type:"git"}})},text:i,iconLeft:(0,r.tZ)(h.Z,{color:b.TV.foregroundDimmer,size:12})}):null}var x=t(19753),C=t(50959),k=t(66834),S=t(76286);function T(){var e=(0,C.useContext)(k.ox).openHistory;return e?(0,r.tZ)(Z,{text:"History",iconRight:(0,r.tZ)(x.Z,{size:12}),onClick:function(){(0,S.p)("historyOpened"),e()}}):null}var E=t(73691),R=t(75030),I=t(44863),G=t(31518),D=t(47287),_=t(69658),P=t(490),B=t(72402),A=t(8189),U=t(3083),N=t(69677),L=t(26093),X=t(76908),M=t(97774),O=t(47799),F=t(52662),W=t(37248);function H(){var e,n=(0,O.uN)(),t=null===n||void 0===n||null===(e=n.state)||void 0===e?void 0:e.facet(I.Yp);return t?(0,r.tZ)(z,{fileName:t}):null}function z(e){var n=e.fileName,t=(0,G.Z)().preferences.codeIntelligence,i=function(){var e=(0,O.uN)(),n=(0,C.useState)(null===e||void 0===e?void 0:e.state.facet(I.Q$)),t=n[0],r=n[1],i=(0,R.Z)({view:e});return(0,C.useEffect)((function(){if(e)return e.dispatch({effects:i.reconfigure(E.tk.updateListener.of((function(e){var n=e.startState.facet(I.Q$),t=e.state.facet(I.Q$);n!==t&&r(t)})))}),r(e.state.facet(I.Q$)),function(){r(void 0),e.dispatch({effects:i.reconfigure([])})};r(void 0)}),[e,i]),t}(),o=null!=i,a=(0,B.Z)(n),l=function(e){var n=(0,A.Z)(),t=n.lsp,r=n.lspnix,i=(0,B.X)(),o=(0,G.Z)().preferences.codeIntelligence,a=(0,C.useState)(!1),l=a[0],c=a[1];(0,C.useEffect)((function(){null!=e&&c(!1)}),[e]);var u=(0,C.useCallback)((function(){null!==i&&o&&(i?(r.disable(),r.enable()):(t.stop(),t.start()),c(!0))}),[t,r,i,o]);return{isRestartingLSP:l,restartLSP:u}}(a),c=l.isRestartingLSP,s=l.restartLSP,d=(0,C.useState)(null===a||void 0===a?void 0:a.getServerState()),f=d[0],p=d[1],h=f===P.a.INITIALIZING||c,v=null!=a&&f===P.a.INITIALIZED,m=f===P.a.EXITED||f===P.a.EXITING;(0,C.useEffect)((function(){if(a)return p(a.getServerState()),(0,F.uf)([a.onServerStateChange((function(e){p(e)}))])}),[a]);var g=function(e){var n=e.codeIntelligence,t=e.isRestartingLSP,r=e.isActiveLSP,i=e.isExitedLSP,o=e.hasPartialSupport;if(t)return"Restarting language server...";if(!n)return"Code Intelligence is disabled. Enable it in Settings.";if(i)return"Language support is not available because the language server exited.";if(!r&&o)return"Language support may be inaccurate because Code Intelligence is not available."}({codeIntelligence:t,isRestartingLSP:c,isActiveLSP:v,isExitedLSP:m,hasPartialSupport:o});return(0,r.tZ)(D.u,{isDisabled:void 0===g,tooltip:g,children:(0,r.tZ)(Z,{css:[{svg:[u.l0.width(16),u.l0.height(16)]}],iconLeft:j({isLoadingLSP:h,isActiveLSP:v,isExitedLSP:m,hasPartialSupport:o}),text:V({codeMirrorLanguageSupport:i,fileName:n}),onClick:function(){m&&s()}})})}function V(e){var n,t=e.codeMirrorLanguageSupport,r=e.fileName,i=(0,_.v)(r);return i||(t?0===t.language.name.length?(0,W.r6)(r):(n=t.language.name).slice(0,1).toUpperCase()+n.slice(1).toLowerCase():"Plain Text")}function j(e){var n=e.isLoadingLSP,t=e.isActiveLSP,i=e.isExitedLSP,o=e.hasPartialSupport;return n?(0,r.tZ)(M.Z,{size:16,color:u.TV.blueStronger}):t?(0,r.tZ)(N.Z,{size:16}):i?(0,r.tZ)(L.Z,{size:16}):o?(0,r.tZ)(X.Z,{size:16}):(0,r.tZ)(U.Z,{size:16})}var q=t(46542);function $(){var e=(0,C.useRef)(null),n=(0,O.uN)(),t=(0,R.Z)({view:n}),i=function(n){e.current&&(e.current.textContent=n)};return(0,C.useEffect)((function(){if(n){var e=null,r=null,o=function(n){n!==r&&(r=n,null===e&&(e=requestAnimationFrame((function(){e=null,i(r?function(e){var n=e.selection,t="",r=0;if(n.ranges.length>1){r=n.ranges.reduce((function(e,n){return e+(n.to-n.from)}),0);var i=n.ranges.length;t="".concat(i," selections")}else{var o=n.ranges[0],a=e.doc.lineAt(o.head),l=o.head-a.from;r=o.to-o.from,t="Ln ".concat(a.number,", Col ").concat(l+1)}return r>0&&(t+=" (".concat(r," chars)")),t}(r):"")}))))};return n.dispatch({effects:t.reconfigure(E.tk.updateListener.of((function(e){(e.docChanged||e.selectionSet)&&o(e.state)})))}),o(n.state),function(){i(""),null!==e&&(cancelAnimationFrame(e),e=null),n.dispatch({effects:t.reconfigure([])})}}i("")}),[n,t]),(0,C.useMemo)((function(){return(0,r.tZ)(Z,{text:(0,r.tZ)("span",{ref:e,"data-cy":"current-position"}),css:[u.l0.color.foregroundDimmest],onClick:n?function(){return(0,q.zo)(n)}:void 0})}),[n])}var Y=t(55544);function K(){var e=(0,C.useState)(null),n=e[0],i=e[1],o=(0,C.useRef)(null),a=(0,O.uN)(),l=(0,R.Z)({view:a}),c=(0,G.Z)().preferences,u="vim"===(null===c||void 0===c?void 0:c.keyboardHandler),s=(0,C.useCallback)((function(e){if(o.current){var t=null!==e&&void 0!==e?e:"";if(a&&n&&void 0===e){var r,i,l=n.getCM(a),c=null!==(i=null===(r=null===l||void 0===l?void 0:l.state.vim)||void 0===r?void 0:r.mode)&&void 0!==i?i:"normal";t="-- ".concat(c.toUpperCase()," --")}o.current.innerText!==t&&(o.current.innerText=t||"")}}),[a,n]);return(0,C.useEffect)((function(){u&&!n&&t.e(5401).then(t.bind(t,82944)).then((function(e){i(e),s()}))}),[u,n,s]),(0,C.useEffect)((function(){if(a&&u){var e=!1;return setTimeout((function(){e||(e=!0,a.dispatch({effects:l.reconfigure(E.tk.updateListener.of((function(){return s()})))}))}),0),s(),function(){e?a.dispatch({effects:l.reconfigure([])}):e=!0}}s(null)}),[a,u,l,s]),(0,r.tZ)(r.HY,{children:u?(0,r.tZ)(Y.xv,{ref:o,color:"dimmer",variant:"small"}):null})}var Q=t(7225),J=t(25928),ee=(0,c.X)({roundedRectanglePill:[u.l0.display.flex,u.l0.center,u.l0.fontWeight.medium,u.l0.fontSize(10),u.l0.borderRadius(4),u.l0.px(2),{flex:"0 0 auto",minWidth:16,height:16}]});function ne(e){var n=e.value,t=e.color,i=e.onClick,o=i?{cursor:"pointer"}:{};return(0,r.tZ)("div",{onClick:i,onKeyDown:function(e){"Enter"===e.key&&(null===i||void 0===i||i())},role:"button",tabIndex:0,css:[ee.roundedRectanglePill,t],style:o,children:n})}function te(){var e,n=(0,O.uN)(),t=null===n||void 0===n||null===(e=n.state)||void 0===e?void 0:e.facet(I.Yp);return t?(0,r.tZ)(ie,{fileName:t}):null}function re(e,n,t){var r=null===n||void 0===n?void 0:n.find((function(e){return e.severity===t}));if(r){var i=r.range.start,o=(0,J.R)(e.state.doc,i);e.dispatch({selection:{anchor:o},scrollIntoView:!0})}}function ie(e){var n=e.fileName,t=(0,O.uN)(),i=function(e){var n=(0,C.useState)(null),t=n[0],r=n[1],i=(0,B.Z)(e);return(0,C.useEffect)((function(){if(i)return i.onDiagnostics((function(n){n.path===e&&r(n.diagnostics)}))}),[i,e]),t}(n),o=(0,C.useMemo)((function(){return i?function(e){var n=e.reduce((function(e,n){return void 0===n.severity||(e[n.severity]=(e[n.severity]||0)+1),e}),{});return e.length>0&&0===Object.keys(n).length&&(n[Q.DiagnosticSeverity.Error]=e.length),n}(i):null}),[i]);if(!o)return null;var a=o[Q.DiagnosticSeverity.Error]||0,l=o[Q.DiagnosticSeverity.Warning]||0;return 0===a&&0===l?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(D.u,{tooltip:"".concat(a," errors"),children:(0,r.tZ)(ne,{value:a,color:u.l0.backgroundColor.redDimmest,onClick:a>0?function(){t&&i&&re(t,i,Q.DiagnosticSeverity.Error)}:void 0})}),(0,r.tZ)(D.u,{tooltip:"".concat(l," warnings"),children:(0,r.tZ)(ne,{value:l,color:u.l0.backgroundColor.yellowDimmer,onClick:l>0?function(){t&&i&&re(t,i,Q.DiagnosticSeverity.Warning)}:void 0})})]})}var oe=t(92705),ae=t(13834),le=t(98689),ce=t(13014);function ue(){var e=(0,C.useState)(!1),n=e[0],t=e[1],i=(0,C.useState)(!1),o=i[0],a=i[1],l=(0,le.Z)(n),c=(0,le.Z)(o),u=(0,O.uN)();return(0,ae.M)((function(){return E.tk.updateListener.of((function(e){var n=e.state.field(oe.Ou,!1);if(!n||null===n.head)return l.current&&t(!1),void(c.current&&a(!1));var r=n.mode===oe.Ut.INLINE_DIFF;l.current!==r&&t(r),c.current||a(!0)}))}),[l,c],u,"ToggleGitFileDiff"),u&&o?(0,r.tZ)(Z,{text:n?"Diffing":"Diff",colorway:n?"primary":void 0,iconLeft:(0,r.tZ)(ce.Z,{}),onClick:function(){u.dispatch({effects:oe.x9.of(n?oe.Ut.GUTTER_DIFF:oe.Ut.INLINE_DIFF)})}}):null}var se=t(92079),de=(0,c.X)({root:[u.l0.position.relative,u.l0.rowWithGap(16),u.l0.align.center,u.l0.justify.spaceBetween,u.l0.backgroundColor.backgroundDefault,{borderTop:"1px solid ".concat(u.TV.backgroundHigher)},{height:"30px",contain:"strict"}],left:[u.l0.rowWithGap(2),u.l0.align.center,u.l0.px(8)],right:[u.l0.rowWithGap(2),u.l0.display.flex,u.l0.flex.row,u.l0.align.center],group:[u.l0.rowWithGap(2),u.l0.display.flex,u.l0.flex.row,u.l0.flex.shrink(1),u.l0.align.center]});function fe(e){var n=e.performPaneOperation,t=(0,i.P5)({controlName:"flag-lsp-status-in-ws"}),c=(0,i.P5)({controlName:"flag-lsp-diagnostics-in-footer"}),u=(0,se.d)(),s=!u&&t,d=!u&&c,f=(0,i.P5)({controlName:"flag-status-bar-branch"}),p=(0,i.P5)({controlName:"flag-editor-git-inline-diff"}),h=(0,o.T3)()?void 0:{borderBottomLeftRadius:7,borderBottomRightRadius:7};return(0,r.BX)(a.T,{css:de.root,style:h,children:[(0,r.BX)(l.G,{css:de.group,children:[s?(0,r.tZ)(H,{}):null,d?(0,r.tZ)(te,{}):null,f?(0,r.tZ)(w,{performPaneOperation:n}):null,p?(0,r.tZ)(ue,{}):null,(0,r.tZ)(K,{})]}),(0,r.BX)(l.G,{css:de.group,children:[(0,r.tZ)($,{}),(0,r.tZ)(T,{})]})]})}},33727:function(e,n,t){t.d(n,{Z:function(){return V}});var r=t(2272),i=t(4541),o=t(50959),a=t(65001),l=t(35742),c=t(25776),u=t(22167),s=t(24793),d=t(47287),f=t(55544),p=t(75916),h=t(8631),v=t(99214),m=t.n(v),g=t(72006),y=t(24649),Z=t(69526),b=t(66164),w=t(25462),x=t(31518),C=t(11122),k=function(e){return(0,C.iv)({wordBreak:"break-word",boxSizing:"border-box",whiteSpace:"normal",lineHeight:1.5,color:u.TV.foregroundDefault,fontFamily:"".concat(u.TV.fontFamilyDefault," !important"),fontSize:e,textSizeAdjust:"100%","h1, h2, h3, h4, h5, h6":{color:u.TV.foregroundDefault,fontWeight:u.TV.fontWeightMedium,marginBottom:u.TV.space16,lineHeight:1.25,wordWrap:"break-word"},"h1, h2":{paddingBottom:u.TV.space8,borderBottom:"1px solid ".concat(u.TV.backgroundHigher),marginTop:u.TV.space32},h1:{fontSize:"2em"},h2:{fontSize:"1.5em"},h3:{fontSize:"1.25em",marginTop:u.TV.space24},h4:{fontSize:"1em",marginTop:u.TV.space16},h5:{fontSize:"0.875em"},h6:{color:u.TV.foregroundDimmer,fontSize:"0.85em"},".anchor":{float:"left",lineHeight:1,marginLeft:"calc(-1 * ".concat(u.TV.space16,")"),paddingRight:u.TV.space4},".anchor:focus":{outline:"none"},p:{marginBottom:u.TV.space16,fontSize:e,fontFamily:"".concat(u.TV.fontFamilyDefault," !important")},"p:last-child":{marginBottom:0},table:{borderSpacing:0,borderCollapse:"collapse",display:"block",width:"100%",overflow:"auto",marginBottom:u.TV.space16,wordBreak:"normal",th:{fontWeight:u.TV.fontWeightMedium},"td, th":{padding:"".concat(u.TV.space8," ").concat(u.TV.space12),border:"1px solid ".concat(u.TV.backgroundHighest),minWidth:"16ch"},tr:{backgroundColor:u.TV.backgroundDefault,borderTop:"1px solid ".concat(u.TV.backgroundHighest)},"tr:nth-child(2n)":{backgroundColor:u.TV.backgroundRoot}},"hr:after":{clear:"both"},"li > p":{marginBottom:0},li:{marginTop:u.TV.space4},dd:{marginLeft:0},"ol, ul":{paddingLeft:u.TV.space16,marginTop:0,marginBottom:0},ul:{listStyle:"initial",listStyleType:"disc",marginBottom:u.TV.space16},ol:{listStyle:"decimal",marginBottom:u.TV.space16},"ol ol, ol ul, ul ol, ul ul":{paddingLeft:u.TV.space16,marginTop:0,marginBottom:0,paddingBottom:0},"ul ul":{listStyleType:"circle"},"ul ul ul":{listStyleType:"square"},"ol ol, ul ol":{listStyleType:"lower-roman"},"ol ol ol, ol ul ol, ul ol ol, ul ul ol":{listStyleType:"lower-alpha"},pre:{fontFamily:"".concat(u.TV.fontFamilyCode," !important"),margin:"".concat(u.TV.space16," 0"),borderRadius:4,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",color:u.TV.foregroundDefault},"pre:last-child":{marginBottom:"0 !important"},blockquote:{padding:"0 1em",marginBottom:u.TV.space16,borderLeft:"".concat(u.TV.space2," solid ").concat(u.TV.backgroundHighest),paddingLeft:u.TV.space16},"blockquote > *":{color:"".concat(u.TV.foregroundDimmer," !important")},"blockquote > :last-child":{marginBottom:"0 !important",borderBottom:"none !important"},"blockquote > :first-child":{marginTop:"0 !important"},kbd:{display:"inline-block",padding:"3px 5px",font:"11px ".concat(u.TV.fontFamilyCode),color:u.TV.foregroundDimmer,verticalAlign:"middle",backgroundColor:u.TV.backgroundHigher,border:"none",borderRadius:3,boxShadow:"inset 0 -1px 0 ".concat(u.TV.backgroundHighest)},a:{color:u.TV.accentPrimaryStronger,backgroundColor:"initial"},"> :first-child":{marginTop:"0 !important",paddingTop:"0 !important"},"> :last-child":{borderBottom:"none !important",marginBottom:"0 !important",paddingBottom:"0 !important"},'[type="checkbox"]':{boxSizing:"border-box",marginRight:u.TV.space8,padding:0},details:{marginBottom:u.TV.space16,display:"block",background:u.TV.backgroundHigher,borderRadius:u.TV.borderRadius4,padding:u.TV.space16},summary:{display:"list-item",userSelect:"none",cursor:"pointer",fontWeight:u.TV.fontWeightBold},"details[open] > summary":{borderBottom:"1px solid ".concat(u.TV.backgroundHighest),marginBottom:u.TV.space16,paddingBottom:u.TV.space16},hr:{height:1,backgroundColor:u.TV.backgroundHigher,margin:"".concat(u.TV.space24," 0"),border:0}})},S=t(71253),T=t(42173),E=t(50543),R=t(18853),I=["a","pre","code","em","strong","p","ul","ol","li","img","del","h1","h2","h3","h4","h5","h6","sup","sub","br","hr","blockquote","span","div"];function G(e){var n=e.content,t=(0,x.Z)().preferences.fontSize,r=o.useCallback((function(e){return(0,i.tZ)(R.Z,(0,g.Z)({},e))}),[]);return(0,i.tZ)("div",{css:[{"& ol":{paddingInlineStart:"20px"},"& ul":{paddingInlineStart:"20px",listStyle:"initial"}}],children:(0,i.tZ)(y.D,{css:k(t),allowedElements:I,remarkPlugins:[Z.Ic,b.Z,w.Z,S.Z],linkTarget:"_blank",rehypePlugins:[T.Z],components:{code:r,img:E.Z},children:n})})}var D=(0,o.memo)(G),_=t(67044),P=t(82666),B=t(3220),A=t(43119),U=t(71440),N=t(39159),L=t(59187);function X(){var e=(0,A.Z)(["\n  mutation DeleteThreadMessage($id: String!) {\n    deleteThreadMessage(messageId: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return X=function(){return e},e}var M={},O=(0,U.Ps)(X(),N.j7);var F=t(44391),W=t(46598),H=t(12018),z=function(e){var n=e.thread,t=e.message,v=(0,F.d)(),y=(0,W.Z)().showError,Z=(0,r.Z)(function(e){var n=(0,g.Z)({},M,e);return L.D(O,n)}({onError:function(e){y(e.message)},onCompleted:function(e){var n;"UserError"===(null===(n=e.deleteThreadMessage)||void 0===n?void 0:n.__typename)&&y(e.deleteThreadMessage.message)}}),2),b=Z[0],w=Z[1].loading,x=(0,H.P5)({controlName:"flag-threads-dropdown-menu",default:!1,type:"boolean"}),C=!(!n||n.indexStart!==n.indexEnd),k={resolved:"Thread resolved. Re-open it any time in the inbox.",unresolved:"Thread re-opened"},S="Outdated",T="The code has changed since the comment was left",E=o.useMemo((function(){return{diff:(0,h.Y)(t.timeCreated),full:(0,h.u)(t.timeCreated)}}),[t]);if(!t.user)return null;var R=v===t.user.id?[{label:"Delete",icon:(0,i.tZ)(B.Z,{}),isDestructive:!0}]:[];return(0,i.BX)(c.G,{children:[(0,i.BX)(c.G,{css:[u.l0.flex.row,u.l0.justify.spaceBetween,u.l0.pb(4)],children:[(0,i.BX)(c.G,{css:[u.l0.flex.row,u.l0.align.center,u.l0.rowWithGap(8)],children:[(0,i.tZ)(m(),{passHref:!0,href:"/@".concat(t.user.username),children:(0,i.tZ)("a",{children:(0,i.tZ)(l.n,{small:!0,src:t.user.image,username:t.user.username})})}),(0,i.tZ)("p",{children:(0,i.tZ)(d.u,{tooltip:E.full,placement:"top",children:(0,i.tZ)(f.xv,{variant:"small",color:"dimmer",children:E.diff})})}),R.length>0&&x?(0,i.tZ)(P.Z,{items:R,onItemClick:function(e){"Delete"!==e.label||w||b({variables:{id:t.id}})},label:"More"}):null]}),C?(0,i.tZ)(d.u,{tooltip:T,children:(0,i.tZ)(s.D,{colorway:"negative",text:S})}):null]}),"StatusMessageContentType"===t.content.__typename&&"resolved"===t.content.status?(0,i.tZ)(a.E,{colorway:"positive",icon:(0,i.tZ)(p.Z,{}),text:k.resolved}):null,"StatusMessageContentType"===t.content.__typename&&"unresolved"===t.content.status?(0,i.tZ)(a.E,{colorway:"primary",icon:(0,i.tZ)(_.Z,{}),text:k.unresolved}):null,"TextMessageContentType"===t.content.__typename&&(0,i.tZ)(D,{content:t.content.text})]})},V=(0,o.memo)(z)},8631:function(e,n,t){t.d(n,{Y:function(){return o},u:function(){return a}});var r=t(64517),i=t(20597),o=function(e){var n=new Date(e),t=new Date;return(0,i.Z)(t,n)<60?"just now":(0,r.F)(n,!0)+" ago"},a=function(e){return new Date(e).toLocaleString()}},44794:function(e,n,t){t.d(n,{Z:function(){return ge}});var r=t(2272),i=t(4541),o=t(50959),a=t(60470),l=t(72851),c=t(58975),u=t(30241),s=t(97774),d=t(72006),f=t(4405),p=t(69383),h=t(98836),v=t(62223),m=t(35021),g=t(25776),y=t(22167),Z=t(55544),b=t(98260),w=t(46900),x=t(46598),C=t(7338),k=t(67044),S=t(95980),T=t.n(S),E=t(54369),R=t(73691),I=t(14806),G=t(82400),D=I.q6.define();function _(e){var n=e.editorRef,t=e.onChange,r=e.placeholder,a=e.skeleton,l=e.language,c=e.skeletonClosingBracket,u=e.indentSize,s=void 0===u?2:u,d=(0,E.Z)({language:l,indentIsSpaces:!0,indentSize:2,fontSize:14}),f=d.view,p=d.ref,h=o.useRef(a?"".concat(a,"\n"):""),v=c?"\n".concat(c):"",m=" ".repeat(s);return o.useEffect((function(){if(f&&f.state.doc.length){var e=h.current;h.current=a?"".concat(a,"\n"):"",f.dispatch({changes:{from:0,to:e.length-1,insert:a},annotations:[I.YW.addToHistory.of(!1),D.of(!0)]})}}),[f,a]),o.useEffect((function(){if(f){var e=I.yy.changeFilter.of((function(e){return!!e.annotation(D)||[-1,h.current.length,e.startState.doc.length-v.length,e.startState.doc.length+1]})),i=R.tk.updateListener.of((function(e){var n=e.state.doc.slice(h.current.length,e.state.doc.toString().length-v.length).toString();if(n!=="".concat(m).concat(r,"\n").concat(m)?t(n):t(""),e.docChanged&&e.state.doc.length===h.current.length+v.length){var i="\n"+m;f.dispatch({changes:{from:h.current.length-1,insert:"\n"+m},selection:{anchor:h.current.length+i.length-1},annotations:[D.of(!0)]})}})),o="".concat(h.current).concat(m).concat(r,"\n").concat(v);f.dispatch({changes:{from:0,to:f.state.doc.length,insert:o},effects:I.Py.appendConfig.of([e,i]),selection:{anchor:o.length},annotations:I.YW.addToHistory.of(!1)}),n({setValue:function(e){if(e){var n=f.state.doc.toString().length;f.dispatch({changes:{from:h.current.length,to:n-v.length,insert:e},annotations:I.YW.addToHistory.of(!1)})}},focus:function(){return f.focus()}})}}),[t,l,f,v,n,r,m]),(0,i.BX)("div",{className:"jsx-c0a72647b9c20ef editor",children:[(0,i.tZ)(G.Z,{ref:p,view:f}),(0,i.tZ)(T(),{id:"c0a72647b9c20ef",children:".editor.jsx-c0a72647b9c20ef{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-c0a72647b9c20ef{height:100%;width:100%;z-index:5}"})]})}var P=t(91355),B=t(75916);function A(e){var n,t,a,l,c=e.isOpen,s=e.meta,h=e.language,w=e.hasMetadata,k=e.onClose,S=(0,u.Z)(),T=(0,x.Z)().showConfirm,E=(0,r.Z)(o.useState(null),2),R=E[0],I=E[1],G=(0,r.Z)(o.useState(!0),2),D=G[0],_=G[1],A=(0,r.Z)(o.useState((null===s||void 0===s?void 0:s.initialization)||""),2),M=A[0],O=A[1],F=(0,r.Z)(o.useState((null===s||void 0===s?void 0:s.imports)||""),2),W=F[0],H=F[1],z=(0,r.Z)(o.useState((null===s||void 0===s?void 0:s.setup)||""),2),V=z[0],j=z[1],q=(0,r.Z)(o.useState((null===s||void 0===s?void 0:s.tearDown)||""),2),$=q[0],Y=q[1],K=(0,r.Z)((0,p.rU)({onError:function(e){return I(e.message)},update:function(e,n){var t,r=null===(t=n.data)||void 0===t?void 0:t.createReplUnitTestMeta;r&&("UserError"===r.__typename?I(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:S}),fields:{unitTests:function(n){var t=e.writeFragment({data:r,fragment:p.aA});return n?(0,f.Z)((0,d.Z)({},n),{meta:(0,d.Z)({},t)}):{__typename:"ReplUnitTestsWithMeta",meta:t,tests:[]}}}}),T("Setup saved!"),k()))}}),2),Q=K[0],J=K[1],ee=(0,r.Z)((0,p.AF)({onError:function(e){return I(e.message)},onCompleted:function(e){var n=e.updateReplUnitTestMeta;n&&("UserError"===n.__typename?I(n.message):"ReplUnitTestMeta"===n.__typename&&(T("Imports updated!"),k()))}}),2),ne=ee[0],te=ee[1],re=(0,C.x)(h),ie=W!==(null===s||void 0===s?void 0:s.imports)||M!==(null===s||void 0===s?void 0:s.initialization)||V!==(null===s||void 0===s?void 0:s.setup)||$!==(null===s||void 0===s?void 0:s.tearDown),oe=J.loading||te.loading;return(0,i.tZ)(m.u,{isOpen:c,onRequestClose:k,maxWidth:872,children:(0,i.BX)(g.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Setup"}),(0,i.tZ)(U,{unitTestsLib:re,onChange:H,language:h,initialValue:null!==(n=null===s||void 0===s?void 0:s.imports)&&void 0!==n?n:""}),(0,i.tZ)(g.G,{onClick:function(){return _(!D)},css:{cursor:"pointer"},children:(0,i.BX)(g.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"headerDefault",children:"Advanced"}),(0,i.tZ)(v.Z,{color:"var(--foreground-default)",size:20,rotate:D?270:0})]})}),D?null:(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)(N,{unitTestsLib:re,onChange:O,language:h,initialValue:null!==(t=null===s||void 0===s?void 0:s.initialization)&&void 0!==t?t:""}),(0,i.tZ)(L,{unitTestsLib:re,onChange:j,language:h,initialValue:null!==(a=null===s||void 0===s?void 0:s.setup)&&void 0!==a?a:""}),(0,i.tZ)(X,{unitTestsLib:re,onChange:Y,language:h,initialValue:null!==(l=null===s||void 0===s?void 0:s.tearDown)&&void 0!==l?l:""})]}),(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.xv,{css:[y.l0.color.accentNegativeStronger],multiline:!0,children:R}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(12)],children:[(0,i.tZ)(b.zx,{disabled:oe,onClick:k,text:"Cancel"}),(0,i.tZ)(b.zx,{colorway:"primary",disabled:!ie||oe,onClick:function(){(0,P.j)(P.U3.REPL_UNIT_TEST_USED,{action:"modifiedSetup"}),w?ne({variables:{input:{initialization:M,imports:W,setup:V,tearDown:$,replId:S}}}):Q({variables:{input:{initialization:M,imports:W,setup:V,tearDown:$,replId:S}}})},iconLeft:(0,i.tZ)(B.Z,{}),text:"".concat(oe?"Saving...":"Save")})]})]})]})})}function U(e){var n=e.unitTestsLib,t=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),u=c[0],s=c[1];o.useEffect((function(){u&&(u.setValue(l),u.focus())}),[u,l]);var d=n.defaultImports().trim();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Imports"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(k.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(_,{onChange:t,placeholder:"".concat(n.getCommentChar()," Add imports here"),editorRef:s,language:a,skeleton:d,skeletonClosingBracket:"",indentSize:0})})})]})}function N(e){var n=e.unitTestsLib,t=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),u=c[0],s=c[1];o.useEffect((function(){u&&u.setValue(l)}),[u,l]);var d=n.classConstructorName();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Initialization"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(k.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),d?(0,i.BX)(Z.xv,{multiline:!0,children:["Hint: constructor name is ",(0,i.tZ)("code",{children:d}),"."]}):null,(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(_,{onChange:t,placeholder:"".concat(n.getCommentChar()," Add initialization code here"),editorRef:s,language:a,skeleton:"",skeletonClosingBracket:"",indentSize:0})})})]})}function L(e){var n=e.unitTestsLib,t=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),u=c[0],s=c[1];o.useEffect((function(){u&&u.setValue(l)}),[u,l]);var d=n.setupIntro().trim();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Setup"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(k.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(_,{onChange:t,placeholder:"".concat(n.getCommentChar()," Add setup code here"),editorRef:s,language:a,skeleton:d,skeletonClosingBracket:n.hasClosingBrackets()?n.getClosingBrackets():""})})})]})}function X(e){var n=e.unitTestsLib,t=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),u=c[0],s=c[1];o.useEffect((function(){u&&u.setValue(l)}),[u,l]);var d=n.tearDownIntro().trim();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Teardown"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(k.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(_,{onChange:t,placeholder:"".concat(n.getCommentChar()," Add teardown code here"),editorRef:s,language:a,skeleton:d,skeletonClosingBracket:n.hasClosingBrackets()?n.getClosingBrackets():""})})})]})}var M=function(e){var n=e.language,t=e.meta,a=(0,r.Z)(o.useState(!1),2),l=a[0],c=a[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(b.zx,{iconLeft:(0,i.tZ)(h.Z,{}),onClick:function(){return c(!0)},text:"Setup"}),(0,i.tZ)(A,{language:n,isOpen:l,onClose:function(){return c(!1)},hasMetadata:Boolean(null===t||void 0===t?void 0:t.id),meta:t})]})},O=t(9970),F=t(62830),W=t(25028),H=t(47923),z=t(3220),V=t(24403),j=t(59228),q=t(42735),$=t(3668),Y=t(97387),K=t(30249),Q=t(57135),J=t(96583),ee=t(88254),ne=t(8189),te=t(80567),re=t(1922),ie="\x1b[0;31m",oe="\x1b[0m",ae=["\u28fe","\u28fd","\u28fb","\u28bf","\u287f","\u28df","\u28ef","\u28f7","\u2801","\u2802","\u2804","\u2840","\u2880","\u2820","\u2810","\u2808"];function le(e){var n=e.name,t=e.failureMessage,r=e.stack;return"\u274c\t".concat(ie).concat(n).concat(oe,"\r").concat(t?"\nMessage: ".concat(t,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var ce=function(e){var n=e.language,t=e.unitTests,a=e.onResult,l=e.trackingContext,c=function(e){v.writeToTerminal(e)},u=function(){v.clearTerminal(),c("\r\n")},s=(0,r.Z)(o.useState(!1),2),f=s[0],p=s[1],h=(0,ne.Z)(),v=h.session,m=h.container,y=h.packager,Z=h.fs,w=null,x=function(){p(!1),(0,re.WT)(Z),w&&(w.stopLogSpinner(),w=null)},k=function(){var e=(0,Q.Z)((function(){var e,r,i,o,s,h,v,g,b,k,S,T,E,R,I,G,D,_,B,A,U,N;return(0,J.__generator)(this,(function(L){switch(L.label){case 0:if(f)return[2];if(e=null,w={startLogSpinner:function(n){if(e)throw new Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var t=n,r=0;return e=setInterval((function(){r++;var e=ae[r%ae.length];if(!w)throw new Error("Expected logger");w.clearLine(),w.logMessage(e+" "+t)}),100),function(e){t=e}},stopLogSpinner:function(){e&&clearInterval(e),e=null},logMessage:c,clearLogs:u,clearLine:function(){if(!w)throw new Error("Expected logger");w.logMessage("\x1b[1K\r")}},!t)throw new Error("Run button should not be active if there are no tests");return p(!0),(0,P.j)(P.U3.REPL_UNIT_TEST_USED,{trackingData:{context:l},action:"ranTests"}),w.clearLogs(),[4,(r=(0,C.x)(n)).buildAndRunTests((0,d.Z)({container:m,fs:Z,packager:y,logger:w},t))];case 1:if(i=L.sent(),w.stopLogSpinner(),w.clearLine(),w.clearLogs(),null!==i.error)return w.logMessage("".concat(ie).concat(i.error).concat(oe,"\r\n")),x(),t.tests.map((function(e){return{testId:e.id,didPass:!1}})),[2];if(o=i.result.passed?[]:i.result.failures.map((function(e){return r.parseTestResultName(e.name)})),s=[],h=t.tests.map((function(e){return r.getProperTestName(e.name)})),v=o.filter((function(e){return!h.includes(e)})),v.length)b=v[0],k=i.result.failures[0].stack,w.logMessage(le({name:b,failureMessage:"The following error occurred but was not related to a single unit test",stack:k})),(g=s).push.apply(g,(0,O.Z)(t.tests.map((function(e){return{testId:e.id,didPass:!1}}))));else{S=!0,T=!1,E=void 0;try{for(R=t.tests[Symbol.iterator]();!(S=(I=R.next()).done);S=!0)G=I.value,D=r.getProperTestName(G.name),_=o.indexOf(D),B=-1===_,s.push({testId:G.id,didPass:B}),B?w.logMessage((X=D,"\u2705\t".concat("\x1b[0;32m").concat(X).concat(oe,"\r\n\r\n"))):(A=i.result.failures[_].stack,w.logMessage(le({name:D,failureMessage:G.failureMessage,stack:A})))}catch(M){T=!0,E=M}finally{try{S||null==R.return||R.return()}finally{if(T)throw E}}}return a(s),U=t.tests.length,i.result.passed?(w.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(U,"/").concat(U,"  ").concat(oe,"\r\n")),x(),[2]):(N=U-i.result.failures.length,w.logMessage("".concat("\x1b[48;5;88m","  ").concat(N,"/").concat(U," passed, see errors above  ").concat(oe)),x(),[2])}var X}))}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,Q.Z)((function(){return(0,J.__generator)(this,(function(e){try{k()}catch(n){ee.$e((function(e){e.setTag("unittestsrun","true"),ee.Tb(n)})),w&&w.logMessage("\r\n".concat(ie," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(oe,"\r\n")),x()}return[2]}))}));return function(){return e.apply(this,arguments)}}();return Boolean(t&&t.tests.length>0)?(0,i.tZ)(g.G,{children:(0,i.tZ)(b.zx,{disabled:f,colorway:"primary",iconLeft:(0,i.tZ)(te.Z,{}),onClick:S,text:f?"Running tests...":"Run tests"})}):null},ue=t(90189);function se(e){var n=e.isOpen,t=e.test,a=e.language,l=e.onClose,s=e.trackingContext,h=(0,u.Z)(),v=(0,x.Z)().showConfirm,k=(0,r.Z)(o.useState(null),2),S=k[0],T=k[1],E=(0,r.Z)(o.useState(""),2),R=E[0],I=E[1],G=(0,r.Z)(o.useState(""),2),D=G[0],A=G[1],U=(0,r.Z)(o.useState(""),2),N=U[0],L=U[1],X=(0,r.Z)((0,p.Hd)({onError:function(e){return L(e.message)},update:function(e,n){var t,r=null===(t=n.data)||void 0===t?void 0:t.createReplUnitTest;r&&("UserError"===r.__typename?L(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:h}),fields:{unitTests:function(n){var t=e.writeFragment({data:r,fragment:p.Rb});return n?(0,f.Z)((0,d.Z)({},n),{tests:(0,O.Z)(n.tests).concat([t])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[t]}}}}),v("Test created!"),l()))}}),2),M=X[0],F=X[1],H=(0,r.Z)((0,p.kO)({onError:function(e){return L(e.message)},onCompleted:function(e){var n=e.updateReplUnitTest;n&&("UserError"===n.__typename?L(n.message):"ReplUnitTest"===n.__typename&&(v("Test updated!"),l()))}}),2),z=H[0],$=H[1],Q=(0,K.Y)("",(function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0}));o.useEffect((function(){Q.setValue((null===t||void 0===t?void 0:t.name)||"",{preventTouch:!0}),A((null===t||void 0===t?void 0:t.failureMessage)||""),I((null===t||void 0===t?void 0:t.code)||""),S&&S.setValue((null===t||void 0===t?void 0:t.code)||"")}),[t,S]),o.useEffect((function(){L("")}),[R,L]);var J=(0,C.x)(a),ee="".concat(J.getCommentChar()," Enter code here"),ne=!t||t.name!==Q.value||t.code!==R||t.failureMessage!==D,te=F.loading||$.loading,re=J.testIntro(Q.value||""),ie=J.hasClosingBrackets()?J.getClosingBrackets():"",oe=(0,r.Z)(o.useState(!1),2),ae=oe[0],le=oe[1],ce=function(){S&&(S.setValue("  "+J.exampleTest.code),S.focus()),I(J.exampleTest.code)};return(0,i.tZ)(m.u,{isOpen:n,onRequestClose:l,maxWidth:872,children:(0,i.BX)(g.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"New unit test"}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)("label",{htmlFor:"name",children:(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Name"})}),(0,i.tZ)(Y.Z,{id:"name",label:"Test name",status:null,autoFocus:!0,required:!0,value:Q.value,isValid:Q.isValid,error:Q.error,warning:Q.warning,touched:Q.touched,onChange:function(e){Q.setValue(e.target.value)},placeholder:"Enter test name here"})]}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Code"}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(4)],children:[(0,i.BX)(ue.Z,{isOpen:ae,onClickOutside:function(){return le(!1)},placement:"bottom-end",children:[(0,i.tZ)(b.zx,{iconLeft:(0,i.tZ)(W.Z,{}),small:!0,outlined:!0,text:"View an example",onClick:function(){[ee,J.exampleTest.code].includes(R.trim())?ce():le(!0)}}),(0,i.BX)(g.G,{children:["This will overwrite your current test. Are you sure?",(0,i.BX)(g.G,{css:[y.l0.rowWithGap(4),y.l0.pt(8)],children:[" ",(0,i.tZ)(b.zx,{text:"No, go back",small:!0,iconLeft:(0,i.tZ)(V.Z,{}),onClick:function(){le(!1)}}),(0,i.tZ)(b.zx,{text:"Yes, delete test",colorway:"negative",small:!0,iconLeft:(0,i.tZ)(B.Z,{}),onClick:function(){ce(),le(!1)}})]})]})]}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(j.Z,{}),small:!0,outlined:!0,text:"View docs",target:"_blank",href:"https://docs.replit.com/teams-edu/unit-testing"})]})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(_,{skeleton:re,skeletonClosingBracket:ie,language:a,editorRef:T,onChange:I,placeholder:ee})})})]}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Failure message"}),(0,i.tZ)(q.II,{value:D,onChange:function(e){return A(e.target.value)},placeholder:"This will be displayed on test failure"})]}),(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.xv,{css:[y.l0.color.accentNegativeStronger],children:N}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(12)],children:[(0,i.tZ)(b.zx,{text:"Cancel",onClick:l}),(0,i.tZ)(b.zx,{text:"".concat(te?"Creating test...":"Create test"),iconLeft:(0,i.tZ)(c.Z,{}),colorway:"primary",disabled:!ne||te,onClick:function(){Q.validate()||(R.length<=0?L("Test cannot be empty"):t?(z({variables:{input:{name:Q.value,code:R,failureMessage:D,testId:t.id}}}),(0,P.j)(P.U3.REPL_UNIT_TEST_USED,{trackingData:{context:s},action:"modifiedTest"})):(M({variables:{input:{name:Q.value,code:R,failureMessage:D,replId:h}}}),(0,P.j)(P.U3.REPL_UNIT_TEST_USED,{trackingData:{context:s},action:"addedTest"})))}})]})]})]})})}function de(e){var n=e.testId,t=e.onClose,a=(0,x.Z)().showConfirm,l=(0,u.Z)(),c=(0,r.Z)((0,p.IV)({onError:function(e){return C(e.message)},update:function(e,r){var i,o=null===(i=r.data)||void 0===i?void 0:i.deleteReplUnitTest;o&&("UserError"===o.__typename?C(o.message):"ReplUnitTest"===o.__typename&&n&&(e.modify({id:e.identify({__typename:"Repl",id:l}),fields:{unitTests:function(e,t){var r=t.readField,i=e.tests.filter((function(e){return r("id",e)!==n}));return(0,f.Z)((0,d.Z)({},e),{tests:(0,O.Z)(i)})}}}),(0,P.j)(P.U3.REPL_UNIT_TEST_USED,{action:"removedTest"}),a("Test deleted!"),t()))}}),2),s=c[0],h=c[1],v=(0,r.Z)(o.useState(""),2),w=v[0],C=v[1];return(0,i.tZ)(m.u,{isOpen:Boolean(n),onRequestClose:t,children:(0,i.BX)(g.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Delete test?"}),(0,i.tZ)(Z.xv,{multiline:!0,children:"Are you sure you want to delete this test? This cannot be undone."}),(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.xv,{multiline:!0,css:[y.l0.color.accentNegativeStronger],children:w}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(12),y.l0.justify.end],children:[(0,i.tZ)(b.zx,{text:"Cancel",disabled:h.loading,onClick:t}),(0,i.tZ)(b.zx,{text:"Yes, delete this test",colorway:"negative",iconLeft:(0,i.tZ)(z.Z,{}),disabled:h.loading,onClick:function(){if(!n)throw new Error("Expected a testId");s({variables:{testId:n}})}})]})]})]})})}var fe=function(e){var n=e.unitTests,t=e.isAddingTest,a=e.onClose,l=e.language,s=e.canWrite,d=e.trackingContext,f=void 0===d?"default":d,h=(0,r.Z)(o.useState(t),2),v=h[0],m=h[1],w=(0,r.Z)(o.useState(null),2),x=w[0],C=w[1],k=(0,r.Z)(o.useState(null),2),S=k[0],E=k[1],R=(0,u.Z)(),I=(0,r.Z)((0,p.lQ)(),1)[0],G=(null===n||void 0===n?void 0:n.tests)||[];return(0,i.BX)(g.G,{css:[y.l0.colWithGap(16)],children:[(0,i.tZ)(ce,{language:l,unitTests:n,onResult:function(e){I({variables:{input:{replId:R,results:e},replId:R}})},trackingContext:f}),G.length>0?(0,i.tZ)(g.G,{css:[y.l0.colWithGap(8),y.l0.align.center],children:G.map((function(e){var n,t;return"ReplUnitTestLastRun"===(null===(n=e.lastRun)||void 0===n?void 0:n.__typename)&&(e.lastRun.status===F.$I.Passed?t="passed-test":e.lastRun.status===F.$I.Failed&&(t="failed-test")),(0,i.tZ)(g.G,{className:"test ".concat(t),css:{width:"100%"},children:(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center,y.l0.p(8),y.l0.borderRadius(8),{border:"1px solid var(--background-highest);"}],children:[(0,i.tZ)(Z.xv,{children:e.name}),s?(0,i.BX)(g.G,{css:[y.l0.rowWithGap(8)],children:[(0,i.tZ)($.h,{onClick:function(){C(e)},alt:"Edit",children:(0,i.tZ)(H.Z,{})}),(0,i.tZ)($.h,{onClick:function(){E(e.id)},alt:"Delete",children:(0,i.tZ)(z.Z,{})})]}):null]})},e.id)}))}):(0,i.BX)(g.G,{css:[y.l0.colWithGap(8),y.l0.align.center],children:[(0,i.tZ)(Z.xv,{multiline:!0,css:[y.l0.textAlign.center],children:"Looks like you don\u2019t have any tests yet!"}),s?(0,i.tZ)(b.zx,{text:"Add test",onClick:function(){return m(!0)},iconLeft:(0,i.tZ)(c.Z,{})}):null]}),(0,i.tZ)(se,{isOpen:v||Boolean(x)||t,test:x,language:l,onClose:function(){C(null),m(!1),a&&a()},trackingContext:f}),(0,i.tZ)(de,{testId:S,onClose:function(){return E(null)}}),(0,i.tZ)(T(),{id:"a2df1ed8108a6cad",children:".tests-wrapper.jsx-a2df1ed8108a6cad{-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-16)0;width:100%}.test.jsx-a2df1ed8108a6cad{padding:var(--space-8)var(--space-8);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.passed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-positive-default);background:var(--accent-positive-dimmer)}.failed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-negative-default);background:var(--accent-negative-dimmer)}"})]})},pe=t(26568),he=t(22847);var ve=function(e){var n=e.onClick,t=e.hasTests,r=t?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{};return(0,i.BX)("div",(0,f.Z)((0,d.Z)({},r),{className:"jsx-44786ca38dd3aa42 "+(r&&null!=r.className&&r.className||"back-button"),children:[(0,i.tZ)(pe.Z,{filled:!1,border:!1,size:"small",Icon:he.Z,onClick:n,disabled:t,children:"Switch test type"}),(0,i.tZ)(T(),{id:"44786ca38dd3aa42",children:".back-button.jsx-44786ca38dd3aa42{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}))},me=t(59029);var ge=function(e){var n,t,d,f,p=e.onBack,h=(0,u.Z)(),v=(0,r.Z)(o.useState(!1),2),m=v[0],b=v[1],w=(0,me.Z)(),x=w.language,C=w.isLoading,k=(0,a.CH)({variables:{replId:h}}),S=null===(n=k.data)||void 0===n?void 0:n.repl;if(k.loading||C)return(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.flex.row,y.l0.align.center,y.l0.justify.center,y.l0.p(16)],children:(0,i.tZ)(s.Z,{})});if(!S||"Repl"!==S.__typename)return(0,i.tZ)(g.G,{css:[y.l0.p(16)],children:(0,i.tZ)(Z.xv,{multiline:!0,css:{textAlign:"center"},children:"Unable to fetch tests, please try again."})});if(!x)return(0,i.tZ)(g.G,{css:[y.l0.p(16)],children:(0,i.tZ)(Z.xv,{multiline:!0,css:{textAlign:"center"},children:"Unit tests are currently only supported in Java, Python, and Node.js Repls."})});var T="default";(null===S||void 0===S?void 0:S.isProject)?T="project_repl":(null===S||void 0===S?void 0:S.isProjectFork)&&(T="submission_repl");var E=Boolean((null===(t=S.unitTests)||void 0===t?void 0:t.tests)&&S.unitTests.tests.length>0);return(null===S||void 0===S||null===(d=S.currentUserPermissions)||void 0===d?void 0:d.writeTests)?(0,i.BX)(g.G,{css:[y.l0.colWithGap(16),y.l0.align.center],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center,{width:"100%"}],children:[(0,i.tZ)(l.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,i.tZ)($.h,{alt:"Add test",size:32,onClick:function(){return b(!0)},children:(0,i.tZ)(c.Z,{})})]}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8),y.l0.maxWidth(256),{width:"80%"}],children:[(0,i.tZ)(M,{language:x,meta:(null===(f=S.unitTests)||void 0===f?void 0:f.meta)||null}),(0,i.tZ)(fe,{isAddingTest:m,unitTests:(null===S||void 0===S?void 0:S.unitTests)||null,onClose:function(){return b(!1)},language:x,canWrite:!0,trackingContext:T}),p?(0,i.tZ)(ve,{hasTests:E,onClick:p}):null]})]}):(0,i.BX)(g.G,{css:[y.l0.colWithGap(16)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Unit tests"}),(0,i.tZ)(g.G,{css:{width:"100%",overflowY:"auto"},children:(0,i.tZ)(fe,{unitTests:(null===S||void 0===S?void 0:S.unitTests)||null,language:x,isAddingTest:!1,canWrite:!1,trackingContext:T})})]})}},7338:function(e,n,t){t.d(n,{x:function(){return E},y:function(){return T}});var r=t(57135),i=t(9970),o=t(96583),a=t(88254),l=t(91355),c=t(66091),u=function(){function e(n){(0,c.Z)(this,e),this.code="",this.currentIndent=0,this.lib=n}var n=e.prototype;return n.indent=function(){this.currentIndent+=1},n.dedent=function(){if(0===this.currentIndent)throw new Error("indent at zero");this.currentIndent-=1},n.addIndents=function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "},n.push=function(e){var n=e.split("\n"),t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;this.addIndents(),this.code+=l,this.newLine()}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}},n.newLine=function(){this.code+="\n"},n.closeCurly=function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()},n.toString=function(){return this.code},e}(),s=t(1922),d={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat((0,s.Og)(d.testSuiteName())," {")},classConstructorName:function(){return(0,s.Og)(d.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(d.testIntroPreName()).concat(e).concat(d.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat((0,s.Og)(d.testSuiteName()),")"),"")},buildSuite:function(e){var n=e.tests,t=e.meta,r=new u(d);r.push(d.defaultImports()),t&&t.imports&&r.push(t.imports),r.newLine(),r.push(d.classIntro()),r.newLine(),r.indent(),t&&(t.initialization&&(r.push(t.initialization),r.newLine()),t.setup&&(r.push(d.setupIntro()),r.indent(),r.push(t.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),t.tearDown&&(r.push(d.tearDownIntro()),r.indent(),r.push(t.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.code&&(r.push(d.testIntro(s.name)),r.indent(),r.push(s.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(f){o=!0,a=f}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return v.apply(this,arguments)},buildAndRunTests:function(e){var n=e.container,t=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=d.buildSuite({tests:o,meta:a});return d.runSuite({container:n,fs:t,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var n=e.tag,t=e.raw;a.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",t),e.setExtra("language","java10"),a.Tb(n)}))},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},f="__UNIT_TEST_RESULT_START__",p="__UNIT_TEST_RESULT_END__",h="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat((0,s.Og)(d.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat((0,s.Og)(d.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(f,'");\n        System.out.println(out);\n        System.out.println("').concat(p,'");\n    }\n}');function v(){return(v=(0,r.Z)((function(e){var n,t,r,a,c,u,v,m,g,y,Z,b,w,x,C,k,S,T,E,R,I,G,D,_;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.container,t=e.fs,r=e.packager,a=e.logger,c=e.suiteCode,v=a.startLogSpinner("Setting up the environment"),[4,(0,s.WT)(t)];case 1:return o.sent(),v("Creating your test files 1/2"),[4,(0,s.e3)({fs:t,code:c,filename:"".concat(d.testSuiteName(),".java")})];case 2:return m=o.sent(),(g=m.error)?("Failed to create suite code file",d.captureSetupError({tag:"Failed to create suite code file",raw:g}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(v("Creating your test files 2/2"),[4,(0,s.e3)({fs:t,code:h,filename:"".concat(d.testRunnerName(),".java")})]);case 3:return y=o.sent(),(Z=y.error)?("Failed to create test runner file",d.captureSetupError({tag:"Failed to create test runner file",raw:Z}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(a.stopLogSpinner(),a.clearLine(),a.logMessage("Installing imported packages\r\n"),[4,r.addPackages([{name:"junit:junit",version:"4.12"},{name:"com.googlecode.json-simple:json-simple",version:"1.1.1"},{name:"org.hamcrest:hamcrest-core",version:"1.3"}])]);case 4:return o.sent(),[4,r.installPackages()];case 5:return o.sent()?(a.clearLogs(),v=a.startLogSpinner("Compiling your files"),[4,n.exec("find",".","-type","f","-name","*.java","-print0")]):[2,{error:"Failed to install packages\r\n"}];case 6:if(b=o.sent(),w=b.output,x=b.error)return C="Failed to fetch working directory java files",d.captureSetupError({tag:C,raw:x}),[2,{error:"".concat(C,"\r\n\r\n")+(null===w||void 0===w?void 0:w.replace(/\n/g,"\n\r"))+"\r\n\r\n"+x}];if("string"!==typeof w)throw new Error("expected working directory files to be a string");return k=w.slice(0,-1).split("\0"),S=".:./target/dependency/*",[4,(u=n).exec.apply(u,["javac","-classpath",S,"-d","."].concat((0,i.Z)(k)))];case 7:return T=o.sent(),E=T.output,(R=T.error)?(I="Failed to compile test runner file",d.captureSetupError({tag:I,raw:R}),[2,{error:"".concat(I,"\r\n\r\n")+(null===E||void 0===E?void 0:E.replace(/\n/g,"\n\r"))+"\r\n\r\n"+R}]):(v("Running your tests"),[4,n.exec("java","-classpath",S,(0,s.Og)(d.testRunnerName()))]);case 8:if(G=o.sent(),D=G.output,_=G.error)return(0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===D||void 0===D?void 0:D.replace(/\n/g,"\n\r"))+"\r\n\r\n"+_}];if("string"!==typeof D)throw new Error("expected runOutput to be a string");return[2,{result:JSON.parse(D.slice(D.indexOf(f)+f.length,D.lastIndexOf(p))),error:null}]}}))}))).apply(this,arguments)}var m=d,g=function(e){return!!e&&e.trim().length>0&&e.split("\n").some((function(e){return!(e.trim().startsWith("#")||""===e.trim())}))},y={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return y.testIntroPreName()+e+y.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var n=e.tests,t=e.meta,r=new u(y);r.push(y.defaultImports()),t&&t.imports&&r.push(t.imports),r.newLine(),r.push(y.classIntro()),r.newLine(),r.indent(),t&&(t.initialization&&(r.push(t.initialization),r.newLine()),g(t.setup)&&(r.push(y.setupIntro()),r.indent(),r.push(t.setup),r.dedent(),r.newLine()),g(t.tearDown)&&(r.push(y.tearDownIntro()),r.indent(),r.push(t.tearDown),r.dedent(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r.push(y.testIntro(s.name)),r.indent(),r.push(s.code||"pass"),r.dedent(),r.newLine()}}catch(d){o=!0,a=d}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.toString()},runSuite:function(e){return x.apply(this,arguments)},buildAndRunTests:function(e){var n=e.container,t=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=y.buildSuite({tests:o,meta:a});return y.runSuite({container:n,fs:t,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw new Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var n=e.tag,t=e.raw;a.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",t),e.setExtra("language","python3"),a.Tb(n)}))},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},Z="__UNIT_TEST_RESULT_START__",b="__UNIT_TEST_RESULT_END__",w="import unittest\nimport ".concat((0,s.Og)(y.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat((0,s.Og)(y.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(Z,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(b,"');");function x(){return(x=(0,r.Z)((function(e){var n,t,r,i,a,c,u,d,f,p,h,v,m;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.container,t=e.fs,r=e.packager,i=e.logger,a=e.suiteCode,c=i.startLogSpinner("Setting up the environment"),[4,(0,s.WT)(t)];case 1:return o.sent(),c("Creating your test files 1/2"),[4,(0,s.e3)({fs:t,code:a,filename:"".concat(y.testSuiteName(),".py")})];case 2:return u=o.sent(),(d=u.error)?("Failed to create suite code file",y.captureSetupError({tag:"Failed to create suite code file",raw:d}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(c("Creating your test files 2/2"),[4,(0,s.e3)({fs:t,code:w,filename:"".concat(y.testRunnerName(),".py")})]);case 3:return f=o.sent(),(p=f.error)?("Failed to create test runner file",y.captureSetupError({tag:"Failed to create test runner file",raw:p}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages()]);case 4:return o.sent()?(i.clearLogs(),i.startLogSpinner("Running your tests"),[4,n.exec("python","-B",(0,s.Og)("".concat(y.testRunnerName(),".py")))]):[2,{error:"Failed to install packages\r\n"}];case 5:if(h=o.sent(),v=h.output,m=h.error)return(0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===v||void 0===v?void 0:v.replace(/\n/g,"\n\r"))+"\r\n"+m}];if("string"!==typeof v)throw new Error("expected runoutput to be a string");return[2,{result:JSON.parse(v.slice(v.indexOf(Z)+Z.length,v.lastIndexOf(b))),error:null}]}}))}))).apply(this,arguments)}var C={testRunnerName:function(){throw new Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return C.testIntroPreName()+e+C.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var n=e.tests,t=e.meta,r=new u(C);r.push(C.defaultImports()),t&&t.imports&&r.push(t.imports),r.newLine(),r.push(C.classIntro()),r.newLine(),r.indent(),t&&(t.initialization&&(r.push(t.initialization),r.newLine()),t.setup&&(r.push(C.setupIntro()),r.indent(),r.push(t.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),t.tearDown&&(r.push(C.tearDownIntro()),r.indent(),r.push(t.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.code&&(r.push(C.testIntro(s.name)),r.indent(),r.push(s.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(d){o=!0,a=d}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return k.apply(this,arguments)},buildAndRunTests:function(e){var n=e.container,t=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=C.buildSuite({tests:o,meta:a});return C.runSuite({container:n,fs:t,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var n=e.tag,t=e.raw;a.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",t),e.setExtra("language","nodejs"),a.Tb(n)}))},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(index.add(1, 2)).toBe(3);"}};function k(){return(k=(0,r.Z)((function(e){var n,t,r,i,a,c,u,d,f,p,h,v,m,g,y,Z,b,w,x,k,S,T;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.container,t=e.fs,r=e.packager,i=e.logger,a=e.suiteCode,c=i.startLogSpinner("Setting up the environment"),[4,(0,s.WT)(t)];case 1:return o.sent(),c("Creating your test files 1/2"),[4,(0,s.e3)({fs:t,code:a,filename:"".concat(C.testSuiteName(),".js")})];case 2:return u=o.sent(),(d=u.error)?("Failed to create suite code file",C.captureSetupError({tag:"Failed to create suite code file",raw:d}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(c("Creating your test files 2/2"),f=69,p="jest.config.json",h={testRegex:(0,s.Og)("".concat(C.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:f},[4,(0,s.e3)({fs:t,code:JSON.stringify(h),filename:p})]);case 3:return v=o.sent(),(m=v.error)?("Failed to create config file",C.captureSetupError({tag:"Failed to create config file",raw:m}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages()]);case 4:return o.sent()?(i.clearLogs(),c=i.startLogSpinner("Running your tests"),g=(0,s.Og)("output.json"),[4,n.exec("jest","--json","--outputFile",g,"--config",(0,s.Og)(p),"--forceExit","--passWithNoTests")]):[2,{error:"Failed to install packages\r\n"}];case 5:return y=o.sent(),Z=y.output,(b=y.error)&&!b.endsWith(f.toString())?((0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===Z||void 0===Z?void 0:Z.replace(/\n/g,"\n\r"))+"\r\n"+b}]):(c("Parsing your test results"),[4,t.readFile(g)]);case 6:return(w=o.sent()).error?("Error reading test results",C.captureSetupError({tag:"Error reading test results",raw:w.error}),[2,{error:"There was an error getting test results, if this happens please contact support."}]):(x=w.content.toString(),(k=JSON.parse(x)).success?[2,{error:null,result:{passed:!0,failures:[]}}]:(S=k.testResults[0],(T=S.assertionResults.filter((function(e){return"passed"!==e.status})).map((function(e){return{name:e.title,stack:e.failureMessages[0]}}))).length?[2,{error:null,result:{passed:!1,failures:T}}]:[2,{error:S.message.replace(/\n/g,"\r\n")}]))}}))}))).apply(this,arguments)}var S={java10:m,java10_beta:m,java:m,python3:y,python3_beta:y,python:y,nodejs:C,javascript:C,nodejs_beta:C};function T(e){return e in S}function E(e){if(!T(e))throw new Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(S)));return S[e]}},1922:function(e,n,t){t.d(n,{Og:function(){return s},WT:function(){return p},e3:function(){return d}});var r=t(57135),i=t(96583),o=t(88254),a=t(96324),l=t(6601),c=t(73758),u="_test_runner";function s(e){return u+e}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)((function(e){var n,t,r,o,a;return(0,i.__generator)(this,(function(i){return n=e.fs,t=e.code,r=e.filename,o=s(r),a=c.Z.from(t,"utf8"),[2,n.writeFile(o,a)]}))}))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)((function(e){var n,t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,e.readDir(a.Ql)];case 1:return(n=r.sent()).error?[2]:[4,Promise.all(n.children.map((function(n){return n.filename.startsWith(u)?n.type===l.Tv.File?e.deleteFile(n.filename):e.deleteDir(n.filename):Promise.resolve(null)})))];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o.$e((function(e){e.setTag("unitTestLib","true"),o.Tb(t)})),[3,4];case 4:return[2]}}))}))).apply(this,arguments)}},69383:function(e,n,t){t.d(n,{AF:function(){return w},Hd:function(){return C},IV:function(){return E},Rb:function(){return g},aA:function(){return m},kO:function(){return S},lQ:function(){return I},rU:function(){return Z}});var r=t(72006),i=t(43119),o=t(71440),a=t(59187);function l(){var e=(0,i.Z)(["\n  fragment UnitTestsReplUnitTestMeta on ReplUnitTestMeta {\n    id\n    imports\n    initialization\n    setup\n    tearDown\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment UnitTestsReplUnitTest on ReplUnitTest {\n    id\n    name\n    code\n    failureMessage\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation createUnitTestMeta($input: CreateReplUnitTestMetaInput!) {\n    createReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  mutation updateUnitTestMeta($input: UpdateReplUnitTestMetaInput!) {\n    updateReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation createUnitTest($input: CreateReplUnitTestInput!) {\n    createReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation updateUnitTest($input: UpdateReplUnitTestInput!) {\n    updateReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation deleteUnitTest($testId: Int!) {\n    deleteReplUnitTest(testId: $testId) {\n      ... on ReplUnitTest {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation updateReplUnitTestLastRun(\n    $input: UpdateReplUnitTestLastRunInput!\n    $replId: String!\n  ) {\n    updateReplUnitTestLastRun(input: $input) {\n      ... on UpdateReplUnitTestLastRunUpdatedTests {\n        __typename\n        updatedTests {\n          ... on ReplUnitTest {\n            id\n            __typename\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                __typename\n                status\n              }\n              ... on UserError {\n                __typename\n                message\n              }\n            }\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}var v={},m=(0,o.Ps)(l()),g=(0,o.Ps)(c()),y=(0,o.Ps)(u(),m);function Z(e){var n=(0,r.Z)({},v,e);return a.D(y,n)}var b=(0,o.Ps)(s(),m);function w(e){var n=(0,r.Z)({},v,e);return a.D(b,n)}var x=(0,o.Ps)(d(),g);function C(e){var n=(0,r.Z)({},v,e);return a.D(x,n)}var k=(0,o.Ps)(f(),g);function S(e){var n=(0,r.Z)({},v,e);return a.D(k,n)}var T=(0,o.Ps)(p());function E(e){var n=(0,r.Z)({},v,e);return a.D(T,n)}var R=(0,o.Ps)(h());function I(e){var n=(0,r.Z)({},v,e);return a.D(R,n)}},59029:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(39771),i=t(48783),o=t(8189),a=t(50959),l=t(7338);function c(){var e=(0,r.Z)(),n=(0,o.Z)().dotReplit,t=null===e||void 0===e?void 0:e.language,c=(0,a.useState)(null),u=c[0],s=c[1],d=(0,a.useState)(!0),f=d[0],p=d[1];return(0,a.useEffect)((function(){if(t){if((0,l.y)(t))return s(t),void p(!1);var e=!1,r=n.watch((function(n){var t,r;if(e||(e=!0,p(!1)),n.error)n.error===i.Yt.NotFound&&s(null);else{var o=null===(t=n.config.unitTest)||void 0===t||null===(r=t.language)||void 0===r?void 0:r.toLowerCase();o&&(0,l.y)(o)?s(o):s(null)}}));return function(){r()}}}),[t,n]),{language:u,isLoading:f}}},89199:function(e,n,t){t.d(n,{Z:function(){return T}});var r=t(72006),i=t(4405),o=t(2272),a=t(4541),l=t(12018),c=t(33229),u=t(7247),s=t(30265),d=t(91355),f=t(98260),p=t(35021),h=t(55544),v=t(25776),m=t(22167),g=t(54233),y=t(20235),Z=t(47321),b=t(47200),w=t(62830),x=t(47236),C=t(94370),k=t(50959),S="resources_upgrade_modal";function T(e){var n=e.isOwnRepl,t=e.userSubscriptionType,r=(0,C.useRouter)(),i=(0,l.P5)({controlName:"flag-slippery-banana"}),c=(0,o.Z)(k.useState(!0),2),u=c[0],d=c[1],f=(0,g.Z)("announcement","resources-upgrade-modal"),p=f.shouldDisplay,h=f.register,v=f.dismiss;return k.useEffect((function(){!(0,s.Vg)(r)&&n&&t!==w.HP.HackerPro&&i&&h()}),[i,n,h,r,t]),k.useEffect((function(){var e=setTimeout((function(){d(!1)}),6e4);return function(){return clearTimeout(e)}}),[]),i?u||(0,s.Vg)(r)?null:n?t===w.HP.HackerPro?null:p?(0,a.tZ)(R,{dismissTour:v}):null:null:null}function E(e){var n=e.currentAtom,t=e.totalAtom,r=(0,o.Z)(k.useState(0),2),i=r[0],a=r[1],l=(0,u.Z)((function(){return(0,x.cn)((function(e){return e(n)/e(t)}))}),[n,t]),c=(0,x.Dv)(l),s=(0,x.Dv)(n),d=k.useRef(0);return k.useEffect((function(){d.current=c}),[c]),{cached:i,setCached:a,utilizationRatio:c,utilization:s,utilizationRef:d}}function R(e){var n=e.dismissTour,t=(0,o.Z)(k.useState(null),2),l=t[0],u=t[1],s=(0,b.Z)(),g=s.dataAtom,w=g.cpu,C=g.ram,T=g.disk,R=k.useRef(!1),I=(0,c.Z)(),G=E({currentAtom:w.currentAtom,totalAtom:w.totalAtom}),D=G.cached,_=G.setCached,P=G.utilizationRatio,B=G.utilization,A=G.utilizationRef,U=E({currentAtom:C.currentRssAtom,totalAtom:C.totalAtom}),N=U.cached,L=U.setCached,X=U.utilizationRatio,M=U.utilization,O=U.utilizationRef,F=k.useCallback((function(e){u("cta"),_(B),L(M),(0,d.j)(d.U3.MODAL_VIEWED,{modalName:S,cause:e,unsolicited:!0})}),[B,M,_,L]);k.useEffect((function(){var e;if(!l&&!R.current)return P>.9?(R.current=!0,e=setTimeout((function(){R.current=!1,A.current>.9&&F("cpu")}),1e4)):X>.9&&(R.current=!0,e=setTimeout((function(){R.current=!1,O.current>.9&&F("ram")}),1e4)),function(){I.current||clearTimeout(e)}}),[P,R,l,I,M,F,A,X,O]);var W=(0,i.Z)((0,r.Z)({},s),{dataAtom:{cpu:(0,i.Z)((0,r.Z)({},w),{currentAtom:(0,x.cn)(D)}),ram:(0,i.Z)((0,r.Z)({},C),{currentRssAtom:(0,x.cn)(N)}),disk:T}});return(0,a.tZ)(p.u,{isOpen:null!==l,preventOutsideModalClickClose:!0,onRequestClose:function(){u(null),n()},maxWidth:"plans"===l?y.W:360,children:"plans"===l?(0,a.tZ)(y.Z,{context:S,uponPurchaseGoTo:"profile",initialTab:"plans"}):(0,a.BX)(v.G,{css:[m.l0.p(8),m.l0.colWithGap(24)],children:[(0,a.BX)(v.G,{css:[m.l0.colWithGap(16)],children:[(0,a.tZ)(h.xv,{variant:"subheadDefault",children:"Your Repl ran out of resources!"}),(0,a.tZ)(h.xv,{multiline:!0,children:"Upgrade to a plan to increase your Repl's resources so your programs can use more power."})]}),(0,a.tZ)(v.G,{css:[m.l0.colWithGap(12)],children:(0,a.tZ)(Z.Z,{mini:!0,inactive:!1,resources:W})}),(0,a.tZ)(f.zx,{big:!0,text:"Upgrade to get more resources",colorway:"primary",onClick:function(){(0,d.j)(d.U3.UPGRADE_SELECTED,{source:S}),u("plans")}})]})})}},74486:function(e,n,t){t.d(n,{I5:function(){return h},sY:function(){return f}});var r=t(72006),i=t(43119),o=t(71440),a=t(67216);function l(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentWebviewDeployBanner on Repl {\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    config {\n      isVnc\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentWebviewRepl on Repl {\n    id\n    prodUrl: hostedUrl(dotty: true)\n    devUrl: hostedUrl(dev: true)\n    currentUserPermissions {\n      linkDomain\n    }\n    lang {\n      id\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query ReplEnvironmentWebview($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentWebviewRepl\n        ...ReplEnvironmentWebviewDeployBanner\n      }\n    }\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}var s={},d=(0,o.Ps)(l()),f=(0,o.Ps)(c()),p=(0,o.Ps)(u(),f,d);function h(e){var n=(0,r.Z)({},s,e);return a.a(p,n)}},83622:function(e,n,t){t.d(n,{Z:function(){return J}});var r=t(72006),i=t(4405),o=t(4541),a=t(50959),l=t(88254),c=t(74486),u=t(30241),s=t(95980),d=t.n(s),f=t(79197),p=t(72851),h=t(26430),v=t(91355);function m(){return a.useEffect((function(){(0,v.j)(v.U3.WS_REPLCO_UNREACHABLE)}),[]),(0,o.BX)("div",{className:"jsx-88c49dc4f1cb807b unreachable",children:[(0,o.BX)(h.gC,{align:"center",spacing:4,children:[(0,o.BX)(h.gC,{align:"center",children:[(0,o.tZ)(p.Z,{level:1,children:"\ud83d\ude48"}),(0,o.tZ)(p.Z,{level:4,children:"This Repl link isn\u2019t broken!"}),(0,o.tZ)(p.Z,{level:4,foreground:2,children:"It\u2019s just blocked."})]}),(0,o.BX)(h.gC,{spacing:2,className:"why",children:[(0,o.tZ)(f.Z,{foreground:2,children:"Why this might be happening:"}),(0,o.tZ)(f.Z,{foreground:2,children:(0,o.BX)("ul",{className:"jsx-88c49dc4f1cb807b",children:[(0,o.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,o.tZ)(f.Z,{fontWeight:"medium",foreground:1,children:"blocked by a firewall,"})," ","so contact your IT administrator"]}),(0,o.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,o.tZ)(f.Z,{fontWeight:"medium",foreground:1,children:"blocked by your ISP,"})," ","so try getting in touch with them"]})]})})]}),(0,o.BX)(f.Z,{foreground:2,align:"center",children:["If you have any other questions, please check out"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/teams-edu/it-administrators-toolkit",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"our IT docs"})," ","or"," ",(0,o.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"contact support"}),"."]})]}),(0,o.tZ)(d(),{id:"88c49dc4f1cb807b",children:".unreachable.jsx-88c49dc4f1cb807b{padding:var(--space-32)}.unreachable.jsx-88c49dc4f1cb807b ul.jsx-88c49dc4f1cb807b{list-style-position:inside}.unreachable.jsx-88c49dc4f1cb807b li.jsx-88c49dc4f1cb807b{padding-bottom:var(--space-16)}"})]})}var g=a.createContext(!1),y=t(25776),Z=t(22167),b=t(49773),w=t(2272),x=t(47923),C=t(98414),k=t(25969),S=t(67516),T=t(19666),E=t(3668),R=(0,a.forwardRef)((function(e,n){return(0,o.tZ)(E.h,(0,r.Z)({ref:n,className:e.className,css:[{color:"var(--foreground-dimmest)",":hover":{color:"var(--foreground-default)"}},e.css]},e))})),I=t(93806),G=t(77542),D=new Set(["draw.js"]);function _(e,n){var t=(0,b.f6)(),r=(0,G.R3)(),i=a.useCallback((function(e,t){var r,i;null===(r=n.current)||void 0===r||null===(i=r.contentWindow)||void 0===i||i.postMessage({action:"FILE_UPDATE",file:e,content:t},"*")}),[n]);a.useEffect((function(){if(n.current&&t){var r=!0,o=!1,a=void 0;try{for(var l,c=function(){var t=l.value;n.current.onload=function(){e.readFile(t).then((function(e){e.error||i(t,e.content.toString())}))}},u=D[Symbol.iterator]();!(r=(l=u.next()).done);r=!0)c()}catch(s){o=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}}}),[e,i,n,t]),a.useEffect((function(){if(t&&r&&D.has(r))return e.watchTextFile(r,{onReady:function(e){var n=e.initialContent;return i(r,n)},onChange:function(e){var n=e.latestContent;return i(r,n)}})}),[e,r,i,t])}var P=function(e){var n=e.iframe,t=(0,u.Z)();return a.useEffect((function(){var e="https://".concat(t,".id.repl.co"),n=function(n){if(n.origin===e&&"DOWNLOAD"===n.data.action){var t=document.createElement("a");document.body.appendChild(t),t.setAttribute("style","display: none"),t.href=n.data.url,t.download=n.data.filename,t.click(),document.body.removeChild(t)}};return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}}),[t]),(0,o.BX)(o.HY,{children:[(0,o.tZ)(R,{alt:"Save image",onClick:function(){var e,t;null===(e=n.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.postMessage({action:"REQUEST_SCREENSHOT"},"*")},children:(0,o.tZ)(T.Z,{})}),(0,o.tZ)(R,{alt:"Toggle Record",onClick:function(){var e,t;null===(e=n.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.postMessage({action:"REQUEST_TOGGLE_RECORD"},"*")},children:(0,o.tZ)(I.Z,{})})]})},B=t(7580),A=t(90189),U=t(42735),N=(0,t(11122).F4)("from{transform:rotate(0deg);}to{transform:rotate(359deg);}");function L(e){var n=e.refreshing,t=e.devToolsBadge,r=e.url,i=e.displayUrl,l=e.onToggleDevtools,c=a.useRef(null),u=(0,w.Z)(a.useState(!1),2),s=u[0],d=u[1];return(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(8),Z.l0.p(8),Z.l0.align.center],children:[(0,o.tZ)(R,{alt:n?"Refreshing...":"Refresh",onClick:e.onRefresh,css:n&&{animation:"".concat(N," infinite 0.5s")},children:(0,o.tZ)(C.Z,{})}),(0,o.tZ)(U.II,{dataCy:"ws-webview-url-bar-input",css:[Z.l0.px(4),Z.l0.py(2),Z.l0.flex.growAndShrink(1),Z.l0.fontSize(12)],value:null!==i&&void 0!==i?i:r,type:"text",onFocus:function(n){e.trackUrlSelect(),n.currentTarget.select()},readOnly:!0}),(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(4)],children:[e.canEditDomain?(0,o.BX)(A.Z,{showArrow:!0,maxWidth:320,isOpen:s,onClickOutside:function(){return d(!1)},growToMaxWidth:!0,children:[(0,o.tZ)(R,{alt:"Custom domain",onClick:function(){return d(!s)},children:(0,o.tZ)(x.Z,{})}),(0,o.tZ)(S.Z,{onLink:function(){return d(!1)},onUnlink:function(){return d(!1)},replId:e.replId})]}):null,l?(0,o.tZ)(R,{alt:"Toggle developer tools",ref:c,onClick:l,css:{position:"relative"},suffix:!!t&&(0,o.tZ)("span",{css:{position:"absolute",color:Z.TV.accentNegativeStrongest,borderRadius:Z.TV.borderRadiusRound,padding:"".concat(Z.TV.space2," ").concat(Z.TV.space4),backgroundColor:Z.TV.accentNegativeDimmer,top:-5,right:-3,fontSize:9},children:t}),children:(0,o.tZ)(B.Z,{})}):null,(0,o.tZ)("a",{href:r,css:{color:"inherit"},target:"_blank",children:(0,o.tZ)(R,{alt:"Open in a new tab",children:(0,o.tZ)(k.Z,{})})}),e.isKaboomDraw&&e.iframe?(0,o.tZ)(P,{iframe:e.iframe}):null]})]})}var X=t(76406),M=t(26085),O=t(55544);function F(){return(0,o.BX)(y.G,{css:[Z.l0.align.center,Z.l0.p(64)],children:[(0,o.BX)(y.G,{css:[Z.l0.align.center],children:[(0,o.tZ)(p.Z,{level:1,children:"\ud83d\ude48"}),(0,o.tZ)(O.xv,{css:[Z.l0.textAlign.center,Z.l0.pb(8)],multiline:!0,variant:"headerDefault",children:"We've detected a crash loop"}),(0,o.tZ)(O.xv,{css:[Z.l0.textAlign.center],multiline:!0,variant:"subheadDefault",color:"dimmer",children:"Preview is disabled until you click the run button again."})]}),(0,o.tZ)(y.G,{css:[Z.l0.p(16)],children:(0,o.tZ)(O.xv,{multiline:!0,css:[Z.l0.color.foregroundDimmer,Z.l0.textAlign.center,Z.l0.pb(16)],children:"There may be errors in the code that are causing your application to repeatedly crash."})})]})}var W=t(12018),H=t(54233),z=t(39850),V=t(13469),j=t(98260),q=t(3740);function $(e){var n=e.onCompleted,t=e.startTimeInSeconds,r=(0,w.Z)(a.useState(t),2),i=r[0],l=r[1];a.useEffect((function(){var e=setInterval((function(){return l((function(n){return 0===n?(clearInterval(e),0):n-1}))}),1e3);return function(){return clearInterval(e)}}),[]),a.useEffect((function(){i>0||n()}),[i]);var c=24*2.6;return(0,o.tZ)(y.G,{css:{width:24,height:24},children:(0,o.BX)(y.G,{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.center,{width:"100%",height:"100%",strokeDasharray:c,strokeDashoffset:c,strokeLinecap:"butt",strokeWidth:2,stroke:V.TV.accentPrimaryDefault,fill:"none"}],children:[(0,o.tZ)("svg",{width:"100%",height:"100%",className:d().dynamic([["23bd846669111030",[c]]]),children:(0,o.tZ)("circle",{r:10,cx:12,cy:12,style:{animationName:"countdown-animation",animationDuration:"".concat(t,"s"),animationDelay:"0s",animationTimingFunction:"linear"},className:d().dynamic([["23bd846669111030",[c]]])})}),(0,o.tZ)(d(),{id:"23bd846669111030",dynamic:[c],children:"@-webkit-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:".concat(c,"px}}@-moz-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(c,"px}}@-o-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(c,"px}}@keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(c,"px}}")}),(0,o.tZ)(O.xv,{css:[Z.l0.position.absolute],variant:"small",children:i})]})})}function Y(e){var n=e.onCompleted,t=[Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.justify.spaceBetween,Z.l0.p(6),Z.l0.pl(8),Z.l0.flex.growAndShrink(1),{borderWidth:1,borderStyle:"solid",background:V.TV.accentPrimaryDimmest,borderColor:V.TV.accentPrimaryDimmer,color:V.TV.accentPrimaryStrongest}];return(0,o.BX)(y.G,{css:t,children:[(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,o.tZ)(O.xv,{variant:"small",multiline:!0,children:"When you're ready, you can deploy from the"}),(0,o.tZ)(j.zx,{iconLeft:(0,o.tZ)(q.Z,{}),text:"Release",disabled:!0,small:!0}),(0,o.tZ)(O.xv,{variant:"small",multiline:!0,children:"menu!"})]}),(0,o.tZ)($,{startTimeInSeconds:3,onCompleted:n})]})}function K(e){var n,t=e.repl,r=e.onClick,i=(0,w.Z)(a.useState(!1),2),l=i[0],c=i[1],u=(0,H.Z)("workspace","workspace-deployments-webview-banner"),s=u.shouldDisplay,d=u.register,f=u.dismiss;a.useEffect((function(){d()}),[d]);var p=t.hostingDeploymentPermissions.canDeploy&&"nix"===t.lang.id&&!t.config.isVnc,h="HostingDeployment"===(null===(n=t.hostingDeployment)||void 0===n?void 0:n.__typename)&&t.hostingDeployment.currentBuild;return p&&!h&&s?(0,o.tZ)(y.G,{children:l?(0,o.tZ)(Y,{onCompleted:function(){f()}}):(0,o.tZ)(z.U,{onClick:function(){(0,v.j)(v.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_webview_deploy_banner"}),f(),r()},onDismiss:function(){c(!0)},rounded:!1})}):null}var Q=function(e,n){var t=e.fs,s=e.session,d=e.trackUrlSelect,f=e.openPane,p=e.isVisible,h=e.className,w=e.containerRef,x=(0,u.Z)(),C=(0,c.I5)({variables:{id:x}}).data,k="Repl"===(null===C||void 0===C?void 0:C.repl.__typename)?C.repl:null,S=(0,a.useContext)(g),T=(0,X.S)().isCircuitBroken,E=(0,a.useRef)(null),R=(0,a.useState)(!1),I=R[0],G=R[1],D=(0,a.useState)(!1),P=D[0],B=D[1],A=(0,a.useState)(0),U=A[0],N=A[1],O=(0,b.f6)();_(t,E);var H="html"===(null===k||void 0===k?void 0:k.lang.id)||"html_beta"===(null===k||void 0===k?void 0:k.lang.id),z=(0,W.P5)({controlName:"flag-webview-show-protocol"}),V=null;V=k?S?(0,o.tZ)(m,{}):T?(0,o.tZ)(F,{}):(0,o.tZ)("iframe",(0,r.Z)({title:"webview","data-cy":"ws-webview",ref:E,src:k.devUrl,onLoad:function(){return G(!0)},css:[Z.l0.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:Z.TV.white}]},M.Z)):null,(0,a.useEffect)((function(){var e=function(e){var n;if((new URL(e.origin).hostname.endsWith(".id.repl.co")||new URL(e.origin).hostname.endsWith(".id.firewalledreplit.co"))&&"object"===typeof e.data&&(null===(n=e.data)||void 0===n?void 0:n.type))switch(e.data.type){case"event":var t=e.data,o=t.event,a=t.payload;return void("error"===o?l.Tb(a):(0,v.j)(o,(0,i.Z)((0,r.Z)({},a),{replId:x,isHTML:H})));case"show-badge":return void N(e.data.count);case"ready":var c,u;if(e.data.wasShown)null===(c=E.current)||void 0===c||null===(u=c.contentWindow)||void 0===u||u.postMessage({type:"toggleDevtools",source:"automatic"},"*");return}};if(E.current)return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[x,H,E.current,s]);var j=function(){N(0),B(!0),t.flush().then((function(){E.current&&(E.current.src+="")})).finally((function(){B(!1)}))};if((0,a.useImperativeHandle)(n,(function(){return{refresh:j}})),!k)return null;var q=z?k.prodUrl:k.prodUrl.replace(/^(https?:)?\/\//,"");return(0,o.BX)(y.G,{className:h,css:[Z.l0.backgroundColor.backgroundDefault,Z.l0.height("100%"),Z.l0.borderRadius(4),{overflow:"hidden"}],innerRef:w,children:[(0,o.tZ)(L,{canEditDomain:k.currentUserPermissions.linkDomain,displayUrl:q,url:k.prodUrl,trackUrlSelect:function(){d&&d(k.devUrl)},replId:x,refreshing:P,onRefresh:j,isKaboomDraw:O,iframe:E,isVisible:p,devToolsBadge:U,onToggleDevtools:function(){var e,n;N(0),null===(e=E.current)||void 0===e||null===(n=e.contentWindow)||void 0===n||n.postMessage({type:"toggleDevtools",source:"manual"},"*")}}),I?(0,o.tZ)(K,{repl:k,onClick:function(){return f({type:"deployments"})}}):null,V]})},J=(0,a.forwardRef)(Q)},74823:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(50959);function i(e){var n=e.container,t=e.runner,i=e.refreshWebView;(0,r.useEffect)((function(){var e,r=[];return"shellrunner"===t.mode&&r.push(t.onOutput((function(n){n&&n.includes("exit status 1")&&(e=Date.now())}))),r.push(n.onPortOpened((function(n){if(!n.isVnc){var t=Date.now();void 0!==e&&t-e<1e3||i()}}))),function(){return r.forEach((function(e){return e()}))}}),[n,i,t])}},12800:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(50959),i=t(95499);function o(e){var n=e.runner,t=e.refreshWebView;(0,r.useEffect)((function(){if("html"===n.mode)return n.onStateChanged((function(e){e===i.A.RUNNING&&t()}))}),[n,t])}},76406:function(e,n,t){t.d(n,{S:function(){return d},e:function(){return s}});var r=t(2272),i=t(95499),o=t(8189),a=t(47843),l=t(50959),c=t(47236),u=(0,c.cn)(!1),s=function(){return(0,c.KO)(u)};function d(){var e=(0,o.Z)().runner,n=(0,r.Z)(s(),2),t=n[0],c=n[1];return l.useEffect((function(){if("shellrunner"===e.mode){var n,t=[],r=Date.now(),o=Array(6),l=0;return t.push(e.onLocalRun((function(){r=Date.now(),c(!1)}))),t.push(e.onStateChanged((function(e){if(n===i.A.RUNNING&&e===i.A.IDLE){var t=Date.now();o[l%6]=t;var u=o.at((l-5)%6);void 0!==u&&t-u<6e4&&null!=r&&r<u&&(c(!0),a.kg.info("webview circuit broken",{lastRunnerStops:JSON.stringify(o),runnerStopCount:l,lastLocalRunTimestamp:r})),l++,n=e}else n=e}))),function(){c(!1),t.forEach((function(e){return e()}))}}}),[e,c]),{isCircuitBroken:t}}},12736:function(e,n,t){var r=t(94370),i=t.n(r);n.Z=function(){return Boolean(i().query.embed||i().query.lite)}},58727:function(e,n,t){t.d(n,{c:function(){return y},S:function(){return Z}});var r=t(2272),i=t(50959),o=t(8189),a=t(30241),l=t(72006),c=t(43119),u=t(71440),s=t(67216),d=t(59187);function f(){var e=(0,c.Z)(["\n  query ReplConfigIsExtension($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function p(){var e=(0,c.Z)(["\n  mutation UpdateReplConfigIsExtension(\n    $replId: String!\n    $isExtension: Boolean!\n  ) {\n    updateRepl(input: { id: $replId, isExtension: $isExtension }) {\n      repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return p=function(){return e},e}var h={},v=(0,u.Ps)(f());var m=(0,u.Ps)(p());var g=t(99920);function y(){var e,n=i.useContext(g.Z),t=(0,r.Z)(i.useState(null!==(e=null===n||void 0===n?void 0:n.replConfigIsExtension)&&void 0!==e&&e),2),a=t[0],l=t[1],c=(0,o.Z)().dotReplit;return i.useEffect((function(){return c.watch((function(e){var n,t,r,i=null!==(r=null===(n=e.config)||void 0===n||null===(t=n.extension)||void 0===t?void 0:t.isExtension)&&void 0!==r&&r;l(i)}))}),[c]),a}function Z(){var e=(0,a.Z)(),n=function(e){var n=(0,l.Z)({},h,e);return s.a(v,n)}({variables:{replId:e}}),t=n.data,c=n.loading,u=n.error,f=(0,r.Z)(function(e){var n=(0,l.Z)({},h,e);return d.D(m,n)}(),1)[0],p=function(){var e,n;return!c&&!u&&(!(!(null===t||void 0===t?void 0:t.repl)||"Repl"!==t.repl.__typename)&&(null!==(n=null===(e=t.repl.config)||void 0===e?void 0:e.isExtension)&&void 0!==n&&n))}(),g=(0,r.Z)(i.useState(!1),2),y=g[0],Z=g[1],b=(0,o.Z)().dotReplit;i.useEffect((function(){return b.watch((function(e){var n,t,r;Z(null!==(r=null===(n=e.config)||void 0===n||null===(t=n.extension)||void 0===t?void 0:t.isExtension)&&void 0!==r&&r)}))}),[b]),i.useEffect((function(){c||u||y!==p&&f({variables:{replId:e,isExtension:y},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{id:e,__typename:"Repl",config:{__typename:"ReplConfig",isExtension:y}}}}})}),[c,u,e,p,y,f])}},83729:function(e,n,t){t.d(n,{AR:function(){return C},LF:function(){return x},R9:function(){return b},Ve:function(){return k},aq:function(){return E},gp:function(){return w},jF:function(){return R},q_:function(){return T}});var r=t(72006),i=t(43119),o=t(71440),a=t(67216);function l(){var e=(0,i.Z)(["\n  fragment TopLevelExtensionUser on User {\n    __typename\n    id\n    username\n    displayName\n    image\n    url\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment TopLevelExtensionManifest on ExtensionManifest {\n    __typename\n    name\n    description\n    version\n    scopes {\n      name\n      reason\n    }\n    icon\n    tags\n    fileHandlers {\n      glob\n      handler\n      name\n      icon\n    }\n    tools {\n      handler\n      name\n      icon\n    }\n    background {\n      page\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment TopLevelExtension on Extension {\n    __typename\n    id\n    url\n    name\n    description\n    user {\n      id\n      ...TopLevelExtensionUser\n    }\n    manifest {\n      ... on ExtensionManifest {\n        ...TopLevelExtensionManifest\n      }\n      ... on ExtensionManifestError {\n        message\n      }\n    }\n    installCount\n    isBlessed\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment TopLevelExtensionInstallation on ExtensionInstallation {\n    __typename\n    id\n    repl {\n      id\n    }\n    user {\n      id\n    }\n    extension {\n      id\n      ...TopLevelExtension\n    }\n    installer {\n      id\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  query ExtensionSystemUserContext {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  query ExtensionInstallationById($installationId: String!) {\n    extensionInstallationById(id: $installationId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  query ExtensionInstallationsInRepl($replId: String!) {\n    extensionInstallations(replId: $replId) {\n      __typename\n      ... on ExtensionInstallationList {\n        installations {\n          ...TopLevelExtensionInstallation\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  query ExtensionReplHostedUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        hostedUrl\n      }\n    }\n  }\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation InstallExtension($extensionId: String!, $replId: String) {\n    installExtension(extensionId: $extensionId, replId: $replId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n        extension {\n          id\n          installation(replId: $replId) {\n            ...TopLevelExtensionInstallation\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation UninstallExtension($installationId: String!, $replId: String!) {\n    uninstallExtension(installationId: $installationId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n        extension {\n          id\n          installation(replId: $replId) {\n            ...TopLevelExtensionInstallation\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},y=(0,o.Ps)(l()),Z=(0,o.Ps)(c()),b=(0,o.Ps)(u(),y,Z),w=(0,o.Ps)(s(),b),x=(0,o.Ps)(d());var C=(0,o.Ps)(f(),w);var k=(0,o.Ps)(p(),w);var S=(0,o.Ps)(h());function T(e){var n=(0,r.Z)({},g,e);return a.a(S,n)}var E=(0,o.Ps)(v(),w);var R=(0,o.Ps)(m(),w)},24134:function(e,n,t){t.d(n,{EO:function(){return r.EO},L4:function(){return r.L4},LM:function(){return r.LM},Mu:function(){return i.Mu},WF:function(){return r.WF},WG:function(){return i.WG},jx:function(){return i.jx},ot:function(){return r.ot},r9:function(){return i.r9}});var r=t(27773),i=t(49487)},27773:function(e,n,t){t.d(n,{zm:function(){return H},I1:function(){return W},WF:function(){return L},Kf:function(){return F},ot:function(){return N},L4:function(){return O},EO:function(){return M},LM:function(){return X},bN:function(){return U}});var r=t(57135),i=t(81962),o=t(72006),a=t(4405),l=t(96583),c=t(30241),u=t(47843),s=t(91355),d=t(36730),f=t(50959),p=t(87187),h=t(41486),v=t(85234),m=t.n(v),g=t(44945),y=t(83729),Z=t(68216),b=t(98298);function w(e){return x.apply(this,arguments)}function x(){return(x=(0,r.Z)((function(e){var n,t,r,i,o,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return n=e.extensionId,t=e.replId,b.l?[4,b.l.mutate({mutation:y.aq,variables:{extensionId:n,replId:t}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return(i=l.sent()).errors&&i.errors.length>0?(o=i.errors.map((function(e){return e.message})).join(", "),[2,{error:new Error("Error when installing extension: "+o),result:null}]):(a=null===(r=i.data)||void 0===r?void 0:r.installExtension)?"UnauthorizedError"===(null===a||void 0===a?void 0:a.__typename)||"UserError"===(null===a||void 0===a?void 0:a.__typename)?[2,{error:new Error("Error when installing extension: "+a.message),result:null}]:a.extension?a.extension.url?[2,{result:a,error:null}]:[2,{error:new Error("Error when installing extension: Extension does not have a URL and cannot be installed"),result:null}]:[2,{error:new Error("Error when installing extension: expected extension to be set"),result:null}]:[2,{error:new Error("Error when installing extension: expected result"),result:null}]}}))}))).apply(this,arguments)}function C(e){return k.apply(this,arguments)}function k(){return(k=(0,r.Z)((function(e){var n,t,r,i,o,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return n=e.installationId,t=e.replId,b.l?[4,b.l.mutate({mutation:y.jF,variables:{installationId:n,replId:t}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return(i=l.sent()).errors&&i.errors.length>0?(o=i.errors.map((function(e){return e.message})).join(", "),[2,{error:new Error("Error when uninstalling extension: "+o),result:null}]):(a=null===(r=i.data)||void 0===r?void 0:r.uninstallExtension)?"NotFoundError"===(null===a||void 0===a?void 0:a.__typename)||"UserError"===(null===a||void 0===a?void 0:a.__typename)?[2,{error:new Error("Error when uninstalling extension: "+a.message),result:null}]:[2,{result:a,error:null}]:[2,{error:new Error("Error when uninstalling extension: expected result"),result:null}]}}))}))).apply(this,arguments)}function S(e){return T.apply(this,arguments)}function T(){return T=(0,r.Z)((function(e){var n,t,r,i=arguments;return(0,l.__generator)(this,(function(o){switch(o.label){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],b.l?[4,b.l.query({query:y.AR,variables:{installationId:e},fetchPolicy:n?"network-only":"cache-first"})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return t=o.sent(),"ExtensionInstallation"!==(r=t.data.extensionInstallationById).__typename?[2,{error:new Error("Expected to find extension installation"),result:null}]:r.extension?[2,{result:r,error:null}]:[2,{error:new Error("Expected installation.extension"),result:null}]}}))})),T.apply(this,arguments)}function E(e){return R.apply(this,arguments)}function R(){return(R=(0,r.Z)((function(e){var n,t;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return b.l?[4,b.l.query({query:y.Ve,variables:{replId:e}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return n=r.sent(),"ExtensionInstallationList"!==(t=n.data.extensionInstallations).__typename?[2,{error:new Error("Expected to find ExtensionInstallationList"),result:null}]:[2,{result:t.installations,error:null}]}}))}))).apply(this,arguments)}function I(e){return G.apply(this,arguments)}function G(){return(G=(0,r.Z)((function(e){var n,t,r,i,o;return(0,l.__generator)(this,(function(a){switch(a.label){case 0:n=(0,p.BP)(e),a.label=1;case 1:return a.trys.push([1,4,,5]),[4,fetch(n)];case 2:return[4,a.sent().text()];case 3:return t=a.sent(),r=Z.ku(t),(i=(0,p.U4)(r)).error?[2,{error:i.error,result:null}]:[2,{result:i.manifest,error:null}];case 4:return"SyntaxError"===(o=a.sent()).name?[2,{error:new Error("Error when fetching manifest: invalid JSON"),result:null}]:[2,{error:new Error("Error when fetching manifest: "+o.message),result:null}];case 5:return[2]}}))}))).apply(this,arguments)}function D(){return _.apply(this,arguments)}function _(){return(_=(0,r.Z)((function(){var e,n;return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return b.l?[4,b.l.query({query:y.LF,fetchPolicy:"cache-first"})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return e=t.sent(),(n=e.data.currentUser)&&"CurrentUser"===n.__typename?[2,{result:{enableInternalApi:n.isAdmin||n.isStaff},error:null}]:[2,{error:new Error("Expected to find CurrentUser"),result:null}]}}))}))).apply(this,arguments)}var P=t(49487),B=t(46518),A=t(66866);function U(){var e=(0,B.E4)(P.We);return f.useCallback(function(){var n=(0,r.Z)((function(n){return(0,l.__generator)(this,(function(t){return e({installationId:n}),[2]}))}));return function(e){return n.apply(this,arguments)}}(),[e])}function N(){var e=j(),n=e.throwSystemError,t=e.throwExtensionError,c=(0,B.E4)(P.nk),u=(0,B.Ld)();return f.useCallback(function(){var e=(0,r.Z)((function(e){var r,s,d,f,v,m,y,Z,b,w,x,C,k,T;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return r=e.installationId,s=e.forceRefetch,d=void 0===s||s,[4,D()];case 1:return!(f=l.sent())||f.error?(n({friendlyMessage:"Failed to load user context",error:f.error}),[2]):(v=f.result.enableInternalApi,(m=u.get(P.Lq).find((function(e){return e.installationId===r})))?[4,I(m.baseUrl)]:[3,3]);case 2:return(y=l.sent()).error?(c((0,a.Z)((0,o.Z)({},m),{manifest:(0,p.fF)(),enableExperimentalApi:!1,enableInternalApi:!1})),Z="Failed to load extension manifest",(0,i.Z)(y.error,g.jm)&&(Z=y.error.issues.map((function(e){return"".concat(e.path,": ").concat(e.message)})).join("\n")),t({extensionId:m.extensionId,installationId:m.installationId,extensionError:{error:y.error,friendlyMessage:Z}}),[2]):(b=(0,h.MU)(y.result,"experimental-api"),c((0,a.Z)((0,o.Z)({},m),{manifest:y.result,enableExperimentalApi:b,enableInternalApi:v})),[3,5]);case 3:return[4,S(r,d)];case 4:return(w=l.sent()).error?(n({friendlyMessage:"Something went wrong while downloading an extension",error:w.error}),[2]):(x=w.result)?(C=x.extension)?C.manifest?"ExtensionManifestError"===C.manifest.__typename?(t({extensionId:(0,A.T)(C.id),installationId:(0,A.A)(x.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest: ".concat(C.manifest.message),error:new Error(C.manifest.message)}}),[2]):C.manifest&&"ExtensionManifest"===C.manifest.__typename?(k=(0,p.tr)(C.manifest),T=(0,h.MU)(k,"experimental-api"),c({extensionId:(0,A.T)(C.id),installationId:(0,A.A)(x.id),manifest:k,baseUrl:(0,p.BY)(C.url),enableExperimentalApi:T,enableInternalApi:v}),[2,x]):(t({extensionId:(0,A.T)(C.id),installationId:(0,A.A)(x.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest",error:new Error("Expected extension manifest to be defined")}}),[2]):(t({extensionId:(0,A.T)(C.id),installationId:(0,A.A)(x.id),extensionError:{friendlyMessage:"Extension failed to install",error:new Error("Expected extension manifest to be defined")}}),[2]):(n({friendlyMessage:"Extension failed to install",error:new Error("Expected extension to be defined")}),[2]):(n({friendlyMessage:"Extension failed to install",error:new Error("Expected installation to be defined")}),[2]);case 5:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[c,t,n,u])}function L(){var e=N(),n=j().throwSystemError;return f.useCallback(function(){var t=(0,r.Z)((function(t){var r,i,o;return(0,l.__generator)(this,(function(a){switch(a.label){case 0:return r=t.extension,i=t.replId,(0,s.j)(s.U3.EXTENSION_INSTALLED,{name:r.name,extensionId:r.id}),[4,w({extensionId:r.id,replId:i})];case 1:return(o=a.sent()).error?(n({error:o.error,friendlyMessage:"Something went wrong while installing an extension"}),[2]):[4,e({installationId:(0,A.A)(o.result.id)})];case 2:return a.sent(),[2,o.result]}}))}));return function(e){return t.apply(this,arguments)}}(),[e,n])}function X(){var e=U(),n=(0,B.Ld)(),t=j().throwSystemError;return f.useCallback(function(){var i=(0,r.Z)((function(r){var i,o,a,c;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return i=r.installationId,o=r.replId,a=n.get(P._t),(c=a.find((function(e){return e.installationId===i})))?c.installationId&&c.extensionId?((0,s.j)(s.U3.EXTENSION_UNINSTALLED,{name:c.manifest.name,extensionId:c.extensionId}),[4,C({installationId:c.installationId,replId:o})]):(t({friendlyMessage:"Failed to uninstall extension",error:new Error("Expected installationId to be defined")}),[2]):(t({friendlyMessage:"Extension appears to be already uninstalled",error:new Error("Expected extension to be defined")}),[2]);case 1:return l.sent(),[4,e(c.installationId)];case 2:return l.sent(),[2]}}))}));return function(e){return i.apply(this,arguments)}}(),[e,n,t])}function M(){var e=U(),n=N();return f.useCallback(function(){var t=(0,r.Z)((function(t){return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return[4,e(t)];case 1:return r.sent(),[4,n({installationId:t,forceRefetch:!0})];case 2:return r.sent(),[2]}}))}));return function(e){return t.apply(this,arguments)}}(),[e,n])}function O(){var e=N(),n=j().throwSystemError;return f.useCallback(function(){var t=(0,r.Z)((function(t){var r,i,o,a,c,s,d,f,p;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return[4,E(t)];case 1:if((r=l.sent()).error)return n({friendlyMessage:"Failed to load installed extensions",error:r.error}),[2];i=!0,o=!1,a=void 0,l.label=2;case 2:l.trys.push([2,9,10,11]),c=r.result[Symbol.iterator](),l.label=3;case 3:if(i=(s=c.next()).done)return[3,8];d=s.value,l.label=4;case 4:return l.trys.push([4,6,,7]),[4,e({installationId:(0,A.A)(d.id),forceRefetch:!0})];case 5:return l.sent(),[3,7];case 6:return f=l.sent(),u.kg.error("Error when loading extension",{extension:!0,errors:f.message}),[3,7];case 7:return i=!0,[3,3];case 8:return[3,11];case 9:return p=l.sent(),o=!0,a=p,[3,11];case 10:try{i||null==c.return||c.return()}finally{if(o)throw a}return[7];case 11:return[2]}}))}));return function(e){return t.apply(this,arguments)}}(),[e,n])}function F(){var e=N(),n=(0,P.qr)(),t=(0,P.Mu)(),i=(0,B.E4)(P.ot);return f.useCallback(function(){var o=(0,r.Z)((function(r){var o,a,c,u;return(0,l.__generator)(this,(function(l){return o=(0,p.BY)(r),(a=n.find((function(e){return e.baseUrl===o})))||(c=(0,A.T)(m()()),u=(0,A.A)(m()()),i(a={extensionId:c,installationId:u,baseUrl:o})),t.find((function(e){return e.extensionId===(null===a||void 0===a?void 0:a.extensionId)}))||e({installationId:a.installationId}),[2]}))}));return function(e){return o.apply(this,arguments)}}(),[n,t,i,e])}function W(){var e=(0,c.Z)(),n=(0,y.q_)({variables:{replId:e}}).data,t=(0,B.E4)(P.M1),i=(0,B.Ld)(),o=N();return f.useCallback((0,r.Z)((function(){var e;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return"Repl"!==(null===n||void 0===n?void 0:n.repl.__typename)?[2]:(e=t(n.repl.hostedUrl),[4,o({installationId:e.installationId,forceRefetch:!0})]);case 1:return r.sent(),[2,i.get(P._t).find((function(n){return n.installationId===e.installationId}))]}}))})),[n,t,o,i])}function H(){var e=(0,c.Z)(),n=(0,y.q_)({variables:{replId:e}}).data,t=(0,B.E4)(P.M1),r=(0,P.Mu)();return f.useMemo((function(){if("Repl"===(null===n||void 0===n?void 0:n.repl.__typename)){var e=t(n.repl.hostedUrl);return r.find((function(n){return e.installationId===n.installationId}))}}),[n,r,t])}var z=(0,d.cn)(null,(function(e,n,t){n(P.wQ,t),u.kg.error("Extension System Error",{extension:!0,extensionSystem:!0,originalError:t.error.message,friendlyMessage:t.friendlyMessage})})),V=(0,d.cn)(null,(function(e,n,t){var r=e(P._t).find((function(e){return e.extensionId===t.extensionId}));if(u.kg.error("Extension Error",{extension:!0,extensionId:t.extensionId,originalError:t.extensionError.error.message,friendlyMessage:t.extensionError.friendlyMessage}),!r)return n(P.nk,{extensionId:t.extensionId,installationId:t.installationId,manifest:(0,p.fF)({name:t.extensionId}),baseUrl:"",enableExperimentalApi:!1,enableInternalApi:!1}),void n(P.f4,{extensionId:t.extensionId,extensionError:t.extensionError});n(P.f4,{extensionId:t.extensionId,extensionError:t.extensionError})}));function j(){return{throwSystemError:(0,B.E4)(z),throwExtensionError:(0,B.E4)(V)}}},49487:function(e,n,t){t.d(n,{nk:function(){return Z},ot:function(){return b},M1:function(){return w},_t:function(){return m},Lq:function(){return g},We:function(){return x},f4:function(){return C},wQ:function(){return y},jx:function(){return E},r9:function(){return R},WG:function(){return G},Mu:function(){return T},c_:function(){return I},qr:function(){return D}});var r=t(57135),i=t(72006),o=t(4405),a=t(96583),l=t(36730),c=t(66866),u=t(92153),s=t(46518),d=t(85234),f=t.n(d),p=t(47843),h=t(49500);function v(e){var n=(0,i.Z)({extension:!0},e),t={info:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h.info(e,t),p.kg.info(e,(0,i.Z)({},t,n))},warn:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h.warn(e,t),p.kg.warn(e,(0,i.Z)({},t,n))},error:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h.error(e,t),p.kg.error(e,(0,i.Z)({},t,n))},createLogger:function(e){return v((0,i.Z)({},n,e))}};return t}var m=(0,l.cn)([]);var g=(0,l.cn)([]),y=(0,l.cn)(null),Z=(0,l.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){return(0,a.__generator)(this,(function(r){if(e(m).find((function(e){return e.extensionId===t.extensionId})))throw new Error("Extension already loaded");return n(m,(function(e){return(0,u.ZP)(e,(function(e){var n=function(e){var n,t=e.baseUrl,r=e.extensionId,i=e.installationId,o=e.manifest,a=e.enableExperimentalApi,c=e.enableInternalApi;return{baseUrl:t,extensionId:r,installationId:i,manifest:o,stateAtom:(0,l.cn)({error:null,panes:[],scopes:new Set(null===(n=o.scopes)||void 0===n?void 0:n.map((function(e){return e.name}))),enableExperimentalApi:a,enableInternalApi:c}),logger:v({extensionId:r,installationId:i,extensionName:o.name})}}(t);e.push(n)}))})),[2]}))}));return function(n,t,r){return e.apply(this,arguments)}}()),b=(0,l.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){return(0,a.__generator)(this,(function(r){if(e(g).find((function(e){return e.extensionId===t.extensionId||e.installationId===t.installationId||e.baseUrl===t.baseUrl})))throw new Error("Extension already loaded");return n(g,(function(e){return(0,u.ZP)(e,(function(e){e.push(t)}))})),[2]}))}));return function(n,t,r){return e.apply(this,arguments)}}()),w=(0,l.cn)(null,(function(e,n,t){var r=e(g).find((function(e){return e.baseUrl===t}));if(r)return r;var i={baseUrl:t,extensionId:(0,c.T)(f()()),installationId:(0,c.A)(f()())};return n(g,(function(e){return(0,u.ZP)(e,(function(e){e.push(i)}))})),i})),x=(0,l.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){return(0,a.__generator)(this,(function(e){return n(m,(function(e){return(0,u.ZP)(e,(function(e){var n=e.findIndex((function(e){return"extensionId"in t?e.extensionId===t.extensionId:e.installationId===t.installationId}));-1!==n&&e.splice(n,1)}))})),[2]}))}));return function(n,t,r){return e.apply(this,arguments)}}()),C=(0,l.cn)(null,(function(e,n,t){var r=e(m).find((function(e){return e.extensionId===t.extensionId}));if(!r)throw new Error("Extension not found");n(r.stateAtom,(function(e){return(0,u.ZP)(e,(function(e){e.error=t.extensionError}))}))})),k=(0,l.cn)((function(e){return e(m).map((function(e){var n;return null===(n=e.manifest.fileHandlers)||void 0===n?void 0:n.map((function(n){return(0,o.Z)((0,i.Z)({},n),{extension:e})}))})).flat().filter((function(e){return!!e}))})),S=(0,l.cn)((function(e){return e(m).map((function(e){var n;return null===(n=e.manifest.tools)||void 0===n?void 0:n.map((function(n){return(0,o.Z)((0,i.Z)({},n),{extension:e})}))})).flat().filter((function(e){return!!e}))}));function T(){return(0,s.ZC)(m)}function E(e){return T().find((function(n){return n.installationId===e}))}function R(e){var n=E(e);return n&&e?n.stateAtom:null}function I(){return(0,s.ZC)(k)}function G(){return(0,s.ZC)(S)}function D(){return(0,s.ZC)(g)}},46518:function(e,n,t){t.d(n,{E4:function(){return d},Ld:function(){return u},Wv:function(){return f},ZC:function(){return s}});var r=t(2272),i=t(4541),o=t(36730),a=t(34152),l=t(50959),c=(0,l.createContext)(null);function u(){return function(){var e=(0,l.useContext)(c);if(!e)throw new Error("Expected extensions context");return e}().store}function s(e){var n=u();return(0,a.Dv)(e,{store:n})}var d=function(e){var n=u();return(0,a.b9)(e,{store:n})};function f(e){var n=e.children,t=(0,r.Z)(l.useState((function(){return(0,o.MT)()})),1)[0];return(0,i.tZ)(c.Provider,{value:{store:t},children:n})}},66866:function(e,n,t){t.d(n,{A:function(){return i},T:function(){return r}});Symbol("extensionId"),Symbol("installationId");function r(e){return e}function i(e){return e}},47799:function(e,n,t){t.d(n,{VD:function(){return u},d8:function(){return a},uN:function(){return c}});var r=t(2272),i=t(47236),o=t(50959),a=Symbol("CodeEditorView"),l=(0,i.cn)(null);function c(){return(0,i.KO)(l,a)[0]}function u(e){var n=(0,r.Z)((0,i.KO)(l,a),2),t=n[0],c=n[1];(0,o.useEffect)((function(){t!==e&&c(e)}),[e,t,c])}},26673:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(8189),i=t(50959),o=t(37248);function a(e){var n=(0,r.Z)().fs,t=(0,i.useCallback)((function(t){var r=t.code,i=t.insertAt,a=t.newLine,l=void 0===a||a;if(!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e))throw new Error("Invalid file, this should never happen");if(0!==r.length)var c=n.watchTextFile(e,{onReady:function(e){var t=e.initialContent,o=e.writeChange,a=t.toString(),u="end"===i?a.length:i,s=r;l&&(0!==u&&u!==a.length&&-1===(u=a.indexOf("\n",u))&&(u=a.length),0!==u&&"\n"!==a[u-1]&&(s="\n"+s),"\n"!==a[u]&&(s+="\n")),o({from:u,insert:s}),n.flush().finally((function(){c()}))}})}),[e,n]);return!e||(0,o.T3)(e)||(0,o.sL)(e)?null:t}},95908:function(e,n,t){t.d(n,{Z:function(){return g}});var r=t(57135),i=t(9970),o=t(96583),a=t(50959),l=t(72532),c=t(91355),u=t(96324),s=t(6601),d=t(77542),f=t(8189),p=t(37192),h=t(37248),v=t(33163),m=t(64302);function g(e){var n=e.moveOrDeleteFile,t=(0,f.Z)().fs,g=(0,v.K)(),y=(0,a.useRef)(new Map),Z=(0,d.ex)(),b=(0,a.useState)(!1),w=b[0],x=b[1],C=(0,a.useState)(!1),k=C[0],S=C[1],T=(0,a.useState)([]),E=T[0],R=T[1],I=(0,m.k)(),G=(0,p.uV)(),D=E.map((function(e){return e.path})).map((function(e){return{title:e,path:e}})),_=(0,a.useState)(),P=_[0],B=_[1],A=(0,d.Gg)();(0,a.useEffect)((function(){if(Z&&!y.current.has(Z)&&Z!==u.rq){var e=function(e){var t=e.node.path;A(e.eventType===s.kS.Move?{path:t,type:"move",to:e.to}:{path:t,type:"delete"}),n&&n(e),y.current.delete(Z),R((function(e){return e.filter((function(e){return e.path!==Z}))}))};(0,h.Mb)(Z)?t.watchTextFile(Z,{onMoveOrDelete:e,onError:function(e,n){e.code||(t.flush(),t.persist({skipDebounce:!0}),G({error:e,extras:n,tags:{ot:!0},origin:"useContentsDiverged: fs.watchTextFile"}))},onReconnectFail:function(e,n){R((function(t){return(0,i.Z)(t.filter((function(e){return e.path!==Z}))||[]).concat([{path:Z,prompt:n,cb:e}])})),g("user:ot:diverged",{path:Z,divergence:n}),x(!0),P||B(Z)}}):t.watchFile(Z,{onChange:function(){},onMoveOrDelete:e}),y.current.set(Z,!0)}}),[Z,t,G,n,P,g,A]);var U,N,L=function(){var e=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return(0,c.j)(c.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,c.j)(c.U3.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),S(!0),[4,Promise.all(E.map((function(n){return R((function(e){var t=e.filter((function(e){return e.path!==n.path}));return 0===t.length?x(!1):B(t[0].path),t})),n.cb(e)})))];case 1:return n.sent(),S(!1),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),X=P?E.find((function(e){return e.path===P})):null,M=null===X||void 0===X?void 0:X.prompt,O=P,F=(0,l.J)({left:{code:null!==(U=null===M||void 0===M?void 0:M.localContent)&&void 0!==U?U:"",filePath:O},right:{code:null!==(N=null===M||void 0===M?void 0:M.remoteContent)&&void 0!==N?N:"",filePath:O}}),W=F.left,H=F.right;return{isConverging:k,didContentsDiverge:w,showMoreDetail:I,failedFiles:E,failedFilesOptions:D,selectedFile:P,setSelectedFile:B,reviewingPrompt:M,onChoice:L,local:W,remote:H}}},76168:function(e,n,t){t.d(n,{F:function(){return ve}});var r,i,o,a=t(57135),l=t(72006),c=t(4405),u=t(2272),s=t(96583),d=t(61848),f=t(46598),p=t(30241),h=t(89562),v=t(14830),m=t(8189);!function(e){e[e.NONE=0]="NONE",e[e.PUSH=1]="PUSH",e[e.CLONE=2]="CLONE",e[e.FETCH=3]="FETCH",e[e.GITHUB_CREATE=4]="GITHUB_CREATE",e[e.GITHUB_GET_INFO=5]="GITHUB_GET_INFO"}(r||(r={})),function(e){e.None="NONE",e.NoMergeBase="NO_MERGE_BASE",e.AuthFetchError="AUTH_FETCH_ERROR",e.IndexFilesCorrupted="INDEX_FILES_CORRUPTED"}(i||(i={})),function(e){e[e.UNTRACKED=0]="UNTRACKED",e[e.MODIFIED=1]="MODIFIED",e[e.MOVED=2]="MOVED",e[e.DELETED=3]="DELETED"}(o||(o={}));r.NONE,i.None;var g="git log -0 2>/dev/null && ".concat("git symbolic-ref HEAD --short"," || echo 'HEAD'");function y(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return["bash","-c",n.join("&&")]}var Z=function(e,n){return y('[ ! -d ".git" ]',"git init","git checkout -b main",'git config user.name "'.concat(n.username||"Replit user",'"'),'git config user.email "<>"',"touch .git/branches/.keep","touch .git/info/.keep","touch .git/objects/.keep","touch .git/refs/.keep")},b=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=null!==(n=e.remote)&&void 0!==n?n:"";return y(t?"git fetch ".concat(r," --progress --deepen=10"):"git fetch ".concat(e.remote," +refs/heads/*:refs/remotes/origin/* --progress --depth=10"))},w=function(e){return["git","remote","get-url","origin"]},x=function(e,n){return n.includes("No such remote")||n.startsWith("fatal")?(0,c.Z)((0,l.Z)({},e),{remote:""}):(0,c.Z)((0,l.Z)({},e),{remote:n.trim()})},C=function(e,n){return e.remote?y("git remote remove origin; git remote add origin ".concat(n)):y("git remote add origin ".concat(n))},k=function(e){var n;return y("git remote show ".concat(null!==(n=e.remote)&&void 0!==n?n:""," | grep 'HEAD branch'"))},S=function(e,n){var t=(0,u.Z)(n.split(":"),2),r=(t[0],t[1].trim());return(0,c.Z)((0,l.Z)({},e),{defaultBranch:r})},T=function(e){return y("git checkout -f ".concat(e.defaultBranch))},E=function(e){return y((n="git reset $(".concat(g,") --"),"if ! (( $(busybox ps -o comm | grep git) )) ; then rm -rf .git/index.lock; fi ; ".concat(n)));var n},R=t(89611),I=t(50959),G=t(43855),D=t(33859),_=t.n(D),P=t(78214),B=t(25939),A=t(43119),U=t(71440),N=t(5709),L=t(67216);function X(){var e=(0,A.Z)(["\n  query DotReplitEditorRootOriginRepl($rootOriginReplUrl: String!) {\n    repl(url: $rootOriginReplUrl) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return X=function(){return e},e}function M(){var e=(0,A.Z)(["\n  query DotReplitEditorRootOriginReplById($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return M=function(){return e},e}var O={},F=(0,U.Ps)(X(),N.C,N.D);var W=(0,U.Ps)(M(),N.C,N.D);var H=t(80560),z="Couldn't fetch the template .replit. Please try again.",V=function(){var e=(0,f.Z)().showError,n=function(e){var n=(0,l.Z)({},O,e);return L.a(W,n)}({fetchPolicy:"no-cache",skip:!0}).refetch,t=function(e){var n=(0,l.Z)({},O,e);return L.a(F,n)}({fetchPolicy:"no-cache",skip:!0}).refetch,r=(0,H.S)(),i=I.useCallback(function(){var i=(0,a.Z)((function(i){var o,a,l,c,u,d,f,p,h,v,m,g;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return o=i.replId,a=i.replUrl,o?[4,n({replId:o})]:[3,2];case 1:return l=s.sent(),[3,5];case 2:return a?[4,t({rootOriginReplUrl:a})]:[3,4];case 3:return l=s.sent(),[3,5];case 4:throw new Error("how did we even get here?");case 5:if(c=l.data,u=l.error,!c||u)return e(z),[2,null];if(d=c.repl,f=c.currentUser,"Repl"!==(null===d||void 0===d?void 0:d.__typename)||"CurrentUser"!==(null===f||void 0===f?void 0:f.__typename))return e(z),[2,null];(p=(0,P.ZP)({onUnrecoverableError:function(){e(z)}})).connect({context:{repl:d,currentUser:f,asViewer:!0},getMinimumRetryDelayMs:r}),h=(0,B.Z)({container:p}),s.label=6;case 6:return s.trys.push([6,8,,9]),[4,h.readFile(G.l)];case 7:return"content"in(m=s.sent())&&(v=m.content),[3,9];case 8:return s.sent(),e(z),p.destroy(),[2,null];case 9:if(p.destroy(),!v)return e(z),[2,null];try{g=_().parse(v.toString())}catch(y){return e(z),[2,null]}return[2,g]}}))}));return function(e){return i.apply(this,arguments)}}(),[n,t,e,r]);return i},j=t(31558);function q(){var e=(0,A.Z)(["\n  query WorkspacePatchDotReplitRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return q=function(){return e},e}var $={},Y=(0,U.Ps)(q());var K=function(e,n){return{op:"add",path:e,value:JSON.stringify(n)}},Q=new Map([["hintsList","hints"]]);function J(e){return ee.apply(this,arguments)}function ee(){return ee=(0,a.Z)((function(e){var n,t,r,i,o,c,d,f,p,h,v,m,g,y,Z;function b(){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)((function(){var e,t,o;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:return(e="object"===typeof r.env?r.env:null)&&0!==Object.keys(e).length?(t="object"===typeof i.env?i.env:null,o=t?(0,l.Z)({},e,t):e,[4,n.updateDotReplit([K("env",o)])]):[2];case 1:return a.sent(),[2]}}))}))).apply(this,arguments)}function x(){return C.apply(this,arguments)}function C(){return(C=(0,a.Z)((function(){var e,a,l,c;return(0,s.__generator)(this,(function(u){switch(u.label){case 0:return(null===(e=i.nix)||void 0===e?void 0:e.channel)?[2]:(null===r||void 0===r||null===(a=r.nix)||void 0===a?void 0:a.channel)?[3,2]:[4,t.getLatestStableChannel()];case 1:return(c=u.sent()).channel?(l=c.channel,[3,3]):[2];case 2:l=r.nix.channel,u.label=3;case 3:return[4,n.updateDotReplit([K("nix/channel",l)])];case 4:return u.sent().error||o.push("Nix channel was not detected in your imported .replit file but is required for all Nix Repls. The latest stable Nix channel "+'"'.concat(l.channel,'" was automatically added to your .replit file.')),[2]}}))}))).apply(this,arguments)}function k(e,n){return S.apply(this,arguments)}function S(){return S=(0,a.Z)((function(e,t){var a,l,c,u,d,f;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return a=i[e],l=Boolean(a),Array.isArray(a)?l=a.length>0:a&&"object"===typeof a&&(l=Object.keys(a).length>0),u=null!==(c=Q.get(e))&&void 0!==c?c:e,l||!r[u]?[2]:(d=K(u,r[u]),[4,n.updateDotReplit([d])]);case 1:return s.sent().error||!t||(f="A ".concat(t," was not detected in your imported .replit file so a recommended one was automatically added."),o.push(f)),[2]}}))})),S.apply(this,arguments)}return(0,s.__generator)(this,(function(a){switch(a.label){case 0:n=e.dotReplit,t=e.nixService,r=e.templateConfig,i=e.config,o=[],c={entrypoint:"entrypoint config",hidden:"hidden files config",audio:"audio config",run:"run command",refreshWebViewOnFileChange:"webview refresh config",language:"language config",onBoot:"onBoot command",languages:"languages config",compile:"compile command",debugger:"debugger config",packager:"packager config",interpreter:"interpreter config",unitTest:"unit test config",nix:x,env:b,hosting:"hosting config",gitHubImport:"GitHub import config",auth:"Repl Auth config",hintsList:"Hints config",ports:"Ports config",deployment:"deployment config",orderedEnv:null,modules:"nix modules config",extension:"extension config"},d=[],f=!0,p=!1,h=void 0;try{for(v=Object.entries(c)[Symbol.iterator]();!(f=(m=v.next()).done);f=!0)g=(0,u.Z)(m.value,2),y=g[0],null!==(Z=g[1])&&("function"===typeof Z?d.push(Z()):d.push(k(y,Z)))}catch(l){p=!0,h=l}finally{try{f||null==v.return||v.return()}finally{if(p)throw h}}return[4,Promise.all(d)];case 1:return a.sent(),[2,o]}}))})),ee.apply(this,arguments)}function ne(){var e=(0,m.Z)(),n=e.dotReplit,t=e.nixService,r=(0,p.Z)(),i=(0,u.Z)(function(e){var n=(0,l.Z)({},$,e);return j.t(Y,n)}(),1)[0],o=V(),c=(0,f.Z)().showWarning;return(0,I.useCallback)((0,a.Z)((function(){var e,a,l,u,d,f,p,h,v,m,g;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return[4,n.getConfig()];case 1:return(e=s.sent().config)?[4,i({variables:{replId:r}})]:[2];case 2:return a=s.sent().data,(null===(l="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null)||void 0===l?void 0:l.rootOriginReplUrl)?[4,o({replUrl:l.rootOriginReplUrl})]:[2];case 3:return(u=s.sent())?[4,J({nixService:t,dotReplit:n,config:e,templateConfig:u})]:[2];case 4:d=s.sent(),f=!0,p=!1,h=void 0;try{for(v=d[Symbol.iterator]();!(f=(m=v.next()).done);f=!0)g=m.value,c(g,1e3)}catch(y){p=!0,h=y}finally{try{f||null==v.return||v.return()}finally{if(p)throw h}}return[2]}}))})),[r,c,n,t,i,o])}var te=t(78854),re=t(18043),ie=t(96642),oe=t(96324),ae=t(6601),le=t(59187);function ce(){var e=(0,A.Z)(["\n  query WorkspaceDoGitHubImportFlow($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          gitRemoteUrl\n          doClone\n        }\n      }\n    }\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      username\n    }\n  }\n"]);return ce=function(){return e},e}function ue(){var e=(0,A.Z)(["\n  mutation WorkspaceDoGitHubImportFlowFinishClone($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          doClone\n        }\n      }\n    }\n  }\n"]);return ue=function(){return e},e}function se(){var e=(0,A.Z)(["\n  query GitHubImportRootOriginReplUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return se=function(){return e},e}var de={},fe=(0,U.Ps)(ce());var pe=(0,U.Ps)(ue());se();var he=t(91620).lW;function ve(e){var n=e.insertConfigPlugin,t=e.setConfigScreenLockIsOpen,o=(0,p.Z)(),g=(0,u.Z)(function(e){var n=(0,l.Z)({},de,e);return le.D(pe,n)}(),2),y=g[0],D=g[1],_=(0,m.Z)(),P=_.container,B=_.fs,A=_.runner,U=_.dotReplit,N=_.session,L=(0,v.Z)(P),X=(0,f.Z)(),M=X.showError,O=X.showConfirm,F=ne();(0,I.useEffect)((function(){D.error&&M("Failed to finish cloning Repl - "+D.error)}),[D.error]),(0,I.useEffect)((function(){D.data&&O("Finished cloning Repl")}),[D.data]),(0,I.useEffect)((function(){H()}),[]);var W=(0,u.Z)(function(e){var n=(0,l.Z)({},de,e);return j.t(fe,n)}({variables:{replId:o},fetchPolicy:"no-cache",onCompleted:function(){var e=(0,a.Z)((function(e){var n,t,r,i,o;return(0,s.__generator)(this,(function(a){return n=e.repl,t=e.currentUser,"Repl"===n.__typename&&t&&"CurrentUser"===t.__typename&&n.config.gitRemoteUrl&&n.config.doClone?(ge({remote:null!==(i=n.config.gitRemoteUrl)&&void 0!==i?i:"",accessToken:null!==(o=null===(r=t.gitHubInfo)||void 0===r?void 0:r.accessToken)&&void 0!==o?o:null,username:t.username}),[2]):[2]}))}));return function(n){return e.apply(this,arguments)}}()}),1),H=W[0],z={isInitialized:!1,hasConflictsWithFetchedRemote:!1,hasMergeBaseWithFetchedRemote:!0,authError:r.NONE,badState:i.None,remote:"",repoId:null,branch:"",defaultBranch:"main",branches:[],installations:[],changedFiles:[],commits:[],commitsAhead:null,commitsBehind:null,remoteToken:null,gitHubName:null,ownerId:null,gitHubAvatarUrl:null,gitHubEmail:null},V=function(){var e=(0,a.Z)((function(e){return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,L({args:Z(z,null!==e&&void 0!==e?e:"")})];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),q=function(){var e=(0,a.Z)((function(e){return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,L({args:C(z,e)})];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),$=function(){var e=(0,a.Z)((function(){var e,n;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return[4,L({args:w(z)})];case 1:return e=t.sent(),x?(n=x(z,null===e.error?e.output:""),[2,n.remote]):[2]}}))}));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=(0,a.Z)((function(e){var n,t,r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:return n=e.remote,t=e.remoteToken,[4,L({args:k((0,c.Z)((0,l.Z)({},z),{remote:n,remoteToken:t}))})];case 1:return r=o.sent(),S?(i=S(z,null===r.error?r.output:"HEAD branch: main"),[2,i.defaultBranch]):[2]}}))}));return function(n){return e.apply(this,arguments)}}(),K=function(){var e=(0,a.Z)((function(e){return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,L({args:T((0,c.Z)((0,l.Z)({},z),{defaultBranch:e}))})];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Q=function(){var e=(0,a.Z)((function(e){var n,t;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return n=e.remote,t=e.remoteToken,[4,J()];case 1:return r.sent(),[4,$()];case 2:return r.sent(),[4,ee({deepen:!0,remote:n,remoteToken:t})];case 3:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),J=function(){var e=(0,a.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return[4,L({args:E(z)})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,a.Z)((function(e){var n,t,r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:return n=e.deepen,t=void 0!==n&&n,r=e.remote,i=e.remoteToken,r.startsWith("https://api.glitch.com")?[4,L({args:["git","fetch",r,"+refs/heads/*:refs/remotes/origin/*"]})]:[3,2];case 1:case 3:return o.sent(),[2];case 2:return[4,L({args:b((0,c.Z)((0,l.Z)({},z),{remote:r,remoteToken:i}),t)})]}}))}));return function(n){return e.apply(this,arguments)}}(),ce=function(){var e=(0,a.Z)((function(){var e,n,t,r,i,o,a;return(0,s.__generator)(this,(function(l){switch(l.label){case 0:return[4,B.readDir(oe.Ql)];case 1:return(r=l.sent()).error?[2]:[4,U.getConfig()];case 2:return i=l.sent(),(null===(e=i.config)||void 0===e||null===(n=e.gitHubImport)||void 0===n?void 0:n.requiredFiles)?(o=i.config.gitHubImport.requiredFiles,a=o.map((function(e){return new RegExp(e)})),[4,Promise.all(r.children.filter((function(e){return!a.some((function(n){return null!=e.filename.match(n)}))})).map((function(e){return e.type===ae.Tv.Directory?B.deleteDir(e.filename):B.deleteFile(e.filename)})))]):[3,4];case 3:return l.sent(),[3,6];case 4:return(null===(t=i.config)||void 0===t?void 0:t.entrypoint)?[4,B.deleteFile(i.config.entrypoint)]:[3,6];case 5:l.sent(),l.label=6;case 6:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=(0,a.Z)((function(e,n,t){var r;return(0,s.__generator)(this,(function(i){switch(i.label){case 0:return[4,V(t)];case 1:return i.sent(),[4,q(e)];case 2:return i.sent(),[4,$()];case 3:return i.sent(),[4,ee({deepen:!1,remote:e,remoteToken:n})];case 4:return i.sent(),[4,Y({remote:e,remoteToken:n})];case 5:return r=i.sent(),[4,K(null!==r&&void 0!==r?r:"")];case 6:return i.sent(),[4,Q({remote:e,remoteToken:n})];case 7:return i.sent(),"html"!==A.mode?[3,10]:[4,(0,te.r)(P,oe.Ql)];case 8:return i.sent(),[4,A.run()];case 9:i.sent(),i.label=10;case 10:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}(),se=function(){var e=(0,a.Z)((function(){var e,n,t;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return[4,B.readDir(oe.Ql)];case 1:return(e=r.sent()).error||(n=e.children.map((function(e){return e.filename})),(t=(0,R.T)(n,"nix"))&&N.openFile(t)),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=(0,a.Z)((function(e,n){var t,r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:return[4,(0,re.J9)({repoNameWithOwner:e,accessToken:n})];case 1:return"error"in(t=o.sent())?[2,{hasDotReplit:!1,hasProcfile:!1}]:(r=t.some((function(e){return e.path===G.l})),i=t.some((function(e){return e.path===d.E})),[2,{hasDotReplit:r,hasProcfile:i}])}}))}));return function(n,t){return e.apply(this,arguments)}}(),me=function(){var e=(0,a.Z)((function(e,n){var t,r,i,o,a,l,c,u;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return[4,(0,re.LK)({repoNameWithOwner:e,filePath:d.E,accessToken:n})];case 1:return"error"in(t=s.sent())?[2,{showConfigPanel:!0}]:(r=he.from(t.content,"base64").toString(),(i=(0,d.c)(r))&&(a=null!==(o=i.web)&&void 0!==o?o:i.worker)?(l=a.command+" "+a.options.join(" "),[4,U.updateDotReplit([(0,ie.KQ)(l),(0,ie.xz)("interpreter")])]):[2,{showConfigPanel:!0}]);case 2:return c=s.sent(),u=i.web&&!i.worker||!i.web&&i.worker,c.error||!u?[2,{showConfigPanel:!0}]:[2,{showConfigPanel:!1}]}}))}));return function(n,t){return e.apply(this,arguments)}}(),ge=function(){var e=(0,a.Z)((function(e){var r,i,a,l,c,u,d,f,p,v;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return r=e.remote,i=e.accessToken,a=e.username,t(!0),[4,ce()];case 1:return s.sent(),[4,ue(r,i,a)];case 2:return s.sent(),[4,F()];case 3:return s.sent(),[4,y({variables:{input:{id:o,doClone:!1}}})];case 4:return s.sent(),[4,se()];case 5:return s.sent(),l=(0,h.J)(r),c=!1,l?(u=l.username,d=l.repository,[4,ve("".concat(u,"/").concat(d),i)]):[3,9];case 6:return f=s.sent(),p=f.hasDotReplit,!f.hasProcfile||p?[3,8]:[4,me("".concat(u,"/").concat(d),i)];case 7:return v=s.sent(),c=!v.showConfigPanel,[3,9];case 8:c=p,s.label=9;case 9:return t(!1),"html"===A.mode?[2]:(c||n(),[2])}}))}));return function(n){return e.apply(this,arguments)}}()}},706:function(e,n,t){t.d(n,{T:function(){return d}});var r=t(30241),i=t(72006),o=t(43119),a=t(71440),l=t(67216);function c(){var e=(0,o.Z)(["\n  query WorkspaceEduPaneEnabled($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isModelSolution\n        isProject\n        isProjectFork\n        owner {\n          __typename\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},s=(0,a.Ps)(c());function d(){var e,n=function(e){var n=(0,i.Z)({},u,e);return l.a(s,n)}({variables:{replId:(0,r.Z)()}}).data,t="Repl"===(null===n||void 0===n||null===(e=n.repl)||void 0===e?void 0:e.__typename)?null===n||void 0===n?void 0:n.repl:null;if(!t)return!1;var o=t.owner;return!!o&&(t.isProjectFork&&!t.isModelSolution&&"Team"===o.__typename&&o.isAdmin)}},61643:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(50959),i=t(91184),o=t(8189),a=t(6601),l=t(78214);function c(){var e=(0,o.Z)().fs,n=(0,r.useState)(!1),t=n[0],c=n[1],u=(0,i.Z)(),s=(0,r.useState)(!1),d=s[0],f=s[1];return(0,r.useEffect)((function(){u===l.em.CONNECTED&&f(!0)}),[u]),(0,r.useEffect)((function(){return c(e.getStatus()===a.kO.Syncing),e.onStatusChange((function(e){c(e===a.kO.Syncing)}))}),[e]),d?{isSaving:t,isOffline:u!==l.em.CONNECTED}:{isSaving:!1,isOffline:!1}}},25472:function(e,n,t){t.d(n,{V:function(){return a},Z:function(){return l}});var r=t(50959),i=t(8189),o=t(6601),a=".tutorial";function l(){var e=(0,i.Z)().fs,n=(0,r.useState)({isLoading:!0,isTutorial:!1}),t=n[0],l=n[1];return(0,r.useEffect)((function(){e.watchDir(".",{onChange:function(e){l({isLoading:!1,isTutorial:e.some((function(e){return e.type===o.Tv.Directory&&e.filename===a}))})},onMoveOrDelete:function(){l({isLoading:!1,isTutorial:!1})},onError:function(){l({isLoading:!1,isTutorial:!1})}})}),[e]),t}},99983:function(e,n,t){t.d(n,{ZP:function(){return E},Ln:function(){return T}});var r=t(57135),i=t(96583),o=t(50959),a=t(47236),l=t(8189),c=t(88254),u=t(30241),s=t(4872),d=t(78214),f=t(24494),p=t(9560),h=t(25939),v=t(72006),m=t(43119),g=t(71440),y=t(5709),Z=t(67216);function b(){var e=(0,m.Z)(["\n  query ReplEnvironmentDesktopLoadCurriculum($id: String!) {\n    currentUser {\n      id\n      isTeacher: hasRole(role: TEACHER)\n      ...CrosisContextCurrentUser\n    }\n    repl(id: $id) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        language\n        origin {\n          id\n          ...CrosisContextRepl\n          origin {\n            id\n            ...CrosisContextRepl\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return b=function(){return e},e}var w={},x=(0,g.Ps)(b(),y.D,y.C);var C=t(80560),k=t(49500),S=(0,a.cn)(!1);function T(){return(0,a.Dv)(S)}function E(){var e,n,t=(0,u.Z)(),m=(0,l.Z)().fs,g=function(e){var n=(0,v.Z)({},w,e);return Z.a(x,n)}({variables:{id:t}}).data,y=(0,a.b9)(S);o.useEffect((function(){return function(){y(!1)}}),[y]);var b="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)?g.repl:null,T="CurrentUser"===(null===g||void 0===g||null===(e=g.currentUser)||void 0===e?void 0:e.__typename)?g.currentUser:null,E="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)&&g.repl.isModelSolutionFork,R=E?b&&(null===(n=b.origin)||void 0===n?void 0:n.origin):b&&b.origin||null,I=(0,f.b)("Repl"===(null===R||void 0===R?void 0:R.__typename)?{repl:R,currentUser:T||void 0}:null),G=(0,C.S)();o.useEffect((function(){b&&T&&b.isProject&&m.stat(".lesson").then((function(e){e.exists||m.createDir(".lesson")}))}),[m,T,b]),o.useEffect((function(){if(b&&(b.isProjectFork||E)&&R&&I){var e=(0,d.ZP)({onUnrecoverableError:function(e){k.error(e),c.$e((function(n){n.setTag("curriculum-authoring",!0),n.setExtra("originId",R.id),c.Tb(e)}))}}),n=(0,h.Z)({container:e});e.connect({context:I,getMinimumRetryDelayMs:G,fetchConnectionMetadata:function(){return(0,s.Z)({url:"/data/repls/".concat(b.id,"/get_repl_origin_guest_connection_metadata")})}});var t=e.onConnectionStateChanged(function(){var o=(0,r.Z)((function(r){var o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(r!==p.e.CONNECTED)return[3,8];t(),i.label=1;case 1:return i.trys.push([1,6,7,8]),[4,m.copyDirFromRemote(".lesson",".lesson",n)];case 2:return(o=i.sent()).error?(c.$e((function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",R.id),c.Tb(new Error("Error copying lesson: ".concat(o.error)))})),[3,5]):[3,3];case 3:return[4,m.stat(".lesson/instructions.md")];case 4:i.sent().exists&&y(!0),i.label=5;case 5:return[3,8];case 6:return a=i.sent(),c.$e((function(e){e.setTag("curriculum-authoring",!0),c.Tb(a)})),[3,8];case 7:return e.destroy(),[7];case 8:return[2]}}))}));return function(e){return o.apply(this,arguments)}}());return function(){return e.destroy()}}}),[m,I,b,R,E,y])}},99194:function(e,n,t){t.d(n,{Z:function(){return l},f:function(){return a}});var r=t(50959),i=t(47236),o=t(98689),a=(0,i.cn)({current:null});function l(){var e=(0,o.Z)((0,i.Dv)(a));return(0,r.useCallback)((function(){var n,t;null===(n=e.current)||void 0===n||null===(t=n.current)||void 0===t||t.refresh()}),[e])}},47200:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(57135),i=t(2272),o=t(96583),a=t(47236),l=t(47843),c=t(14830),u=t(8189),s=t(10206),d=t.n(s),f=t(50959),p=t(98689),h=t(7247),v="date '+%s%N' && cat /sys/fs/cgroup/cpu/cpuacct.usage /sys/fs/cgroup/cpu/cpu.cfs_quota_us /sys/fs/cgroup/cpu/cpu.cfs_period_us /sys/fs/cgroup/memory/memory.usage_in_bytes /sys/fs/cgroup/memory/memory.soft_limit_in_bytes /sys/fs/cgroup/memory/memory.limit_in_bytes &&grep '^\\(total_rss\\|total_cache\\) ' /sys/fs/cgroup/memory/memory.stat",m="cat /repl/stats/subvolume_usage_bytes /repl/stats/subvolume_total_bytes /repl/stats/scratch_usage_bytes /repl/stats/scratch_total_bytes",g=1073741824;function y(){var e=(0,h.Z)((function(){return(0,a.cn)({wallTimeNanos:d().BigInt(0),cpuTimeNanos:d().BigInt(0),cpuUtilPercent:0,memoryUsageRssBytes:0,memoryUsageCacheBytes:0,memorySoftLimitBytes:0,memoryHardLimitBytes:0,storageUsedBytes:0,storageTotalBytes:0,scratchUsedBytes:0,scratchTotalBytes:0,numVCpu:0})}),[]),n=(0,h.Z)((function(){return{cpu:{currentAtom:(0,a.cn)((function(n){return Z(n(e).cpuUtilPercent)})),totalAtom:(0,a.cn)((function(){return 100})),cpuCountAtom:(0,a.cn)((function(n){return n(e).numVCpu}))},ram:{currentCacheAtom:(0,a.cn)((function(n){return Z(b(n(e).memoryUsageCacheBytes))})),currentRssAtom:(0,a.cn)((function(n){return Z(b(n(e).memoryUsageRssBytes))})),totalAtom:(0,a.cn)((function(n){return b(n(e).memorySoftLimitBytes)}))},disk:{currentAtom:(0,a.cn)((function(n){return b(n(e).storageUsedBytes)})),totalAtom:(0,a.cn)((function(n){return b(n(e).storageTotalBytes)})),scratchCurrentAtom:(0,a.cn)((function(n){return b(n(e).scratchUsedBytes)})),scratchTotalAtom:(0,a.cn)((function(n){return b(n(e).scratchTotalBytes)}))}}}),[e]),t=(0,a.b9)(e),s=(0,i.Z)(f.useState(!0),2),y=s[0],w=s[1];return function(e){var n=(0,u.Z)().container,t=(0,c.Z)(n),i=(0,p.Z)(e);f.useEffect((function(){var e=!1,n=null;function a(){return c.apply(this,arguments)}function c(){return(c=(0,r.Z)((function(){var r,c,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,t({args:["bash","-c",v]})];case 1:return c=o.sent(),e?[2]:null!==c.error?(l.kg.error("Error running resource tracking command",{errorMessage:c.error}),[2]):[4,t({args:["bash","-c",m]})];case 2:return u=o.sent(),e?[2]:null===u.error||(null===(r=u.output)||void 0===r?void 0:r.includes("No such file or directory"))?(i.current({trackingResult:c,storageResult:u}),n=setTimeout(a,2e3),[2]):(l.kg.error("Error running storage command",{errorMessage:u.error}),[2])}}))}))).apply(this,arguments)}return a(),function(){e=!0,n&&clearTimeout(n)}}),[n,t,i])}((function(e){var n=e.trackingResult,r=e.storageResult;t((function(e){var t,o;try{t=function(e,n){if(9!==e.length)throw new Error("Received unexpected output from resource tracking command: ".concat(e));var t={wallTimeNanos:d().BigInt(0),cpuTimeNanos:d().BigInt(0),cpuUtilPercent:0,memoryUsageRssBytes:0,memoryUsageCacheBytes:0,memorySoftLimitBytes:0,memoryHardLimitBytes:0,storageUsedBytes:0,storageTotalBytes:g,scratchUsedBytes:0,scratchTotalBytes:2147483648,numVCpu:0},r=e.slice(0,7).map((function(e){return parseInt(e,10)}));if(r.includes(NaN))throw new Error("Could not parse one or more values from resource monitoring command: ".concat(e));var o,a,l=d().BigInt(e[0]),c=d().BigInt(e[1]),u=r[2],s=r[3],f=r[5],p=r[6],h=new Map(e.slice(7).map((function(e){var n=(0,i.Z)(e.trim().split(" "),2),t=n[0],r=n[1];return[t,parseInt(r,10)]}))),v=null!==(o=h.get("total_rss"))&&void 0!==o?o:0,m=null!==(a=h.get("total_cache"))&&void 0!==a?a:0;if(!(v>=0&&m>=0&&p>0&&f>0))throw new Error("Memory usage or limit reported negative: ".concat(e));if(t.memoryUsageRssBytes=v,t.memoryUsageCacheBytes=m,t.memorySoftLimitBytes=f,t.memoryHardLimitBytes=p,d().GT(n.wallTimeNanos,0)&&d().GT(n.cpuTimeNanos,0)){var y=d().toNumber(d().subtract(l,n.wallTimeNanos)),Z=d().toNumber(d().subtract(c,n.cpuTimeNanos));if(y>0&&Z>=0&&u>0&&s>0){var b=u/s;t.cpuUtilPercent=100*Z/y/b,t.numVCpu=b}else t.cpuUtilPercent=0}return t.wallTimeNanos=l,t.cpuTimeNanos=c,t}((n.output||"").trim().split("\n"),e)}catch(a){return l.kg.error("Could not calculate resources",{errorMessage:a.message}),e}if(!t)throw new Error("Expected resources");try{o=function(e){if(4!==e.length)throw new Error("Received unexpected output from storage command: ".concat(e));var n=parseInt(e[0],10),t=parseInt(e[1],10),r=parseInt(e[2],10),i=parseInt(e[3],10);if(isNaN(n)||isNaN(t)||isNaN(r)||isNaN(i))throw new Error("Could not parse values from storage output command: ".concat(e));return{storageUsedBytes:n,storageTotalBytes:t,scratchUsedBytes:r,scratchTotalBytes:i}}((r.output||"").trim().split("\n"))}catch(c){return l.kg.error("Could not calculate resources",{errorMessage:c.message}),e}return t.storageUsedBytes=o.storageUsedBytes,t.storageTotalBytes=o.storageTotalBytes,t.scratchUsedBytes=o.scratchUsedBytes,t.scratchTotalBytes=o.scratchTotalBytes,w(!1),t}))})),{dataAtom:n,loading:y}}function Z(e){return Math.round(100*(e+Number.EPSILON))/100}function b(e){return e/1024/1024}},62487:function(e,n,t){t.d(n,{T:function(){return Z}});var r=t(50959),i=t(35196),o=t(30241),a=t(72006),l=t(43119),c=t(71440),u=t(67216);function s(){var e=(0,l.Z)(["\n  query ShouldHideFileInWorkspace($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n      }\n    }\n  }\n"]);return s=function(){return e},e}var d={},f=(0,c.Ps)(s());function p(e){var n=(0,a.Z)({},d,e);return u.a(f,n)}var h=t(98423),v=t(35813),m=t(95269),g=t(8189),y=t(77542),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,o.Z)(),t=(0,v.Z)(),a=(0,g.Z)().dotReplit,l=p({variables:{replId:n}}),c=l.data,u=l.loading,s="Repl"===(null===c||void 0===c?void 0:c.repl.__typename)&&(c.repl.isProjectFork||c.repl.isModelSolution||c.repl.isModelSolutionFork),d=(0,i.P)(a),f=(0,y.t9)();return r.useCallback((function(n){return!!((s||u)&&(0,h.TI)(n)||(0,h.MF)(n))||!f&&(e&&(0,h.uC)(n)||(0,m.C)(n)||(0,h.yb)(n,t)||(0,h.lv)(n,d))}),[s,u,t,f,d,e])}},64302:function(e,n,t){t.d(n,{k:function(){return d}});var r=t(94370),i=t(72006),o=t(43119),a=t(71440),l=t(67216);function c(){var e=(0,o.Z)(["\n  query WorkspaceShowAdmin {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return c=function(){return e},e}var u={},s=(0,a.Ps)(c());function d(){var e,n=function(e){var n=(0,i.Z)({},u,e);return l.a(s,n)}().data,t=(0,r.useRouter)();return(null===n||void 0===n||null===(e=n.currentUser)||void 0===e?void 0:e.isAdmin)||Boolean(t.query.debug)}},6394:function(e,n,t){t.d(n,{B:function(){return P}});var r=t(2272),i=t(20866),o=t(25472),a=t(89263),l=t(59029),c=t(706),u=t(7247),s=t(30241),d=t(72006),f=t(43119),p=t(71440),h=t(67216);function v(){var e=(0,f.Z)(["\n  fragment WorkspaceToolPanesRepl on Repl {\n    isProjectFork\n    isModelSolution\n    isProject\n    isProjectFork\n    workspaceCta\n    owner {\n      __typename\n      ... on Team {\n        id\n        isAdmin\n        isTeamsPro: subscriptionIsType(subscriptionType: PRO)\n      }\n      ... on User {\n        id\n      }\n    }\n    currentUserPermissions {\n      containerWrite\n      editMultiplayers\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    lang {\n      id\n      key\n      engine\n      supportsGit\n      hasLibSearch\n      supportsPackager3\n      hasDAP\n    }\n    config {\n      isServer\n      isVnc\n    }\n  }\n"]);return v=function(){return e},e}function m(){var e=(0,f.Z)(["\n  query WorkspaceToolPanes($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceToolPanesRepl\n      }\n    }\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n      isPrivacyLimitedAccess: hasRole(role: PRIVACY_LIMITED_ACCESS)\n      userSubscriptionType\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n            meteredTrial {\n              cap\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},y=(0,p.Ps)(v()),Z=(0,p.Ps)(m(),y);var b=t(94370),w=t(12018),x=t(99983),C=t(30265),k=t(9495),S=t(62830),T=t(24134),E=t(87187),R=t(72897),I=t(58727);function G(){var e,n=function(e){var n=(0,d.Z)({},g,e);return h.a(Z,n)}({variables:{replId:(0,s.Z)()}}).data,t="Repl"===(null===n||void 0===n||null===(e=n.repl)||void 0===e?void 0:e.__typename)?null===n||void 0===n?void 0:n.repl:null;return t?{repl:t,currentUser:(null===n||void 0===n?void 0:n.currentUser)||null}:{repl:null,currentUser:null}}var D=["ghostwriterChat","deployments","education","tutorial","instructions","docs","chat","threadInbox","packager","git","debugger","shell","runnerOutput","envEditor","webview","vnc","database","neon","replAuth","markdown","autograder","unitTests","preferences","adminPanel","sshConfigurator","extensionStore","searchReplace","extension","extensionDevtools"],_=["shell","git","packager","envEditor","deployments","database","neon","ghostwriterChat","unitTests","submitEduRepl","preferences","docs","multiplayer","adminPanel","sshConfigurator"];function P(){var e,n=G(),t=n.repl,s=n.currentUser,d=(0,b.useRouter)(),f=(0,C.T3)(),p=(0,w.P5)({controlName:"flag-neon-databases"}),h=(0,w.P5)({controlName:"flag-postgres-db-god-mode"}),v=(0,w.P5)({controlName:"flag-deployments"}),m=Boolean(v&&(null===t||void 0===t?void 0:t.hostingDeploymentPermissions.canDeploy)),g=(0,w.P5)({controlName:"flag-repl-auth-sidebar"}),y=(0,w.P5)({controlName:"flag-search-replace-pane",default:!1,type:"boolean"}),Z=(0,w.P5)({controlName:"flag-nix-modules-tool"}),P=(0,I.c)(),B=(0,l.Z)().language,A=(0,c.T)(),U=(0,x.Ln)(),N=(0,o.Z)().isTutorial,L=(0,a.I)().length>0,X=(0,k.T)(),M=(0,T.WG)(),O=(null===X||void 0===X?void 0:X.debuggers)&&(null===X||void 0===X?void 0:X.debuggers.length)>0||!1,F=(0,R.jX)(null===s||void 0===s?void 0:s.userSubscriptionType),W="Team"===(null===t||void 0===t||null===(e=t.owner)||void 0===e?void 0:e.__typename)&&(null===t||void 0===t?void 0:t.owner.isTeamsPro),H=(null===s||void 0===s?void 0:s.isAdmin)||Boolean(d.query.debug),z=Boolean(s&&!s.isPrivacyLimitedAccess),V=(0,i.Se)(),j=(0,w.P5)({controlName:"sort-tools-by-ui-title"});return(0,u.Z)((function(){var e=f&&(null===t||void 0===t?void 0:t.currentUserPermissions.editMultiplayers)?[{type:"multiplayer"}]:[];if(!t||!s)return e;var n=Boolean(t.config.isServer),i=Boolean(t.config.isVnc),o=t.lang.supportsGit,a=t.lang.key.startsWith("html"),l="nix"===t.lang.key,c=!a,u=t.isProject||t.isProjectFork,d=!a,v=F||W,b=Boolean(g&&L),w=[[{type:"shell"},!0],[{type:"instructions"},U],[{type:"markdown",data:{path:""}},!0],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs",data:{url:null}},!0],[{type:"webview"},n||a],[{type:"vnc"},i],[{type:"runnerOutput"},!a],[{type:"git"},o],[{type:"packager"},L],[{type:"envEditor"},c],[{type:"debugger"},O],[{type:"tutorial"},N],[{type:"database"},d],[{type:"neon"},h||l&&p],[{type:"replAuth"},b],[{type:"autograder"},u],[{type:"unitTests"},!u&&null!==B],[{type:"education"},Boolean(A)],[{type:"preferences"},!0],[{type:"adminPanel"},H],[{type:"deployments"},m],[{type:"sshConfigurator"},v],[{type:"ghostwriterChat"},z],[{type:"searchReplace"},y],[{type:"extensionStore",data:{page:"store"}},!0],[{type:"modules"},Z],[{type:"extensionDevtools"},P]];if(f){var x=t.workspaceCta===S.Sy.Submit||t.workspaceCta===S.Sy.Resubmit;w.push([{type:"submitEduRepl"},x])}var C=!0,k=!1,T=void 0;try{for(var R,I=M[Symbol.iterator]();!(C=(R=I.next()).done);C=!0){var G=R.value;w.push([{type:"extension",data:{extensionId:G.extension.extensionId,installationId:G.extension.installationId,name:G.name||G.extension.manifest.name,icon:G.icon||G.extension.manifest.icon,url:(0,E.Vh)(G.extension.baseUrl,G.handler)}},!0])}}catch(ne){k=!0,T=ne}finally{try{C||null==I.return||I.return()}finally{if(k)throw T}}var X=!0,q=!1,$=void 0;try{for(var Y,K=w[Symbol.iterator]();!(X=(Y=K.next()).done);X=!0){var Q=(0,r.Z)(Y.value,2),J=Q[0];Q[1]&&(f&&!_.includes(J.type)||e.push(J))}}catch(ne){q=!0,$=ne}finally{try{X||null==K.return||K.return()}finally{if(q)throw $}}if(j){var ee=e.map((function(e){return{title:V.getTitle(e),pane:e}})).sort((function(e,n){return e.title.localeCompare(n.title)})).map((function(e){return e.pane}));return ee}return function(e,n){return e.sort((function(e,t){return n.indexOf(e.type)-n.indexOf(t.type)}))}(e,f?_:D)}),[t,s,p,m,g,B,A,U,N,L,O,H,f,h,Z,y,M,P,F,W,j,V,z])}},14170:function(e,n,t){t.d(n,{L:function(){return c}});var r=t(72006),i=t(30241),o=t(50959),a=t(77434),l=t(56019);function c(){var e=(0,i.Z)(),n=(0,l.Z)("fileTree").trackTimeToLoadFileStart;return o.useCallback((function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(t);var o={action:"select",source:"filetree"};i.newTab?o={action:"newTab",source:"filetree"}:i.newPane&&(o={action:"newPane",source:"filetree"}),(0,a.Z)((0,r.Z)({replId:e},o))}),[e,n])}},96664:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(47843),i=t(30241),o=t(50959),a=t(8189),l=t(3600),c=t(68056),u=t(48783),s=t(28840),d=t(12018);var f=new Set;function p(e){var n=e.workspaceType,t=(0,i.Z)(),p=(0,a.Z)(),h=p.dotReplit,v=p.container,m=(0,d.P5)({controlName:"flag-channel-request-priority"});(0,o.useEffect)((function(){if(!f.has(t)){f.add(t);var e=h.watch((function(t){if(!t.error||t.error!==u.Yt.Disconnected){try{var i=v.getConnectionMetadata();if(!i||!i.token)throw new Error("Expected token in measure call.");!function(e){var n=e.workspaceType,t=e.parsedToken,i=e.flagChannelRequestPriority,o=Boolean(window.performance.getEntriesByName(c.Iy.pageNavStart,"mark").length),a={ssr:!o,workspaceType:n,tokenCluster:t.cluster,flagChannelRequestPriority:i},u="time to code";window.performance.measure(u,o?c.Iy.pageNavStart:void 0);var s=window.performance.getEntriesByName(u,"measure")[0];if(s){var d="page invisible fetch connection metadata",f=s.duration;Boolean(window.performance.getEntriesByName(c.Iy.fetchConnectionMetadataPageInvisibleStart,"mark").length)&&(window.performance.measure(d,c.Iy.fetchConnectionMetadataPageInvisibleStart,c.Iy.fetchConnectionMetadataPageInvisibleEnd),f-=window.performance.getEntriesByName(d,"measure")[0].duration,window.performance.clearMeasures(d),window.performance.clearMarks(c.Iy.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(c.Iy.fetchConnectionMetadataPageInvisibleEnd)),r.kg.time("time to code minus page invisible",f,a),r.kg.time("time to code with page invisible",s.duration,a),window.performance.clearMeasures(u),l.v.addTiming("time_to_code_minus_page_invisible",f),l.v.addTiming("time_to_code_with_page_invisible",s.duration)}else r.kg.info("Could not obtain measure for time to code",a)}({workspaceType:n,parsedToken:(0,s.h)(i.token),flagChannelRequestPriority:m})}catch(o){r.kg.info("Could not measure time to code",{workspaceType:n,e:o,dotReplitResult:t.error?t.error:"success"})}e()}}));return e}}),[t,n,h,v,m])}},56019:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(37248),i=t(47843),o=t(75298),a=new Map,l=function(e){var n=a.get(e);if(void 0!==n){var t=n.start,r=n.source,l=window.performance.now(),c=(0,o.V)(e);i.kg.time("time to load file",l-t,{from:r,fileViewerType:c}),a.delete(e)}};function c(e){return{trackTimeToLoadFileStart:function(n){return function(e,n){if((0,r.Mb)(e)){var t=window.performance.now();a.set(e,{start:t,source:n})}}(n,e)},trackTimeToLoadFileEnd:l}}},39020:function(e,n,t){t.d(n,{p:function(){return x}});var r=t(72006),i=t(4405),o=t(62487),a=t(7247),l=t(50959),c=t(85068),u=t(35813),s=t(2272),d=t(48783),f=t(33229),p=t(8189),h=t(37248),v=function(){var e=(0,u.Z)(),n=function(){var e=(0,p.Z)().dotReplit,n=(0,f.Z)(),t=(0,s.Z)(l.useState(null),2),r=t[0],i=t[1];return l.useEffect((function(){return e.watch((function(e){var t;n.current&&(e.error?e.error===d.Yt.NotFound&&i(null):i(null!==(t=e.config.entrypoint)&&void 0!==t?t:null))}))}),[e]),r}()||c.Z.getMainFileName(e);return l.useCallback((function(e,t){return(0,h.x$)(e,t,n)}),[n])},m=t(77542),g=t(46598),y=t(77434),Z=t(30241),b=t(31518),w=t(98689),x=function(e){var n=e.onFileDoubleClick,t=e.onFileDragEnd,c=e.openFile,u=e.flagFiletreeMultiselect,s=void 0===u||u,d=(0,m.ex)(),f=(0,o.T)(!0),h=v(),x=(0,p.Z)().fs,C=(0,g.Z)().showError,k=(0,Z.Z)(),S=(0,l.useCallback)((function(e){(0,y.Z)((0,i.Z)((0,r.Z)({},e),{replId:k}))}),[k]),T=(0,b.Z)().preferences,E="cmdOrCtrlKey"===(null===T||void 0===T?void 0:T.multiselectModifierKey)?"cmdOrCtrlKey":"altKey",R=(0,w.Z)(c);return(0,a.Z)((function(){return{flags:{flagFiletreeMultiselect:s},preferences:{multiselectModifierKey:E},activeFile:d,watchDir:x.watchDir,openFile:function(e,n){return R.current(e,n)},shouldHideFile:f,sortNode:h,readFile:x.readFile,deleteFile:x.deleteFile,deleteDir:x.deleteDir,moveFile:x.moveFile,moveDir:x.moveDir,onError:C,onAction:S,onFileDragEnd:t,onFileDoubleClick:n}}),[E,d,x.watchDir,x.readFile,x.deleteFile,x.deleteDir,x.moveFile,x.moveDir,R,f,h,C,S,t,n])}},43754:function(e,n,t){t.d(n,{bM:function(){return f}});var r=t(72006),i=t(4405),o=t(4541),a=t(47308),l=t(89853),c=t(22167),u=t(25776),s=t(31296),d=(0,l.X)({chord:[c.l0.display.inlineFlex,c.l0.rowWithGap(12)],shortcut:[c.l0.justify.end,c.l0.display.inlineFlex],block:[c.l0.rowWithGap(4)],noBorder:[c.l0.rowWithGap(2)],sizeSmall:[{fontSize:c.TV.fontSizeSmall,"& > div":{minWidth:c.TV.space16}}],sizeDefault:[{fontSize:c.TV.fontSizeDefault,"& > div":{minWidth:c.TV.space16}}]});function f(e){if((0,a.bU)(e.keyCombo))return(0,o.tZ)(u.G,{css:[d.chord],children:e.keyCombo.map((function(n,t){return(0,o.tZ)(f,(0,i.Z)((0,r.Z)({},e),{keyCombo:n}),t)}))});var n=(0,a.QR)(e.keyCombo);return(0,o.tZ)(u.G,{css:[d.shortcut,e.hideBorder?d.noBorder:d.block,e.small?d.sizeSmall:d.sizeDefault],title:e.keyCombo,children:n.map((function(n){var t;return(0,o.tZ)(v,{text:n,hideBorder:e.hideBorder,small:e.small,isActive:null===e||void 0===e||null===(t=e.match)||void 0===t?void 0:t.includes(n.toLowerCase())},n)}))})}var p=(0,l.X)({root:[c.l0.color.foregroundDimmest,c.l0.position.relative,c.l0.px(4),c.l0.py(2),{fontSize:"inherit",width:"max-content",textAlign:"center",textTransform:"capitalize"}],border:[c.l0.coverContainer,c.l0.borderRadius(4),{opacity:.5,minWidth:c.TV.space16,border:"1px solid",borderColor:c.TV.outlineStrongest}]}),h={Ctrl:s.V5?"\u2303":"Ctrl",Cmd:s.V5?"\u2318":"Cmd",Alt:s.V5?"\u2325":"Alt",Shift:s.V5?"\u21e7":"Shift",Enter:s.V5?"Return":"Enter",ArrowLeft:"\u2190",ArrowRight:"\u2192",ArrowUp:"\u2191",ArrowDown:"\u2193"," ":"Space"};function v(e){var n,t=e.text,r=e.isActive,i=void 0!==r&&r,a=e.hideBorder,l=void 0!==a&&a,s={fontWeight:c.TV.fontWeightMedium,color:c.TV.foregroundDefault},d={borderColor:c.TV.foregroundDefault,opacity:1};return(0,o.BX)(u.G,{css:p.root,style:i?s:void 0,children:[null!==(n=h[t])&&void 0!==n?n:t,l?null:(0,o.tZ)(u.G,{css:p.border,style:i?d:void 0})]})}},92003:function(e,n,t){t.d(n,{GO:function(){return u},Il:function(){return o.Il},bM:function(){return c.bM},gf:function(){return o.gf}});var r=t(4541),i=t(50959),o=t(20324),a=t(47308),l=t(12018),c=t(43754);function u(e){var n=(0,o.ns)(e);return(0,r.BX)(o.Ge.Provider,{value:n,children:[e.children,(0,r.tZ)(s,{})]})}function s(){var e=(0,o.gk)(),n=(0,o.XU)(),t=(0,i.useRef)(null),r=(0,l.P5)({controlName:"flag-run-keybindings-in-capture"}),c=function(e,n){if(e){var t=e.run,r=e.bubble;if(!1===t())return;if(n.preventDefault(),!r)return 1}},u=function(e,n){e&&!1!==e.run()&&(n.defaultPrevented||n.preventDefault())};return(0,i.useEffect)((function(){var i=function(r){if(e){var i=(0,a.IX)(r);if(i)if(t.current){var o=n.scopedShortcuts.get(t.current),l=n.globalShortcuts.get(t.current);if(t.current=null,o&&"chord"===o.type){var s=o.matches.get(i);if(c(s,r))return}if(l&&"chord"===l.type){var d=l.matches.get(i);u(d,r)}}else{var f=n.scopedShortcuts.get(i),p=n.globalShortcuts.get(i);if(f||p){if("chord"===(null===f||void 0===f?void 0:f.type)||"chord"===(null===p||void 0===p?void 0:p.type))return t.current=i,void r.preventDefault();if(f&&"shortcut"===f.type)if(c(f,r))return;p&&"shortcut"===p.type&&u(p,r)}}}};return document.addEventListener("keydown",i,r),function(){document.removeEventListener("keydown",i,r)}}),[e,n,r]),null}},92746:function(e,n,t){t.d(n,{_:function(){return Z},O:function(){return g}});var r=t(57135),i=t(2272),o=t(96583),a=t(47308),l=t(72006),c=t(43119),u=t(71440),s=t(59187);function d(){var e=(0,c.Z)(["\n  mutation SetUserKeybindings($input: SetUserKeybindingsInput!) {\n    setUserKeybindings(input: $input) {\n      ... on Keybindings {\n        keybindings\n      }\n    }\n  }\n"]);return d=function(){return e},e}var f={},p=(0,u.Ps)(d());var h=t(7247),v=t(65917),m=t(77030);function g(){var e=(0,m.O)(),n=(0,i.Z)(function(e){var n=(0,l.Z)({},f,e);return s.D(p,n)}(),1)[0];return(0,h.Z)((function(){return function(){var t=(0,r.Z)((function(t){var r,a,l,c,u,s,d,f,p;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:r=[],a=!0,l=!1,c=void 0;try{for(u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)d=(0,i.Z)(s.value,2),f=d[0],p=d[1],r.push({commandId:f,keyCombo:p})}catch(h){l=!0,c=h}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return[4,n({variables:{input:{environment:e,platform:(0,v.X)(),keybindings:r}}})];case 1:return o.sent(),[2]}}))}));return function(e){return t.apply(this,arguments)}}()}),[e,n])}function y(e){if(e&&"object"===typeof e&&"commandId"in e&&"string"===typeof e.commandId&&"keyCombo"in e){if(Array.isArray(e.keyCombo)){var n=(0,a.uv)(e.keyCombo);return{commandId:e.commandId,keyCombo:n}}if("string"===typeof e.keyCombo){var t=(0,a.gD)(e.keyCombo);return{commandId:e.commandId,keyCombo:t}}return{commandId:e.commandId,keyCombo:null}}}function Z(e){var n=new Map;if(!Array.isArray(e))return n;var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=y(o.value);l&&n.set(l.commandId,l.keyCombo)}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}},65917:function(e,n,t){t.d(n,{X:function(){return o}});var r=t(31296),i=t(96385);function o(){return r.V5||r.gn?i.K5.Mac:r.ED?i.K5.Windows:i.K5.Linux}},94517:function(e,n,t){t.d(n,{h:function(){return u},x:function(){return c}});var r=t(9970),i=t(50959),o=t(83871),a=t(47236),l=(0,a.cn)([]);function c(e,n){var t=n.run,o=n.enabled,c=void 0===o||o,u=(0,a.b9)(l);(0,i.useEffect)((function(){if(c){var n=(Array.isArray(e)?e:[e]).map((function(e){return{shortcut:e,run:t}}));return u((function(e){return(0,r.Z)(e).concat((0,r.Z)(n))})),function(){u((function(e){return e.filter((function(e){return!n.includes(e)}))}))}}}),[e,t,u,c])}function u(){var e=(0,a.Dv)(l);return(0,i.useEffect)((function(){var n=function(n){var t=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c,u=a.value,s=u.shortcut,d=u.run;Boolean(s.cmdOrCtrlKey)===Boolean((0,o.j)(n))&&Boolean(s.altKey)===Boolean(n.altKey)&&Boolean(s.shiftKey)===Boolean(n.shiftKey)&&(null===(c=s.key)||void 0===c?void 0:c.toLowerCase())===n.key.toLowerCase()&&(n.preventDefault(),d(s))}}catch(f){r=!0,i=f}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}),[e]),null}},78854:function(e,n,t){function r(e,n){return new Promise((function(t){var r=e.openChannel({service:"gcsfiles"},(function(e){return e.channel.request({persistMirror:{path:n}}).then((function(e){e.ok,r(),t()})),function(e){e.willReconnect&&r()}}))}))}t.d(n,{r:function(){return r}})},21396:function(e,n,t){t.d(n,{e:function(){return E},Z:function(){return T}});var r=t(72006),i=t(2272),o=t(85234),a=t.n(o),l=t(72865),c=t(39517),u=t(77637),s=t(88254),d="exit status 1";function f(e){var n=e.execer,t=e.onComplete,r=e.onError,i=e.onParse,o=(0,u.Z)(e,["execer","onComplete","onError","onParse"]);if(0!==o.query.length){var a=new TextEncoder,f=(0,c.Tq)(),p=0,h=0,v=function(){},m=function(e){r(e),t("error")},g=n.onOutput((function(e){var n=a.encode(e).length;h+=n;var t=f(e);if(t){var r=t.error,o=t.filesMap,l=t.filesMapChanges;r&&m(r),p=o.size,l.forEach((function(e){var n=o.get(e);n&&o.set(e,(0,c.Vd)(n))})),i(o,l)}})),y=n.onStderr((function(e){if(e.trim()===d)return m(l.f.EMPTY_RESULTS);m(l.f.INVALID_COMMAND)}));v=function(){g(),y()};var Z=(0,c.PR)(o);n.request({args:Z}).then((function(e){if(e.error)return e.error.trim()===d?m(l.f.EMPTY_RESULTS):m(l.f.INVALID_COMMAND);var n;n="finished",0!==p||"finished"!==n?("finished"===n?t(n,{bytes:h}):t(n),v()):m(l.f.EMPTY_RESULTS)})).catch((function(e){return s.Tb(new Error("Ripgrep search command failed with error: ".concat(e))),m(l.f.INVALID_COMMAND)}))}else t("abort")}var p=t(86763),h=t.n(p),v=t(57135),m=t(9970),g=t(96583),y=t(14080),Z="signal: broken pipe",b="Channel closed";function w(){return(w=(0,v.Z)((function(e){var n,t,r,i,o,a,f;return(0,g.__generator)(this,(function(p){switch(p.label){case 0:return t=e.container,0===(r=(0,u.Z)(e,["container"])).query.trim().length?[2,x(l.f.EMPTY_QUERY)]:t.getConnectionState()===y.em.DISCONNECTED?[2,x(l.f.CONTAINER_DISCONNECTED)]:t.getConnectionState()===y.em.CONNECTING?[2,x(l.f.CONTAINER_CONNECTING)]:[4,(n=t).exec.apply(n,(0,m.Z)((0,c.PR)(r)))];case 1:if(i=p.sent(),o=i.output,a=i.error)switch(a){case d:return[2,x(l.f.EMPTY_RESULTS)];case Z:return[2,x(l.f.PARTIAL_RESULTS)];case b:return[2,x(l.f.CHANNEL_CLOSED)];default:return s.Tb(new Error("Ripgrep search command failed with error: ".concat(a))),[2,{error:a,data:null}]}return(null===o||void 0===o?void 0:o.trim())&&((f=(0,c.Tq)()(o))&&0!==f.filesMap.size)?[2,x(f.error,f.filesMap)]:[2,x(l.f.EMPTY_RESULTS)]}}))}))).apply(this,arguments)}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{error:e,data:n}}var C=t(2044),k=t(91355),S=t(47843);function T(e){var n=e.container,t=e.onError,i=e.onUpdate,o=e.onLoadingStateChange,u=e.isStreaming,s=e.trackLatency,d=void 0!==s&&s,p=(0,C.Z)({container:n}),v=[],m=a()(),g=Date.now(),y=function(e){i(v=e)};return h()((function(e){var n=a()();m=n,g=Date.now(),t(null),o(!0);var i=!0;if(""===e.query)return y([]),void o(!1);f((0,r.Z)({execer:p,onComplete:function(r,i){if(m===n){o(!1);var a,u,s,f,p="finished"===r&&i&&i.bytes===c.Ak;if(p&&t(l.f.PARTIAL_RESULTS),d)S.kg.time("".concat(k.U3.FILE_SEARCH_USED," - complete"),Date.now()-g,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(s=null===e||void 0===e||null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,hasExcludes:(null!==(f=null===e||void 0===e||null===(u=e.excludeGlobs)||void 0===u?void 0:u.length)&&void 0!==f?f:0)>0,latency:Date.now()-g,isPartialResults:p})}},onError:function(e){m===n&&t(e)},onParse:function(t,r){if(m===n){if(i){var a,l,s,f;if(d)S.kg.time("".concat(k.U3.FILE_SEARCH_USED," - first_chunk"),Date.now()-g,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(s=null===e||void 0===e||null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,hasExcludes:(null!==(f=null===e||void 0===e||null===(l=e.excludeGlobs)||void 0===l?void 0:l.length)&&void 0!==f?f:0)>0});y((0,c.Md)([],t,r)),i=!1}else y((0,c.Md)(v,t,r));u&&o(!1)}},mode:"json",context:0},e))}),200)}function E(e){var n=e.container,t=h()((function(e,t,o){(function(e){return w.apply(this,arguments)})((0,r.Z)({container:n,mode:"json",context:1,isCaseSensitive:!1},e)).then((function(e){var n=e.data?function(e){var n={},t=!0,r=!1,o=void 0;try{for(var a,l=e.entries()[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=(0,i.Z)(a.value,2),u=c[0],s=c[1];n[u]=s.lines.map((function(e){return{content:e.content,lineNumber:e.lineNumber,matches:e.matches.map((function(e){return{column:e.start,length:e.length}}))}})).filter((function(e){return e.matches.length>0}))}}catch(d){r=!0,o=d}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}return n}(e.data):{},r=e.error===l.f.PARTIAL_RESULTS;return r?t({error:null,results:n,isPartialResult:r}):e.error?t({error:e.error,results:null,isPartialResult:r}):t({error:null,results:n,isPartialResult:r})})).catch(o)}),200);return function(e){return new Promise((function(n,r){return t(e,n,r)}))}}},18970:function(e,n,t){t.d(n,{Eu:function(){return c},m6:function(){return i}});var r=t(9970);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[],r=function(e){return e.forEach((function(e){return e&&t.push("-g",e)}))},i=[],l=[],c=!0,u=!1,s=void 0;try{for(var d,f=e[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;p.startsWith("**")?i.push(p):l.push(p)}}catch(h){u=!0,s=h}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}return l.length>0&&(r(["!*"]),new Set(l).forEach((function(e){r(a(e).map(o))}))),r(i),r(n.map((function(e){return"!".concat(o(e))}))),t}function o(e){return e.startsWith("**")||e.startsWith("/")?e:"/".concat(e)}function a(e){var n=function(e){var n;Array.isArray(i[e])||(i[e]=[]);var o=t[e],a=o.startsWith("{")&&o.endsWith("}")?c(o.substring(1,o.length-1),","):[o];(n=i[e]).push.apply(n,(0,r.Z)(a.map((function(n){var t=i[e-1];return t&&t.length>0?t.map((function(e){return"".concat(e,"/").concat(n)})):n})).flat(2)))},t=c(e,"/").filter((function(e){return e.length>0}));"**"!==t[t.length-1]&&t.push("**");for(var i={},o=0;o<t.length;o++)n(o);return Object.values(i).flat(2)}var l=function(){var e={},n={},t=function(t,r){e[t]=r,n[r]=t};return t("{","}"),t("(",")"),t("[","]"),{hasKey:function(n){return n in e},getKey:function(n){return e[n]},hasValue:function(e){return e in n},getValue:function(e){return n[e]}}}();function c(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(0===e.length)return[];var t=[],r=[],i="",o=!0,a=!1,c=void 0;try{for(var u,s=e[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var d=u.value;if(d===n){if(0===r.length){t.push(i),i="";continue}}else if(l.hasKey(d))r.push(d);else if(l.hasValue(d)&&r.pop()!==l.getValue(d))return[e];i+=d}}catch(f){a=!0,c=f}finally{try{o||null==s.return||s.return()}finally{if(a)throw c}}return 0!==r.length?[e]:(i.length>0&&t.push(i),t)}},39517:function(e,n,t){t.d(n,{Ak:function(){return d},Tq:function(){return f},PR:function(){return y},Vd:function(){return m},Md:function(){return g}});var r=t(72006),i=t(4405),o=t(9970);function a(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.map((function(e){return e.match(/["\s]/)&&!e.match(/'/)?"'".concat(e.replace(/(['\\])/g,"\\$1"),"'"):e.match(/["'\s]/)?'"'.concat(e.replace(/(["\\$`!])/g,"\\$1"),'"'):e.replace(/[#!"$&'()*,:;<=>?@[\\\]^`{|}]/g,"\\$&")})).join(" ")}var l=t(18970),c=t(72865),u=t(47843),s=t(91620).lW,d=524288;function f(){var e="",n=new Map;return function(t){var r=new Set,i=!1;if(t.trim().startsWith("error"))return{error:c.f.INVALID_COMMAND,filesMap:n,filesMapChanges:r};var o=t.indexOf("\n"),a=0,l=e+t;if(o>=0){for(o+=e.length;o>=0;){var u=l.substring(a,o).trim();if(0!==u.length){var s=p(u);if(s)h(s,n,r)||(i=!0)}a=o+1,o=l.indexOf("\n",a)}return e=l.substring(a),{error:i?c.f.INVALID_LINE:null,filesMap:n,filesMapChanges:r}}e=l}}function p(e){try{return JSON.parse(e)}catch(n){return null}}function h(e,n,t){switch(e.type){case"begin":var o=v(e.data.path);if(!o)return!1;n.set(o,{path:o,lines:[],dedentBy:0}),t.add(o);break;case"end":return!0;case"match":case"context":var a=v(e.data.path);if(!a)return!1;t.add(a);var l=n.get(a);if(!l)return!1;var c=function(e,n){var t,o,a=v(e.data.lines);if(!a)return null;var l=a.trimEnd().split(/\r?\n/),c=[];""===(null===(t=l[0])||void 0===t?void 0:t.trim())&&l.shift();""===(null===(o=l[l.length-1])||void 0===o?void 0:o.trim())&&l.pop();var u=0,s=0,d=e.data.submatches;return l.forEach((function(n,t){var r=e.data.line_number+t,i=s;s+=n.length+1;for(var o=[];u<d.length;){var a=d[u];if(a.start>=s)break;var l=a.start-i,f=void 0;if(f=a.end<s?a.end-a.start:a.end===s?a.end-a.start-1:n.length-l,l<n.length&&o.push({start:l,length:f}),a.end>s){a.start=s;break}u++}c.push({lineNumber:r,content:n,matches:o})})),(0,i.Z)((0,r.Z)({},n),{lines:n.lines.concat(c)})}(e,l);return c&&n.set(a,c),!0;case"error":return u.kg.error("Invalid Search Line",{line:JSON.stringify(e)}),!1}return!0}function v(e){return e?"bytes"in e?s.from(e.bytes,"base64").toString():e.text:null}function m(e){var n,t=e.lines.length>0?(n=Math).min.apply(n,(0,o.Z)(e.lines.map((function(e){return e.content.match(/^[\t ]+/)})).flat().map((function(e){return(null===e||void 0===e?void 0:e.length)||0})))):0;return(0,i.Z)((0,r.Z)({},e),{dedentBy:t})}function g(e,n,t){for(var r=(0,o.Z)(e),i=new Set,a=0;a<r.length;a++){var l=r[a].path,c=n.get(l);t.has(l)&&c&&(r[a]=c,i.add(l))}var u=!0,s=!1,d=void 0;try{for(var f,p=t[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value,v=n.get(h);!i.has(h)&&v&&r.push(v)}}catch(m){s=!0,d=m}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}return r}function y(e){var n,t=e.mode,r=e.query,i=e.context,c=e.isRegex,u=e.isCaseSensitive,s=e.isMatchingWholeWords,f=e.includeGlobs,p=e.excludeGlobs,h=["rg"];switch(t){case"json":h.push("--json");break;case"files":h.push("--files-with-matches")}return null!==i&&h.push("--context","".concat(i)),r.includes("\n")&&h.push("--multiline"),c||h.push("--fixed-strings"),h.push("--max-count","100"),h.push("--max-filesize","4M"),h.push("--max-depth","24"),h.push("--max-columns","512"),h.push("--max-columns-preview"),h.push(u?"--case-sensitive":"--ignore-case"),s&&h.push("--word-regexp"),(n=h).push.apply(n,(0,o.Z)((0,l.m6)(f,p))),h.push("--",r),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return["sh","-c","".concat(a.apply(void 0,(0,o.Z)(e))," | head -c ").concat(n)]}(h)}},72865:function(e,n,t){var r;t.d(n,{f:function(){return r}}),function(e){e.PARTIAL_RESULTS="Displaying partial results, try being more specific with your search.",e.EMPTY_RESULTS="Nothing came up searching your Repl's content.",e.EMPTY_QUERY="No search query was provided.",e.INVALID_LINE="We encountered an invalid line while parsing your search results.",e.INVALID_COMMAND="Ripgrep returned an invalid response.",e.CONTAINER_DISCONNECTED="Disconnected from the container.",e.CONTAINER_CONNECTING="Connecting to the container.",e.CHANNEL_CLOSED="Channel was closed."}(r||(r={}))},48665:function(e,n,t){t.d(n,{YI:function(){return A},kW:function(){return B}});var r,i=t(72006),o=t(4405),a=t(4541),l=t(95980),c=t.n(l),u=(t(50959),t(79197));!function(e){e.TEXT="TEXT",e.MENTION="MENTION",e.LINK="LINK",e.REPL_LINK="REPL_LINK",e.DEEP_LINK="DEEP_LINK",e.CODE="CODE",e.BOLD="BOLD",e.ITALICS="ITALICS",e.STRIKETHROUGH="STRIKETHROUGH",e.QUOTE="QUOTE"}(r||(r={}));var s=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)(u.Z,{size:"small",onClick:t,children:n.content})},d=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)(u.Z,{size:"small",fontWeight:"medium",onClick:t,children:n.content})},f=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)("a",{href:n.url,onClick:t,rel:"noreferrer noopener nofollow",target:"_blank",children:n.content})},p=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)("a",{href:n.url,onClick:t,target:"_blank",children:n.content})},h=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)("a",{href:n.url,onClick:t,children:n.content})},v=function(e){var n=e.fragment,t=e.onClick,r=e.style;return(0,a.tZ)("code",{onClick:t,style:r,children:n.content})},m=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)("b",{onClick:t,children:n.content})},g=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)("i",{onClick:t,children:n.content})},y=function(e){var n=e.fragment,t=e.onClick;return(0,a.BX)("span",{onClick:t,className:"jsx-e2f6e2707e7599fa",children:[n.content,(0,a.tZ)(c(),{id:"e2f6e2707e7599fa",children:"span.jsx-e2f6e2707e7599fa{text-decoration:line-through}"})]})},Z=function(e){var n=e.fragment,t=e.onClick;return(0,a.BX)("blockquote",{onClick:t,className:"jsx-8741a91fadaf26be",children:[n.content,(0,a.tZ)(c(),{id:"8741a91fadaf26be",children:"blockquote.jsx-8741a91fadaf26be{border-left:2px solid var(--foreground-dimmest);padding-left:6px;color:var(--foreground-dimmest)}"})]})},b=/(@[0-9a-zA-Z_]+)/,w=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,x=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,C=/(`.+?`)/,k=/(\*\*.+?\*\*)/,S=/(_.+?_)/,T=/(\*.+?\*)/,E=/(~~.+?~~)/,R=/(^>.+?$\n?)/m,I=/\/@([0-9a-zA-Z_]+)\/(.+)/;function G(e){var n=e.url;return{type:r.LINK,url:n,content:n}}function D(e){var n=e.hash;return{type:r.DEEP_LINK,url:n,content:n}}function _(e,n){if(x.test(e)){var t={};try{t=new window.URL(e)}catch(o){return{content:e,type:r.TEXT}}return["repl.it","replit.com","firewalledreplit.com",document.location.host].includes(t.host)?t.pathname===n.replUrl?D({hash:t.hash}):I.test(t.pathname)?function(e){var n=e.url,t=I.exec(n.pathname);if(!t)throw new Error("Not a Repl URL");return{type:r.REPL_LINK,url:n.href,content:"@".concat(t[1],"/").concat(t[2]).concat(n.hash)}}({url:t}):G({url:e}):G({url:e})}if(w.test(e))return D({hash:e});if(R.test(e))return function(e){var n=e.text;return{type:r.QUOTE,content:n}}({text:e.slice(1).trim()});if(C.test(e))return function(e){var n=e.code;return{type:r.CODE,content:n}}({code:e.slice(1,-1)});if(k.test(e))return function(e){var n=e.text;return{type:r.BOLD,content:n}}({text:e.slice(2,-2)});if(S.test(e)||T.test(e))return function(e){var n=e.text;return{type:r.ITALICS,content:n}}({text:e.slice(1,-1)});if(E.test(e))return function(e){var n=e.text;return{type:r.STRIKETHROUGH,content:n}}({text:e.slice(2,-2)});if(b.test(e)){var i=e.slice(1);if(!n.users||n.users.includes(i))return function(e){var n=e.username;return{type:r.MENTION,username:n,content:"@".concat(n)}}({username:i})}return{content:e,type:r.TEXT}}var P=new RegExp([C.source,k.source,S.source,T.source,E.source,x.source,b.source,w.source,R.source].join("|"),"m");function B(e,n){var t=e.split(P),i=[],o=[],a=!0,l=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;if(d){var f=_(d,n);if(f){if(f.type===r.MENTION){if(!f.username)continue;i.push(f.username)}o.push(f)}}}}catch(p){l=!0,c=p}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return{tokens:o,mentions:i}}function A(e){var n=e.message,t=e.onMentionClick,l=void 0===t?function(){}:t,c=e.codeStyles,u=void 0===c?{}:c;return(0,a.tZ)(a.HY,{children:n.tokens.map((function(e,n){var t={fragment:e,key:n};return e.type===r.MENTION?(0,a.tZ)(d,(0,o.Z)((0,i.Z)({},t),{onClick:function(){return l(e)}})):e.type===r.LINK?(0,a.tZ)(f,(0,i.Z)({},t)):e.type===r.REPL_LINK?(0,a.tZ)(p,(0,i.Z)({},t)):e.type===r.DEEP_LINK?(0,a.tZ)(h,(0,i.Z)({},t)):e.type===r.CODE?(0,a.tZ)(v,(0,o.Z)((0,i.Z)({},t),{style:u})):e.type===r.BOLD?(0,a.tZ)(m,(0,i.Z)({},t)):e.type===r.ITALICS?(0,a.tZ)(g,(0,i.Z)({},t)):e.type===r.STRIKETHROUGH?(0,a.tZ)(y,(0,i.Z)({},t)):e.type===r.QUOTE?(0,a.tZ)(Z,(0,i.Z)({},t)):(0,a.tZ)(s,(0,i.Z)({},t))}))})}},92021:function(e,n,t){t.d(n,{D:function(){return Io}});var r=t(72006),i=t(4405),o=t(9970),a=t(4541),l=t(30265),c=t(42858),u=t(12736),s=t(47236),d=t(94370),f=t.n(d),p=t(45167),h=t(2272),v=t(19448),m=t(50959),g=t(64174),y=t(22167),Z=t(25776),b=[{img:"/public/images/kaboomdraw/rect.png",code:"\ndrawRect({\n\tpos: vec2(80, 80),\n\twidth: 120,\n\theight: 80,\n\tcolor: rgb(250, 242, 164),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/triangle.png",code:"\ndrawTriangle({\n\tpos: vec2(100, 100),\n\tp1: vec2(0, -48),\n\tp2: vec2(-60, 48),\n\tp3: vec2(60, 48),\n\tcolor: rgb(164, 250, 204),\n})\n  ".trim()},{img:"/public/images/kaboomdraw/circle.png",code:"\ndrawCircle({\n\tpos: vec2(100, 100),\n\tradius: 48,\n\tcolor: rgb(181, 164, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/ellipse.png",code:"\ndrawEllipse({\n\tpos: vec2(120, 100),\n\tradiusX: 64,\n\tradiusY: 40,\n\tcolor: rgb(164, 209, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/polygon.png",code:"\ndrawPolygon({\n\tpos: vec2(100, 100),\n\tpts: [\n\t\tvec2(0, -48),\n\t\tvec2(-64, 0),\n\t\tvec2(-32, 64),\n\t\tvec2(32, 64),\n\t\tvec2(64, 0),\n\t],\n\tcolor: rgb(250, 164, 226),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/text.png",code:'\ndrawText({\n\ttext: "hi",\n\tpos: vec2(60, 60),\n})\n    '.trim()}],w=function(e){var n=e.img,t=e.code,r=(0,h.Z)((0,g.c)({item:{type:v.z.Code,code:t},type:v.z.Code}),2)[1];return(0,a.tZ)("img",{alt:"kaboom shape",ref:r,src:n,css:[y.l0.p(12),{userDrag:"none",height:"100%",cursor:"pointer",transition:"0.1s transform",":hover":{transform:"scale(1.2)"}}]})},x=function(){return(0,a.tZ)(Z.G,{css:[y.l0.flex.row,y.l0.justify.spaceEvenly,y.l0.backgroundColor.backgroundHigher,y.l0.borderRadius(8),y.l0.width("calc(100% - 32px)"),y.l0.height("64px"),y.l0.position.absolute,y.l0.overflowY("hidden"),{zIndex:5,left:16,bottom:16,border:"solid 1px var(--outline-dimmest)"}],children:b.map((function(e){return(0,a.tZ)(w,(0,r.Z)({},e),e.img)}))})},C=t(49773),k=t(71206),S=t(57135),T=t(96583),E=t(46542),R=t(14806),I=t(73691),G=t(75030),D=t(50260),_=t(3668),P=t(37676),B=t(77408),A=t(44867),U=t(24403),N=t(51609),L=t(22847),X=t(8952),M=I.tk.baseTheme({"& .cm-contextual-ai-tooltip .cm-content":{paddingBottom:"0px"}});var O=function(e){var n=e.children,t=e.title,r=e.newInferenceAlt,i=e.width,o=e.dataCy,l=e.onRequestClose,c=e.onRequestNewInference,u=(0,A.Z)(l,[]);return(0,a.tZ)("div",{"data-cy":o,ref:u,children:(0,a.tZ)(X.Z,{bsod:!0,tags:{ai:!0},extras:{title:t},origin:"ErrorBoundary: ContextualAiModal",children:(0,a.BX)(P.T,{background:"higher",css:[y.l0.borderRadius(8),y.l0.maxWidth("100%"),y.l0.width(i||320),{background:y.TV.backgroundHigher,boxShadow:y.TV.shadow1,borderWidth:1,borderColor:y.TV.backgroundHighest,borderStyle:"solid"}],children:[(0,a.BX)("div",{css:[y.l0.display.flex,y.l0.justify.spaceBetween,y.l0.flex.row,y.l0.rowWithGap(2),y.l0.p(8),{borderBottom:"1px solid",borderBottomColor:y.TV.backgroundHighest}],children:[(0,a.BX)("div",{css:[y.l0.display.grid,y.l0.align.center,{gridAutoFlow:"column",gridGap:y.TV.space8}],children:[(0,a.tZ)("div",{css:[{color:y.TV.foregroundDefault}],children:t}),(0,a.tZ)("a",{href:B.$q,target:"_blank",css:y.l0.color.foregroundDefault,children:(0,a.tZ)(_.h,{alt:"Learn more about AI at Replit",tooltipDelay:"none",tooltipContents:"This feature is powered by Replit Ghostwriter. Click to learn more.",type:"button",children:(0,a.tZ)(N.Z,{color:y.TV.foregroundDimmer})})}),c?(0,a.tZ)(_.h,{alt:r||"Try again",onClick:c,type:"button",children:(0,a.tZ)(L.Z,{})}):null]}),(0,a.tZ)("div",{className:"right",children:(0,a.tZ)(_.h,{alt:"Close",tooltipHidden:!0,onClick:l,type:"button",children:(0,a.tZ)(U.Z,{})})})]}),n]})})})},F=R.Py.define({map:function(e,n){if(e)return e.map(n)}});function W(e){var n=e.setExplainCodeParams,t=R.QQ.define({create:function(){return null},update:function(e,n){var t=!1,r=null;return(0,D.j)(n,F,(function(e){r=e.value,t=!0})),t?r:e&&!n.changes.empty?e.map(n.changes):e},provide:function(e){return[I.hJ.compute([e],(function(t){var r=t.field(e);return r?{pos:r.to,create:function(){var e=document.createElement("div");return e.className="cm-contextual-ai-tooltip",n({dom:e,code:t.doc.sliceString(r.from,r.to)}),{dom:e}}}:null}))]}});return[t,M]}var H=R.Py.define();function z(e){var n=e.setGenerateCodePortalProps,t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.state,i=t.doc.sliceString(t.selection.main.from,t.selection.main.to);n({dom:r,selectedCode:i,onRequestClose:function(){e.dispatch({effects:H.of(!1)}),e.hasFocus||e.focus()},insertCode:function(n){var t=e.state.selection.main.head;e.dispatch({changes:{from:t,insert:n},effects:H.of(!1)}),e.hasFocus||e.focus()}})},r=document.createElement("div");r.className="cm-contextual-ai-tooltip";var i={dom:r,mount:function(e){t(e)},update:function(e){(e.docChanged||e.selectionSet)&&t(e.view,e.state)},destroy:function(){n(null)}};return[R.QQ.define({create:function(){return null},update:function(e,n){return null!==e&&n.docChanged&&(e=n.changes.mapPos(e)),(0,D.j)(n,H,(function(t){e=t.value?n.newSelection.main.to:null})),e},provide:function(e){return I.hJ.from(e,(function(e){return null===e?null:{pos:e,create:function(){return i}}}))}}),M]}var V=R.Py.define();function j(e){var n=e.setTransformCodePortalProps,t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.state,i=t.doc.sliceString(t.selection.main.from,t.selection.main.to);n({dom:r,selectedCode:i,onRequestClose:function(){e.dispatch({effects:V.of(!1)}),e.hasFocus||e.focus()},replaceCode:function(n){var t=e.state.selection.main.from,r=e.state.selection.main.to;e.dispatch({changes:{from:t,to:r,insert:n},effects:V.of(!1)}),e.hasFocus||e.focus()}})},r=document.createElement("div");r.className="cm-contextual-ai-tooltip";var i={dom:r,mount:function(e){t(e)},update:function(e){(e.docChanged||e.selectionSet)&&t(e.view,e.state)},destroy:function(){n(null)}};return[R.QQ.define({create:function(){return null},update:function(e,n){var t=n.newSelection.main;return t.from===t.to?null:(null!==e&&n.docChanged&&(e=n.changes.mapPos(e,R.gc.TrackDel)),(0,D.j)(n,V,(function(n){e=n.value?t.to:null})),e)},provide:function(e){return I.hJ.from(e,(function(e){return null===e?null:{pos:e,create:function(){return i}}}))}}),M]}var q=t(84445),$=t(47843),Y=t(91355),K=t(72402),Q=t(38986),J=t(8189),ee=t(42362),ne=t(37195),te=t(44882),re=t(37248),ie=t(85234),oe=t.n(ie),ae=t(35427),le=t(66091),ce=t(5683),ue=t(45347),se=t(32064),de=new(function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(){return(0,le.Z)(this,t),n.apply(this,arguments)}return t.prototype.toDOM=function(){return document.createTextNode("\u25cf")},t}(I.SJ)),fe=R.Py.define({}),pe=R.Py.define({}),he=I.p.line({attributes:{class:"cm-debuggerLine"}}),ve=R.Py.define({}),me=R.QQ.define({create:function(){return null},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(ve))return l.value}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}});function ge(e){var n=new R.f_,t=e.state.field(me);if(null!==t&&t<=e.state.doc.lines){var r=e.state.doc.line(t);n.add(r.from,r.from,he)}return n.finish()}var ye=I.lg.fromClass(function(){function e(n){(0,le.Z)(this,e),this.decorations=ge(n)}return e.prototype.update=function(e){this.decorations=ge(e.view)},e}(),{decorations:function(e){return e.decorations}});function Ze(e,n){e.dispatch({effects:pe.of({pos:n})})}var be=R.QQ.define({create:function(){return R.Xs.empty},update:function(e,n){e=e.map(n.changes);var t=!0,r=!1,i=void 0;try{for(var o,a=function(){var t=o.value;if(t.is(pe)){var r=!1;e.between(t.value.pos,t.value.pos+1,(function(){r=!0})),e=r?e.update({filter:function(e){return e!==t.value.pos}}):e.update({add:[de.range(t.value.pos)]})}t.is(fe)&&(e=Ce(t.value.lines,n.state))},l=n.effects[Symbol.iterator]();!(t=(o=l.next()).done);t=!0)a()}catch(c){r=!0,i=c}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}return e}}),we=I.tk.baseTheme({".cm-breakpoint-gutter .cm-gutterElement":{color:y.TV.accentPrimaryDefault,paddingLeft:y.TV.space4,paddingRight:y.TV.space2,cursor:"default"},".cm-debuggerLine":{backgroundColor:y.TV.accentPrimaryDimmest,borderRadius:y.TV.borderRadius4,marginRight:y.TV.space4}});function xe(e,n){var t;return e&&0!==e.length?null===n||(null===(t=e[0].source)||void 0===t?void 0:t.path)!==n?null:e[0].line:null}function Ce(e,n){var t=(0,o.Z)(new Set(e.filter((function(e){return e<=n.doc.lines})))).map((function(e){return de.range(n.doc.line(e).from)}));return R.Xs.of(t,!0)}var ke=t(83886),Se=t(64400),Te=t(76204),Ee=t(63002),Re=t(25928),Ie=t(61523),Ge=t(52321),De=t(12018),_e=t(73551),Pe=t(92079);function Be(e){var n=e.view,t=e.filePath,r=e.openFile,i=e.askGhostwriter,o=(0,K.Z)(t),a=m.useRef(null),l=m.useRef(0),c=(0,J.Z)().session,u=(0,h.Z)(m.useState(null),2),s=u[0],d=u[1],f=(0,Pe.d)({tablet:!1}),p=(0,De.P5)({controlName:"flag-ghostwriter-chat-explain-code"}),v=(0,ke.eC)(t),g=m.useCallback((function(){d(null),n&&n.focus()}),[n]);m.useEffect((function(){var e=function(e){"Escape"===e.key&&g()};if(s)return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[g,s]),m.useEffect((function(){if(n&&s)return n.scrollDOM.addEventListener("scroll",g),function(){n.scrollDOM.removeEventListener("scroll",g)}}),[n,s,g]);var y=(0,q.Z)((function(){if(n&&s){var e=n.coordsAtPos(l.current);d((function(n){return e?{x:e.left,y:e.top}:n}))}}),{type:"throttle",wait:25}),Z=m.useCallback(function(){var e=(0,S.Z)((function(e,l){var u,s,d,f,v,m,g,y,Z,b,w,x,C,R,G,D,_,P;function B(e,n){return A.apply(this,arguments)}function A(){return(A=(0,S.Z)((function(e,r){var i,l,s,f,p,v,m,g,y;return(0,T.__generator)(this,(function(Z){switch(Z.label){case 0:if(!o||!n)throw new Error("Expected client");return a.current&&o.notify.cancelRequest(a.current),a.current=o.generateId(),i=(0,Re.s)(u.doc,d),[4,e(t,i,{id:a.current,tap:(0,Te.M)(n)})];case 1:if(l=Z.sent(),a.current=null,"error"in l)throw new Error("Something went wrong fetching location: ".concat(l.error.message));return s=l.result,l.cancelled?[2]:s&&0!==s.length?(f=(0,h.Z)(s,1),p=f[0],v=p.uri,m=p.range,g=m.start,(y=o.documentUriToPath(v))!==t?c.openFile(y,{line:g.line+1,col:g.character}):c.updateDeeplink({path:y,line:g.line+1,col:g.character}),[2]):((0,Ge.J)(n,{message:r,offset:d}),[2])}}))}))).apply(this,arguments)}return(0,T.__generator)(this,(function(a){switch(a.label){case 0:if(!n)throw new Error("Expected view");switch(u=n.state,s=u.selection.main,d=s.head,(0,Y.j)(Y.U3.EDITOR_CONTEXT_MENU_ACTION_RAN,{action:e}),e){case k.D2.Cut:return[3,1];case k.D2.Copy:return[3,2];case k.D2.Paste:return[3,3];case k.D2.JumpToDefinition:return[3,8];case k.D2.JumpToTypeDefinition:return[3,10];case k.D2.JumpToImplementation:return[3,12];case k.D2.FindReferences:return[3,14];case k.D2.Rename:return[3,15];case k.D2.SelectAllOccurrences:return[3,16];case k.D2.CodeActions:return[3,17];case k.D2.ToggleBreakpoint:return[3,18];case k.D2.StartThread:return[3,19];case k.D2.ExplainCode:return[3,20];case k.D2.GenerateCode:return[3,21];case k.D2.TransformCode:return[3,22];case k.D2.CopyLinkToPos:return[3,23]}return[3,24];case 1:return f=u.doc.sliceString(s.from,s.to),(0,ne.Z)(f),n.dispatch(u.replaceSelection("")),[3,25];case 2:return v=u.doc.sliceString(s.from,s.to),(0,ne.Z)(v),[3,25];case 3:m="",a.label=4;case 4:return a.trys.push([4,6,,7]),[4,window.navigator.clipboard.readText()];case 5:return m=a.sent(),[3,7];case 6:return g=a.sent(),$.kg.error("CodeMirror context menu paste failed",{message:g.message}),[3,25];case 7:return(0,ee.l)({filePath:t,view:n,clipboardText:m}),[3,25];case 8:if(!o)throw new Error("Expected client");return r?[4,(0,Ie.B)({offset:d,lspClient:o,openFile:r,view:n,newPane:Boolean(null===l||void 0===l?void 0:l.isCmdOrCtrl)})]:[3,25];case 9:return a.sent(),[3,25];case 10:if(!o)throw new Error("Expected client");return[4,B(o.request.findTypeDefinitions,"No type definition found")];case 11:return a.sent(),[3,25];case 12:if(!o)throw new Error("Expected client");return[4,B(o.request.findImplementations,"No implementation found")];case 13:return a.sent(),[3,25];case 14:return n.dispatch({effects:[Se.hI.of(d)]}),[3,25];case 15:return n.dispatch({effects:[Se.nD.of(d)]}),[3,25];case 16:if(u.selection.main.empty){if(!(y=u.wordAt(d)))return[2];n.dispatch({selection:y})}return(0,E.tm)(n),setTimeout((function(){return n.focus()})),[3,25];case 17:return(Z=n.coordsAtPos(d))?(n.dispatch({effects:[ae.O.of(Z)]}),[3,25]):[2];case 18:return b=u.doc.lineAt(d),Ze(n,b.from),[3,25];case 19:return n.dispatch({effects:[Ee.UQ.of(oe()())]}),[3,25];case 20:return p&&i?(w=n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),x=(0,re.r6)(t),C=x,i({type:"explainCode",text:(0,_e.ts)(w,C)}),[3,25]):(R=n.state.selection.main,n.dispatch({effects:[F.of(R),I.tk.scrollIntoView(R.to)]}),[3,25]);case 21:return n.dispatch({effects:H.of(!0)}),[3,25];case 22:return n.dispatch({effects:V.of(!0)}),[3,25];case 23:return G=(0,Re.s)(u.doc,d),D=G.line,_=G.character,P=(0,te.dr)({path:t,line:D+1,col:_}),(0,ne.Z)(P),[3,25];case 24:throw new Error("Unexpected action: ".concat(e));case 25:return[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),[n,o,t,c,r,p,i]),b=(0,h.Z)(m.useState(!1),2),w=b[0],x=b[1];(0,G.Z)({view:n,initialExtension:I.tk.updateListener.of((function(e){e.transactions.some((function(e){return e.reconfigured}))&&x("undefined"!==typeof e.view.state.field(be,!1))}))});var C=(0,Q.Z)(o),D=m.useMemo((function(){if(!n)return[];var e=[];return C&&(C.isFindDefinitionSupported&&e.push(k.D2.JumpToDefinition),C.isFindTypeDefinitionSupported&&e.push(k.D2.JumpToTypeDefinition),C.isFindImplementationSupported&&e.push(k.D2.JumpToImplementation),(C.isFindDefinitionSupported||C.isFindReferencesSupported)&&e.push(k.D2.FindReferences),C.isRenameSupported&&e.push(k.D2.Rename),C.isCodeActionsSupported&&e.push(k.D2.CodeActions)),e.push(k.D2.SelectAllOccurrences),e.push(k.JJ),e.push(k.D2.CopyLinkToPos),w&&e.push(k.D2.ToggleBreakpoint),e.push(k.D2.StartThread),v&&e.push(k.D2.ExplainCode),e.push(k.D2.GenerateCode),e.push(k.D2.TransformCode),e.push(k.JJ),e.push(k.D2.Cut),e.push(k.D2.Copy),window.navigator.clipboard&&"readText"in window.navigator.clipboard&&e.push(k.D2.Paste),e}),[n,C,w,v]),_=(0,G.Z)({view:n});return m.useEffect((function(){if(n){var e=D.filter((function(e){return!(0,k.s3)(e)})).filter((function(e){return"keyboardShortcut"in k.Wo[e]})).filter((function(e){return e!==k.D2.Cut&&e!==k.D2.Copy&&e!==k.D2.Paste})).map((function(e){var n=k.Wo[e].keyboardShortcut,t={key:n.key,preventDefault:!0,run:function(){return Z(e),!0}};return n.altKey&&(t.key="Alt-".concat(t.key)),n.shiftKey&&(t.key="Shift-".concat(t.key)),n.cmdOrCtrlKey&&(t.key="Mod-".concat(t.key)),t}));return n.dispatch({effects:_.reconfigure(I.$f.of(e))}),function(){n.dispatch({effects:_.reconfigure([])})}}}),[n,Z,D,_]),{onAction:Z,actions:D,contextMenuCoords:s,onContextMenu:function(e){if(!f&&n){e.preventDefault();var r=e.clientX,i=e.clientY,o=n.state.selection.main,a=n.posAtCoords({x:r,y:i}),c=n.state.doc.length,u=null===a?c:a;if(l.current=u,u<o.from||u>o.to){var s=R.jT.cursor(u);n.dispatch({selection:s})}var p=(0,re.r6)(t);(0,Y.j)(Y.U3.EDITOR_CONTEXT_MENU_OPENED,{ext:p}),d({x:r,y:i})}},closeMenu:g,resizeRef:y}}var Ae=t(78457),Ue=t(39771);function Ne(e){var n=e.view,t=e.debuggest,r=e.filePath,i=e.isLoading,o=(0,J.Z)().fs,a=(0,Ue.Z)(),l=(0,Ae.Z)(t.mainClient),c=(0,G.Z)({view:n});m.useEffect((function(){if(!i&&a&&l&&n){var e=(0,se.ZF)("/home/runner/".concat(a.slug,"/").concat(r)),t=function(e,n,t,r){var i,o=[];o.push(n.breakpoints.subscribe((function(n){var r=n.get(t);e.dispatch({effects:fe.of({lines:r?r.map((function(e){return e.line})):[]})})})));var a=I.tk.updateListener.of((function(i){i.transactions.forEach((function(i){i.effects.forEach((function(i){if(i.is(pe)){var o=(0,se.om)(t);if(!o)throw new Error("Expected relative path");n.toggleBreakpoint(t,{line:e.state.doc.lineAt(i.value.pos).number,otVersion:r.getOTVersion(o),otIndex:i.value.pos})}}))}))}));o.push(n.stackFrames.subscribe((function(n){var r=xe(n,t);e.dispatch({effects:ve.of(r)})})));var l=(0,I.v5)({class:"cm-breakpoint-gutter",markers:function(e){return e.state.field(be)},initialSpacer:function(){return de},domEventHandlers:{mousedown:function(e,n){return Ze(e,n.from),!0}}}),c=(null===(i=n.breakpoints.current.get(t))||void 0===i?void 0:i.map((function(e){return e.line})))||[],u=[R.Wl.highest(l),be.init((function(e){return Ce(c,e)})),a,me.init((function(){return xe(n.stackFrames.current,t)})),ye,we];return{extensions:u,dispose:function(){return o.forEach((function(e){return e()}))}}}(n,l,e,o),u=t.extensions,s=t.dispose;return n.dispatch({effects:c.reconfigure(u)}),function(){n.dispatch({effects:c.reconfigure([])}),s()}}}),[l,n,a,r,i,o,c])}var Le=t(75242),Xe=t(84626);var Me=function(){return(0,a.tZ)("div",{css:[y.l0.p(16)],children:(0,a.BX)(Xe.Z,{viewBox:"0 0 100 10",backgroundColor:y.TV.backgroundHigher,foregroundColor:y.TV.backgroundHighest,speed:1.5,children:[(0,a.tZ)("rect",{x:"0",y:"0",rx:"2",ry:"2",width:"100",height:"4"}),(0,a.tZ)("rect",{x:"0",y:"6",rx:"2",ry:"2",width:"33",height:"4"})]})})},Oe=t(65001),Fe=t(55544),We=t(40306),He=t(43119),ze=t(71440),Ve=t(67216);function je(){var e=(0,He.Z)(["\n  query CodeExplanation {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return je=function(){return e},e}var qe={},$e=(0,ze.Ps)(je());var Ye=t(42824),Ke=t(29708),Qe=t(47799),Je=t(62830),en=t(10422),nn=t(59187);function tn(){var e=(0,He.Z)(["\n  query ExplainCode($code: String!, $language: String!, $replId: String) {\n    explainCode(code: $code, language: $language, replId: $replId) {\n      ... on ExplainCodeResult {\n        id\n        explanation\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return tn=function(){return e},e}function rn(){var e=(0,He.Z)(["\n  mutation ExplainCodeCodexFeedback($input: CodexFeedback2Input!) {\n    giveCodexFeedback2(input: $input) {\n      ... on CodexFeedback2 {\n        __typename\n        id\n        feedback\n      }\n      ... on UnauthorizedError {\n        __typename\n      }\n      ... on NotFoundError {\n        __typename\n      }\n    }\n  }\n"]);return rn=function(){return e},e}var on={},an=(0,ze.Ps)(tn());var ln=(0,ze.Ps)(rn());var cn=t(30241),un=t(98298),sn=function(){var e=(0,S.Z)((function(e){var n,t,r;return(0,T.__generator)(this,(function(i){switch(i.label){case 0:return n=e.code,t=e.language,[4,null===un.l||void 0===un.l?void 0:un.l.query({query:an,variables:{code:n,language:t}})];case 1:return"ExplainCodeResult"===(null===(r=i.sent())||void 0===r?void 0:r.data.explainCode.__typename)?[2,r.data.explainCode.explanation]:[2]}}))}));return function(n){return e.apply(this,arguments)}}();function dn(e){var n,t,i,o,a,l,c,u,s,d,f,p,v,m,g,y=e.language,Z=e.code,b=(0,cn.Z)(),w=function(e){var n=(0,r.Z)({},on,e);return Ve.a(an,n)}({fetchPolicy:"no-cache",variables:{code:Z,language:y,replId:b},skip:!y||!Z,notifyOnNetworkStatusChange:!0}),x=(0,h.Z)(function(e){var n=(0,r.Z)({},on,e);return nn.D(ln,n)}(),2),C=x[0],k=x[1],E=function(){var e=(0,S.Z)((function(e){var n,t;return(0,T.__generator)(this,(function(r){return"ExplainCodeResult"!==(null===(n=w.data)||void 0===n?void 0:n.explainCode.__typename)||w.loading||k.loading||(C({variables:{input:{feedback:e,inferenceClass:Je.Sg.Explanation,inferenceId:null===(t=w.data)||void 0===t?void 0:t.explainCode.id}}}),(0,Y.j)(Y.U3.CODEX_FEEDBACK_SUBMITTED,{feature:"explanation",language:y,feedback:e})),[2]}))}));return function(n){return e.apply(this,arguments)}}(),R="ExplainCodeResult"===(null===(n=w.data)||void 0===n||null===(t=n.explainCode)||void 0===t?void 0:t.__typename)?w.data.explainCode.explanation:void 0,I="ExplainCodeResult"===(null===(i=w.data)||void 0===i||null===(o=i.explainCode)||void 0===o?void 0:o.__typename)?null===(a=w.data)||void 0===a||null===(l=a.explainCode)||void 0===l?void 0:l.id:void 0,G="UserError"===(null===(c=w.data)||void 0===c||null===(u=c.explainCode)||void 0===u?void 0:u.__typename)||"UnauthorizedError"===(null===(s=w.data)||void 0===s||null===(d=s.explainCode)||void 0===d?void 0:d.__typename)?w.data.explainCode.message:null,D="ExplainCodeResult"===(null===(f=w.data)||void 0===f||null===(p=f.explainCode)||void 0===p?void 0:p.__typename)&&"CodexFeedback2"===(null===(v=k.data)||void 0===v||null===(m=v.giveCodexFeedback2)||void 0===m?void 0:m.__typename)&&w.data.explainCode.id===(null===(g=k.data.giveCodexFeedback2)||void 0===g?void 0:g.id)?k.data.giveCodexFeedback2.feedback:null;return{id:I,getCodeExplanation:sn,loading:w.loading,explanation:R,errorMessage:G,refetchExplanation:(0,S.Z)((function(){return(0,T.__generator)(this,(function(e){return(0,Y.j)(Y.U3.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!0,action:"refresh",language:y}),[2,w.refetch()]}))})),giveCodexFeedback:E,codexFeedback:D}}function fn(e){var n=e.dom,t=e.filePath,r=e.code;return(0,en.createPortal)((0,a.tZ)(pn,{code:r,filePath:t}),n)}function pn(e){var n,t,i=e.filePath,o=e.code,l=function(){null===g||void 0===g||g.dispatch({effects:[F.of(null)]})},c=(0,ke.UP)(i),u=dn({code:o,language:c}),s=u.id,d=u.explanation,f=u.errorMessage,p=u.loading,h=u.refetchExplanation,v=null,g=(0,Qe.uN)(),b=function(e){var n=(0,r.Z)({},qe,e);return Ve.a($e,n)}(),w=b.data,x=b.loading,C="UserPowerUpsTypes"===(null===w||void 0===w||null===(n=w.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)&&(null===w||void 0===w||null===(t=w.currentUser)||void 0===t?void 0:t.userPowerUpsByType.ghostwriter.active);if(m.useEffect((function(){C&&(0,Y.j)(Y.U3.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!1,action:"submit",language:c})}),[c,C]),x)return null;if(p)v=(0,a.tZ)(Me,{});else if(C)v=d&&s?(0,a.BX)("div",{css:[y.l0.p(8),y.l0.display.grid,{gridGap:y.TV.space8}],children:[(0,a.tZ)("pre",{css:{fontFamily:y.TV.fontFamilyCode,whiteSpace:"pre-wrap",lineHeight:y.TV.lineHeightDefault,fontSize:y.TV.fontSizeDefault,color:y.TV.foregroundDefault,backgroundColor:y.TV.backgroundHighest,padding:y.TV.space8,borderRadius:y.TV.borderRadius8},children:d}),p?null:(0,a.tZ)(Ye.Z,{inferenceId:s,language:c,inferenceClass:Je.Sg.Explanation})]}):(0,a.tZ)(Z.G,{css:[y.l0.p(8)],children:(0,a.tZ)(Oe.E,{colorway:"negative",icon:(0,a.tZ)(We.Z,{}),text:null!==f&&void 0!==f?f:"Oops! An unexpected error occurred. Please try again or contact support."})});else if(!C&&!p)return(0,a.tZ)(O,{title:"Explain Code",newInferenceAlt:"Generate new explanation",onRequestClose:l,width:320,children:(0,a.BX)(Z.G,{css:[y.l0.colWithGap(12),y.l0.p(8)],children:[(0,a.tZ)(Fe.xv,{multiline:!0,children:"Activate Ghostwriter to get access to Explain Code and other AI-powered features!"}),(0,a.tZ)(Z.G,{css:{alignSelf:"center"},children:(0,a.tZ)(Ke.Z,{context:"explain_code_modal"})})]})});return(0,a.tZ)(O,{dataCy:"explain-code-modal",title:"Explain Code",newInferenceAlt:"Generate new explanation",onRequestNewInference:h,onRequestClose:l,width:420,children:v})}var hn=t(77637),vn=t(30202),mn=t(46598),gn=t(98260),yn=t(42735),Zn=t(47287),bn=t(75149),wn=t(34592),xn=t(25028),Cn=t(18707),kn=t(95185),Sn=t(54548),Tn=t(31558);function En(){var e=(0,He.Z)(["\n  query GenerateCode($input: GenerateCodeInput!) {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n    generateCode(input: $input) {\n      ... on GenerateCodeResult {\n        id\n        code\n        metadata\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return En=function(){return e},e}function Rn(){var e=(0,He.Z)(["\n  query GenerateCodeModalCurrentUser {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return Rn=function(){return e},e}var In={},Gn=(0,ze.Ps)(En());var Dn=(0,ze.Ps)(Rn());function _n(e){var n,t,i=e.filePath,o=e.selectedCode,l=e.onRequestClose,u=e.insertCode,s=(0,cn.Z)(),d=(0,h.Z)(m.useState(o),2),f=d[0],p=d[1],v=(0,h.Z)(m.useState(""),2),g=v[0],b=v[1],w=(0,h.Z)(m.useState(!1),2),x=w[0],C=w[1],k=m.useRef(null),S=(0,h.Z)(function(e){var n=(0,r.Z)({},In,e);return Tn.t(Gn,n)}({fetchPolicy:"no-cache"}),2),T=S[0],E=S[1],R=E.called,I=E.data,G=E.error,D=E.loading,B=function(e){var n=(0,r.Z)({},In,e);return Ve.a(Dn,n)}(),A=B.data,U=B.loading,N="UserPowerUpsTypes"===(null===A||void 0===A||null===(n=A.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)&&(null===A||void 0===A||null===(t=A.currentUser)||void 0===t?void 0:t.userPowerUpsByType.ghostwriter.active),L=(0,ke.Sf)(i),X=function(){if(!D&&""!==f){var e=f===g;(0,Y.j)(Y.U3.CODEX_FEATURE_USED,{feature:"generation",isRetry:e,action:e?"refresh":"submit",language:L}),b(f),T({variables:{input:{language:L,prompt:f,replId:s}}})}},M=(0,mn.Z)().showConfirm;if(U)return null;if(!N)return(0,a.tZ)(O,{title:"Generate Code",newInferenceAlt:"Generate new code",onRequestClose:l,width:320,children:(0,a.BX)(Z.G,{css:[y.l0.colWithGap(12),y.l0.p(8)],children:[(0,a.tZ)(Fe.xv,{multiline:!0,children:"Activate Ghostwriter to get access to Generate Code and other AI-powered features!"}),(0,a.tZ)(Z.G,{css:{alignSelf:"center"},children:(0,a.tZ)(Ke.Z,{context:"generate_code_modal"})})]})});var F=null,W=null===I||void 0===I?void 0:I.generateCode.__typename;if(D)F=(0,a.tZ)(Me,{});else if(G||"UserError"===W||"UnauthorizedError"===W){var H,z;F=(0,a.tZ)(Z.G,{children:(0,a.tZ)(Oe.E,{colorway:"negative",icon:(0,a.tZ)(We.Z,{}),text:"UserError"!==W&&"UnauthorizedError"!==W||!(null===I||void 0===I||null===(H=I.generateCode)||void 0===H?void 0:H.message)?"Oops! An unexpected error occurred. Please try again or contact support.":null===I||void 0===I||null===(z=I.generateCode)||void 0===z?void 0:z.message})})}else if("GenerateCodeResult"===W&&null!=(null===I||void 0===I?void 0:I.generateCode)){var V,j=I.generateCode,q=j.code,$=j.id;if(null==q||""===q)F=(0,a.tZ)(Z.G,{children:(0,a.tZ)(Oe.E,{colorway:"warning",icon:(0,a.tZ)(kn.Z,{}),text:"That prompt gave us some trouble. Try re-wording it."})});else F=(0,a.BX)(Z.G,{css:[y.l0.colWithGap(8)],children:[(0,a.BX)(P.T,{background:"default",css:[y.l0.py(8),y.l0.px(8),y.l0.borderRadius(8)],children:[(0,a.tZ)(Z.G,{dataCy:"generate-code-modal-generation-preview",css:[y.l0.maxHeight(300),y.l0.overflowY("auto")],children:(0,a.tZ)(vn.Z,{code:q,filePath:i})}),(0,a.BX)(Z.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center,y.l0.pt(8),y.l0.px(4)],children:[(0,a.BX)(Z.G,{css:[y.l0.rowWithGap(4),y.l0.align.center],children:[(0,a.tZ)(c.Z,{path:i,size:16}),(0,a.tZ)(Fe.xv,{color:"dimmer",css:[{textTransform:"capitalize"},y.l0.fontSize(12)],children:L})]}),(0,a.BX)(Z.G,{css:y.l0.rowWithGap(8),children:[(0,a.tZ)(gn.zx,{small:!0,iconLeft:(0,a.tZ)(wn.Z,{}),text:"Copy to clipboard",onClick:function(){(0,ne.Z)(q).then((function(){M("Code copied to clipboard")})),(0,Y.j)(Y.U3.CODEX_FEATURE_USED,{feature:"generation",action:"copied-to-clipboard",language:L})}}),(0,a.tZ)(gn.zx,{dataCy:"generate-code-modal-insert-button",small:!0,iconLeft:(0,a.tZ)(Cn.Z,{}),text:"Insert in editor",colorway:"primary",onClick:function(){u(q),(0,Y.j)(Y.U3.CODEX_FEATURE_USED,{feature:"generation",action:"inserted-in-editor",language:L})}}),(null===I||void 0===I||null===(V=I.currentUser)||void 0===V?void 0:V.isAdmin)?(0,a.tZ)(Zn.u,{tooltip:(0,a.tZ)(Z.G,{children:(0,a.tZ)("pre",{css:[{whiteSpace:"pre-wrap"}],children:JSON.stringify(JSON.parse(I.generateCode.metadata),null," ")})}),placement:"bottom",children:(0,a.tZ)(_.h,{colorway:"warning",alt:"Debug metadata",tooltipHidden:!0,children:(0,a.tZ)(bn.Z,{})})}):null]})]})]}),(0,a.tZ)(Z.G,{css:[y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:(0,a.tZ)(Ye.Z,{inferenceId:$,language:L,inferenceClass:Je.Sg.Generation})})]})}return(0,a.tZ)(O,{dataCy:"generate-code-modal",title:"Generate Code",onRequestClose:l,width:500,children:(0,a.BX)(Z.G,{css:[y.l0.p(8),y.l0.colWithGap(8)],children:[(0,a.BX)(Z.G,{tag:"form",onSubmit:function(e){e.preventDefault(),X()},css:[y.l0.rowWithGap(8)],children:[(0,a.tZ)(yn.II,{autoFocus:!0,dataCy:"generate-code-modal-prompt-input",placeholder:'Write a prompt (e.g. "draw a square")',value:f,onChange:function(e){return n=e.target.value,x||((0,Y.j)(Y.U3.CODEX_FEATURE_USED,{action:"prompt-written",feature:"generation",language:L}),C(!0)),void p(n);var n},ref:k,maxLength:1e3,onKeyDown:function(e){"Escape"===e.key&&l(),e.metaKey&&"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),X())}}),(0,a.tZ)(gn.zx,{text:"Generate",dataCy:"generate-code-modal-submit-button",colorway:"primary",disabled:D||""===f,type:"submit",iconRight:!D&&R?(0,a.tZ)(Sn.Z,{}):(0,a.tZ)(xn.Z,{})})]}),F]})})}function Pn(e){var n=e.dom,t=(0,hn.Z)(e,["dom"]);return en.createPortal((0,a.tZ)(_n,(0,r.Z)({},t)),n)}var Bn=t(46699);function An(){var e=(0,He.Z)(["\n  query TransformCode($input: TransformCodeInput!) {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n    transformCode(input: $input) {\n      ... on TransformCodeResult {\n        id\n        code\n        metadata\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return An=function(){return e},e}function Un(){var e=(0,He.Z)(["\n  query TransformCodeModalCurrentUser {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return Un=function(){return e},e}var Nn={},Ln=(0,ze.Ps)(An());var Xn=(0,ze.Ps)(Un());function Mn(e){var n,t,i=e.filePath,o=e.selectedCode,l=e.onRequestClose,u=e.replaceCode,s=(0,cn.Z)(),d=(0,mn.Z)(),f=d.showError,p=d.showConfirm,v=(0,h.Z)(m.useState(""),2),g=v[0],b=v[1],w=(0,h.Z)(m.useState(""),2),x=w[0],C=w[1],k=(0,h.Z)(m.useState(!1),2),S=k[0],T=k[1],E=m.useRef(null),R=(0,h.Z)(function(e){var n=(0,r.Z)({},Nn,e);return Tn.t(Ln,n)}({fetchPolicy:"no-cache",onError:function(e){return f(e.message)}}),2),I=R[0],G=R[1],D=G.called,B=G.data,A=G.error,U=G.loading,N=function(e){var n=(0,r.Z)({},Nn,e);return Ve.a(Xn,n)}(),L=N.data,X=N.loading,M="UserPowerUpsTypes"===(null===L||void 0===L||null===(n=L.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)&&(null===L||void 0===L||null===(t=L.currentUser)||void 0===t?void 0:t.userPowerUpsByType.ghostwriter.active),F=U,W=(0,ke.Sf)(i),H=function(){if(!F&&""!==g){var e=g===x;(0,Y.j)(Y.U3.CODEX_FEATURE_USED,{feature:"transformation",isRetry:e,action:e?"refresh":"submit",language:W}),C(g),I({variables:{input:{input:o,language:W,prompt:g,replId:s}}})}},z=null===B||void 0===B?void 0:B.transformCode.__typename,V=A||"UserError"===z||"UnauthorizedError"===z;if(X)return null;if(!M)return(0,a.tZ)(O,{title:"Transform Code",newInferenceAlt:"Transform your code",onRequestClose:l,width:320,children:(0,a.BX)(Z.G,{css:[y.l0.colWithGap(12),y.l0.p(8)],children:[(0,a.tZ)(Fe.xv,{multiline:!0,children:"Activate Ghostwriter to get access to Transform Code and other AI-powered features!"}),(0,a.tZ)(Z.G,{css:{alignSelf:"center"},children:(0,a.tZ)(Ke.Z,{context:"transform_code_modal"})})]})});var j=null;if(F)j=(0,a.tZ)(Me,{});else if(V){var q,$;j=(0,a.tZ)(Z.G,{children:(0,a.tZ)(Oe.E,{colorway:"negative",icon:(0,a.tZ)(We.Z,{}),text:"UserError"!==z&&"UnauthorizedError"!==z||!(null===B||void 0===B||null===(q=B.transformCode)||void 0===q?void 0:q.message)?"Oops! An unexpected error occurred. Please try again or contact support.":null===B||void 0===B||null===($=B.transformCode)||void 0===$?void 0:$.message})})}else if("ServiceUnavailable"===z)j=(0,a.tZ)(Z.G,{children:(0,a.tZ)(Oe.E,{colorway:"warning",icon:(0,a.tZ)(kn.Z,{}),text:"That prompt gave us some trouble. Try re-wording it."})});else if("TransformCodeResult"===z&&null!=B){var K,Q=B.transformCode,J=Q.code,ee=Q.id;if(null==J||""===J)j=(0,a.tZ)(Z.G,{children:(0,a.tZ)(Oe.E,{colorway:"warning",icon:(0,a.tZ)(kn.Z,{}),text:"That prompt gave us some trouble. Try re-wording it."})});else j=(0,a.BX)(Z.G,{css:[y.l0.colWithGap(8)],children:[(0,a.BX)(P.T,{background:"default",css:[y.l0.py(8),y.l0.px(4),y.l0.borderRadius(8)],children:[(0,a.tZ)(Z.G,{dataCy:"transform-code-modal-generation-preview",css:[y.l0.maxHeight(300),y.l0.overflowY("auto")],children:(0,a.tZ)(vn.Z,{code:J,filePath:i})}),(0,a.BX)(Z.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center,y.l0.pt(8),y.l0.px(4)],children:[(0,a.BX)(Z.G,{css:[y.l0.rowWithGap(4),y.l0.align.center],children:[(0,a.tZ)(c.Z,{path:i,size:16}),(0,a.tZ)(Fe.xv,{color:"dimmer",css:[{textTransform:"capitalize"},y.l0.fontSize(12)],children:W})]}),(0,a.BX)(Z.G,{css:y.l0.rowWithGap(8),children:[(0,a.tZ)(gn.zx,{iconLeft:(0,a.tZ)(wn.Z,{}),text:"Copy to clipboard",onClick:function(){(0,ne.Z)(J).then((function(){p("Code copied to clipboard")})),(0,Y.j)(Y.U3.CODEX_FEATURE_USED,{feature:"transformation",action:"copied-to-clipboard",language:W})},small:!0}),(0,a.tZ)(gn.zx,{dataCy:"transform-code-modal-replace-button",iconLeft:(0,a.tZ)(Bn.Z,{}),text:"Replace selection",colorway:"primary",small:!0,onClick:function(){try{u(J)}catch(e){f("Couldn't replace code. Please make sure you don't edit your selection.")}(0,Y.j)(Y.U3.CODEX_FEATURE_USED,{feature:"transformation",action:"replaced-selection-in-editor",language:W})}}),(null===B||void 0===B||null===(K=B.currentUser)||void 0===K?void 0:K.isAdmin)?(0,a.tZ)(Zn.u,{tooltip:(0,a.tZ)(Z.G,{children:(0,a.tZ)("pre",{css:[{whiteSpace:"pre-wrap"}],children:JSON.stringify(JSON.parse(B.transformCode.metadata),null," ")})}),placement:"bottom",children:(0,a.tZ)(_.h,{colorway:"warning",alt:"Debug metadata",tooltipHidden:!0,children:(0,a.tZ)(bn.Z,{})})}):null]})]})]}),(0,a.tZ)(Z.G,{css:[y.l0.flex.row,y.l0.align.baseline,y.l0.justify.spaceBetween],children:(0,a.tZ)(Ye.Z,{inferenceId:ee,language:W,inferenceClass:Je.Sg.Transformation})})]})}else F||A||(j=null);return(0,a.tZ)(O,{dataCy:"transform-code-modal",title:"Transform Code",onRequestClose:l,width:500,children:(0,a.BX)(Z.G,{css:[y.l0.p(8),y.l0.colWithGap(8)],children:[(0,a.BX)(Z.G,{tag:"form",onSubmit:function(e){e.preventDefault(),H()},css:[y.l0.rowWithGap(8)],children:[(0,a.tZ)(yn.II,{dataCy:"transform-code-modal-prompt-input",autoFocus:!0,placeholder:'Write a prompt (e.g. rename all variables to "foo")',value:g,onChange:function(e){return n=e.target.value,S||((0,Y.j)(Y.U3.CODEX_FEATURE_USED,{feature:"transformation",action:"prompt-written",language:W}),T(!0)),void b(n);var n},ref:E,onKeyDown:function(e){"Escape"===e.key&&l(),e.metaKey&&"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),H())}}),(0,a.tZ)(gn.zx,{dataCy:"transform-code-modal-submit-button",text:"Transform",colorway:"primary",disabled:F||""===g,type:"submit",iconRight:!F&&D?(0,a.tZ)(Sn.Z,{}):(0,a.tZ)(xn.Z,{})})]}),j]})})}function On(e){var n=e.dom,t=(0,hn.Z)(e,["dom"]);return en.createPortal((0,a.tZ)(Mn,(0,r.Z)({},t)),n)}var Fn=t(7681),Wn=t(9093),Hn=t(54369),zn=t(43064),Vn=t(16565),jn=t(29449),qn=t(49893),$n=t(5865),Yn=t(74330);function Kn(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(n),o=i.next();!o.done&&r.length<t;)r.push(o.value),o=i.next();return r}var Qn=R.Py.define();var Jn=t(33229),et=t(86763),nt=t.n(et),tt=t(89853),rt=t(83871),it=t(98689),ot=t(44866),at=t(14526),lt=t(1929),ct=t(90888);function ut(e){return e>420?"large":"small"}var st=Z.K.div,dt=(0,tt.X)({root:[y.l0.rowWithGap(8),y.l0.px(4),y.l0.py(8),{borderBottom:"1px solid",borderColor:y.TV.outlineDimmest}],panelButtonWrapper:[y.l0.center,y.l0.height(32)],content:[y.l0.display.grid,y.l0.flex.growAndShrink(1),{gridTemplateAreas:'"search search-controls"',gridTemplateRows:"1fr",gridTemplateColumns:"1fr max-content",gap:y.TV.space8}],contentExpanded:[{gridTemplateAreas:'"search search-controls" "replace replace-controls"',gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr max-content"}],contentExpandedSmall:[{gridTemplateAreas:'"search" "search-controls" "replace" "replace-controls"',gridTemplateRows:"1fr max-content 1fr max-content",gridTemplateColumns:"1fr"}],contentSmall:[{gridTemplateAreas:'"search" "search-controls"',gridTemplateRows:"1fr max-content",gridTemplateColumns:"1fr"}],matchLabel:[y.l0.position.absolute,y.l0.top(0),y.l0.right(0),y.l0.height("100%"),y.l0.center,y.l0.pr(4)],inputControlsSmall:[y.l0.colWithGap(8),y.l0.flex.growAndShrink(1)],searchInputWrapper:[y.l0.position.relative,{gridArea:"search"}],searchControls:[y.l0.display.flex,y.l0.align.center,y.l0.rowWithGap(8),y.l0.flex.wrap,{gridArea:"search-controls"}],replaceInputWrapper:[{gridArea:"replace"}],replaceControls:[y.l0.display.flex,y.l0.align.center,y.l0.rowWithGap(8),y.l0.flex.wrap,{gridArea:"replace-controls"}]});function ft(e){var n=e.view,t=function(){if(!n)throw new Error("Expected view");(0,E.g)(n);var e=n.state.selection.main;n.dispatch({effects:I.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),L<=1||B((function(n){if(null===n){var t=S.findIndex((function(n){return n.from===e.from&&n.to===e.to}));return-1===t?1:t+1}return n>=L?1:n+1}))},r=function(){if(!n)throw new Error("Expected view");(0,E.a7)(n);var e=n.state.selection.main;n.dispatch({effects:I.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),L<=1||B((function(n){if(null===n){var t=S.findIndex((function(n){return n.from===e.from&&n.to===e.to}));return-1===t?1:t+1}return n<=1?L||1:n-1}))},i=function(e){var t=e;return!!n&&(0,I.$1)(n,t,"search-panel")},o=(0,h.Z)(m.useState(!1),2),l=o[0],c=o[1],u=(0,h.Z)(m.useState(!1),2),s=u[0],d=u[1],f=(0,h.Z)(m.useState(!1),2),p=f[0],v=f[1],g=(0,h.Z)(m.useState(""),2),y=g[0],b=g[1],w=(0,h.Z)(m.useState(""),2),x=w[0],C=w[1],k=(0,h.Z)(m.useState([]),2),S=k[0],T=k[1],G=(0,h.Z)(m.useState(null),2),D=G[0],B=G[1],A=(0,Jn.Z)(),N=m.useRef(new E.Jb({search:""})),L=S.length,X=(0,it.Z)(S),M=m.useCallback((function(e){e.eq(N.current)||(b(e.search),C(e.replace),d(e.caseSensitive),v(e.regexp),N.current=e)}),[]),O=m.useCallback((function(){c(!0)}),[]),F=m.useMemo((function(){return nt()((function(e){A.current&&(T(Kn(N.current,e)),B(null))}),250)}),[A]),W=m.useMemo((function(){return nt()((function(e){if(A.current){var n=X.current.findIndex((function(n){return n.from<=e&&n.to>=e}));B(-1!==n?n+1:null)}}),250)}),[A,X]);m.useEffect((function(){return function(){F.cancel(),W.cancel()}}),[F,W]),function(e){var n=e.view,t=e.onDocChanged,r=e.onSearchQuery,i=e.onSelectionChanged,o=e.onExpandSearchPanel;m.useEffect((function(){n&&n.dispatch({effects:R.Py.appendConfig.of([I.tk.updateListener.of((function(e){e.transactions.forEach((function(e){e.effects.forEach((function(e){e.is(E.ql)&&r(e.value),e.is(Qn)&&o()}))}))})),I.tk.updateListener.of((function(e){e.docChanged&&t(e.view.state.doc),e.selectionSet&&i(e.view.state.selection.main.anchor)}))])})}),[n,r,o,t,i])}({view:n,onSearchQuery:M,onSelectionChanged:W,onExpandSearchPanel:O,onDocChanged:F}),m.useEffect((function(){if(n){var e=(0,E.uP)(n.state);b(e.search),C(e.replace),d(e.caseSensitive),v(e.regexp),N.current=e}}),[n]),m.useEffect((function(){if(n){var e=new E.Jb({search:y,replace:x,caseSensitive:s,regexp:p}),t=N.current;if(!e.eq(t)){N.current=e,n.dispatch({effects:E.ql.of(e)});var r=Kn(e,n.state.doc);T(r);var i=n.state.selection.main.anchor,o=r.findIndex((function(e){return e.from<=i&&e.to>=i}));B(-1!==o?o+1:null)}}}),[n,y,x,s,p]);var H=(0,h.Z)(m.useState(ut(0)),2),z=H[0],V=H[1],j=(0,q.Z)((function(e){e.width&&V(ut(e.width))}));if(!n)return null;var $=L>0,Y=y.length>0?"0 / 0":null,K=$?"".concat(D||1," / ").concat(L):Y,Q=K?8*K.length:null,J=(0,a.BX)(a.HY,{children:[(0,a.tZ)(ot.Z,{alt:"Case sensitive",icon:(0,a.tZ)(lt.Z,{}),checked:s,onClick:function(){d((function(e){return!e}))}}),(0,a.tZ)(ot.Z,{alt:"Regular expressions",icon:(0,a.tZ)(at.Z,{}),checked:p,onClick:function(){v((function(e){return!e}))}})]}),ee=[dt.content];return"small"!==z&&l?ee.push(dt.contentExpanded):"small"===z&&l?ee.push(dt.contentExpandedSmall):"small"!==z||l||ee.push(dt.contentSmall),(0,a.tZ)(st,{ref:j,onKeyDown:function(e){i(e)&&e.preventDefault()},children:(0,a.BX)(P.T,{elevated:!0,css:dt.root,children:[(0,a.tZ)(Z.G,{css:dt.panelButtonWrapper,children:(0,a.tZ)(_.h,{alt:l?"Close replace panel":"Show replace panel",onClick:function(){c((function(e){return!e}))},children:(0,a.tZ)(Yn.Z,{rotate:l?90:0,style:{transition:"200ms ease"}})})}),(0,a.BX)(Z.G,{css:ee,children:[(0,a.BX)(Z.G,{css:dt.searchInputWrapper,children:[(0,a.tZ)(ct.h,{style:{padding:4,paddingRight:null!==Q&&void 0!==Q?Q:void 0},placeholder:"Search",value:y,name:"search","main-field":"true",onKeyDown:function(e){(0,rt.j)(e)&&"f"===e.key?e.currentTarget.select():"enter"===e.key.toLowerCase()&&(i(e)||(e.preventDefault(),e.shiftKey?r():t()))},onChange:function(e){b(e)}}),K?(0,a.tZ)(Z.G,{css:dt.matchLabel,children:(0,a.tZ)(Fe.xv,{variant:"small",color:"dimmest",children:K})}):null]}),(0,a.BX)(Z.G,{css:dt.searchControls,children:[(0,a.tZ)(_.h,{alt:"Previous",onClick:function(){r()},children:(0,a.tZ)(Yn.Z,{rotate:-90})}),(0,a.tZ)(_.h,{alt:"Next",onClick:function(){t()},children:(0,a.tZ)(Yn.Z,{rotate:90})}),(0,a.tZ)(gn.zx,{text:"Select All",onClick:function(){(0,E.i3)(n),n.focus()}}),J]}),l?(0,a.BX)(a.HY,{children:[(0,a.tZ)(Z.G,{css:dt.replaceInputWrapper,children:(0,a.tZ)(yn.II,{style:{padding:4},placeholder:"Replacement",name:"replace",value:x,onKeyDown:function(e){"enter"===e.key.toLowerCase()&&(i(e)||(e.preventDefault(),(0,E.K9)(n)))},onChange:function(e){C(e.target.value)}})}),(0,a.BX)(Z.G,{css:dt.replaceControls,children:[(0,a.tZ)(gn.zx,{text:"Replace",onClick:function(){(0,E.K9)(n)}}),(0,a.tZ)(gn.zx,{text:"Replace All",onClick:function(){(0,E.ko)(n)}})]})]}):null]}),(0,a.tZ)(Z.G,{css:dt.panelButtonWrapper,children:(0,a.tZ)(_.h,{alt:"Close Search Panel",tooltipHidden:!0,onClick:function(){(0,E.N$)(n)},children:(0,a.tZ)(U.Z,{})})})]})})}function pt(e){var n=e.dom,t=e.view;return en.createPortal((0,a.tZ)(ft,{view:t}),n)}var ht=t(85538),vt=t(18556),mt=t(57389),gt=t(4946);function yt(e,n,t,o){var a=(0,mn.Z)().showError,l=(0,cn.Z)(),c=(0,gt.eR)({variables:{replId:l,path:e},onError:function(e){a(e.message)},skip:!o||n});return m.useMemo((function(){var o;return n||c.loading||c.error||!c.data||"ThreadsByFileResult"!==(null===(o=c.data.threadsByFile)||void 0===o?void 0:o.__typename)?{}:c.data.threadsByFile.threads.filter((function(n){return n.path===e&&(!t||!n.isResolved)})).reduce((function(e,n){return(0,i.Z)((0,r.Z)({},e),(0,mt.Z)({},n.id,n))}),{})}),[c.loading,c.data,c.error,e,n,t])}var Zt=t(32556),bt=t(34145),wt=t(114),xt=t(67590),Ct=t(13469),kt=t(47453),St=t(28793);function Tt(e){var n=e.view,t=e.filePath,i=e.enable,a=e.isLoading,l=function(e){return[R.Wl.highest((0,Ee.zj)(p)),Ee.cR,Ee.OQ,Ee.ZS,Ee.PQ,I.tk.decorations.compute([Ee.OQ,Ee.ZS,Ee.PQ],(function(e){var n=e.field(Ee.OQ),t=e.field(Ee.ZS),r=e.field(Ee.PQ),i=t||Object.values(n).find((function(e){return e.id===r}));return I.p.set((0,o.Z)(Object.values(n)).map((function(e){var n=i&&e.id===i.id;return function(e,n,t,r,i){if(n===t)return null;var o=(0,h.Z)(r,2),a=o[0],l=o[1];return I.p.mark({class:"replit-thread-highlight cm-thread-".concat(e),attributes:{style:"background-color: ".concat(i?l:a)},id:e}).range(n,t)}(e.id,e.indexStart,e.indexEnd,Z,n)})).filter((function(n){return null!==n&&n.from!==n.to&&n.from<=e.doc.length&&n.to<=e.doc.length})),!0)})),I.tk.decorations.compute([Ee.OQ,Ee.ZS,Ee.PQ],(function(e){var n=e.field(Ee.OQ),t=e.field(Ee.ZS),r=e.field(Ee.PQ),i=(0,o.Z)(Object.values(n)).concat((0,o.Z)(t?[t]:[])).filter(Boolean).find((function(e){return e.id===r}));return i?I.p.set([I.p.widget({widget:new Ee.nE(i.id,d),block:!0,side:1}).range(i.indexEnd)],!0):I.p.none})),I.tk.updateListener.of((function(e){(0,D.j)(e,bt.R,(function(){var n=(0,o.Z)(e.view.dom.querySelectorAll(".cm-thread-portal-widget")),t=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(n.length&&t&&r){var i=!0,a=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var s=c.value;(0,wt.L)(s,t,r)}}catch(d){a=!0,l=d}finally{try{i||null==u.return||u.return()}finally{if(a)throw l}}}}))})),I.tk.updateListener.of((function(e){(0,D.j)(e,Ee.eR,(function(t){var r=t.value,i=e.state.field(Ee.OQ)[r];i&&(null===n||void 0===n||n.dispatch({selection:{anchor:i.indexStart,head:i.indexStart},effects:[I.tk.scrollIntoView(i.indexStart,{x:"center",y:"center"})]}))}))}))]},c=(0,h.Z)(m.useState({}),2),u=c[0],d=c[1],f=(0,G.Z)({view:n}),p=(0,xt.x)(),v=(0,s.Dv)(Zt.Q);m.useEffect((function(){n&&v&&n.dispatch({effects:[Ee.YM.of(v),Ee.eR.of(v)]})}),[n,v]);var g=(0,St.F)().theme,y=(0,h.Z)(m.useState([Ct.TV.accentPrimaryDimmest,Ct.TV.accentPrimaryDimmer]),2),Z=y[0],b=y[1];m.useEffect((function(){var e=g.values.global.accentPrimaryDimmest,n=(0,kt.w)(e),t="rgba(".concat(n.join(","),", 0.5)");b([t,Ct.TV.accentPrimaryDimmer])}),[g]),m.useEffect((function(){if(n&&i)return n.dispatch({effects:f.reconfigure(l())}),function(){n.dispatch({effects:f.reconfigure([])})}}),[n,t,f,i]);return function(e,n,t,i){var o=(0,J.Z)().fs,a=(0,vt.kL)(t),l=a.contentRef,c=a.loadedFile,u=a.transformSelectionRef;m.useEffect((function(){var a=!1,s=u.current,d=l.current;if(c&&s&&d&&!i&&n){var f=Object.values(e);0!==f.length?Promise.all(f.map((function(e){return(0,vt.Ft)({anchor:e,version:o.getOTVersion(t),transformSelection:s,content:d})}))).then((function(e){if(!a){var t=e.filter((function(e){return Boolean(e)})).map((function(e){if(!e)throw new Error("expected resolved anchor");return(0,r.Z)({},e.anchor,null===e||void 0===e?void 0:e.newSelection)}));return n.dispatch({effects:Ee.qi.of(t.reduce((function(e,n){return e[n.id]=n,e}),{}))}),function(){a=!0,n&&n.dispatch({effects:Ee.qi.of({})})}}})):n.dispatch({effects:Ee.qi.of({})})}}),[e,n,c,o,u,l,t,i])}(yt(t,a,!0,i),n,t,a),{threadElements:u}}var Et=t(95980),Rt=t.n(Et),It=t(24793),Gt=t(6403),Dt=t(20279),_t=t(75916),Pt=t(13617),Bt=t(33727),At=function(e){var n=e.caretSize,t=void 0===n?[8,12]:n,o=(0,hn.Z)(e,["caretSize"]);return(0,a.BX)("svg",(0,i.Z)((0,r.Z)({width:t[0],height:t[1],viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,a.tZ)("mask",{id:"outline",fill:"white",children:(0,a.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z"})}),(0,a.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z",fill:"url(#gradient-fill)"}),(0,a.tZ)("path",{d:"M0 8L-0.8 7.4L-2 9H0V8ZM12 8V9H14L12.8 7.4L12 8ZM5.2 1.06667L4.4 0.466667L5.2 1.06667ZM6.80033 1.06711L6.00033 1.66711L6.80033 1.06711ZM12 7H0V9H12V7ZM0.8 8.6L6 1.66667L4.4 0.466667L-0.8 7.4L0.8 8.6ZM6.00033 1.66711C7.87223 4.16297 9.13719 5.84959 11.2 8.6L12.8 7.4C10.7372 4.64959 9.47223 2.96297 7.60033 0.467109L6.00033 1.66711ZM6 1.66667L6.00033 1.66711L7.60033 0.467109C6.80082 -0.598902 5.20049 -0.600655 4.4 0.466667L6 1.66667Z",fill:"#0079F2",mask:"url(#outline)"}),(0,a.tZ)("defs",{children:(0,a.BX)("linearGradient",{id:"gradient-fill",x1:"5.07692",y1:"0",x2:"5.07692",y2:"21.3333",gradientUnits:"userSpaceOnUse",children:[(0,a.tZ)("stop",{stopColor:"#57ABFF"}),(0,a.tZ)("stop",{offset:"1",stopColor:"#0079F2"})]})})]}))},Ut=t(69217),Nt=t(92674),Lt=t.n(Nt),Xt=t(63645),Mt=t(74855),Ot=t(38575),Ft=t(61382),Wt=t(31518),Ht=t(79151),zt=t(1235),Vt=t(16402),jt=t(21371),qt=t(79315),$t=t(26430),Yt=t(76530),Kt=t(91523),Qt=t(44391),Jt=function(e){var n=e.isCreating,t=e.threadId,r=e.filePath,i=e.isResolved,o=e.isLoading,l=e.isPlaceholder,c=e.caretPosition,u=e.onRequestClose,d=void 0===u?function(){}:u,f=e.onResolveThread,p=void 0===f?function(){}:f,h=e.openThreadsInbox,v="Inbox",g="Next thread",b="Previous thread",w="Collapse",x=yt(null===r?"":r,o,!0,!0),C=[12,8];switch((0,Wt.Z)().preferences.fontSize){case 10:C=[8,6];break;case 14:C=[10,6];break;case 18:C=[12,8];break;case 24:C=[14,10]}var k=m.useMemo((function(){return Object.values(x).sort((function(e,n){return e.indexStart-n.indexStart}))}),[x]),E=m.useMemo((function(){return k.findIndex((function(e){return e.id===t}))}),[k,t]),R=(0,s.b9)(Zt.Q),I=function(){var e=(0,S.Z)((function(){var e;return(0,T.__generator)(this,(function(n){return e=E===k.length-1?k[0].id:k[E+1].id,R(e),[2]}))}));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,S.Z)((function(){var e;return(0,T.__generator)(this,(function(n){return e=0===E?k[k.length-1].id:k[E-1].id,R(e),[2]}))}));return function(){return e.apply(this,arguments)}}();return(0,a.BX)(P.T,{background:"root",css:[y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween,y.l0.position.relative,y.l0.px(12),y.l0.py(8),{borderBottomWidth:y.TV.borderWidthDefault,borderBottomStyle:"solid",borderBottomColor:y.TV.outlineDimmest}],children:[null!==c&&(0,a.tZ)("span",{css:[y.l0.position.absolute,y.l0.top(-C[1]),y.l0.left(c),y.l0.height("fit-content"),y.l0.display.flex,y.l0.flex.row,y.l0.align.center],children:(0,a.tZ)(At,{caretSize:C})}),(0,a.tZ)(gn.zx,{iconLeft:(0,a.tZ)(Ot.Z,{}),onClick:function(){h()},text:v,small:!0}),k.length>1?(0,a.BX)(Z.G,{css:[y.l0.flex.row,y.l0.align.center,y.l0.rowWithGap(4)],children:[(0,a.tZ)(_.h,{alt:b,onClick:G,children:(0,a.tZ)(Dt.Z,{})}),(0,a.BX)(Fe.xv,{color:"dimmest",variant:"small",children:[E+1,"/",k.length]}),(0,a.tZ)(_.h,{alt:g,onClick:I,children:(0,a.tZ)(Gt.Z,{})})]}):null,(0,a.BX)(Z.G,{css:[y.l0.flex.row,y.l0.align.center,y.l0.rowWithGap(4)],children:[n||i||l?null:(0,a.tZ)(gn.zx,{onClick:p,text:"Resolve",small:!0,iconLeft:(0,a.tZ)(_t.Z,{})}),!n&&i?(0,a.tZ)(It.D,{text:"Resolved",colorway:"positive"}):null,(0,a.tZ)(gn.zx,{onClick:d,text:w,small:!0,iconLeft:(0,a.tZ)(Xt.Z,{})})]})]})},er=function(e){var n,t=e.threadId,o=e.isResolved,l=e.onMessageChange,c=e.onMessageSubmit,u=e.isPlaceholder,s=e.onRequestClose,d=void 0===s?function(){}:s,f=(0,h.Z)(m.useState(""),2),p=f[0],v=f[1],g=(0,h.Z)(m.useState(Lt().v4()),2),b=g[0],w=g[1],x=(0,Mt.Z)(),C=x.ref,k=x.update,E=m.useRef(null),R={placeholder:function(){return u?"Start a new thread\u2026 (Markdown is supported)":o?"Reply to re-open thread\u2026":"Reply\u2026 (Markdown is supported)"}},I="Post reply",G="Cancel",D=function(){var e=p.trim();0!==e.length&&(c({message:e,messageId:b}),v(""),w(Lt().v4()))},B=(0,Qt.d)(),A=(0,qt.Z)(),U=(0,h.Z)((0,Vt.Z)({"@":function(){var e=(0,S.Z)((function(e){var n,t;return(0,T.__generator)(this,(function(r){return n=A.filter((function(e){return e.id!==B})),e&&(t=e.toLowerCase(),n=n.filter((function(e){return e.username.toLowerCase().startsWith(t)}))),[2,n.slice(0,5).map((function(e){return{icon:(0,a.tZ)(zt.Z,{url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}}))]}))}));return function(n){return e.apply(this,arguments)}}()}),2),N=U[0].suggestions,L=U[1],X=(0,jt.Kb)({items:(null===N||void 0===N?void 0:N.results)||[],defaultHighlightedIndex:0,isOpen:(null!==(n=null===N||void 0===N?void 0:N.results.length)&&void 0!==n?n:0)>0,onSelectedItemChange:function(e){var n=e.selectedItem;if(N&&n){var t=N.applySuggestion({targetValue:p,suggestionValue:n.value}),r=t.fullValue,i=t.cursorIndex;v(r),setTimeout((function(){E.current&&(E.current.setSelectionRange(i,i),E.current.focus(),k())}))}}}),M=X.isOpen,O=X.getInputProps,F=X.getMenuProps,W=X.getItemProps,H=X.highlightedIndex,z=X.getComboboxProps;return m.useEffect((function(){var e="threads/drafts/".concat(t),n=Ht.Z.get(e,"string");n&&v(n);var r=E.current;return function(){if(r){var n=r.value;0!==n.length?Ht.Z.set(e,n):Ht.Z.remove(e)}}}),[t]),(0,a.BX)(P.T,{background:"root",css:[y.l0.px(12),y.l0.pb(8),y.l0.pt(8),{borderTop:"1px solid ".concat(y.TV.outlineDimmest)}],className:"inline-thread-input",children:[(0,a.BX)("div",(0,i.Z)((0,r.Z)({css:[y.l0.flex.row,y.l0.align.start,y.l0.rowWithGap(8),y.l0.width("full")]},z()),{className:"jsx-45ff32690e481e34",children:[u?(0,a.tZ)(gn.zx,{text:G,onClick:d}):null,(0,a.BX)("div",{css:[{width:"100%"}],className:"jsx-45ff32690e481e34",children:[(0,a.tZ)(yn.B,(0,r.Z)({},O({ref:function(e){E.current=e,C(e),L(e)},value:p,onChange:function(e){var n=e.target.value;v(n),l({message:n,messageId:b})},onKeyDown:function(e){M||(e.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),e.preventDefault(),D(),requestAnimationFrame((function(){k()}))))},onKeyUp:function(e){"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),d())},placeholder:R.placeholder(),css:[y.l0.height(32),y.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1}],autoFocus:!0}))),(0,a.tZ)("div",{css:{position:"relative"},className:"jsx-45ff32690e481e34",children:(0,a.tZ)("div",(0,i.Z)((0,r.Z)({},F({css:[{position:"absolute",top:y.TV.space2,overflow:"hidden"},y.l0.borderRadius(16),y.l0.shadow(1),y.l0.backgroundColor.backgroundDefault]})),{className:"jsx-45ff32690e481e34",children:null===N||void 0===N?void 0:N.results.map((function(e,n){return(0,m.createElement)("div",(0,i.Z)((0,r.Z)({},W({item:e,index:n})),{key:e.value,className:"jsx-45ff32690e481e34"}),(0,a.BX)($t.Ug,{spacing:2,css:[H===n?y.l0.backgroundColor.backgroundHighest:null,y.l0.p(8)],children:[e.icon,(0,a.tZ)("div",{className:"jsx-45ff32690e481e34",children:e.value})]}))}))}))})]}),(0,a.tZ)(Z.G,{css:[y.l0.pt(4)],children:(0,a.tZ)(_.h,{alt:I,tooltipDelay:"long",onClick:D,children:(0,a.tZ)(Pt.Z,{})})})]})),(0,a.tZ)(Rt(),{id:"45ff32690e481e34",children:".inline-thread-input .popover-control-container{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}"})]})};var nr=function(e){var n,t=e.threadId,r=e.isCreating,i=e.isResolved,l=void 0!==i&&i,c=e.view,u=e.filePath,s=e.openThreadsInbox,d=(0,Ut.Z)(t,c,u),f=d.thread,p=d.loading,h=d.isPlaceholder,v=d.getLatestAnchor,g=d.updateThread,b=d.changeThreadMessage,w=d.finalizeThreadMessage,x=function(){null===c||void 0===c||c.dispatch({effects:[Ee.YM.of(null)]})},C=(0,Wt.Z)().preferences.fontSize,k=(0,m.useRef)(null);(0,Kt.Z)(f);var S=v(),T=c&&!p&&"number"===typeof(null===S||void 0===S?void 0:S.indexEnd)&&S.indexEnd<=c.state.doc.length?null===(n=c.coordsAtPos(S.indexEnd))||void 0===n?void 0:n.left:null,E=(null===c||void 0===c?void 0:c.dom.getBoundingClientRect().left)||null,R=T&&E?T-E-6:null,I=C;switch(C){case 10:I=13;break;case 14:I=19;break;case 18:I=25;break;case 24:I=34}var G=(0,mn.Z)().showConfirm,D=(0,cn.Z)(),_=(0,m.useRef)(null);m.useEffect((function(){setTimeout((function(){_.current&&(_.current.scrollTop=_.current.scrollHeight)}),0)}),[null===f||void 0===f?void 0:f.messages]);var P=m.useMemo((function(){return(null===f||void 0===f?void 0:f.messages)?(0,o.Z)(f.messages).sort((function(e,n){return Date.parse(e.timeCreated)-Date.parse(n.timeCreated)})):[]}),[null===f||void 0===f?void 0:f.messages]),B=function(e){var n=(0,m.useRef)(0);return(0,q.Z)((function(t){var r=t.height;r!==n.current&&(null===e||void 0===e||e.requestMeasure()),n.current=r}))}(c);return(0,a.tZ)("div",{css:[y.l0.width("100%"),y.l0.backgroundColor.backgroundRoot],children:(0,a.BX)(Z.G,{innerRef:(0,Yt.l)(k,B),css:[y.l0.font.default,{borderTopWidth:y.TV.borderWidthDefault,borderBottomWidth:y.TV.borderWidthDefault,borderStyle:"solid",borderColor:y.TV.accentPrimaryDefault}],children:[h||p?null:(0,a.tZ)(Jt,{isCreating:r,isResolved:l,isLoading:p,threadId:t,filePath:u,caretPosition:R,isPlaceholder:h,onRequestClose:x,onResolveThread:function(){g({changes:{isResolved:!0}}),G("Thread resolved. You can reopen it from the inbox.")},openThreadsInbox:s}),!p||h?(0,a.BX)(a.HY,{children:[!r&&P.length>0?(0,a.tZ)("div",{css:[y.l0.px(12),y.l0.py(12),y.l0.maxHeight(300),y.l0.overflowY("auto"),y.l0.colWithGap(16),y.l0.fontSize(C)],ref:_,children:P.map((function(e){return(0,a.tZ)(Bt.Z,{thread:f,message:e},e.id)}))}):null,(0,a.tZ)(er,{threadId:t,isPlaceholder:h,isResolved:l,onRequestClose:x,onMessageChange:b,onMessageSubmit:function(e){w(e),(0,Y.j)(Ft.U3.MESSAGE_SENT,{replId:D,source:"threads",newThread:h})}})]}):(0,a.tZ)(Z.G,{css:[y.l0.height(I)],children:(0,a.tZ)(Xe.Z,{viewBox:"0 0 400 21",backgroundColor:y.TV.accentPrimaryDimmest,backgroundOpacity:0,foregroundColor:y.TV.accentPrimaryDimmest,foregroundOpacity:.2,speed:1,children:(0,a.tZ)("rect",{x:"0",y:"0",width:"100%",height:"100%"})})})]})})},tr=t(74513),rr=t(51729),ir=t(28021),or=t(21611),ar=t(24497),lr=t(6191),cr=t(27963),ur=RegExp("_(?<num>\\d+)$");function sr(e,n){return dr.apply(this,arguments)}function dr(){return(dr=(0,S.Z)((function(e,n){var t,r,i,o;return(0,T.__generator)(this,(function(a){switch(a.label){case 0:return t=(0,re.Il)(n),[4,e.readDir(t||".")];case 1:return(r=a.sent()).error?[2,n]:(o=(i=function(e){if(r.children.find((function(n){return"FILE"===n.type&&n.filename===e}))){var n,t=(0,re.eb)(e),o=(0,re.r6)(e),a=t.match(ur);if(null===a||void 0===a||null===(n=a.groups)||void 0===n?void 0:n.num){var l=Number(a.groups.num);return i("".concat(t.replace(ur,""),"_").concat(l+1,".").concat(o))}return i("".concat(t,"_2.").concat(o))}return e})((0,re.UO)(n)),[2,t?t+"/"+o:o])}}))}))).apply(this,arguments)}var fr=t(73758),pr=function(){var e=(0,S.Z)((function(e,n,t){var r,i,o,a,l,c;return(0,T.__generator)(this,(function(u){switch(u.label){case 0:return r=encodeURI(e.name),i=(0,re.Il)(t),[4,sr(n,i?i+"/"+r:r)];case 1:return o=u.sent(),[4,(0,cr.pV)(e)];case 2:return a=u.sent(),[4,n.writeFile(o,fr.Z.from(a))];case 3:return u.sent(),l=(0,re.eb)(e.name),c=(0,re.UO)(o),[2,"![".concat(l,"](").concat(c,")")]}}))}));return function(n,t,r){return e.apply(this,arguments)}}(),hr=t(44863);var vr=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(e,r){var i;return(0,le.Z)(this,t),(i=n.call(this)).src=e,i.pos=r,i}var r=t.prototype;return r.eq=function(e){return this.src===e.src&&this.pos===e.pos},r.toDOM=function(){var e=document.createElement("img");return e.src=this.src,e.dataset.pos=this.pos.toString(),e.style.maxHeight="64px",e.style.maxWidth="256px",e},r.ignoreEvent=function(){return!1},t}(I.l9),mr=/"data:image\/\w+;base64,[^"\s]+"/g,gr=Number.MAX_VALUE,yr=I.lg.define((function(e){var n=new I.Y1({regexp:mr,decoration:function(e,n,t){if(void 0===e[0])throw new Error("Failed to match image");var r=e[0].substring(1,e[0].length-1);return I.p.replace({widget:new vr(r,t)})},maxLength:gr});return{matcher:n,deco:n.createDeco(e),update:function(e){e.docChanged&&(this.deco=n.updateDeco(e,this.deco))}}}),{decorations:function(e){return e.deco},provide:function(e){return I.tk.atomicRanges.of((function(n){var t=n.plugin(e);return t?t.deco:I.p.none}))}});var Zr=t(48593),br=t(42464);var wr=t(63934);var xr=t(38276),Cr=t(79050),kr=t(51486),Sr=t(37192),Tr=t(12824),Er=t(47019),Rr=t(13834);function Ir(e){var n=e.selection.main.head,t=e.doc.lineAt(n);return{offset:n,line:t.number,column:n-t.from+1}}var Gr=t(30941);function Dr(e){var n=e.view,t=e.path,r=e.isHidden,i=(0,Gr.NH)();!function(e,n){var t=(0,it.Z)(n);(0,Rr.M)((function(){return I.tk.focusChangeEffect.of((function(n){return(null===e||void 0===e?void 0:e.hasFocus)?t.current({type:"focus",position:Ir(n)}):t.current({type:"blur"}),null}))}),[e,t],e,"useCursorChange"),(0,Rr.M)((function(){return I.tk.updateListener.of((function(e){e.selectionSet&&t.current({type:"update",hasFocus:e.view.hasFocus,position:Ir(e.state)})}))}),[t],e,"useCursorChange"),(0,m.useEffect)((function(){return function(){t.current({type:"unmount"})}}),[])}(n,(function(e){i(t,e)})),(0,m.useEffect)((function(){i(t,r?{type:"hidden"}:{type:"unhidden"})}),[r])}var _r,Pr,Br=I.tk.theme({"&":{contain:"size"},"& > .cm-scroller":{contain:"strict"}});var Ar=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(e){var r;return(0,le.Z)(this,t),(r=n.call(this)).type=e,r}return t.from=function(e){switch(e){case"yours":return this.yours;case"base":return this.base;case"middle":return this.middle;case"theirs":return this.theirs}},t.range=function(e,n,t){return this.from(e).range(n,t)},t}(R.uU);function Ur(e){switch(e){case"<":return"yours";case"|":return"base";case"=":return"middle";case">":return"theirs";default:return null}}function Nr(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;if(e.text.length<n)return null;var t=e.text[0],r=Ur(t);if(!r)return null;var i=t.repeat(n),o=e.text.slice(0,n);return o!==i||e.text.length>n&&" "!==e.text[n]?null:r}function Lr(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=[],o=t;o<=r;){var a=e.lineAt(o),l=Nr(a,n);l&&i.push(Ar.range(l,a.from,a.to)),o=a.to+1}return i}Ar.yours=new Ar("yours"),Ar.base=new Ar("base"),Ar.middle=new Ar("middle"),Ar.theirs=new Ar("theirs");var Xr=["yours","base","middle","theirs"];function Mr(e){Array.isArray(e)&&(e=R.Xs.of(e));var n=[],t=[];if(0===e.size)return{hunks:n,hanging:t};for(var r=e.iter();null!==r.value;){var i={},a={},l=[],c=!0,u=!1,s=void 0;try{for(var d,f=Xr[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value,h=r.value,v=r.from,m=r.to;if("base"!==p||h.type===p){if(h.type===p)i[p]={from:v,to:m},l.push({from:v,to:m,type:h.type});else{if("yours"===h.type)break;l.push({from:v,to:m,type:h.type})}if(r.next(),null===r.value)break}}}catch(G){u=!0,s=G}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}if(i.yours&&i.middle&&i.theirs){var g,y,Z;null!==(g=(_r=i).base)&&void 0!==g||(_r.base=null),null!==(y=(Pr=a).base)&&void 0!==y||(Pr.base=null);var b=null!==(Z=i.base)&&void 0!==Z?Z:i.middle,w=i.yours.to+1,x=b.from-1;if(a.yours=w<x?{from:w,to:x}:null,i.base){var C=i.base.to+1,k=i.middle.from-1;a.base=C<k?{from:C,to:k}:null}var S=i.middle.to+1,T=i.theirs.from-1;a.theirs=S<T?{from:S,to:T}:null;var E={from:i.yours.from,to:i.theirs.to,markers:i,content:a};n.push(E)}else{var I;(I=t).push.apply(I,(0,o.Z)(l))}}return{hunks:n,hanging:t}}var Or,Fr=R.r$.define({combine:function(e){return e.length?e[0]:7}}),Wr=R.QQ.define({create:function(e){var n=e.doc,t=e.facet(Fr),r=R.Xs.of(Lr(n,t)),i=Mr(r);return{markers:r,hunks:i.hunks,hanging:i.hanging}},update:function(e,n){var t=n.newDoc,r=n.startState.facet(Fr),i=n.state.facet(Fr);if(r!==i){var o=R.Xs.of(Lr(t,i)),a=Mr(o);return{markers:o,hunks:a.hunks,hanging:a.hanging}}if(!n.docChanged)return e;var l=null,c=null,u=null,s=null;n.changes.iterChangedRanges((function(e,n,t,r){l=null===l?e:Math.min(l,e),c=null===c?n:Math.max(c,n),u=null===u?t:Math.min(u,t),s=null===s?r:Math.max(s,r)}));var d=e.markers;if(null!==l&&null!==c){var f=n.startState.doc.lineAt(l).from,p=n.startState.doc.lineAt(c).to;d=d.update({filter:function(){return!1},filterFrom:f,filterTo:p})}d=d.map(n.changes),null!==u&&null!==s&&(d=d.update({add:Lr(t,i,u,s)}));var h=Mr(d);return{markers:d,hunks:h.hunks,hanging:h.hanging}}}),Hr=[I.tk.atomicRanges.from(Wr,(function(e){return function(){return e.markers}})),R.yy.changeFilter.of((function(e){var n=e.startState.field(Wr);if(!e.docChanged||0===n.markers.size)return!0;var t=e.startState.doc,r=[];return e.changes.iterChanges((function(e,i,o,a,l){var c=l.length,u=Math.max(t.lineAt(e).from-1,0),s=Math.min(t.lineAt(i).to+1,t.length);n.markers.between(u,s,(function(n,u){if(!(e<=n&&i>=u)&&(0===c||!(e===u&&"\n"===l.sliceString(0,1)||i===n&&"\n"===l.sliceString(c-1,c)))){if(o===a){if(i===u+1&&0===t.lineAt(i).length)return;if(e===n-1&&0===t.lineAt(e).length)return}r.push(n-1,u+1)}}))})),!(r.length>0)||r})),R.yy.transactionFilter.of((function(e){var n=e.docChanged?e.state.field(Wr):e.startState.field(Wr);if(0===n.markers.size)return e;var t=e.newSelection,r=!1,i=!1;do{var o=function(e){var o=t.ranges[e],a=o.from,l=o.to,c=a,u=l;if(n.markers.between(a,l,(function(e,n){var t=(e+n)/2;a>e&&a<n&&(c=a<t?e:n),l>e&&l<n&&(u=l<t?e:n)})),c!==a||u!==l){var s,d=o.anchor<o.head?c:u,f=o.anchor<o.head?u:c,p=o.goalColumn,h=null!==(s=o.bidiLevel)&&void 0!==s?s:void 0,v=R.jT.range(d,f,p,h);return t=t.replaceRange(v,e),i=!0,r=!0,"break"}};i=!1;for(var a=0;a<t.ranges.length;a++){if("break"===o(a))break}}while(i);return r?[e,{selection:t,sequential:!0}]:e}))],zr="cm-git-conflict-marker-yours",Vr="cm-git-conflict-marker-base",jr="cm-git-conflict-marker-middle",qr="cm-git-conflict-marker-theirs",$r="cm-git-conflict-marker-hanging",Yr="cm-git-conflict-content-yours",Kr="cm-git-conflict-content-base",Qr="cm-git-conflict-content-theirs";function Jr(e){var n=e.background,t=e.active,r=e.color,i=e.noBorder,o=void 0!==i&&i,a={color:r,backgroundColor:n,backgroundClip:"padding-box",paddingTop:y.TV.space4,paddingBottom:y.TV.space4,fontWeight:y.TV.fontWeightBold,"&.cm-activeLine":{color:r,backgroundColor:t}};return o||(a.borderLeft="4px solid rgba(0, 150, 255, 0.1)",a.paddingLeft="2px"),a}function ei(e){return{backgroundColor:e.background,backgroundClip:"padding-box",borderLeft:"4px solid rgba(0, 150, 255, 0.1)",paddingLeft:"2px","&.cm-activeLine":{backgroundColor:e.active}}}var ni=I.tk.theme((Or={},(0,mt.Z)(Or,".".concat(zr),Jr({background:"rgba(0, 150, 255, 0.1)",active:"rgba(0, 150, 255, 0.15)",color:y.TV.blueStrongest,noBorder:!0})),(0,mt.Z)(Or,".".concat(jr),Jr({background:"rgba(255, 0, 0, 0.1)",active:"rgba(255, 0, 0, 0.15)",color:y.TV.redStrongest})),(0,mt.Z)(Or,".".concat(Vr),Jr({background:"rgba(255, 165, 0, 0.1)",active:"rgba(255, 165, 0, 0.15)",color:y.TV.orangeStrongest})),(0,mt.Z)(Or,".".concat(qr),Jr({background:"rgba(0, 150, 255, 0.1)",active:"rgba(0, 150, 255, 0.15)",color:y.TV.blueStrongest,noBorder:!0})),(0,mt.Z)(Or,".".concat($r),Jr({background:"rgba(100, 150, 255, 0.1)",active:"rgba(100, 150, 255, 0.15)",color:y.TV.blueStrongest,noBorder:!0})),(0,mt.Z)(Or,".".concat(Yr),ei({background:"rgba(0, 255, 0, 0.1)",active:"rgba(0, 255, 0, 0.15)"})),(0,mt.Z)(Or,".".concat(Qr),ei({background:"rgba(255, 0, 0, 0.1)",active:"rgba(255, 0, 0, 0.15)"})),(0,mt.Z)(Or,".".concat(Kr),ei({background:"rgba(255, 165, 0, 0.1)",active:"rgba(255, 165, 0, 0.15)"})),Or)),ti={yours:{marker:I.p.line({class:zr}),content:I.p.line({class:Yr})},base:{marker:I.p.line({class:Vr}),content:I.p.line({class:Kr})},middle:{marker:I.p.line({class:jr})},theirs:{marker:I.p.line({class:qr}),content:I.p.line({class:Qr})},hanging:{marker:I.p.line({class:$r})}},ri=function(){function e(n){(0,le.Z)(this,e),this.builder=new R.f_,this.doc=n}var n=e.prototype;return n.add=function(e,n){var t=this.doc.lineAt(e.from);if(t.to>=e.to)this.builder.add(t.from,t.from,n);else for(var r=t.from;r<=e.to;)this.builder.add(r,r,n),r=this.doc.lineAt(r).to+1},n.finish=function(){return this.builder.finish()},e}(),ii=I.tk.decorations.from(Wr,(function(e){return function(n){var t=n.state.doc,r=new ri(t),i=!0,o=!1,a=void 0;try{for(var l,c=e.hunks[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;n.viewport.from>u.to||n.viewport.to<u.from||(r.add(u.markers.yours,ti.yours.marker),u.content.yours&&r.add(u.content.yours,ti.yours.content),u.markers.base&&r.add(u.markers.base,ti.base.marker),u.content.base&&r.add(u.content.base,ti.base.content),r.add(u.markers.middle,ti.middle.marker),u.content.theirs&&r.add(u.content.theirs,ti.theirs.content),r.add(u.markers.theirs,ti.theirs.marker))}}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.finish()}})),oi=I.tk.decorations.from(Wr,(function(e){return function(){var n=new R.f_,t=!0,r=!1,i=void 0;try{for(var o,a=e.hanging[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.add(l.from,l.from,ti.hanging.marker)}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.finish()}})),ai=[R.Wl.lowest(ni),ii,oi],li=[Wr,Hr,ai],ci=t(92705);var ui=t(66690),si=1e3,di=I.tk.theme({"& .cm-gutters.cm-minimap-gutter":{backgroundColor:y.TV.backgroundDefault,borderLeft:"1px solid ".concat(y.TV.backgroundHigher)},"& .cm-minimap-box-shadow":{boxShadow:"unset"}});var fi=t(10782),pi=t(77542),hi=t(82400);function vi(e){var n=e.filePath,t=e.autoFocus,o=e.isHidden,l=e.deeplink,c=e.onDeeplinkUpdated,u=e.askGhostwriter,s=e.openFile,d=e.openThreadsInbox,p=(0,J.Z)(),g=p.fs,y=p.debuggest,Z=p.presence,b=(0,Sr.uV)(),w=(0,De.P5)({controlName:"flag-ultra-hardcore"}),x="/replEnvironmentDesktop"===f().pathname,S=(0,m.useContext)(fi.B3),T=(0,Sr.jT)(),D=(0,Hn.Z)({filePath:n,noHistory:!0,onException:function(e){var t,r=T({filePath:n}),i={filePath:n,cursorPosition:JSON.stringify(null===(t=null===S||void 0===S?void 0:S.get(pi._s))||void 0===t?void 0:t.position),fileVersion:r};w?b({error:e,tags:{codemirror:!0},extras:i,origin:"CodemirrorEditor: useEditor/onException"}):(0,tr.xp)(e,{tags:{origin:"CodemirrorEditor: useEditor/onException",codemirror:!0},extras:i})}}),_=D.view,P=D.ref;(0,Qe.VD)(_),Dr({view:_,path:n,isHidden:o});var B=(0,jn.Z)({view:_,presence:Z,fs:g,filePath:n}).isLoading;(0,or.Z)({view:_,autoFocus:t,isLoading:B}),(0,ht.Z)({view:_,filePath:n,isLoading:B}),(0,Tr.ZP)({view:_}),(0,wr.Z)({view:_}),(0,ir.Y)({view:_});var A=(0,zn.Lh)();(0,Fn.Z)({view:_}),function(e){var n=e.view,t=(0,Wt.Z)().preferences.minimapDisplay,r=(0,De.P5)({controlName:"flag-ws-minimap"}),i=(0,Pe.d)();(0,Rr.M)((function(){return di}),[],n,"useMinimap"),(0,Rr.M)((function(){if(!n)return null;if(!r||i)return null;if("blocks"!==t&&"characters"!==t)return null;var e=new R.F6;return[e.of(n.state.doc.lines<=si?(0,ui.r)({displayText:t}):[]),I.tk.updateListener.of((function(n){if(n.docChanged){var r=n.startState.doc.lines<=si,i=n.state.doc.lines<=si;return r!==i?n.view.dispatch({effects:e.reconfigure(i?(0,ui.r)({displayText:t}):[])}):void 0}}))]}),[n,r,t,i],n,"useMinimap")}({view:_}),(0,Vn.Z)({view:_,filePath:n,isLoading:B,decorations:A,openFile:s,askGhostwriter:u}),Ne({view:_,debuggest:y,filePath:n,isLoading:B});var U=Be({view:_,filePath:n,askGhostwriter:u,openFile:s}),N=U.onAction,L=U.actions,X=U.contextMenuCoords,M=U.onContextMenu,O=U.closeMenu,F=U.resizeRef,q=(0,$n.Z)({view:_,filePath:n,isLoading:B}),$=function(e){var n=e.view,t=(0,h.Z)(m.useState(null),2),r=t[0],i=t[1],o=(0,G.Z)({view:n});return m.useEffect((function(){if(n){var e=document.createElement("div");return i(e),n.dispatch({effects:o.reconfigure([(0,E.yC)({createPanel:function(){return{top:!0,pos:80,dom:e}}}),I.tk.updateListener.of((function(n){if((0,E.Ep)(n.state)!==(0,E.Ep)(n.startState)&&(0,E.Ep)(n.state)){var t=e.querySelector("[main-field]");if(!t)return;t.focus(),t.select()}})),I.$f.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(){return n.dispatch({effects:Qn.of(null)}),(0,E.nx)(n)}}])])}),function(){n.dispatch({effects:o.reconfigure([])}),i(null)}}}),[n,o]),{domNode:r}}({view:_});(0,Wn.Z)({filePath:n,view:_,isLoading:B,deeplink:l,onDeeplinkUpdated:c}),(0,xr.Z)({view:_,filePath:n}),function(e){var n,t=e.view,r=(0,G.Z)({view:t}),i=(0,C.xZ)(null!==(n=null===t||void 0===t?void 0:t.state.facet(hr.Yp))&&void 0!==n?n:null),o=(0,Pe.d)({tablet:!0});m.useEffect((function(){if(t&&!o){var e=i?[br.Gj,br._j,br.yK,br.gm,br.ZF]:[br.ZF];return t.dispatch({effects:r.reconfigure((0,Zr.ZP)({rules:e,key:"mod"}))}),function(){t.dispatch({effects:r.reconfigure([])})}}}),[t,r,i,o])}({view:_}),function(e){var n=e.view,t=(0,G.Z)({view:n}),r=(0,J.Z)().fs,i=null===n||void 0===n?void 0:n.state.facet(hr.Yp),o=(0,C.xZ)(null!==i&&void 0!==i?i:null);m.useEffect((function(){if(n)return n.dispatch({effects:t.reconfigure(I.tk.domEventHandlers({paste:function(e){var t,a=null===e||void 0===e||null===(t=e.clipboardData)||void 0===t?void 0:t.files,l=function(e){var t=n.state.selection.main.head;n.dispatch({changes:{from:t,insert:e},selection:{anchor:t,head:t+e.length}})};if(a){var c=!0,u=!1,s=void 0;try{for(var d,f=a[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;o?(0,cr.L0)(p).then((function(e){return l('"'+e+'"')})):i&&(0,re.gK)(i)&&pr(p,r,i).then(l)}}catch(h){u=!0,s=h}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}}}}))}),function(){n.dispatch({effects:t.reconfigure([])})}}),[n,t,i,r,o])}({view:_}),(0,ee.Z)({view:_,filePath:n}),function(e){var n=e.view,t=(0,G.Z)({view:n}),r=(0,C.f6)();m.useEffect((function(){if(n&&r)return n.dispatch({effects:t.reconfigure(yr)}),function(){n.dispatch({effects:t.reconfigure([])})}}),[n,t,r])}({view:_});var Y=function(e){var n,t=e.view,r=e.filePath,i=(0,J.Z)().fs,o=(0,C.xZ)(null!==(n=null===t||void 0===t?void 0:t.state.facet(hr.Yp))&&void 0!==n?n:null);return(0,h.Z)((0,ar.L)({accept:[v.z.Code,lr.FILE],drop:function(e,n){if(t){var a=n.getClientOffset(),l=a?t.posAtCoords(a):null;if(null!==l){var c=function(e){t.focus(),t.dispatch({changes:{from:l,insert:e},selection:{anchor:l,head:l+e.length}})};if(e.type===v.z.Code)c(e.code);else{var u=!0,s=!1,d=void 0;try{for(var f,p=e.files[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;o?(0,cr.L0)(h).then((function(e){return c('"'+e+'"')})):r&&(0,re.gK)(r)&&pr(h,i,r).then(c)}}catch(m){s=!0,d=m}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}}}}}}),2)[1]}({view:_,filePath:n});(0,Le.Z)({view:_,filePath:n,decorations:A});var K=function(e){var n=e.view,t=e.filePath,r=(0,h.Z)(m.useState(null),2),i=r[0],o=r[1],a=(0,G.Z)({view:n});return m.useEffect((function(){if(n)return n.dispatch({effects:a.reconfigure(W({setExplainCodeParams:o}))}),function(){n.dispatch({effects:a.reconfigure([])})}}),[n,a,t]),i}({view:_,filePath:n}),Q=function(e){var n=e.view,t=(0,h.Z)(m.useState(null),2),r=t[0],i=t[1],o=(0,G.Z)({view:n}),a=m.useCallback((function(){if(!n)throw new Error("did not expect to be asked to open generate code modal without view");var e=n.state.selection.main;n.dispatch({effects:[H.of(!0),I.tk.scrollIntoView(e.to)]})}),[n]);return m.useEffect((function(){if(n)return n.dispatch({effects:o.reconfigure(z({setGenerateCodePortalProps:i}))}),function(){n.dispatch({effects:o.reconfigure([])})}}),[n,o]),{generateCodePortalProps:r,openGenerateCodeModal:a}}({view:_}),ne=Q.generateCodePortalProps,te=Q.openGenerateCodeModal,ie=function(e){var n=e.view,t=(0,h.Z)(m.useState(null),2),r=t[0],i=t[1],o=(0,G.Z)({view:n}),a=m.useCallback((function(){if(!n)throw new Error("did not expect to be asked to open transform code modal without view");var e=n.state.selection.main;n.dispatch({effects:[V.of(!0),I.tk.scrollIntoView(e.to)]})}),[n]);return m.useEffect((function(){if(n)return n.dispatch({effects:o.reconfigure(j({setTransformCodePortalProps:i}))}),function(){n.dispatch({effects:o.reconfigure([])})}}),[n,o]),{transformCodePortalProps:r,openTransformCodeModal:a}}({view:_}).transformCodePortalProps,oe=Tt({view:_,filePath:n,isLoading:B,enable:x});return(0,Cr.Z)({view:_,filePath:n}),(0,kr.Z)({view:_,filePath:n}),function(e){var n=e.view,t=e.filePath,r=void 0===t?null:t,i=e.disableDiff,o=void 0!==i&&i,a=e.disableConflicts,l=void 0!==a&&a,c=(0,De.P5)({controlName:"flag-git-gud"}),u=(0,De.P5)({controlName:"flag-git-gud-gutter"}),s=(0,De.P5)({controlName:"flag-editor-git-conflict-markers"}),d=(0,J.Z)().git;o=!c||!u||o,l=!c||!s||l,(0,Rr.M)((function(){var e=[];return o||e.push((0,ci.W2)(d,r)),l||e.push(li),0===e.length?null:e}),[l,o,r,d],n,"useGitEditorFeatures")}({view:_,filePath:n}),function(e){var n=e.view,t=(0,De.P5)({controlName:"flag-editor-css-containment"});(0,Rr.M)((function(){return t?Br:null}),[t],n,"useCSSContainment")}({view:_}),(0,a.BX)("div",{ref:F,css:Er.ac,"data-cy":B?"workspace-cm-editor-loading":"workspace-cm-editor-".concat(n),children:[B?(0,a.tZ)("div",{css:Er.ov,children:(0,a.tZ)(rr.Z,{})}):null,(0,a.tZ)(hi.Z,{ref:function(e){P(e),Y(e)},view:_,style:B?{opacity:0}:void 0,onContextMenu:M,css:Er.Mp}),X&&_?(0,a.tZ)(k.ZP,{view:_,coords:X,actions:L,closeMenu:O,onAction:N}):null,K?(0,a.tZ)(fn,{code:K.code,dom:K.dom,filePath:n}):null,ne?(0,a.tZ)(Pn,(0,i.Z)((0,r.Z)({},ne),{filePath:n})):null,ie?(0,a.tZ)(On,(0,i.Z)((0,r.Z)({},ie),{filePath:n})):null,q&&n?(0,a.tZ)(qn.Z,{dom:q,onShowGenerateCodeModal:te,filePath:n}):null,$.domNode?(0,a.tZ)(pt,{dom:$.domNode,view:_}):null,(0,a.tZ)(zn.Iq,{source:A.observable}),_&&d?(0,a.tZ)(a.HY,{children:Object.entries(oe.threadElements).map((function(e){var t=(0,h.Z)(e,2),r=t[0],i=t[1];return en.createPortal((0,a.tZ)(nr,{threadId:r,view:_,filePath:n,openThreadsInbox:d}),i)}))}):null]})}var mi=t(80618),gi=t(25147),yi=t(31876),Zi=t(17042),bi=t(41347),wi=t(81202),xi=t.n(wi),Ci=t(73297),ki=t(7247);function Si(e,n,t){var r=t.find((function(t){var r=t.range;return(0,Re.R)(e,r.end)>=n&&(0,Re.R)(e,r.start)<=n}));return null==r?[]:r.children?[r].concat(Si(e,n,r.children)):[r]}function Ti(e,n){return e.length===n.length&&e.every((function(e,t){return e===n[t]}))}var Ei=t(14124),Ri=t(98143),Ii=t(51129),Gi=t(8415),Di=t(46747),_i=t(84265),Pi=t(11122),Bi=t(51936),Ai=t(38231),Ui=t(53674),Ni=t(34204),Li=(0,Pi.iv)([y.l0.p(4)]);function Xi(e){var n=e.items,t=e.children,l=e.menuProps,c=e.selectedKeys,u=e.onAction,s=(0,Bi.D)({items:n,children:t,selectedKeys:c,selectionMode:"single"}),d=(0,m.useRef)(null),f=(0,Ii.H9)((0,r.Z)({items:n,onAction:u},l),s,d);return(0,a.tZ)(Z.G,(0,i.Z)((0,r.Z)({},f.menuProps),{innerRef:d,css:Li,children:(0,o.Z)(s.collection).map((function(e){return(0,a.tZ)(Fi,{item:e,state:s},e.key)}))}))}var Mi={root:(0,Pi.iv)([y.l0.flex.row,y.l0.align.center,y.l0.position.relative,Di.e]),selected:(0,Pi.iv)([{opacity:1,backgroundColor:Ai.vb.interactiveBackground}])},Oi={opacity:1};function Fi(e){var n=e.item,t=e.state,o=(0,m.useRef)(null),l=(0,Ii.iX)({key:n.key},t,o),c=l.menuItemProps,u=l.isSelected,s=(0,Ui.XI)({}),d=s.hoverProps,f=s.isHovered;return(0,a.tZ)(Z.G,(0,i.Z)((0,r.Z)({innerRef:o,css:[Mi.root,u&&Mi.selected],style:f||u?Oi:void 0},(0,Ni.dG)(c,d)),{children:n.rendered}))}var Wi={root:(0,Pi.iv)([y.l0.p(4),y.l0.rowWithGap(4),y.l0.align.center]),text:(0,Pi.iv)([y.l0.truncate,y.l0.flex.growAndShrink(1),{fontSize:y.TV.fontSizeDefault}])};function Hi(e){return(0,a.BX)(Z.G,{css:[Wi.root],children:[e.icon?(0,m.cloneElement)(e.icon,{size:16}):null,(0,a.tZ)(Z.G,{css:Wi.text,children:e.text})]})}var zi=t(47211),Vi=t(76544),ji=t(47579),qi=t(31230),$i=t(13700),Yi=t(98057),Ki=t(92090),Qi=t(7580),Ji=t(60355),eo=t(47493),no=t(7225),to=t(81415),ro=t(5559),io=t(76093),oo=function(e){var n=new Set(io.Z),t=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,h.Z)(a.value,3),u=c[0],s=c[1],d=c[2];if(!n.has(u))throw new Error("Symbol not supported by LSP client. Please add to the supported symbol icons array");"string"===typeof s&&(s=to.s.get(s)),t.set(u,[s,null!==d&&void 0!==d?d:y.TV.foregroundDefault])}}catch(f){i=!0,o=f}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t}([[no.SymbolKind.Array,Ki.Z],[no.SymbolKind.Boolean,Ji.Z],[no.SymbolKind.Class,"class",y.TV.yellowDefault],[no.SymbolKind.Constant,"constant",y.TV.blueStronger],[no.SymbolKind.Constructor,"method",y.TV.blurpleDefault],[no.SymbolKind.Enum,ji.Z,y.TV.orangeDefault],[no.SymbolKind.EnumMember,eo.Z,y.TV.blueStronger],[no.SymbolKind.Event,zi.Z],[no.SymbolKind.Field,Qi.Z],[no.SymbolKind.File,qi.Z],[no.SymbolKind.Function,"function",y.TV.blurpleStronger],[no.SymbolKind.Interface,$i.Z,y.TV.blueStronger],[no.SymbolKind.Key,Yi.Z],[no.SymbolKind.Method,"method",y.TV.blurpleDefault],[no.SymbolKind.Module,ro.Z,y.TV.purpleDefault],[no.SymbolKind.Namespace,Vi.Z],[no.SymbolKind.Object,Ji.Z,y.TV.blueDimmer],[no.SymbolKind.Operator,Ji.Z],[no.SymbolKind.Package,ro.Z,y.TV.purpleDefault],[no.SymbolKind.Property,Qi.Z],[no.SymbolKind.String,at.Z],[no.SymbolKind.Struct,Vi.Z],[no.SymbolKind.TypeParameter,eo.Z],[no.SymbolKind.Variable,eo.Z,y.TV.blueStronger]]);function ao(e){var n,t=e.kind,r=(0,h.Z)(null!==(n=oo.get(t))&&void 0!==n?n:[Ji.Z,y.TV.foregroundDefault],2),i=r[0],o=r[1];return(0,a.tZ)(i,{color:o,size:16})}function lo(e){return CSS.escape(e.name)}function co(e){var n=e.selectedSymbol,t=e.symbols,r=e.moveCursor,i=e.icon,o=e.text,l=(0,Ri.W)({onOpenChange:function(e){e&&(0,Y.j)(Y.U3.CODE_NAVIGATION_USED,{action:"opened"})}}),c=m.useRef(null),u=(0,Ii.u4)({},l,c),s=u.menuTriggerProps,d=u.menuProps,f=n?new Set([n.name]):void 0;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(Di.z,{text:o,icon:i,innerRef:c,ariaProps:s,active:l.isOpen}),l.isOpen?(0,a.tZ)(_i.J,{triggerRef:c,state:l,placement:"bottom left",children:(0,a.tZ)(Xi,{menuProps:d,items:t,selectedKeys:f,onAction:function(e){var n=t.find((function(n){return lo(n)===e}));n&&(r(n.selectionRange.start),(0,Y.j)(Y.U3.CODE_NAVIGATION_USED,{action:"jumped"}))},children:function(e){return(0,a.tZ)(Gi.ck,{children:(0,a.tZ)(Hi,{icon:(0,a.tZ)(ao,{kind:e.kind}),text:e.name})},lo(e))}})}):null]})}var uo=m.memo((function(e){var n=e.symbols,t=e.symbolsPath,r=e.moveCursor,i=t.length?t[t.length-1]:null,o=i?i.children:n;return(0,a.BX)(a.HY,{children:[t.map((function(e,i){var o=0===i?n:t[i-1].children;return o?(0,a.BX)(m.Fragment,{children:[(0,a.tZ)(Yn.Z,{size:12}),(0,a.tZ)(co,{symbols:o,icon:(0,a.tZ)(ao,{kind:e.kind}),text:e.name,selectedSymbol:e,moveCursor:r})]},lo(e)):null})),(null===o||void 0===o?void 0:o.length)?(0,a.BX)(a.HY,{children:[(0,a.tZ)(Yn.Z,{size:12}),(0,a.tZ)(co,{symbols:o,text:"...",moveCursor:r})]}):null]})}));function so(e){var n=e.view,t=(0,ki.Z)((function(){return(0,s.cn)(null)}),[]),r=(0,s.b9)(t),i=m.useCallback((function(e){null===n||void 0===n||n.dispatch({scrollIntoView:!0,selection:R.jT.cursor((0,Re.R)(n.state.doc,e))}),null===n||void 0===n||n.focus()}),[n]);(0,Rr.M)((function(){var e=nt()(r,200);return I.tk.updateListener.of((function(n){var t=n.state.field(Ci.A,!1)||null,r=t!==n.startState.field(Ci.A,!1);(n.selectionSet||r)&&e({doc:n.view.state.doc,cursor:n.state.selection.main.head,symbols:t})}))}),[r],n,"useCodeNav");var o=(0,ki.Z)((function(){return(0,Ei.kv)(t,(function(e){return(null===e||void 0===e?void 0:e.symbols)?Si(e.doc,e.cursor,e.symbols):[]}),Ti)}),[t]),a=(0,ki.Z)((function(){return(0,Ei.kv)(t,(function(e){return null===e||void 0===e?void 0:e.symbols}),xi())}),[t]);return{symbols:(0,s.Dv)(a),symbolsPath:(0,s.Dv)(o),moveCursor:i}}var fo=m.memo((function(e){var n=so({view:e.view}),t=n.symbols,r=n.symbolsPath,i=n.moveCursor;return(null===t||void 0===t?void 0:t.length)?(0,a.tZ)(uo,{symbols:t,symbolsPath:r,moveCursor:i}):null})),po=t(96009),ho=t(58076);function vo(e){var n=e.path,t=e.performPaneOperation,r=(0,Qe.uN)(),i=(0,m.useCallback)((function(e){t({operation:"replace",pane:(0,po.$E)(e)})}),[t]);return(0,a.tZ)(po.h4,{children:(0,a.tZ)(po.Qc,{children:(0,a.tZ)(ho.t,{path:n,onFileClick:i,children:(0,a.tZ)(fo,{view:r})})})})}function mo(e){var n=(0,Zi.Z)(),t=(0,C.xZ)(e.filePath),r=(0,gi.Z)(yi.y.Editor),i=(0,bi.Z)();return(0,a.BX)("div",{ref:r,css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%",boxShadow:"".concat(n?"0 3px 0 3px ".concat(n):"0")},children:[e.performPaneOperation?(0,a.tZ)(vo,{performPaneOperation:e.performPaneOperation,path:e.filePath}):null,(0,a.BX)("div",{css:Er.ev,children:[(0,a.tZ)(vi,{askGhostwriter:e.askGhostwriter,openFile:e.openFile,openThreadsInbox:e.openThreadsInbox,filePath:e.filePath,autoFocus:e.autoFocus,hideMobileKeyboardToolbar:e.hideMobileKeyboardToolbar,isHidden:e.isHidden,deeplink:e.deeplink,onDeeplinkUpdated:e.onDeeplinkUpdated}),t?(0,a.tZ)(x,{}):null]}),(0,a.tZ)("div",{css:{display:i?"none":"block"},children:(0,a.tZ)(mi.Z,{performPaneOperation:e.performPaneOperation})}),e.hideMobileKeyboardToolbar?null:(0,a.tZ)(p.Z,{filePath:e.filePath,isLoading:!1})]})}var go=t(66834),yo=t(31743),Zo=t(48803),bo=t(97774),wo=t(6897),xo=t(94517),Co=t(30361),ko=t(81974),So=t(12417),To=t(39994),Eo=t(72840),Ro=t(10275);var Io={Content:function(e){var n=e.pane,t=e.options;return(0,a.tZ)(Do,(0,i.Z)((0,r.Z)({},n.data),{isActive:t.isActive,isHidden:t.isHidden,performPaneOperation:t.performPaneOperation}))},Icon:function(e){var n=e.pane,t=e.size;return(0,a.tZ)(c.Z,{path:n.data.path||"",size:t})},getTitle:function(e){return e.data.path?(0,re.UO)(e.data.path):"No file open"}};function Go(e){var n=e.path,t=e.isActive,r=e.performPaneOperation,i=(0,Qe.uN)(),l=(0,Zo.Gb)({filePath:n});(0,Co.Z)({view:i,onUpdate:function(){return r({operation:"commit"})}});var c=function(e){return(0,ki.Z)((function(){return e?{match:ko.pl,data:{type:"action",label:"Toggle all folds",icon:(0,a.tZ)(Yn.Z,{}),run:function(){0===(0,So.q2)(e.state).size?(0,So.g_)(e):(0,So.jZ)(e)}}}:null}),[e])}(i);(0,xo.x)(Zo.kq,{enabled:Boolean(t&&l),run:function(){null===l||void 0===l||l.format()}});var u=(0,ki.Z)((function(){return l?l.isFormatting?{type:"action",icon:(0,a.tZ)(bo.Z,{}),label:"Formatting...",run:function(){}}:{type:"action",icon:(0,a.tZ)(wo.Z,{}),label:"Format "+(0,re.UO)(n),run:function(){l.format()}}:null}),[l,n]),s=(0,po.Mp)({path:n,performPaneOperation:r});return(0,yo.L5)((function(){if(i){var e,n=[];if(c&&n.push(c),s)(e=n).push.apply(e,(0,o.Z)(s));return{type:"codeEditor",actions:u?[u]:void 0,commands:n,focus:function(){i.focus()},getCurrentSelectionText:function(){if(!i.state.selection.main.empty)return i.state.sliceDoc(i.state.selection.main.from,i.state.selection.main.to)}}}}),[i,u,c,n,s]),null}function Do(e){var n=e.path,t=e.line,r=e.col,i=e.isActive,o=e.isHidden,c=e.performPaneOperation,f=(0,go.EI)(n,c),p=(0,d.useRouter)(),h=!(0,u.Z)()&&!(0,l.Vg)(p)&&i,v=(0,To.T)(n),g=(0,ki.Z)((function(){return{line:t,col:r}}),[t,r]),y=(0,ki.Z)((function(){return function(){c({operation:"replace",pane:{type:"codeEditor",data:{path:n}}})}}),[c,n]),Z=function(e){var n=e.openPane,t=(0,Ro.d)(),r=(0,it.Z)(n),i=(0,Eo.ql)();return(0,ki.Z)((function(){if(t)return function(e){r.current({type:"ghostwriterChat"}),i({chatMessage:e})}}),[r,i,t])}({openPane:function(e){return c({operation:"open",secondary:!0,pane:e})}}),b=(0,ki.Z)((function(){return function(e){c({operation:"commit"}),c({operation:"open",pane:{type:"codeEditor",data:e}})}}),[c]),w=(0,m.useCallback)((function(){c({operation:"open",secondary:!0,pane:{type:"threadInbox"}})}),[c]);return n?v?(0,a.tZ)(To.c,{path:n,error:v}):(0,a.tZ)(s.zt,{scope:Qe.d8,children:(0,a.BX)(go.ox.Provider,{value:f,children:[(0,a.tZ)(mo,{filePath:n,autoFocus:h,isHidden:null!==o&&void 0!==o&&o,deeplink:g,onDeeplinkUpdated:y,hideMobileKeyboardToolbar:!0,performPaneOperation:c,askGhostwriter:Z,openFile:b,openThreadsInbox:w},n),(0,a.tZ)(Go,{path:n,isActive:i,performPaneOperation:c})]})}):null}},34509:function(e,n,t){t.d(n,{R:function(){return xt}});var r=t(4541),i=t(57135),o=t(72006),a=t(4405),l=t(2272),c=t(96583),u=t(50959),s=t(62830),d=t(25776),f=t(22167),p=t(65001),h=t(98260),v=t(30241),m=t(97774),g=t(43119),y=t(71440),Z=t(41256),b=t(268),w=t(67216),x=t(59187),C=t(94969);function k(){var e=(0,g.Z)(["\n  fragment HostingDeploymentRepl on Repl {\n    id\n    __typename\n    slug\n    lang {\n      id\n      displayName\n    }\n    config {\n      isVnc\n    }\n    source {\n      release {\n        repl {\n          title\n        }\n      }\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        ...TargetHostingDeployment\n        currentBuild {\n          ...CurrentBuild2\n        }\n        inProgressBuild {\n          ...CurrentBuild2\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n    ...HostingTierReplPowerUps\n  }\n  ","\n  ","\n  ","\n"]);return k=function(){return e},e}function S(){var e=(0,g.Z)(["\n  query HostingDeployment2($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...HostingDeploymentRepl\n      }\n    }\n  }\n  ","\n"]);return S=function(){return e},e}function T(){var e=(0,g.Z)(["\n  mutation DeployHostingBuild2($input: DeployHostingBuild2Input!) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return T=function(){return e},e}function E(){var e=(0,g.Z)(["\n  mutation FailHostingBuild2($input: FailHostingBuildInput!) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return E=function(){return e},e}function R(){var e=(0,g.Z)(["\n  mutation SendDeploymentLifecycleCommand(\n    $input: SendDeploymentLifecycleCommandInput!\n  ) {\n    sendDeploymentLifecycleCommand(input: $input) {\n      ... on SendDeploymentLifecycleCommandResult {\n        repl {\n          id\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return R=function(){return e},e}function I(){var e=(0,g.Z)(["\n  subscription HostingDeployActionUpdates(\n    $input: HostingBuildDeployActionUpdatesInput!\n  ) {\n    hostingBuildDeployActionUpdates(input: $input) {\n      ... on HostingBuildDeployLogAction {\n        log\n      }\n      ... on HostingBuildDeployStatusAction {\n        status\n        message\n      }\n    }\n  }\n"]);return I=function(){return e},e}function G(){var e=(0,g.Z)(["\n  query HostingDeployActionHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return G=function(){return e},e}var D={},_=(0,y.Ps)(k(),Z.uC,Z.MX,b.Fh),P=(0,y.Ps)(S(),_);var B=(0,y.Ps)(T(),Z.MX,Z.uC);var A=(0,y.Ps)(E(),Z.MX);var U=(0,y.Ps)(R());var N=(0,y.Ps)(I());function L(e){var n=(0,o.Z)({},D,e);return C.m(N,n)}var X=(0,y.Ps)(G());var M,O=t(57389),F=t(38231),W=t(98836),H=t(92090),z=t(35238),V=t(19753),j=t(91963),q=t(3740),$=t(11122),Y=t(20866),K=function(e){var n=e.children;return(0,r.tZ)(d.G,{css:[f.l0.height("100%"),f.l0.overflowY("auto")],children:(0,r.tZ)(d.G,{css:[f.l0.colWithGap(8),f.l0.flex.grow(1)],children:(0,r.tZ)(d.G,{css:[f.l0.flex.grow(1),f.l0.position.relative],children:n})})})},Q=(0,$.iv)([f.l0.width("100%"),f.l0.maxWidth("none")]),J=function(e){var n=e.children,t=e.css,i=e.fullWidth;return(0,r.tZ)(d.G,{css:[i?Q:Y.F3,f.l0.px(8),f.l0.my(12),t],children:n})},ee=function(e){var n=e.children;return(0,r.tZ)(d.G,{css:[f.l0.mb(0),{borderBottom:"1px solid ".concat(f.TV.outlineDimmest)}],children:n})},ne=t(69940),te=t(98824),re=t(7885),ie=function(e){var n=e.currentBuild,t=e.hostingTier,i=e.status,o=e.onViewAction;return u.useEffect((function(){(0,re.y5)({context:ne.kO.Deployment})}),[]),(0,r.tZ)(ee,{children:(0,r.tZ)(J,{children:(0,r.tZ)(te._,{currentBuild:n,hostingTier:null!==t&&void 0!==t?t:void 0,status:i,onManageClick:function(){return o({type:ne.ap.ManageHostingTier})}})})})},oe=t(67516),ae=t(3668),le=t(37676),ce=t(55544),ue=t(2884),se=t(39056),de=t(37195),fe=t(94088),pe=t(81377),he=t(55116),ve=t(75916),me=function(e){var n,t=e.deploymentId,i=e.currentBuild,o=(null!==(n=i.repl.domains)&&void 0!==n?n:[]).filter((function(e){return null!==e&&null==(null===e||void 0===e?void 0:e.hosting_deployment_id)})),a=(0,u.useState)(0!==o.length),l=a[0],c=a[1],s=(0,u.useState)(!0),p=s[0],h=s[1];return(0,u.useEffect)((function(){(0,re.y5)({context:ne.kO.Domains})}),[]),(0,r.tZ)(J,{children:(0,r.BX)(d.G,{css:[f.l0.colWithGap(16)],children:[l?(0,r.tZ)(ye,{canonicalCustomDomains:o,deploymentId:t,proxyIp:i.repl.apexProxy,replId:i.repl.id,onBegin:function(){return h(!1)},onClose:function(){return h(!0)},onComplete:function(){c(!1),h(!0)}}):null,p?(0,r.tZ)(oe.Z,{showTitle:!1,replId:i.repl.id,deploymentId:t,onLink:function(){},onUnlink:function(){}}):null]})})};!function(e){e.Intro="intro",e.BeginTransfer="begin-transfer",e.Finished="finished"}(M||(M={}));var ge,ye=function(e){var n,t=e.canonicalCustomDomains,i=e.deploymentId,o=e.onBegin,a=e.onClose,l=e.onComplete,c=e.replId,s=e.proxyIp,p=(0,u.useState)(M.Intro),v=p[0],m=p[1],g=0,y=1===t.length?"domain":"domains",Z=(0,r.BX)(d.G,{css:[f.l0.rowWithGap(16)],children:[(0,r.tZ)(ae.h,{alt:"Back",onClick:function(){m(M.Intro),a()},colorway:"grey",children:(0,r.tZ)(se.Z,{})}),(0,r.tZ)(ce.xv,{variant:"subheadDefault",children:"Transfer Domains"})]});switch(v){case M.Intro:n=(0,r.BX)(le.T,{elevated:!0,css:[f.l0.align.start,f.l0.border({color:f.TV.outlineDimmer}),f.l0.borderRadius(8),f.l0.colWithGap(8),f.l0.p(8)],children:[(0,r.BX)(ce.xv,{multiline:!0,children:["You have attached ",t.length," custom ",y," to your development Repl. Please transfer"," ","domain"===y?"it":"them"," to your deployment for the best user experience."]}),(0,r.tZ)(h.zx,{colorway:"primary",text:"Transfer ".concat(y," to deployment"),onClick:function(){m(M.BeginTransfer),o()}})]});break;case M.BeginTransfer:n=(0,r.BX)(r.HY,{children:[Z,(0,r.tZ)(ce.xv,{multiline:!0,children:"Update the following records with your domain provider."}),t.map((function(e){return(0,r.tZ)(Ze,{deploymentId:i,customDomain:e,onTransferred:function(){(g+=1)===t.length&&m(M.Finished)},proxyIp:s,replId:c},e.domain)}))]});break;case M.Finished:n=(0,r.BX)(r.HY,{children:[Z,(0,r.BX)(d.G,{css:[f.l0.colWithGap(8),f.l0.align.center,f.l0.justify.center,f.l0.p(32)],children:[(0,r.tZ)(ce.xv,{multiline:!0,css:[f.l0.textAlign.center],children:"You've finished initiating the domain transfers. It can take up to 48 hours for your domains to be re-verified."}),(0,r.tZ)(h.zx,{colorway:"primary",text:"Return to Domains",onClick:function(){return l()}})]})]})}return(0,r.tZ)(d.G,{css:[f.l0.colWithGap(16)],children:n})};!function(e){e.Overview="overview",e.Transferring="transferring",e.Finished="finished"}(ge||(ge={}));var Ze=function(e){var n,t,o=e.customDomain,a=e.deploymentId,s=e.onTransferred,v=e.proxyIp,g=e.replId,y=(0,l.Z)((0,he.h3)(),1)[0],Z=(0,l.Z)((0,pe.N)(),1)[0],b=(0,u.useState)(),w=b[0],x=b[1],C=(0,u.useState)(ge.Overview),k=C[0],S=C[1],T=[{type:"A",value:v},{type:"TXT",value:"replit-verify=".concat(a)}],E=function(){var e=(0,i.Z)((function(){var e,t,r;return(0,c.__generator)(this,(function(i){switch(i.label){case 0:S(ge.Transferring),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Z({variables:{input:{id:g,removeDomain:o.domain}}})];case 2:return i.sent().data?[3,4]:(x("Something unexpected happened, please try again."),[2]);case 3:return e=i.sent(),x(e.message),[2];case 4:return i.trys.push([4,6,,7]),[4,y({variables:{replId:g,domain:o.domain,deploymentId:a}})];case 5:return(t=i.sent()).data?"Repl"!==t.data.linkReplDomain2.__typename&&-1===t.data.linkReplDomain2.message.indexOf("DNS updates can take up to 48 hours to fully synchronize")?(x(t.data.linkReplDomain2.message),[2]):("Repl"===t.data.linkReplDomain2.__typename&&(n=!0),[3,7]):(x("Something unexpected happened, please try again."),[2]);case 6:return r=i.sent(),x(r.message),[2];case 7:return S(ge.Finished),s(),[2]}}))}));return function(){return e.apply(this,arguments)}}();switch(k){case ge.Overview:t=(0,r.BX)(r.HY,{children:[(0,r.tZ)(ce.xv,{variant:"subheadDefault",children:o.domain}),T.map((function(e,n){return(0,r.BX)(d.G,{css:0===n?[f.l0.border({direction:"bottom"}),f.l0.pb(8)]:[],children:[(0,r.BX)(ce.xv,{children:[e.type," Record"]}),(0,r.BX)(d.G,{css:[f.l0.rowWithGap(24),f.l0.align.end],children:[(0,r.BX)(d.G,{children:[(0,r.tZ)(ce.xv,{variant:"small",color:"dimmer",children:"Hostname"}),(0,r.tZ)(ce.xv,{children:o.domain})]}),(0,r.BX)(d.G,{children:[(0,r.tZ)(ce.xv,{variant:"small",color:"dimmer",children:"Type"}),(0,r.tZ)(ce.xv,{children:e.type})]}),(0,r.BX)(d.G,{css:[f.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(ce.xv,{variant:"small",color:"dimmer",children:"Record"}),(0,r.tZ)(ce.xv,{children:e.value})]}),(0,r.tZ)(ae.h,{alt:"Copy to Clipboard",onClick:function(){return(0,de.Z)(e.value)},children:(0,r.tZ)(ue.Z,{})})]})]},n)})),(0,r.tZ)(d.G,{css:[f.l0.align.start,f.l0.pt(8)],children:(0,r.tZ)(h.zx,{colorway:"primary",text:"I've updated these records",stretch:!1,onClick:function(){return E()}})})]});break;case ge.Transferring:t=(0,r.BX)(r.HY,{children:[(0,r.tZ)(ce.xv,{variant:"subheadDefault",children:o.domain}),(0,r.BX)(d.G,{css:[f.l0.rowWithGap(8),f.l0.color.accentPrimaryStrongest,f.l0.justify.center,f.l0.align.center,f.l0.py(16)],children:[(0,r.tZ)(m.Z,{}),(0,r.tZ)(ce.xv,{children:"Swapping domain..."})]})]});break;case ge.Finished:t=(0,r.BX)(d.G,{css:[f.l0.rowWithGap(16),f.l0.align.center,f.l0.justify.spaceBetween],children:[(0,r.tZ)(ce.xv,{variant:"subheadDefault",children:o.domain}),n?(0,r.tZ)(ve.Z,{color:"green"}):(0,r.tZ)(fe.Z,{})]})}return(0,r.BX)(le.T,{elevated:!0,css:[f.l0.p(8),f.l0.colWithGap(8),f.l0.borderRadius(8)],children:[w?(0,r.tZ)(p.E,{colorway:"negative",text:w}):null,w?null:t]})},be=t(17202);function we(){var e=(0,g.Z)(["\n  fragment HostingActivityLogBuild on HostingBuild {\n    id\n    status\n  }\n"]);return we=function(){return e},e}function xe(){var e=(0,g.Z)(["\n  fragment HostingActivityLogLine2 on HostingActivityLog {\n    id\n    build {\n      ...HostingActivityLogBuild\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n  }\n  ","\n"]);return xe=function(){return e},e}function Ce(){var e=(0,g.Z)(["\n  query HostingDeploymentActivityLogs2(\n    $replId: String!\n    $after: String\n    $count: Int\n  ) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine2\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Ce=function(){return e},e}var ke={},Se=(0,y.Ps)(we()),Te=(0,y.Ps)(xe(),Se),Ee=(0,y.Ps)(Ce(),Te);var Re,Ie=t(72294),Ge=t(62223),De=t(90189),_e=function(e){var n=e.color;return(0,r.tZ)(d.G,{css:[f.l0.align.center,f.l0.rowWithGap(8),{textTransform:"capitalize"}],children:(0,r.tZ)(d.G,{as:"span",css:[f.l0.width("8px"),f.l0.height("8px"),f.l0.borderRadius("full"),{backgroundColor:n,boxShadow:"0 0 12px ".concat(n)}]})})};!function(e){e.Current="current"}(Re||(Re={}));var Pe,Be,Ae,Ue=(0,O.Z)({},Re.Current,{icon:(0,r.tZ)(_e,{color:f.TV.blueStronger}),text:"Current deployment"}),Ne=d.K.div,Le=function(e){var n=e.activityLogItem,t=e.isCurrent?Re.Current:n.type,i=(0,l.Z)(u.useState(!1),2),o=i[0],a=i[1],c=(0,l.Z)(u.useState(!1),2),s=c[0],p=c[1],h=u.useRef(!1);u.useEffect((function(){h.current=!0;var e=setTimeout((function(){p(o)}),200);return function(){clearTimeout(e)}}),[o]);var v=t in Ue&&Ue[t];if(!v)return null;var m=v.icon,g=v.text;return(0,r.tZ)(d.G,{css:[f.l0.p(8)],onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:(0,r.BX)(De.Z,{isOpen:s,onClickOutside:function(){return p(!1)},padding:8,children:[(0,r.tZ)(Ne,{css:f.l0.cursor.pointer,children:m}),(0,r.tZ)(d.G,{css:[f.l0.maxWidth(240)],children:(0,r.tZ)(ce.xv,{multiline:!0,children:g})})]})})},Xe=t(51609),Me=function(e){return e.loading?(0,r.tZ)(d.G,{css:[f.l0.p(8),f.l0.center],children:(0,r.tZ)(m.Z,{})}):null},Oe=t(96385),Fe=function(e){var n=e.build,t=n.id.slice(0,8),i=(0,l.Z)(u.useState(!1),2),o=i[0],a=i[1],c=(0,l.Z)(u.useState(!1),2),s=c[0],p=c[1],h=u.useRef(!1);return u.useEffect((function(){h.current=!0;var e=setTimeout((function(){p(o)}),200);return function(){clearTimeout(e)}}),[o]),(0,r.tZ)("span",{onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:(0,r.BX)(De.Z,{isOpen:s,onClickOutside:function(){return p(!1)},padding:8,children:[(0,r.tZ)("span",{css:[F.gU.filled,f.l0.display.inlineBlock,f.l0.fontSize("small"),f.l0.px(4),f.l0.py(2),f.l0.borderRadius(4)],children:t}),(0,r.tZ)(d.G,{css:[f.l0.maxWidth(260)],children:(0,r.tZ)(ce.xv,{variant:"small",multiline:!0,children:n.id})})]})})},We=(Pe={},(0,O.Z)(Pe,Oe.dD.Deploy,(function(e){return(0,r.BX)(r.HY,{children:["deployed ",(0,r.tZ)(Fe,{build:e})]})})),(0,O.Z)(Pe,Oe.dD.Rollback,(function(e){return(0,r.BX)(r.HY,{children:["rolled back ",(0,r.tZ)(Fe,{build:e})]})})),(0,O.Z)(Pe,Oe.dD.Fail,(function(e){return(0,r.BX)(r.HY,{children:["failed to deploy ",(0,r.tZ)(Fe,{build:e})]})})),Pe),He=function(e){var n=e.activityLogItem,t=n.type,i=n.build,o=n.user.displayName,a=t in We&&We[t](i);return a?(0,r.BX)(ce.xv,{css:f.l0.color.foregroundDimmer,children:[(0,r.tZ)("span",{css:[f.l0.color.foregroundDefault,f.l0.fontWeight.medium],children:o+" "}),a]}):null},ze=t(40306),Ve=(Be={},(0,O.Z)(Be,Oe.dD.Deploy,{icon:(0,r.tZ)(q.Z,{}),color:f.TV.accentPositiveDefault}),(0,O.Z)(Be,Oe.dD.Rollback,{icon:(0,r.tZ)(q.Z,{}),color:f.TV.blurpleStronger}),(0,O.Z)(Be,Oe.dD.Fail,{icon:(0,r.tZ)(ze.Z,{}),color:f.TV.accentNegativeDefault}),Be),je=function(e){var n=e.type,t=n in Ve&&Ve[n];if(!t)return null;var i=t.icon,o=t.color;return(0,r.tZ)(d.G,{css:[f.l0.p(8),{color:o}],children:i})},qe=t(9970),$e=t(59698),Ye=t(11359),Ke=t(74082),Qe=t(13469),Je=t(24793),en=t(70788),nn=function(e){var n=e.stage,t=e.activeStage;return n===e.erroredStage?(0,r.tZ)(ze.Z,{}):n<t?(0,r.tZ)(ve.Z,{}):n===t?(0,r.tZ)(m.Z,{}):(0,r.tZ)(en.Z,{})},tn=function(e){var n=e.stage,t=e.activeStage;return n===e.erroredStage?"accentNegativeDefault":n<t?"accentPositiveDefault":n===t?"accentPrimaryDefault":"backgroundHigher"},rn=function(e){var n=e.stage,t=e.activeStage,i=e.text,o=e.erroredStage,a=e.firstStage,l=void 0!==a&&a;return(0,r.BX)(r.HY,{children:[l?null:(0,r.tZ)("div",{css:{flex:1,width:60,height:2,backgroundColor:Qe.TV[tn({stage:n,activeStage:t,erroredStage:o})]}}),(0,r.tZ)(Je.D,{text:i,css:[{backgroundColor:Qe.TV[tn({stage:n,activeStage:t,erroredStage:o})]}],iconRight:(0,r.tZ)(nn,{stage:n,activeStage:t,erroredStage:o})})]})},on=t(24403),an=[{id:0,title:"Provision",statusType:s.Fe.Pending},{id:1,title:"Build",statusType:s.Fe.Building},{id:2,title:"Bundle",statusType:s.Fe.Running},{id:3,title:"Promote",statusType:s.Fe.Promoting},{id:4,statusType:s.Fe.Success}],ln=function(e){return an.find((function(n){return n.statusType===e}))},cn=function(e){var n,t,a,p=e.buildId,h=e.buildStatus,v=e.targetDeploymentId,g=e.onStatusUpdate,y=e.onCanceled,Z=e.onError;!function(e){var n=(0,o.Z)({},D,e);w.a(X,n)}({variables:{input:{buildId:p}},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if(null===e||void 0===e?void 0:e.hostingBuildDeployActionHistory)switch(e.hostingBuildDeployActionHistory.__typename){case"NotFoundError":break;case"UnauthorizedError":Z(e.hostingBuildDeployActionHistory.message);break;case"HostingBuildDeployActionHistoryResults":var n=e.hostingBuildDeployActionHistory.results;if(n&&n.length>0){var t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;switch(u.__typename){case"HostingBuildDeployLogAction":t.push(u.log);break;case"HostingBuildDeployStatusAction":r.push(u)}}}catch(m){o=!0,a=m}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}F({type:"history",payload:t});var s=!0,d=!1,f=void 0;try{for(var p,h=r[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v=p.value;W(v.status,v.message)}}catch(m){d=!0,f=m}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}}break;default:Z("Unexpected typename.")}},onError:function(e){Z(e.message)}});var b=(0,l.Z)(function(e){var n=(0,o.Z)({},D,e);return x.D(A,n)}(),1)[0],C=(0,l.Z)(u.useState(null===(n=ln(h))||void 0===n?void 0:n.id),2),k=C[0],S=C[1],T=(0,l.Z)(u.useState("failed"===h?null===(t=ln(h))||void 0===t?void 0:t.id:void 0),2),E=T[0],R=T[1],I=(0,l.Z)(u.useState(!1),2),G=I[0],_=I[1],P=(0,l.Z)((0,Ye.Z)(),2),B=P[0],U=P[1],N=(0,Ke.f)(),M=(0,l.Z)(u.useReducer((function(e,n){switch(n.type){case"history":return B&&B.clear(),(0,qe.Z)(n.payload).concat((0,qe.Z)(e));case"update":return[n.payload]}}),[]),2),O=M[0],F=M[1],W=u.useCallback((function(e,n){if(g(p,e,n),e===s.Fe.Failed)R(k);else{var t=ln(e);if(!t)return;S(t.id)}}),[k,p,g]),H=function(){var e=(0,i.Z)((function(){var e,n,t;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return _(!0),[4,b({variables:{input:{buildId:p,targetDeploymentId:v}}})];case 1:if(e=r.sent(),n=e.data,t=e.errors)return Z(t[0].message),[2];if(null===n||void 0===n?void 0:n.failHostingBuild)switch(n.failHostingBuild.__typename){case"UserError":case"NotFoundError":case"UnauthorizedError":Z(n.failHostingBuild.message);break;case"FailHostingBuildResult":y();break;default:Z("Unexpected typename.")}return[2]}}))}));return function(){return e.apply(this,arguments)}}();u.useEffect((function(){(0,re.y5)({context:"deploy_progress"})}),[]),u.useEffect((function(){void 0!==k&&"failed"===h&&R(k)}),[k,h]),u.useEffect((function(){B&&O.forEach((function(e){return B.write(e)}))}),[O,B]),L({variables:{input:{buildId:p}},onData:function(e){var n=e.data,t=n.data,r=n.error;if(r)Z(r.message);else if(t)switch(t.hostingBuildDeployActionUpdates.__typename){case"HostingBuildDeployLogAction":var i=t.hostingBuildDeployActionUpdates.log;F({type:"update",payload:i});break;case"HostingBuildDeployStatusAction":var o=t.hostingBuildDeployActionUpdates,a=o.status,l=o.message;W(a,l)}}});var z,V=(null===(z=k,a=an.find((function(e){return e.id===z})))||void 0===a?void 0:a.statusType)!==s.Fe.Success&&!E;return void 0===k?(0,r.tZ)(d.G,{css:[f.l0.center],children:(0,r.tZ)(m.Z,{size:16})}):(0,r.BX)(d.G,{css:[f.l0.colWithGap(12)],children:[(0,r.BX)(d.G,{css:[f.l0.rowWithGap(0),f.l0.align.center,f.l0.justify.center,f.l0.mb(16)],children:[an.map((function(e){var n=e.id,t=e.title;return t?(0,r.tZ)(rn,{stage:n,text:t,activeStage:k,firstStage:0===n,erroredStage:E},n):null})),V?(0,r.tZ)($e.T,{text:"Cancel",css:[f.l0.ml(12),G?{pointerEvents:"none",color:f.TV.greyDefault}:{}],onClick:H,iconRight:G?(0,r.tZ)(m.Z,{}):(0,r.tZ)(on.Z,{})}):null]}),(0,r.tZ)(d.G,{css:[f.l0.display.flex,f.l0.py(12),f.l0.pl(16),f.l0.borderRadius(8),f.l0.overflow("hidden"),{border:"1px solid var(--outline-dimmest)",backgroundColor:null===N||void 0===N?void 0:N.background}],children:(0,r.tZ)(d.K.div,{css:[f.l0.width("100%"),f.l0.maxWidth("100%")],ref:U})}),(0,r.tZ)(d.G,{css:[f.l0.flex.row,f.l0.justify.center],children:(0,r.BX)(ce.xv,{children:["Having trouble?"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",onClick:function(){return(0,re.y5)({context:"troubleshooting_doc"})},children:"Troubleshooting tips"})]})})]})};!function(e){e.List="list",e.Logs="logs"}(Ae||(Ae={}));var un=function(e){var n,t=e.deploymentId,i=e.currentBuild,o=e.onError,a=(0,l.Z)(u.useState({view:Ae.List}),2),c=a[0],s=a[1];switch(c.view){case Ae.List:n=(0,r.tZ)(sn,{replId:i.repl.id,buildId:i.id,onError:o,onSelect:function(e,n){return s({view:Ae.Logs,buildId:e,buildStatus:n})}});break;case Ae.Logs:n=(0,r.tZ)(dn,{deploymentId:t,buildId:c.buildId,buildStatus:c.buildStatus,onBack:function(){return s({view:Ae.List})}})}return(0,r.tZ)(J,{children:n})},sn=function(e){var n=e.replId,t=e.buildId,a=e.onError,s=e.onSelect,h=function(e){var n=(0,o.Z)({},ke,e);return w.a(Ee,n)}({variables:{replId:n,count:20},fetchPolicy:"cache-and-network",ssr:!1}),v=h.data,m=h.loading,g=h.error,y=h.fetchMore,Z=(0,l.Z)(u.useState(null),2),b=Z[0],x=Z[1];u.useEffect((function(){(0,re.y5)({context:ne.kO.History})}),[]),u.useEffect((function(){if(null===v||void 0===v?void 0:v.repl)if("Repl"===v.repl.__typename){if(v.repl.hostingDeployment)switch(v.repl.hostingDeployment.__typename){case"HostingDeployment":x(v.repl.hostingDeployment.activityLogs.items);break;case"NotFoundError":case"UnauthorizedError":a(v.repl.hostingDeployment.message)}}else a("Unexpected typename.")}),[v,a]),u.useEffect((function(){g&&a(g.message)}),[g,a]);var C=function(e){var n;return"Repl"===(null===e||void 0===e?void 0:e.repl.__typename)&&"HostingDeployment"===(null===(n=e.repl.hostingDeployment)||void 0===n?void 0:n.__typename)&&"HostingActivityLogConnection"===e.repl.hostingDeployment.activityLogs.__typename&&e.repl.hostingDeployment.activityLogs}(v),k=C&&C.pageInfo.hasNextPage,S=function(){var e=(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){switch(e.label){case 0:return m||C&&null==C.pageInfo.nextCursor||!C||!C.pageInfo.hasNextPage?[2]:[4,y({variables:{input:{after:C.pageInfo.nextCursor,count:20}}})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),T=(0,Ie.Z)({onLoadMore:S,rootMargin:"0px 0px 300px 0px"}).targetRef;return(0,r.BX)(r.HY,{children:[b&&0===b.length?(0,r.tZ)(d.G,{css:[f.l0.pb(8),f.l0.center,f.l0.align.stretch],children:(0,r.tZ)(p.E,{colorway:"grey",icon:(0,r.tZ)(Xe.Z,{}),text:"Deployment has no history"})}):null,b&&b.length>0?b.map((function(e){var n=t===e.build.id;return(0,r.BX)(d.G,{css:[f.l0.rowWithGap(12),f.l0.py(12),f.l0.align.center,{borderBottom:"1px solid ".concat(f.TV.outlineDimmest),"&:first-child":{paddingTop:0},"&:last-child":{borderBottom:"none"}}],children:[(0,r.tZ)(je,{type:e.type}),(0,r.BX)(d.G,{css:f.l0.flex.growAndShrink(1),children:[(0,r.tZ)(He,{activityLogItem:e}),(0,r.tZ)(ce.xv,{variant:"small",css:f.l0.color.foregroundDimmest,children:(0,be.Z)(new Date(e.timeCreated),Date.now(),{addSuffix:!0})})]}),(0,r.tZ)(d.G,{css:[f.l0.width(32),f.l0.align.end],children:(0,r.tZ)(Le,{activityLogItem:e,isCurrent:n})}),(0,r.tZ)(d.G,{children:(0,r.tZ)(ae.h,{alt:"View Build Logs",onClick:function(){return s(e.build.id,e.build.status)},children:(0,r.tZ)(H.Z,{})})})]},e.id)})):null,(0,r.tZ)(Me,{loading:m}),!m&&k?(0,r.tZ)(d.G,{css:[f.l0.center,f.l0.pt(16)],children:(0,r.tZ)(ae.h,{tooltipHidden:!0,alt:"Show more",onClick:S,ref:T,children:(0,r.tZ)(Ge.Z,{})})}):null]})},dn=function(e){var n=e.buildId,t=e.deploymentId,i=e.buildStatus,o=e.onBack;return(0,r.BX)(d.G,{css:[f.l0.colWithGap(16)],children:[(0,r.tZ)(ae.h,{alt:"Back to History",onClick:function(){return o()},children:(0,r.tZ)(se.Z,{})}),(0,r.tZ)(cn,{buildId:n,targetDeploymentId:t,buildStatus:i,onStatusUpdate:function(){},onError:function(){},onCanceled:function(){}})]})},fn=t(6543),pn=t(34017),hn=t(31716),vn=t(1033),mn=t(8354),gn=function(e){var n=e.currentBuild.repl.id,t=168,i=(0,fn.Z)((0,pn.Z)(new Date),167);return u.useEffect((function(){(0,re.y5)({context:ne.kO.Analytics})}),[]),(0,r.tZ)(J,{children:(0,r.BX)(d.G,{css:[f.l0.colWithGap(24)],children:[(0,r.tZ)(hn.Z,{replId:n,start:i,hours:t,deployment:!0}),(0,r.tZ)(vn.Z,{replId:n,metric:mn.Pc.Url,start:i,hours:t,deployment:!0,count:5}),(0,r.tZ)(vn.Z,{replId:n,metric:mn.Pc.Referrer,start:i,hours:t,deployment:!0,count:5})]})})};function yn(){var e=(0,g.Z)(["\n  fragment ReplLogLine2 on ReplLog {\n    __typename\n    timestamp\n    line\n  }\n"]);return yn=function(){return e},e}function Zn(){var e=(0,g.Z)(["\n  query HostingDeploymentLogs2($replId: String!, $deploymentId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        __typename\n        hostingDeploymentLogs(deploymentId: $deploymentId) {\n          ... on ReplLogs {\n            result {\n              ...ReplLogLine2\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Zn=function(){return e},e}var bn={},wn=(0,y.Ps)(yn()),xn=(0,y.Ps)(Zn(),wn);var Cn=function(e){var n=e.deploymentId,t=e.currentBuild,i=e.onError,a=function(e){var n=(0,o.Z)({},bn,e);return w.a(xn,n)}({variables:{replId:t.repl.id,deploymentId:n}}),c=a.data,s=a.loading,d=a.error,f=(0,l.Z)(u.useState(null),2),p=f[0],h=f[1];u.useEffect((function(){(0,re.y5)({context:ne.kO.Logs})}),[]),u.useEffect((function(){if(null===c||void 0===c?void 0:c.repl)if("Repl"===c.repl.__typename){if(c.repl.hostingDeploymentLogs&&"ReplLogs"===c.repl.hostingDeploymentLogs.__typename)h(c.repl.hostingDeploymentLogs.result)}else i("Unexpected typename.")}),[c,i]),u.useEffect((function(){d&&i(d.message)}),[d,i]);var v=null;return!s&&p&&(v=p.length>0?(0,r.tZ)(kn,{logs:p}):(0,r.tZ)(Sn,{})),(0,r.BX)(J,{fullWidth:!0,children:[(0,r.tZ)(Me,{loading:s}),v]})},kn=function(e){var n=e.logs;return(0,r.tZ)(d.G,{css:[f.l0.overflow("auto")],children:(0,r.tZ)("table",{css:[{borderCollapse:"separate"}],children:(0,r.tZ)("tbody",{children:n.map((function(e,n){var t=[f.l0.font.code,f.l0.fontSize(12),{border:"1px solid transparent",padding:"6px"},n%2===0?[f.l0.backgroundColor.backgroundHigher,{borderTopColor:"".concat(f.TV.backgroundHighest)},{borderBottomColor:"".concat(f.TV.backgroundHighest)}]:null];return(0,r.BX)("tr",{children:[(0,r.tZ)("td",{css:[t,f.l0.color.foregroundDimmest],children:new Date(e.timestamp).toLocaleString()}),(0,r.tZ)("td",{css:[t],children:e.line})]},"logLine-".concat(n))}))})})})},Sn=function(){return(0,r.BX)(d.G,{css:[f.l0.colWithGap(8),f.l0.pt(4)],children:[(0,r.tZ)(ce.xv,{multiline:!0,css:f.l0.textAlign.center,children:"No logs are available because the most recent build failed before it was promoted."}),(0,r.BX)(ce.xv,{multiline:!0,color:"dimmer",css:f.l0.textAlign.center,children:["Having trouble?"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",onClick:function(){return(0,re.y5)({context:"troubleshooting_doc"})},children:"Troubleshooting tips"})]})]})},Tn=t(42735),En=t(8189),Rn=t(7579),In=d.K.div,Gn=function(e){var n=e.id,t=e.title,i=e.information,o=e.optional,a=void 0!==o&&o,c=e.children,s=(0,Rn.H)()(n),p=(0,l.Z)(u.useState(!1),2),h=p[0],v=p[1],m=(0,l.Z)(u.useState(!1),2),g=m[0],y=m[1],Z=u.useRef(!1);return u.useEffect((function(){Z.current=!0;var e=setTimeout((function(){y(h)}),200);return function(){clearTimeout(e)}}),[h]),(0,r.BX)(d.G,{css:[f.l0.colWithGap(8)],children:[(0,r.BX)(d.G,{tag:"label",htmlFor:s,css:[f.l0.flex.row,f.l0.flex.grow(1),f.l0.justify.spaceBetween,f.l0.align.baseline],children:[(0,r.BX)(d.G,{css:[f.l0.rowWithGap(8),f.l0.justify.start,f.l0.align.center,f.l0.justify.center],onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)},children:[(0,r.tZ)(ce.xv,{color:"dimmer",children:t}),(0,r.BX)(De.Z,{isOpen:g,onClickOutside:function(){return y(!1)},padding:8,children:[(0,r.tZ)(In,{children:(0,r.tZ)(Xe.Z,{css:[f.l0.color.foregroundDimmer]})}),(0,r.tZ)(d.G,{css:[f.l0.maxWidth(240)],children:(0,r.tZ)(ce.xv,{color:"dimmer",multiline:!0,children:i})})]})]}),a?(0,r.tZ)(ce.xv,{variant:"small",color:"dimmest",children:"optional"}):null]}),c]})},Dn=t(88281),_n=t(87496),Pn=t(83094),Bn=t(48783),An=t(6601);function Un(e){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,i.Z)((function(e){var n,t;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.readFile(".env")];case 1:if((n=r.sent()).error===An.Df.NotFound)return[2,[]];if(n.error)throw n.error;return t=_n.Z.parse(n.content.toString()),[2,Object.entries(t).map((function(e){var n=(0,l.Z)(e,2);return{name:n[0],value:n[1]}}))]}}))}))).apply(this,arguments)}function Ln(e){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,i.Z)((function(e){var n,t,r;return(0,c.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.getConfig()];case 1:if(n=i.sent(),t=n.config,(r=n.error)===Bn.Yt.NotFound)return[2];if(r)throw new Error("Failed to get .replit config with Error: "+r);return[2,t]}}))}))).apply(this,arguments)}function Mn(e){return On.apply(this,arguments)}function On(){return(On=(0,i.Z)((function(e){var n,t,r,i,o,a,l,u,d,f,p,h,v;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return n=null,t=null,r=null,i=null,o=null,[4,Ln(e)];case 1:if(!(a=c.sent()))return[2,{buildCommand:n,runCommand:t,ignorePorts:r,target:i,publicDir:o}];if(!a.deployment)return[3,2];switch(l=a.deployment,u=l.build,d=l.run,f=l.ignorePorts,p=l.target,h=l.publicDir,u&&(n=(0,Pn.Cq)(u)),d&&(t=(0,Pn.Cq)(d)),null!==f&&void 0!==f&&(r=f),p){case Dn.api.DeploymentConfig.Target.GCE:i=r?s.Vp.Worker:s.Vp.Server;break;case Dn.api.DeploymentConfig.Target.CLOUDRUN:i=s.Vp.CloudRun;break;case Dn.api.DeploymentConfig.Target.STATIC:i=s.Vp.Static}return h&&(o=h),[3,4];case 2:return[4,e.getRunConfig()];case 3:v=c.sent(),a.compile&&(n=(0,Pn.Cq)(a.compile)),v.run?t=(0,Pn.Cq)(v.run.run):a.run&&(t=(0,Pn.Cq)(v.run)),c.label=4;case 4:return[2,{buildCommand:n,runCommand:t,ignorePorts:r,target:i,publicDir:o}]}}))}))).apply(this,arguments)}var Fn=t(15092),Wn=t(58975),Hn=function(e){return"string"===typeof e&&""!==e.trim()};function zn(){var e=(0,g.Z)(["\n  query CheckReplitAppSubdomainAvailability(\n    $subdomain: String!\n    $deploymentId: String\n  ) {\n    replitAppSubdomainAvailability(\n      subdomain: $subdomain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on ReplitAppSubdomainAvailabilityResult {\n        available\n        message\n      }\n      ... on UserError {\n        errorMessage: message\n      }\n    }\n  }\n"]);return zn=function(){return e},e}var Vn={},jn=(0,y.Ps)(zn());var qn=t(15404),$n=t(12018),Yn=function(e){var n=e.type,t=e.loading,i=e.disabled,o=e.onClick;return(0,r.tZ)(h.zx,{onClick:o,text:t?"":"Add ".concat(n),iconLeft:t?void 0:(0,r.tZ)(Wn.Z,{}),disabled:t||i})},Kn=function(e){var n=e.id,t=e.value,i=e.loading,o=e.disabled,a=e.onChange,l=e.error,c=(0,Rn.H)(),u=Hn(t);return(0,r.BX)(d.G,{css:[f.l0.colWithGap(4)],children:[(0,r.tZ)(Tn.II,{value:u?t:"",onChange:function(e){return a(e.target.value)},css:[f.l0.color.greyStrongest],disabled:i||o,"aria-describedby":c(n+"reasonError")}),l?(0,r.tZ)(d.G,{css:[f.l0.color.accentNegativeStronger],"aria-live":"polite","aria-atomic":"true",id:c(n+"reasonError"),children:(0,r.tZ)("span",{children:l})}):null]})},Qn=function(e){var n=e.index,t=e.name,i=e.value,o=e.disabled,a=e.updateEnvVarName,l=e.updateEnvVarValue,c=e.removeEnvVar,u=(0,Rn.H)();return(0,r.BX)(d.G,{css:[f.l0.rowWithGap(12)],children:[(0,r.tZ)(Tn.II,{placeholder:"Name",id:"".concat(u,"-name-").concat(n),value:t,onChange:function(e){return a(t,e.target.value)},disabled:o}),(0,r.tZ)(Tn.II,{placeholder:"Value",name:"".concat(u,"-value-").concat(n),value:i,onChange:function(e){return l(t,e.target.value)},disabled:o}),o?null:(0,r.tZ)(ae.h,{css:[F.gU.outlined,f.l0.p(16)],onClick:function(){return c(t)},alt:"Remove variable",children:(0,r.tZ)(Fn.Z,{})})]})},Jn=function(e){var n,t,i=e.subdomain,a=e.deploymentId,l=e.onChange,c=e.updateValidity,s=(0,Rn.H)(),h=function(e){var n=(0,o.Z)({},Vn,e);return w.a(jn,n)}({variables:{subdomain:i,deploymentId:a},skip:0===i.length}),v=h.data,g=h.loading,y=h.error,Z="ReplitAppSubdomainAvailabilityResult"===(null===v||void 0===v?void 0:v.replitAppSubdomainAvailability.__typename)&&v.replitAppSubdomainAvailability.available,b="ReplitAppSubdomainAvailabilityResult"===(null===v||void 0===v?void 0:v.replitAppSubdomainAvailability.__typename)?v.replitAppSubdomainAvailability.message:null===v||void 0===v||null===(n=v.replitAppSubdomainAvailability)||void 0===n?void 0:n.errorMessage;return(0,u.useEffect)((function(){c(Z)}),[Z]),y?(0,r.tZ)(p.E,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,r.BX)(d.G,{children:[(0,r.BX)(d.G,{css:[f.l0.rowWithGap(4),f.l0.align.center],children:[(0,r.tZ)(Tn.II,{id:"subdomain-".concat(s),placeholder:"subdomain",value:i,onChange:function(e){return l(e.target.value)}}),(0,r.BX)(ce.xv,{children:["replit.com"!==(null===window||void 0===window||null===(t=window.location)||void 0===t?void 0:t.hostname)?".canary":"",".replit.app"]})]}),(0,r.BX)(d.G,{css:[f.l0.rowWithGap(4),f.l0.align.center,f.l0.pt(4)],children:[g?(0,r.BX)(r.HY,{children:[(0,r.tZ)(m.Z,{}),(0,r.tZ)(ce.xv,{children:"Checking availability"})]}):null,Z?(0,r.BX)(r.HY,{children:[(0,r.tZ)(ve.Z,{color:"green"}),(0,r.tZ)(ce.xv,{css:[f.l0.color.greenDefault],children:"Available"})]}):null,Z||g?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(ze.Z,{color:"red"}),(0,r.tZ)(ce.xv,{css:[f.l0.color.redDefault],children:b})]})]})]})},et=function(e){var n=e.appType,t=e.onChange,i=(0,$n.P5)({controlName:"flag-funky-future"}),o=function(e){var t=e.appType,i=e.name,o=e.description;return(0,r.BX)("label",{htmlFor:t,css:[f.l0.display.flex,f.l0.rowWithGap(8)],children:[(0,r.tZ)(qn.Y,{id:t,value:t,checked:n===t}),(0,r.BX)(d.G,{children:[(0,r.tZ)(ce.xv,{color:"dimmer",children:i}),(0,r.tZ)(ce.xv,{variant:"small",color:"dimmest",children:o})]})]},t)};return(0,r.BX)(qn.E,{name:"deploymentTargetSelector",value:n,onChange:t,css:[f.l0.flex.column],children:[(0,r.tZ)(d.G,{css:[f.l0.rowWithGap(32),f.l0.flex.row,f.l0.mb(16)],children:[{appType:s.Vp.Server,name:"Web Server",description:"ex. an API or website"},{appType:s.Vp.Worker,name:"Background Worker",description:"ex. a Discord or Slack bot"}].map(o)}),i?(0,r.tZ)(d.G,{css:[f.l0.rowWithGap(32),f.l0.flex.row],children:[{appType:s.Vp.CloudRun,name:"On Demand",description:"your app only runs on requests"},{appType:s.Vp.Static,name:"Static",description:"ex. a blog or content site"}].map(o)}):null]})},nt=t(32670),tt=t(80877),rt=t(3220),it=t(35021),ot=t(11414),at=(0,t(89853).X)({container:f.l0.colWithGap(16),pauseAndResumeButtons:[f.l0.colWithGap(8),f.l0.pt(16),{borderTop:"solid 1px ".concat(f.TV.backgroundHighest)}],shutDownContainer:f.l0.colWithGap(8),shutDownButton:[f.l0.color.accentNegativeStrongest,f.l0.transition.snappy,(0,O.Z)({backgroundColor:F.vb.interactiveBackground,borderColor:"transparent"},f.wl.hover,{borderColor:"transparent"})]}),lt=function(e){var n=e.replId,t=e.currentBuild,i=e.hostingTier,a=e.status,c=e.hideResume,f=void 0!==c&&c,p=e.hideSuspend,v=void 0!==p&&p,g=e.onViewAction,y=e.onError,Z=(0,l.Z)(u.useState(!1),2),b=Z[0],w=Z[1],C=(0,l.Z)(function(e){var n=(0,o.Z)({},D,e);return x.D(U,n)}(),1)[0],k=(0,l.Z)(u.useState(!1),2),S=k[0],T=k[1],E=function(e){C({variables:{input:{replId:n,command:e,buildId:null===t||void 0===t?void 0:t.id}},onError:function(e){y(e.message),T(!1)},onCompleted:function(n){if(null===n||void 0===n?void 0:n.sendDeploymentLifecycleCommand)switch(n.sendDeploymentLifecycleCommand.__typename){case"UserError":case"UnauthorizedError":y(n.sendDeploymentLifecycleCommand.message);break;case"SendDeploymentLifecycleCommandResult":g({type:ne.ap.SendDeploymentLifecycleCommand,payload:e});break;default:y("Unexpected typename.")}}})},R=null!==i,I=a===s.Fe.Resuming,G=a===s.Fe.Suspending,_=a===s.Fe.Suspended,P=I||G||a===s.Fe.UpdatingTier||a===ne.pS.Deploying,B=!f&&R&&(_||I)&&(null===t||void 0===t?void 0:t.hasImageTag),A=!v&&!_&&!I&&(G||a===ne.pS.Deploying||a===ne.pS.Ready)&&(null===t||void 0===t?void 0:t.hasImageTag);return(0,r.BX)(r.HY,{children:[(0,r.BX)(d.G,{css:at.container,children:[(0,r.BX)(d.G,{css:at.pauseAndResumeButtons,children:[B?(0,r.BX)(r.HY,{children:[(0,r.tZ)(h.zx,{text:I?"Resuming":"Resume",onClick:function(){return E(s.Qc.Resume)},loading:I,disabled:P,iconLeft:I?(0,r.tZ)(m.Z,{}):(0,r.tZ)(tt.Z,{})}),(0,r.tZ)(ce.xv,{children:"Your app will become accessible to users again"})]}):null,A?(0,r.BX)(r.HY,{children:[(0,r.tZ)(h.zx,{text:"Pause",onClick:function(){return E(s.Qc.Suspend)},loading:G,disabled:P,iconLeft:G?(0,r.tZ)(m.Z,{}):(0,r.tZ)(nt.Z,{})}),(0,r.tZ)(ce.xv,{children:"Your hosting subscription will continue, but all users will lose access to your app"})]}):null]}),(0,r.BX)(d.G,{css:at.shutDownContainer,children:[(0,r.tZ)(h.zx,{text:"Shut down",colorway:"negative",outlined:!0,css:at.shutDownButton,onClick:function(){return w(!0)},disabled:S,iconLeft:(0,r.tZ)(rt.Z,{})}),(0,r.tZ)(ce.xv,{children:"Your hosting subscription will be canceled, and your hosted app will cease to exist"})]})]}),(0,r.tZ)(it.u,{isOpen:b,onRequestClose:function(){return w(!1)},children:(0,r.tZ)(ot.Z,{confirmLabel:"Yes, delete my deployment",title:"Delete Deployment",isDestructive:!0,onConfirm:function(){T(!0),w(!1),E(s.Qc.Destroy)},onCancel:function(){return w(!1)},children:"This will destroy your deployment and any associated hosting tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})},ct=function(e){var n=e.currentBuild,t=e.onError,a=(0,En.Z)(),s=(0,l.Z)(u.useState(null),2),p=s[0],h=s[1],v=(0,l.Z)(u.useState(null),2),m=v[0],g=v[1],y=(0,l.Z)(u.useState(!0),2),Z=y[0],b=y[1];return u.useEffect((function(){(0,re.y5)({context:ne.kO.Settings})}),[]),u.useEffect((function(){(0,i.Z)((function(){var e,n,r,i;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Mn(a.dotReplit)];case 1:return e=o.sent(),n=e.buildCommand,r=e.runCommand,h(n),g(r),[3,3];case 2:return i=o.sent(),t(i),[3,3];case 3:return b(!1),[2]}}))}))()}),[a.dotReplit,n,t]),(0,r.BX)(r.HY,{children:[(0,r.BX)(J,{children:[(0,r.tZ)(Me,{loading:Z}),Z?null:(0,r.BX)(d.G,{css:[f.l0.colWithGap(16)],children:[(0,r.tZ)(Gn,{id:"settingsBuildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",children:(0,r.tZ)(Tn.II,{value:p||"No build command set",css:[p?f.l0.color.greyStrongest:f.l0.color.greyDefault],disabled:!0})}),(0,r.tZ)(Gn,{id:"settingsRunCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,r.tZ)(Tn.II,{value:m||"No run command set",css:[m?f.l0.color.greyStrongest:f.l0.color.greyDefault],disabled:!0})}),(0,r.tZ)(Gn,{id:"settingsEnvVars",title:"Environment variables",information:"Choose which environment variables should be used for your deployment.",children:(0,r.tZ)(d.G,{css:[f.l0.colWithGap(8)],children:n.envVars.length>0?n.envVars.map((function(e,n){var t=e.name,i=e.value;return(0,r.tZ)(Qn,{index:n,name:t,value:i,updateEnvVarName:function(){},updateEnvVarValue:function(){},removeEnvVar:function(){},disabled:!0},n)})):(0,r.tZ)(Tn.II,{value:"No environment variables set",css:[f.l0.color.greyDefault],disabled:!0})})})]})]}),(0,r.tZ)(J,{children:(0,r.tZ)(lt,(0,o.Z)({},e))})]})},ut=function(e){var n,t=e.replId,i=e.deploymentId,c=e.currentBuild,u=e.hostingTier,s=e.status,p=e.activeView,v=e.onViewAction,m=e.onError,g=(n={},(0,O.Z)(n,ne.kO.Deployment,{title:"Deployment",icon:q.Z,fc:ie,display:!0,status:s,onViewAction:v}),(0,O.Z)(n,ne.kO.Domains,{title:"Domains",icon:z.Z,fc:me,display:!0,status:s,onViewAction:v}),(0,O.Z)(n,ne.kO.History,{title:"History",icon:V.Z,fc:un,display:!0,status:s,onViewAction:v}),(0,O.Z)(n,ne.kO.Analytics,{title:"Analytics",icon:j.Z,fc:gn,display:!1,status:s,onViewAction:v}),(0,O.Z)(n,ne.kO.Logs,{title:"Logs",icon:H.Z,fc:Cn,display:!0,status:s,onViewAction:v}),(0,O.Z)(n,ne.kO.Settings,{title:"Settings",icon:W.Z,fc:ct,display:!0,status:s,onViewAction:v}),n),y=g[p],Z=y.fc;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(ee,{children:(0,r.tZ)(d.G,{css:[Y.F3,f.l0.position.relative,{"::before":{content:'""',display:"block",position:"absolute",left:0,width:8,height:"100%",background:"linear-gradient(90deg, ".concat(f.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1},"::after":{content:'""',display:"block",position:"absolute",right:0,width:8,height:"100%",background:"linear-gradient(270deg, ".concat(f.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1}}],children:(0,r.tZ)(d.G,{css:[f.l0.flex.row,f.l0.align.center,f.l0.overflowX("auto"),f.l0.pl(8),f.l0.pt(4)],children:Object.entries(g).map((function(e){var n=(0,l.Z)(e,2),t=n[0],i=n[1],o=i.title,a=i.icon;return i.display?(0,r.tZ)(h.zx,{css:[F.gU.nofill,f.l0.borderRadius(0),f.l0.px(12),f.l0.position.relative,{transition:"none",height:38,marginRight:1,borderBottom:"1px solid ".concat(t===p?f.TV.foregroundDefault:"transparent"),"::after":{content:'""',display:"block",position:"absolute",right:-2,width:1,height:16,backgroundColor:f.TV.outlineDimmest},"&:last-child":{marginRight:0,"::after":{display:"none"}}}],text:o,iconLeft:(0,r.tZ)(a,{}),onClick:function(){return v({type:ne.ap.ChangeView,payload:t})}},t):null}))})})}),y&&y.display?(0,r.tZ)(Z,(0,a.Z)((0,o.Z)({},g[p]),{replId:t,deploymentId:i,currentBuild:c,hostingTier:u,onError:m})):null]})},st=t(96957),dt=t(96642),ft=function(e){var n,t,o,a,p,v=e.isNewDeployment,g=e.currentBuild,y=e.initialSubdomain,Z=e.onDeploy,b=e.onCancel,w=e.onError,x=(0,En.Z)(),C=(0,l.Z)(u.useState(y),2),k=C[0],S=C[1],T=(0,l.Z)(u.useState(!1),2),E=T[0],R=T[1],I=(0,l.Z)(u.useState(null),2),G=I[0],D=I[1],_=(0,l.Z)(u.useState(null),2),P=_[0],B=_[1],A=(0,l.Z)(u.useState(void 0),2),U=A[0],N=A[1],L=(0,l.Z)(u.useState(null!==(p=g&&g.envVars.map((function(e){return{name:e.name,value:e.value}})))&&void 0!==p?p:[]),2),X=L[0],M=L[1],O=(0,l.Z)(u.useState(!0),2),F=O[0],W=O[1],H=(0,l.Z)(u.useState(s.Vp.Server),2),z=H[0],V=H[1],j=(0,l.Z)(u.useState(null),2),$=j[0],Y=j[1],K=(0,l.Z)(u.useState("loading"),2),Q=K[0],J=K[1],ee=function(e,n){var t=X.findIndex((function(n){return n.name===e})),r=(0,qe.Z)(X);r[t].name=n,M(r)},ne=function(e,n){var t=X.findIndex((function(n){return n.name===e})),r=(0,qe.Z)(X);r[t].value=n,M(r)},te=function(e){var n=X.filter((function(n){return n.name!==e}));M(n)};u.useEffect((function(){(0,re.y5)({context:"deploy_options"})}),[]),u.useEffect((function(){(0,i.Z)((function(){var e,n,t;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,Mn(x.dotReplit)];case 1:return e=r.sent(),v?[4,Un(x.fs)]:[3,3];case 2:n=r.sent(),M(n),r.label=3;case 3:return D(e.buildCommand),B(e.runCommand),null!==e.publicDir&&Y(e.publicDir),null!==e.ignorePorts&&(W(!e.ignorePorts),null===e.target&&(!0===e.ignorePorts?V(s.Vp.Worker):V(s.Vp.Server))),null!==e.target&&V(e.target),[3,5];case 4:return t=r.sent(),w(t),[3,5];case 5:return J("ready"),[2]}}))}))()}),[v,x.fs,x.dotReplit,g,w]);var ie="HostingDeployment"===(null===g||void 0===g||null===(n=g.repl)||void 0===n||null===(t=n.hostingDeployment)||void 0===t?void 0:t.__typename)?g.repl.hostingDeployment.replitAppSubdomain:void 0,oe=function(){var e=(0,i.Z)((function(){var e,n,t,r,i,o,a;return(0,c.__generator)(this,(function(l){switch(l.label){case 0:if(!(e=(E||ie)&&k.length?k:void 0))return[2];if(J("storing"),n={build:G,run:P||""},t=[],z!==s.Vp.Static){if(!Hn(P))return N("Run command cannot be empty."),J("ready"),[2];n.run=P,t.push((0,dt.X6)(P))}switch(Hn(G)?(n.build=G,t.push((0,dt.pi)(G))):t.push((0,dt.xz)("deployment/build")),t.push((0,dt.KB)(!F)),r=null,z){case s.Vp.Server:case s.Vp.Worker:r="gce";break;case s.Vp.CloudRun:r="cloudrun";break;case s.Vp.Static:r="static"}return null!==r&&t.push((0,dt.zk)(r)),null!==$&&t.push((0,dt.TT)($)),x.container.getConnectionState()!==st.em.CONNECTED&&(w("Repl is offline."),J("ready")),[4,x.dotReplit.updateDotReplit(t)];case 1:return i=l.sent(),(o=i.error)?(w(o),J("ready"),[2]):(a=null,[4,new Promise((function(e){J("syncing"),a=setInterval((function(){x.fs.getStatus()===An.kO.Syncing||e(!0)}),1e3)}))]);case 2:return l.sent(),a&&clearInterval(a),J("deploying"),Z(n,X.filter((function(e){return function(e){return"object"===typeof e&&"string"===typeof e.name&&"string"===typeof e.value&&""!==e.name}(e)})),e,z),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ae="HostingDeployment"===(null===g||void 0===g||null===(o=g.repl)||void 0===o||null===(a=o.hostingDeployment)||void 0===a?void 0:a.__typename)?g.repl.hostingDeployment.id:void 0,le="ready"!==Q,ce=le||!E&&!ie;return(0,r.BX)(d.G,{css:[f.l0.colWithGap(16)],children:[ie?null:(0,r.tZ)(Gn,{id:"primaryDomain",title:"Primary domain",information:"You can add more custom domains after deploying",children:(0,r.tZ)(Jn,{subdomain:k,deploymentId:ae,onChange:S,updateValidity:R})}),z!==s.Vp.Static?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Gn,{id:"buildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",optional:!0,children:(0,r.tZ)(Kn,{id:"buildCommand",value:G,onChange:D,loading:"loading"===Q,disabled:le})}),(0,r.tZ)(Gn,{id:"runCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,r.tZ)(Kn,{id:"runCommand",value:P,onChange:B,loading:"loading"===Q,disabled:le,error:U})}),(0,r.tZ)(Gn,{id:"envVars",title:"Environment variables",information:"Choose which environment variables should be used for your deployment.",children:(0,r.BX)(d.G,{css:[f.l0.colWithGap(12)],children:[X.length>0?X.map((function(e,n){var t=e.name,i=e.value;return(0,r.tZ)(Qn,{index:n,name:t,value:i,updateEnvVarName:ee,updateEnvVarValue:ne,removeEnvVar:te,disabled:le},n)})):null,(0,r.tZ)(Yn,{onClick:function(){M((0,qe.Z)(X).concat([{name:"",value:""}]))},type:"environment variable",loading:"loading"===Q,disabled:le})]})})]}):(0,r.tZ)(Gn,{id:"publicDir",title:"Public Directory",information:"The public directory is the root of your static site.",optional:!0,children:(0,r.tZ)(Kn,{id:"publicDir",value:$,onChange:Y,loading:"loading"===Q,disabled:le})}),(0,r.tZ)(et,{appType:z,onChange:function(e){V(e.target.value),W(e.target.value===s.Vp.Server||e.target.value===s.Vp.CloudRun)}}),(0,r.BX)(d.G,{css:[f.l0.rowWithGap(8),f.l0.pt(8)],children:[!le&&g?(0,r.tZ)(h.zx,{text:"Cancel",onClick:b,disabled:le}):null,(0,r.tZ)(d.G,{css:[f.l0.flex.grow(1)],children:(0,r.tZ)(h.zx,{colorway:"primary",onClick:oe,text:("loading"===Q?"Fetching options":"ready"===Q&&"Deploy")||"storing"===Q&&"Adding deployment options"||"syncing"===Q&&"Syncing file changes"||"deploying"===Q&&"Let's go!"||"",iconLeft:le?(0,r.tZ)(m.Z,{}):(0,r.tZ)(q.Z,{}),disabled:ce})})]})]})},pt=t(51992),ht=function(e){var n=e.onCreateDeployment,t=e.replLang,i="nix"===(null===t||void 0===t?void 0:t.id)&&!t.isVnc;return u.useEffect((function(){(0,re.y5)({context:"intro"})}),[]),(0,r.BX)(d.G,{css:[f.l0.colWithGap(32),f.l0.py(32),f.l0.align.center,f.l0.textAlign.center],children:[(0,r.tZ)(d.G,{css:[f.l0.px(32)],children:(0,r.tZ)(q.Z,{size:48})}),(0,r.BX)(d.G,{css:[f.l0.colWithGap(8)],children:[(0,r.tZ)(ce.xv,{variant:"headerDefault",multiline:!0,children:"Share your Repl with the world"}),(0,r.tZ)(ce.xv,{multiline:!0,children:"Create a production build of your project so people can use it without being interrupted by changes in progress."})]}),(0,r.BX)(d.G,{css:[f.l0.px(8),f.l0.colWithGap(16)],children:[(0,r.tZ)(h.zx,{colorway:"primary",onClick:n,text:"Deploy your project",disabled:!i}),i||null===t?null:(0,r.tZ)(pt.Z,{lang:t}),(0,r.tZ)(ce.xv,{multiline:!0,css:[f.l0.textAlign.center,f.l0.mt(8),f.l0.fontSize(12),f.l0.color],children:(0,r.tZ)("a",{href:"https://docs.replit.com/category/deployments",target:"_blank",rel:"noopener",children:"What is a deployment?"})})]})]})},vt=t(73966),mt=t.n(vt),gt=(t(36501),t(22529)),yt=t(78838),Zt=function(e){var n=e.isNewDeployment,t=e.replId,i=e.currentBuild,c=e.hostingTier,s=e.status,v=e.onViewAction,m=e.onError,g=e.onBack,y=(0,l.Z)(u.useState(!1),2),Z=y[0],b=y[1],w=(0,yt.P)({step:"not_shown"});u.useEffect((function(){(0,re.y5)({context:"tier_selection"})}),[]),u.useEffect((function(){"checkout_success"!==w.currentStep.step?"not_shown"===w.currentStep.step&&w.goTo({step:"power_up_details",powerUpCategory:"hosting_tier"}):b(!0)}),[w]);var x=null!==c,C=!x||!n,k=x&&n;return"not_shown"===w.currentStep.step?null:(0,r.BX)(d.G,{css:f.l0.colWithGap(16),children:[C?(0,r.tZ)(gt.s,(0,a.Z)((0,o.Z)({},w),{analyticsContext:"workspace_hosting_pane",goBack:function(){"power_up_details"===w.currentStep.step?Z?v({type:ne.ap.SetHostingTier}):g():w.goBack()}})):null,Z?(0,r.tZ)(h.zx,{colorway:n?"primary":void 0,onClick:function(){return v({type:ne.ap.SetHostingTier})},text:n?"Deploy your project":"Back to deployment"}):null,k?(0,r.BX)(r.HY,{children:[(0,r.BX)(d.G,{css:[f.l0.rowWithGap(8),f.l0.align.center],children:[(0,r.tZ)(ae.h,{alt:"Back",onClick:g,children:(0,r.tZ)(se.Z,{})}),(0,r.tZ)(p.E,{colorway:"warning",icon:(0,r.tZ)(ze.Z,{}),text:"To upgrade hosting tier, please deploy your repl first."})]}),(0,r.tZ)(lt,{hideResume:!0,hideSuspend:!0,replId:t,currentBuild:i,hostingTier:c,status:s,onViewAction:v,onError:m})]}):null]})},bt=t(91309);function wt(e){var n=e.initialMode,t=(0,v.Z)(),g=(0,l.Z)(function(e){var n=(0,o.Z)({},D,e);return x.D(B,n)}(),1)[0],y=(0,l.Z)(u.useState(null),2),Z=y[0],b=y[1],C=(0,l.Z)(u.useState(null),2),k=C[0],S=C[1],T=(0,l.Z)(u.useState(null),2),E=T[0],R=T[1],I=(0,l.Z)(u.useState(null),2),G=I[0],_=I[1],A=(0,l.Z)(u.useState(null),2),U=A[0],N=A[1],X=(0,l.Z)(u.useState(ne.kO.Deployment),2),M=X[0],O=X[1],F=(0,l.Z)(u.useState(null),2),W=F[0],H=F[1],z=(0,l.Z)(u.useState(ne.pS.Loading),2),V=z[0],j=z[1],$=(0,l.Z)(u.useState(null),2),Y=$[0],Q=$[1],ee=(0,l.Z)(u.useState((V===ne.pS.Loading||V===ne.pS.Ready)&&"showDeployOptionsOnInsert"===n||!1),2),re=ee[0],ie=ee[1],oe=(0,l.Z)(u.useState((V===ne.pS.Loading||V===ne.pS.Ready)&&"showDeploymentTiersOnInsert"===n||!1),2),ae=oe[0],le=oe[1],ce=function(e){var n=(0,o.Z)({},D,e);return w.a(P,n)}({variables:{replId:t},fetchPolicy:"no-cache",onCompleted:function(e){var n,t,r;if(null===e||void 0===e?void 0:e.repl)if("Repl"===e.repl.__typename)if(H((0,a.Z)((0,o.Z)({},e.repl.lang),{isVnc:null!==(r=e.repl.config.isVnc)&&void 0!==r&&r})),"ReplPowerUpTypes"===(null===(n=e.repl)||void 0===n||null===(t=n.powerUps)||void 0===t?void 0:t.__typename)&&_(e.repl.powerUps.hostingTier),e.repl.hostingDeployment)switch(e.repl.hostingDeployment.__typename){case"HostingDeployment":if(b(e.repl.hostingDeployment.id),R(e.repl.hostingDeployment.currentBuild),e.repl.hostingDeployment.replitAppSubdomain?S(e.repl.hostingDeployment.replitAppSubdomain):he(e.repl),e.repl.hostingDeployment.inProgressBuild)return N(e.repl.hostingDeployment.inProgressBuild),j(ne.pS.Deploying),void ie(!1);var i=e.repl.hostingDeployment.currentBuild.status;switch(i){case s.Fe.Failed:case s.Fe.Success:j(ne.pS.Ready);break;case s.Fe.Suspended:case s.Fe.Suspending:case s.Fe.Resuming:case s.Fe.UpdatingTier:j(i);break;case s.Fe.Pending:case s.Fe.Building:case s.Fe.Running:case s.Fe.Promoting:j(ne.pS.Deploying);break;default:(0,bt.Z)(i)}break;case"NotFoundError":case"UnauthorizedError":de(e.repl.hostingDeployment.message);break;default:de("Unexpected typename.")}else he(e.repl),j(ne.pS.Ready);else de("Unexpected typename.")},onError:function(e){Q(e.message)}}).refetch,ue=Boolean(E&&V!==ne.pS.Ready&&V!==ne.pS.Refetch&&V!==s.Fe.Suspended);L({skip:!ue,variables:{input:{buildId:ue&&E&&E.id||""}},onData:function(e){var n=e.data,t=n.data,r=n.error;if(r)de(r.message);else if("HostingBuildDeployStatusAction"===(null===t||void 0===t?void 0:t.hostingBuildDeployActionUpdates.__typename)){switch(t.hostingBuildDeployActionUpdates.status){case s.Fe.Success:j(ne.pS.Ready);break;case s.Fe.Suspended:j(s.Fe.Suspended)}if(E){var i=(0,a.Z)((0,o.Z)({},E),{status:t.hostingBuildDeployActionUpdates.status});R(i)}}}});var se=function(){j(ne.pS.Refetch),ce()},de=u.useCallback((function(e){Q(e),V===ne.pS.Deploying&&j(ne.pS.Ready)}),[V]),fe=function(){var e=(0,i.Z)((function(e,n,r,i){var o,a,l,u,d,f;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return a=s.r4.Gce,i===s.Vp.CloudRun?a=s.r4.CloudRun:i===s.Vp.Static&&(a=s.r4.Static),[4,g({variables:{input:{replId:t,targetDeploymentId:Z||void 0,commands:e,envVars:n,subdomain:r,provider:a,appType:i}}})];case 1:if(l=c.sent(),u=l.data,d=l.errors,N(null),j(ne.pS.Deploying),ie(!1),!u||d)return de("An unexpected error occurred. Please try again or contact support."),[2];switch(null===(o=u.deployHostingBuild2)||void 0===o?void 0:o.__typename){case"NotFoundError":case"UnauthorizedError":case"UserError":de(u.deployHostingBuild2.message);break;case"DeployHostingBuild2Result":N(u.deployHostingBuild2.build),b(u.deployHostingBuild2.targetDeployment.id),S(null!==(f=u.deployHostingBuild2.targetDeployment.replitAppSubdomain)&&void 0!==f?f:null)}return[2]}}))}));return function(n,t,r,i){return e.apply(this,arguments)}}(),pe=function(e){switch(e.type){case ne.ap.SendDeploymentLifecycleCommand:e.payload===s.Qc.Destroy?(j(ne.pS.Ready),O(ne.kO.Deployment),b(null),S(null),R(null),_(null),N(null),ie(!1),le(!1)):(O(ne.kO.Deployment),se());break;case ne.ap.SetHostingTier:le(!1),se();break;case ne.ap.ManageHostingTier:le(!0);break;case ne.ap.ChangeView:O(e.payload),Se&&ie(!1),Y&&Q(null)}},he=function(e){var n,t=e.owner?"-".concat(null===(n=e.owner)||void 0===n?void 0:n.username):"";S("".concat("").concat(mt()(e.slug)).concat(t))},ve="string"===typeof Z,me=null!==U,ge=null!==E,ye=null!==G&&void 0!==G,Ze=ye&&!ve,be=V===ne.pS.Ready||V===s.Fe.Suspended,we=!me&&!ve;if(V===ne.pS.Loading||we&&V===ne.pS.Refetch)return(0,r.tZ)(d.G,{css:[f.l0.center,f.l0.my(32)],children:(0,r.tZ)(m.Z,{size:16})});var xe=ge&&!ye,Ce=be&&ae,ke=M===ne.kO.Deployment&&me&&ve&&!Ce,Se=M===ne.kO.Deployment&&be&&!ke&&!Ce&&re||!Ce&&Ze,Te=we&&!ye&&!re&&!ae,Ee=ve&&ge&&!Ce,Re=M===ne.kO.Deployment&&!Te&&!Ce&&!Se;return(0,r.tZ)(K,{children:(0,r.BX)(d.G,{css:[f.l0.colWithGap(16),f.l0.pb(32)],children:[Te?(0,r.tZ)(J,{children:(0,r.tZ)(ht,{onCreateDeployment:function(){return le(!0)},replLang:W})}):null,Ce?(0,r.tZ)(J,{children:(0,r.tZ)(Zt,{isNewDeployment:we,replId:t,currentBuild:E,hostingTier:G,status:V,onViewAction:pe,onError:de,onBack:function(){return le(!1)}})}):null,Ee?(0,r.tZ)(ut,{replId:t,deploymentId:Z,currentBuild:E,hostingTier:G,status:V,activeView:M,onViewAction:pe,onError:de}):null,!xe&&Se?(0,r.BX)(J,{children:[Ze?(0,r.tZ)(te.U,{hostingTier:G,onManageClick:function(){return le(!0)}}):null,(0,r.tZ)(ft,{isNewDeployment:we,currentBuild:E,initialSubdomain:null!==k&&void 0!==k?k:"",onDeploy:fe,onCancel:function(){return ie(!1)},onError:de})]}):null,ke?(0,r.tZ)(J,{children:(0,r.tZ)(cn,{buildId:U.id,targetDeploymentId:Z,buildStatus:U.status,onStatusUpdate:function(e,n,t){if(U)if(Z)if(e===U.id){switch(n){case s.Fe.Success:R((0,a.Z)((0,o.Z)({},U),{status:s.Fe.Success})),j(ne.pS.Ready);break;case s.Fe.Failed:t?de(t):j(ne.pS.Ready),!ge&&U&&R((0,a.Z)((0,o.Z)({},U),{status:s.Fe.Failed}))}N((0,a.Z)((0,o.Z)({},U),{status:n}))}else de("An unexpected error occurred. Build id does not match recently deployed build.");else de("An unexpected error occurred. No hosted deployment found.");else de("An unexpected error occurred. No deploy build found.")},onCanceled:function(){de("Build cancelled"),N(null)},onError:de})}):null,!xe&&Re?(0,r.tZ)(J,{children:(0,r.tZ)(h.zx,{disabled:!be,onClick:function(){Q(null),N(null),ie(!0)},text:"Redeploy",iconLeft:(0,r.tZ)(q.Z,{})})}):null,xe?(0,r.tZ)(J,{children:(0,r.tZ)(p.E,{colorway:"warning",icon:(0,r.tZ)(Xe.Z,{}),text:"Your deployment requires a tier in order to re-deploy"})}):null,Y?(0,r.tZ)(J,{css:f.l0.flex.grow(0),children:(0,r.tZ)(p.E,{colorway:"warning",icon:(0,r.tZ)(ze.Z,{}),text:Y})}):null]})})}var xt={Content:function(e){var n=e.pane.data;return(0,r.tZ)(wt,{initialMode:null===n||void 0===n?void 0:n.initialMode})},Icon:function(e){var n=e.size;return(0,r.tZ)(q.Z,{size:n})},getTitle:function(){return"Deployments"}}},51814:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(4541),i=(t(50959),t(25776)),o=t(40306),a=t(79197),l={Content:function(){return(0,r.tZ)(i.G,{style:{padding:32},children:(0,r.tZ)(a.Z,{children:"Sorry, this feature is not supported."})})},Icon:function(){return(0,r.tZ)(o.Z,{})},getTitle:function(){return"Unsupported"}}},96733:function(e,n,t){t.d(n,{R:function(){return f},b:function(){return p}});var r=t(4541),i=t(94517),o=t(8189),a=t(28650),l=t(83622),c=t(47236),u=t(99194),s=t(74823),d=t(12800),f={Content:function(e){var n=e.options,t=n.isHidden,a=n.performPaneOperation,f=(0,o.Z)(),h=f.container,v=f.fs,m=f.session,g=f.runner,y=(0,c.Dv)(u.f),Z=(0,u.Z)();return(0,s.Z)({container:h,runner:g,refreshWebView:Z}),(0,d.Z)({runner:g,refreshWebView:Z}),(0,i.x)(p,{run:function(){Z()}}),(0,r.tZ)(l.Z,{fs:v,session:m,ref:y,isVisible:!t,openPane:function(e){a({operation:"open",pane:e})}})},Icon:function(e){var n=e.size;return(0,r.tZ)(a.Z,{size:n})},getTitle:function(){return"Webview"}},p={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"}},10916:function(e,n,t){t.d(n,{U:function(){return im}});var r=t(4541),i=t(57389),o=t(2272),a=t(50959),l=t(34495),c=t(3941),u=t(99190),s=t(5768),d=t(8189),f=t(84445),p=t(30826),h=t.n(p),v=t(37248),m=t(66499),g=t(22167),y=t(25776),Z=t(55544),b=t(89853),w=t(6601),x=t(53088),C=t(30941),k=t(98689),S=(0,a.memo)(m.Z);var T=(0,b.X)({root:[g.l0.colWithGap(8),g.l0.height("100%"),g.l0.width("100%"),g.l0.overflow("auto"),g.l0.zIndex(2),g.l0.align.center,g.l0.py(16),g.l0.px(16),g.l0.borderRadius(8),(0,i.Z)({margin:"0 auto"},"@media only screen and (min-width: ".concat(c.j.tabletMin,"px)"),g.l0.px(32))],header:[g.l0.rowWithGap(4),g.l0.height(30),g.l0.width("100%"),g.l0.align.center],markdownContainer:[g.l0.width("100%"),{"& .rendered-markdown":[g.l0.flex.column,g.l0.center],"& .rendered-markdown > *":[g.l0.maxWidth(840),g.l0.width("100%")],"& .rendered-markdown > table":g.l0.maxWidth("100%")}]});function E(e){var n=(0,d.Z)().fs,t=(0,o.Z)(function(){var e=(0,a.useRef)(!1),n=(0,a.useRef)(null);return[(0,f.Z)((function(){e.current=!0,n.current&&clearTimeout(n.current),n.current=setTimeout((function(){e.current=!1}),150)}),{type:"throttle",wait:37.5}),e]}(),2),i=t[0],c=t[1],p=(0,a.useState)(e.path),m=p[0],b=p[1],E=(0,k.Z)(m),R=(0,a.useRef)(null),I=(0,x.T)(),G=e.path;(0,a.useEffect)((function(){G&&b(G)}),[G]);var D=e.isHidden,_=(0,C.p5)();(0,a.useEffect)((function(){if(!D){_.current&&(0,v.gK)(_.current.path)&&b(_.current.path);var e=h()((function(e){(0,l.Z)(e,{behavior:I?"auto":"smooth",scrollMode:"if-needed"})}),100),n=h()((function(n){if(n)if(n.path===E.current){if(!c.current){var t=R.current?function(e,n){var t=e.querySelectorAll(".rendered-markdown [data-sourcepos]");if(!(null===t||void 0===t?void 0:t.length))return null;var r=Array.from(t).reverse(),i=n.line,a=n.column,l=!0,c=!1,u=void 0;try{for(var s,d=r[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value,p=f.dataset.sourcepos;if(!p)throw new Error("Expected data source pos on selected element");var h=(0,o.Z)(p.split("-"),2),v=h[0],m=h[1],g=(0,o.Z)(v.split(":").map(Number),2),y=g[0],Z=g[1],b=(0,o.Z)(m.split(":").map(Number),2),w=b[0],x=b[1];if(i>=y&&a>=Z&&(i<w||i===w&&a<=x))return f}}catch(C){c=!0,u=C}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}(R.current,n.position):null;t&&e(t)}}else(0,v.gK)(n.path)&&b(n.path)}),200),t=_.subscribe(n);return function(){n.cancel(),e.cancel(),t()}}}),[_,D,I]);var P=(0,a.useState)(null),B=P[0],A=P[1];return(0,a.useEffect)((function(){if(A(null),m&&(0,v.Mb)(m))return n.watchTextFile(m,{onReady:function(e){var n=e.initialContent;A(n.toString())},onChange:function(e){var n=e.latestContent;A(n)},onMoveOrDelete:function(e){e.eventType===w.kS.Delete&&b(null)}})}),[m,n]),m?null===B?(0,r.tZ)(s.Z,{preventHighlightBorder:!0}):(0,r.BX)(y.G,{css:T.root,innerRef:i,children:[(0,r.BX)(y.G,{css:T.header,children:[(0,r.tZ)(u.Z,{}),(0,r.BX)(Z.xv,{color:"dimmer",children:["Preview of ",(0,r.tZ)("a",{href:"#".concat(m),children:m})]})]}),(0,r.tZ)(y.G,{innerRef:R,css:T.markdownContainer,children:(0,r.tZ)(S,{path:m,source:B,fs:n,sourcePos:!0})})]}):(0,r.tZ)(y.G,{css:[g.l0.height("100%"),g.l0.width("100%"),g.l0.center],children:(0,r.tZ)(Z.xv,{children:"No previewed file"})})}var R=t(1553),I={Content:function(e){var n=e.pane,t=e.options;return(0,r.tZ)(E,{path:n.data.path,isHidden:Boolean(t.isHidden)})},Icon:function(e){var n=e.size;return(0,r.tZ)(R.Z,{fill:"currentColor",size:n})},getTitle:function(){return"Markdown"}},G=t(92021),D=t(34393),_=t(10924),P=t(78457),B=t(31743),A=t(33163),U=t(30265),N={Content:function(e){var n=e.options;return(0,r.tZ)(L,{isActive:n.isActive,performPaneOperation:n.performPaneOperation})},Icon:function(e){var n=e.size;return(0,r.tZ)(_.Z,{size:n})},getTitle:function(){return"Console"}};function L(e){var n=e.isActive,t=e.performPaneOperation,i=(0,d.Z)(),o=i.session,l=i.runner,c=i.packager,u=i.container,s=i.debuggest,f=a.useRef(null),p=(0,P.Z)(s.mainClient),h=(0,A.K)();a.useEffect((function(){if(p)return p.onOutput((function(e){f.current&&f.current.write(e)}))}),[p]),a.useEffect((function(){var e=o.onTerminalClear((function(){f.current&&f.current.clear()})),n=o.onTerminalWrite((function(e){f.current&&f.current.write(e)}));return function(){e(),n()}}),[o]);var v=(0,U.T3)();return a.useEffect((function(){if(!v)return l.onLocalRun((function(){var e,t;(null===(e=f.current)||void 0===e||e.clear(),n)&&(null===(t=f.current)||void 0===t||t.focus())}))}),[v,n,l]),(0,B.L5)((function(){return{focus:f.current?function(){var e;return null===(e=f.current)||void 0===e?void 0:e.focus()}:void 0}}),[]),"html"===l.mode?null:(0,r.tZ)(D.Z,{tracker:h,runner:l,debugClient:p,packager:c,ref:f,onBootStatus:u.client().onBootStatus,openPane:function(e){t({operation:"open",pane:e})},focusOnLoad:n&&!v})}var X,M=t(57135),O=t(72006),F=t(4405),W=t(96583),H=t(87496),z=t(33229),V=t(47923),j=t(79151),q=t(39771),$=t(91355),Y=t(26673),K=t(98260),Q=t(35021),J=t(37676),ee=t(65001),ne=t(88254),te=t(31802),re=t(75916),ie=t(54369),oe=t(7624),ae=t(76544),le=t(82400),ce=$.U3.ENV_EDITOR_USED;function ue(e){var n=e.secrets,t=e.update,i=(0,a.useState)(!1),o=i[0],l=i[1],c=(0,a.useState)(!1),u=c[0],s=c[1],d=(0,a.useState)(!1),f=d[0],p=d[1],h=(0,a.useState)(0),v=h[0],m=h[1],b=0===v,w=(0,a.useRef)();w.current||(w.current=(0,oe.ir)((function(e){var n=se(e.state.doc.toString());return m(n),0!==n?(0,$.j)(ce,{action:"rawEditorUpdatedError"}):(0,$.j)(ce,{action:"rawEditorUpdated"}),[]})));var x=(0,ie.Z)({readOnly:u||f,hideGutter:!0,language:"json",extensions:[w.current]}),C=x.view,k=x.ref,S=function(){u||l(!1)},T=function(){var e=(0,M.Z)((function(){var e,n;return(0,W.__generator)(this,(function(r){switch(r.label){case 0:if(!C)return[2];if(!function(){if(!C)return!1;var e=se(C.state.doc.toString());return m(e),0===e}())return[2];s(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),e=JSON.parse(C.state.doc.toString()),[4,t(e)];case 2:return r.sent(),s(!1),p(!0),setTimeout((function(){S(),setTimeout((function(){p(!1)}),500)}),500),[3,4];case 3:return n=r.sent(),ne.Tb(n),(0,$.j)(ce,{action:"rawEditorUpdatedError"}),m(3),s(!1),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){if(C){var e=JSON.stringify(n,null,2);"{}"===e&&(e="{\n  \n}"),C.dispatch({changes:{from:0,to:C.state.doc.length,insert:e}}),C.dispatch({selection:{anchor:C.state.doc.length-2}}),C.focus()}}),[C,n]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(K.zx,{onClick:function(){return p(!1),l(!0),void(0,$.j)(ce,{action:"rawEditorOpened"})},text:"Edit as JSON",iconLeft:(0,r.tZ)(ae.Z,{}),small:!0}),(0,r.tZ)(Q.u,{isOpen:o,onRequestClose:function(){return S()},children:(0,r.BX)(y.G,{css:[g.l0.p(4),g.l0.colWithGap(8)],children:[(0,r.tZ)(Z.h4,{level:2,children:"Raw Secrets Editor"}),(0,r.tZ)(Z.xv,{multiline:!0,children:"Secrets are specified in JSON. Values must be strings."}),(0,r.tZ)(J.T,{css:[g.l0.borderRadius(4),g.l0.p(4)],elevated:!0,children:(0,r.tZ)(le.Z,{ref:k,view:C})}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.justify.end],children:[!b&&(0,r.tZ)(ee.E,{icon:(0,r.tZ)(te.Z,{}),colorway:"negative",text:de(v)}),(0,r.tZ)(K.zx,{iconLeft:(0,r.tZ)(re.Z,{}),big:!0,stretch:!0,colorway:f?"positive":"primary",text:f?"Saved!":"Save",disabled:!b||u||f,onClick:function(){return T()}})]})]})})]})}function se(e){try{var n=JSON.parse(e);for(var t in n){if("string"!==typeof t)return 2;if("string"!==typeof n[t])return 2}return 0}catch(r){return 1}}function de(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return"Make sure that all values are strings.";case 3:return"There was an error saving the secrets.";default:return""}}!function(e){e[e.VALID=0]="VALID",e[e.ERROR_PARSE=1]="ERROR_PARSE",e[e.ERROR_STRINGS=2]="ERROR_STRINGS",e[e.ERROR_SAVE=3]="ERROR_SAVE"}(X||(X={}));var fe=t(42735),pe=t(97774),he=t(74330),ve=t(77542),me=t(3668),ge=t(52308),ye=t(67044),Ze=t(46900),be=t(72428),we=t(3220),xe=t(82666),Ce=t(46598),ke=t(2884),Se=t(74783),Te=(0,b.X)({addSecretContainer:[g.l0.p(8),g.l0.flex.column,g.l0.colWithGap(8)],addSecretHeader:[g.l0.flex.row,g.l0.justify.spaceBetween,g.l0.align.center],colGap4:[g.l0.flex.column,g.l0.colWithGap(4)],colGap8:[g.l0.flex.column,g.l0.colWithGap(8)],secretItemEdit:[g.l0.p(8),g.l0.borderRadius(0),g.l0.backgroundColor.backgroundHigher,g.l0.flex.column,g.l0.colWithGap(8)],secretItem:[g.l0.p(8),g.l0.flex.row,g.l0.rowWithGap(16),g.l0.align.center,g.l0.borderRadius(0),g.l0.backgroundColor.backgroundHigher],secretItemKey:[g.l0.flex.grow(2),g.l0.flex.row,g.l0.rowWithGap(8),g.l0.align.center,g.l0.pr(16),{minWidth:0,flex:"1 1 0"}],secretItemValue:[g.l0.flex.row,g.l0.rowWithGap(4),g.l0.align.center,g.l0.flex.grow(2),g.l0.flex.shrink(1),{minWidth:0,flexBasis:0}],secretItemValueToggle:[g.l0.py(2),g.l0.px(4),g.l0.backgroundColor.backgroundHighest,g.l0.borderRadius(4),g.l0.flex.shrink(1),{minWidth:0}],headerStyle:[g.l0.flex.row,g.l0.rowWithGap(8),g.l0.align.center,g.l0.p(8)],codeInserter:[g.l0.borderRadius(8),g.l0.p(8),g.l0.flex.row,g.l0.rowWithGap(8),g.l0.align.center],stepWrapper:[g.l0.p(8),g.l0.colWithGap(8)]});function Ee(e){var n=e.onAdd,t=e.otherKeys,i=(0,o.Z)(a.useState(!0),2),l=i[0],c=i[1],s=(0,o.Z)(a.useState({key:"",value:""}),2),d=s[0],f=s[1],p=d.key.length>0&&!t.includes(d.key);return(0,r.BX)(y.G,{css:Te.addSecretContainer,children:[(0,r.BX)(y.G,{css:Te.addSecretHeader,children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"New Secret"}),(0,r.tZ)(K.zx,{text:"Save",colorway:"primary",disabled:!p,small:!0,onClick:function(){n({key:d.key.trim(),value:d.value}),f({key:"",value:""})}})]}),(0,r.BX)(y.G,{css:Te.colGap4,children:[(0,r.tZ)(fe.II,{value:d.key,onChange:function(e){return f((0,F.Z)((0,O.Z)({},d),{key:e.target.value}))},placeholder:"SECRET_KEY"}),t.includes(d.key)?(0,r.BX)(Z.xv,{variant:"small",css:{color:g.TV.accentNegativeDefault},children:['Secret "',d.key,'" already exists']}):null]}),(0,r.BX)(y.G,{css:Te.colGap4,children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.xv,{color:"dimmer",children:"Value"}),(0,r.tZ)(me.h,{alt:"Toggle Visibility",tooltipHidden:!0,onClick:function(){return c(!l)},children:l?(0,r.tZ)(u.Z,{}):(0,r.tZ)(ge.Z,{})})]}),(0,r.tZ)(fe.II,{value:d.value,onChange:function(e){return f((0,F.Z)((0,O.Z)({},d),{value:e.target.value}))},type:l?"password":"text",autoComplete:"off"})]})]})}function Re(e){var n=e.value,t=(0,Ce.Z)();return(0,r.tZ)(me.h,{alt:"Copy",tooltipHidden:!0,onClick:function(){navigator.clipboard.writeText(n).then((function(){t.showConfirm("Copied")}))},children:(0,r.tZ)(ke.Z,{})})}function Ie(e){var n=e.secret,t=e.onUpdateSecret,i=e.onDeleteSecret,l=e.last,c=(0,o.Z)(a.useState(null),2),s=c[0],d=c[1],f=(0,o.Z)(a.useState(!1),2),p=f[0],h=f[1],v=(0,o.Z)(a.useState(!1),2),m=v[0],b=v[1];return s?(0,r.BX)(r.HY,{children:[(0,r.BX)(J.T,{elevated:!0,css:[Te.secretItemEdit,l?void 0:g.l0.border({direction:"bottom",color:g.TV.backgroundHighest})],children:[(0,r.BX)(y.G,{css:Te.colGap4,children:[(0,r.tZ)(Z.xv,{children:"Key"}),(0,r.tZ)(fe.II,{value:s.key,onChange:function(e){return d((function(n){return n?(0,F.Z)((0,O.Z)({},n),{key:e.target.value}):n}))},placeholder:"SECRET_KEY"})]}),(0,r.BX)(y.G,{css:Te.colGap4,children:[(0,r.tZ)(Z.xv,{children:"Value"}),(0,r.tZ)(fe.B,{value:s.value,onChange:function(e){return d((function(n){return n?(0,F.Z)((0,O.Z)({},n),{value:e.target.value}):n}))},autoSize:!0})]}),(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.rowWithGap(8)],children:[(0,r.tZ)(K.zx,{text:"Delete",colorway:"negative",onClick:function(){return b(!0)}}),(0,r.tZ)(y.G,{css:g.l0.flex.grow(1)}),(0,r.tZ)(K.zx,{text:"Cancel",onClick:function(){return d(null)}}),(0,r.tZ)(K.zx,{colorway:"primary",text:"Save",disabled:!s.key.length,onClick:function(){t(n.key,{key:s.key.trim(),value:s.value}),d(null)}})]})]}),(0,r.tZ)(Q.u,{isOpen:m,onRequestClose:function(){return b(!1)},children:(0,r.BX)(y.G,{css:Te.colGap8,children:[(0,r.BX)(Z.xv,{variant:"subheadDefault",children:["Delete ",n.key,"?"]}),(0,r.tZ)(Z.xv,{color:"dimmer",children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,r.BX)(y.G,{css:[g.l0.justify.end,g.l0.flex.row,g.l0.rowWithGap(8)],children:[(0,r.tZ)(K.zx,{text:"Cancel",onClick:function(){return b(!1)}}),(0,r.tZ)(K.zx,{text:"Delete",colorway:"negative",onClick:function(){return i(n.key)}})]})]})})]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:[Te.secretItem,l?void 0:g.l0.border({direction:"bottom",color:g.TV.backgroundHighest})],children:[(0,r.BX)(y.G,{css:Te.secretItemKey,children:[(0,r.tZ)(Re,{value:n.key}),(0,r.tZ)(Z.xv,{children:n.key})]}),(0,r.BX)(y.G,{css:Te.secretItemValue,children:[(0,r.tZ)(me.h,{alt:"Toggle Secret",tooltipHidden:!0,onClick:function(){return h(!p)},children:p?(0,r.tZ)(ge.Z,{}):(0,r.tZ)(u.Z,{})}),(0,r.tZ)(Re,{value:n.value}),(0,r.tZ)(y.G,{css:Te.secretItemValueToggle,children:(0,r.tZ)(Z.xv,{variant:"small",css:{fontFamily:g.TV.fontFamilyCode},children:p?n.value:"\u2022".repeat(16)})})]}),(0,r.tZ)(y.G,{children:(0,r.tZ)(xe.Z,{label:"Options",items:[{label:(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(V.Z,{}),(0,r.tZ)(Z.xv,{children:"Edit"})]}),onClick:function(){d(n)}},{label:(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(we.Z,{color:g.TV.accentNegativeStronger}),(0,r.tZ)(Z.xv,{css:{color:g.TV.accentNegativeStronger},children:"Delete"})]}),isDescructive:!0,onClick:function(){b(!0)}}],onItemClick:function(e){var n;return null===(n=e.onClick)||void 0===n?void 0:n.call(e)}})})]}),(0,r.tZ)(Q.u,{isOpen:m,onRequestClose:function(){return b(!1)},children:(0,r.BX)(y.G,{css:Te.colGap8,children:[(0,r.BX)(Z.xv,{variant:"subheadDefault",children:["Delete ",n.key,"?"]}),(0,r.tZ)(Z.xv,{color:"dimmer",children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,r.BX)(y.G,{css:[g.l0.justify.end,g.l0.flex.row,g.l0.rowWithGap(8)],children:[(0,r.tZ)(K.zx,{text:"Cancel",onClick:function(){return b(!1)}}),(0,r.tZ)(K.zx,{text:"Delete",colorway:"negative",onClick:function(){return i(n.key)}})]})]})})]})}function Ge(e){var n=e.secrets,t=e.onUpdateSecret,i=e.onDeleteSecret;return(0,r.tZ)(y.G,{css:[g.l0.p(8)],children:(0,r.tZ)(y.G,{css:[g.l0.borderRadius(8),{overflow:"hidden"}],children:Object.keys(n).sort().map((function(e,o){return(0,r.tZ)(Ie,{secret:{key:e,value:n[e]},onUpdateSecret:t,onDeleteSecret:i,last:o===Object.keys(n).length},e)}))})})}function De(e){var n=e.secrets,t=e.activeFile,i=e.onInsertDone,l=(0,o.Z)(a.useState(Object.keys(n)[0]),2),c=l[0],u=l[1],s=(0,Y.Z)(t),d=(0,ve.Qt)(),f=function(e,n){if(!e)return null;switch((0,v.r6)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(n,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(n,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(n,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(n,'")')};case"rb":return{import:null,access:'ENV["'.concat(n,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(n,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(n,'");')};case"sh":return{import:null,access:'"$'.concat(n,'"')};default:return null}}(t,c);return f&&s?(0,r.tZ)(y.G,{css:[g.l0.colWithGap(16),g.l0.p(8)],children:(0,r.BX)(y.G,{css:g.l0.colWithGap(8),children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Access the secret"}),(0,r.tZ)(Se.P,{items:Object.keys(n).map((function(e){return{title:e}})),selectedItem:{title:c},onChange:function(e){return u(e.title)}})]}),f.import?(0,r.BX)(J.T,{elevated:!0,css:Te.codeInserter,children:[(0,r.tZ)(Z.xv,{css:[g.l0.font.code,g.l0.flex.grow(1)],children:f.import}),(0,r.tZ)(K.zx,{outlined:!0,small:!0,onClick:function(){var e,n,t=null!==(n=null===(e=d())||void 0===e?void 0:e.position.offset)&&void 0!==n?n:0;s({code:f.import||"",insertAt:t}),i&&i(),(0,$.j)($.U3.ENV_EDITOR_USED,{action:"insert"})},text:"Insert",iconRight:(0,r.tZ)(he.Z,{})})]}):null,(0,r.BX)(J.T,{elevated:!0,css:Te.codeInserter,children:[(0,r.tZ)(Z.xv,{css:[g.l0.font.code,g.l0.flex.grow(1)],children:f.access}),(0,r.tZ)(K.zx,{outlined:!0,small:!0,onClick:function(){var e,n,t=null!==(n=null===(e=d())||void 0===e?void 0:e.position.offset)&&void 0!==n?n:0;s({code:f.access,insertAt:t}),i&&i(),(0,$.j)($.U3.ENV_EDITOR_USED,{action:"insert"})},text:"Insert",iconRight:(0,r.tZ)(he.Z,{})})]})]})}):null}function _e(e,n){var t=(0,O.Z)({},e);return"add"===n.type?t[n.key]=n.value:"update"===n.type?(delete t[n.oldKey],t[n.key]=n.value):delete t[n.key],t}function Pe(e){var n=e.readRawEnv,t=e.writeRawEnv,i=(0,ve.R3)(),l=(0,z.Z)(),c=(0,o.Z)(a.useState(null),2),u=c[0],s=c[1],d=(0,q.Z)();a.useEffect((function(){(0,$.Cn)($.U3.ENV_EDITOR_USED,{action:"opened"}),j.Z.set("enveditortour",!0)}),[]),a.useEffect((function(){function e(){return(e=(0,M.Z)((function(){var e,t;return(0,W.__generator)(this,(function(r){switch(r.label){case 0:return[4,n()];case 1:if((e=r.sent()).error===w.Df.NotFound)return l.current&&s({}),[2];if(e.error)throw new Error("Error getting .env");return l.current?(t=H.Z.parse(e.content.toString()),s(t),[2]):[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,s,l]);var f=a.useRef(null),p=a.useRef([]),h=function(){var e=(0,M.Z)((function(e){var r,i,o,a,l;return(0,W.__generator)(this,(function(c){switch(c.label){case 0:if(!u)throw new Error("trying to write secrets before loading");return r=_e(u,e),s(r),p.current.push(e),i=Math.random(),f.current=i,[4,n()];case 1:return a=c.sent(),f.current!==i?[2]:(a.error?o=r:(o=H.Z.parse(a.content.toString()),p.current.forEach((function(e){o=_e(o,e)})),s(o)),p.current=[],l=H.Z.serialize(o),[4,t(l)]);case 2:return c.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=(0,M.Z)((function(e){return(0,W.__generator)(this,(function(n){return(0,$.j)($.U3.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),h((0,O.Z)({type:"add"},e)),[2]}))}));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=(0,M.Z)((function(e,n){return(0,W.__generator)(this,(function(t){return(0,$.j)($.U3.ENV_EDITOR_USED,{action:"updated",multiline:n.value.includes("\n")}),h((0,O.Z)({type:"update",oldKey:e},n)),[2]}))}));return function(n,t){return e.apply(this,arguments)}}(),b=function(){var e=(0,M.Z)((function(e){return(0,W.__generator)(this,(function(n){return(0,$.j)($.U3.ENV_EDITOR_USED,{action:"deleted"}),h({type:"delete",key:e}),[2]}))}));return function(n){return e.apply(this,arguments)}}();if(!u||!d)return(0,r.tZ)(y.G,{css:[g.l0.center,g.l0.coverContainer],children:(0,r.tZ)(pe.Z,{size:24})});var x=Object.keys(u);return(0,r.BX)(y.G,{css:[g.l0.flex.column],children:[(0,r.BX)(y.G,{css:Te.headerStyle,children:[(0,r.tZ)(Z.xv,{variant:"subheadBig",children:"Secrets"}),(0,r.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"System environment variables"}),(0,r.tZ)(y.G,{css:g.l0.flex.grow(1)}),(0,r.tZ)(ue,{secrets:u,update:function(){var e=(0,M.Z)((function(e){var n;return(0,W.__generator)(this,(function(r){switch(r.label){case 0:return s(e),n=H.Z.serialize(e),[4,t(n)];case 1:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}()}),(0,r.tZ)(Ze.Z,{iconLeft:(0,r.tZ)(ye.Z,{}),href:"https://docs.replit.com/programming-ide/workspace-features/secrets",small:!0,text:"Docs",target:"_blank"})]}),(0,r.tZ)(be.R,{}),(0,r.tZ)(Ee,{onAdd:v,otherKeys:x}),x.length?(0,r.BX)(r.HY,{children:[(0,r.tZ)(be.R,{}),(0,r.tZ)(Ge,{secrets:u,onUpdateSecret:m,onDeleteSecret:b}),i?(0,r.BX)(r.HY,{children:[(0,r.tZ)(be.R,{}),(0,r.tZ)(De,{secrets:u,activeFile:i})]}):null]}):null]})}var Be=t(77770),Ae={Content:function(){return(0,r.tZ)(Ue,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(Be.Z,{size:n})},getTitle:function(){return"Secrets"}};function Ue(){var e=(0,d.Z)().fs;return(0,r.tZ)(Pe,{readRawEnv:function(){return e.readFile(".env")},writeRawEnv:function(n){return e.writeFile(".env",n)}})}var Ne=t(77637),Le=t(54233);var Xe=t(4981),Me=t(98491),Oe="index.html";var Fe=t(47236),We=(0,Fe.cn)({replId:"",packageManagers:{}});function He(e,n){return n.some((function(n){var t,r;return(null===(t=n.name)||void 0===t?void 0:t.toLowerCase())===(null===(r=e.name)||void 0===r?void 0:r.toLowerCase())}))}function ze(e){var n=(0,o.Z)((0,Fe.KO)(We),2),t=n[0],r=n[1],l=(0,d.Z)(),c=l.fs,u=l.packager;return(0,a.useEffect)((function(){if((null===e||void 0===e?void 0:e.id)&&!t.packageManagers[e.id]){var n="html"===e.id?function(e){var n=(0,Me.u)(!1),t=(0,Me.u)([]);function r(){return(r=(0,M.Z)((function(){return(0,W.__generator)(this,(function(e){switch(e.label){case 0:return n.current=!0,[4,c()];case 1:return e.sent(),n.current=!1,[2]}}))}))).apply(this,arguments)}function i(){return i=(0,M.Z)((function(t){return(0,W.__generator)(this,(function(r){return[2,new Promise(function(){var r=(0,M.Z)((function(r){var i;return(0,W.__generator)(this,(function(o){switch(o.label){case 0:return n.current?[2]:(n.current=!0,[4,e.stat(Oe)]);case 1:return o.sent().exists?(i=e.watchTextFile(Oe,{onReady:function(o){var a=o.initialContent,l=o.writeChange,u='<script src="'.concat(t.sourceCodeURL,'"><\/script>\n'),s=a,d=s.indexOf("<script");-1===d&&(d=s.indexOf("</body>")),l({from:d,insert:u}),e.flush().then((0,M.Z)((function(){return(0,W.__generator)(this,(function(e){switch(e.label){case 0:return[4,c()];case 1:return e.sent(),r(),[2]}}))}))).catch((function(){r()})).finally((function(){i(),n.current=!1}))},onError:function(){i(),r(),n.current=!1}}),[2]):[2,r()]}}))}));return function(e){return r.apply(this,arguments)}}())]}))})),i.apply(this,arguments)}function o(){return o=(0,M.Z)((function(t){return(0,W.__generator)(this,(function(r){return[2,new Promise(function(){var r=(0,M.Z)((function(r){var i;return(0,W.__generator)(this,(function(o){switch(o.label){case 0:return n.current?[2]:(n.current=!0,[4,e.stat(Oe)]);case 1:return o.sent().exists?(i=e.watchTextFile(Oe,{onReady:function(o){var a=o.initialContent,l=o.writeChange,u=a,s=0,d=!0,f=!1,p=void 0;try{for(var h,v=u.split("\n")[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m,g=h.value;if(m=g.match(/^\s*<script src="https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/(.+)\/(.+)\/(.+).js"><\/script>$/)){var y=m[1];t.name===y&&l({from:s,to:s+g.length+1,insert:""})}s+=g.length+1}}catch(Z){f=!0,p=Z}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}e.flush().then((0,M.Z)((function(){return(0,W.__generator)(this,(function(e){switch(e.label){case 0:return[4,c()];case 1:return e.sent(),r(),[2]}}))}))).catch((function(){r()})).finally((function(){i(),n.current=!1}))},onError:function(){i(),r(),n.current=!1}}),[2]):[2,r()]}}))}));return function(e){return r.apply(this,arguments)}}())]}))})),o.apply(this,arguments)}function a(){return(a=(0,M.Z)((function(e){return(0,W.__generator)(this,(function(n){switch(n.label){case 0:return[4,fetch("/data/cdnjs/search/".concat(encodeURIComponent(e)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:return[4,n.sent().json()];case 2:return[2,n.sent().map((function(e){return{name:e.name,version:e.version,description:e.description,homepageURL:e.link,sourceCodeURL:e.include}}))]}}))}))).apply(this,arguments)}function l(){return(l=(0,M.Z)((function(e){var n,t;return(0,W.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/info/".concat(encodeURIComponent(e)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:n=r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,n.json()];case 3:return(t=r.sent())?[2,{name:t.name,version:t.version,description:t.description,homepageURL:t.link,sourceCodeURL:t.include}]:[3,5];case 4:return r.sent(),[2,void 0];case 5:return[2]}}))}))).apply(this,arguments)}function c(){return u.apply(this,arguments)}function u(){return(u=(0,M.Z)((function(){var e;return(0,W.__generator)(this,(function(n){switch(n.label){case 0:return[4,s()];case 1:return(e=n.sent()).error?t.current=[]:e.packages&&(t.current=e.packages),[2]}}))}))).apply(this,arguments)}function s(){return d.apply(this,arguments)}function d(){return d=(0,M.Z)((function(){return(0,W.__generator)(this,(function(n){return[2,new Promise(function(){var n=(0,M.Z)((function(n){var t,r;return(0,W.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.stat(Oe)];case 1:return i.sent().exists?(t=[],r=e.watchTextFile(Oe,{onReady:function(e){var i=e.initialContent,o=!0,a=!1,l=void 0;try{for(var c,u=i.split("\n")[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s;if(s=c.value.match(/^\s*<script src="https:\/\/cdnjs\.cloudflare\.com\/ajax\/libs\/(.+)\/(.+)\/(.+).js"><\/script>$/)){var d=s[1],f=s[2];t.push({name:d,version:f})}}}catch(p){a=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}r(),n({packages:t,error:null})},onError:function(e){r(),n({packages:null,error:e.message})}}),[2]):(n({packages:[],error:null}),[2])}}))}));return function(e){return n.apply(this,arguments)}}())]}))})),d.apply(this,arguments)}return{initialize:function(){return r.apply(this,arguments)},install:function(e){return i.apply(this,arguments)},uninstall:function(e){return o.apply(this,arguments)},search:function(e){return a.apply(this,arguments)},installedPackages:t,isInstalled:function(e){return t.current.some((function(n){var t,r;return(null===(t=n.name)||void 0===t?void 0:t.toLowerCase())===(null===(r=e.name)||void 0===r?void 0:r.toLowerCase())}))},fetchPackageInfo:function(e){return l.apply(this,arguments)},isRunning:n}}(c):function(e,n){var t=(0,Me.u)(!1),r=(0,Me.u)([]);function i(){return(i=(0,M.Z)((function(){var i;return(0,W.__generator)(this,(function(o){switch(o.label){case 0:return t.current=!0,[4,e.listSpecfile(n)];case 1:return(i=o.sent()).error?r.current=[]:i.packages&&(r.current=i.packages),t.current=!1,[2]}}))}))).apply(this,arguments)}function o(){return(o=(0,M.Z)((function(t){return(0,W.__generator)(this,(function(r){return[2,e.searchPackages(t,n)]}))}))).apply(this,arguments)}function a(){return(a=(0,M.Z)((function(i){var o,a,l;return(0,W.__generator)(this,(function(c){switch(c.label){case 0:if(t.current)return[2];if((0,$.j)($.U3.PACKAGE_MANAGER_USED,{action:"installed",packageId:i.name}),!i.name)throw new Error("Package has no name");return He(i,r.current)?[2]:(t.current=!0,[4,e.addPackages([i],n)]);case 1:return c.sent(),[4,e.listSpecfile(n)];case 2:return o=c.sent(),a=o.packages,l=o.error,a&&(r.current=a),l&&(r.current=[]),t.current=!1,[2]}}))}))).apply(this,arguments)}function l(){return(l=(0,M.Z)((function(i){var o,a,l;return(0,W.__generator)(this,(function(c){switch(c.label){case 0:if(t.current)return[2];if(!i.name)throw new Error("Package has no name");return He(i,r.current)?((0,$.j)($.U3.PACKAGE_MANAGER_USED,{action:"removed",packageId:i.name}),t.current=!0,[4,e.removePackages([i.name],n)]):[2];case 1:return c.sent(),[4,e.listSpecfile(n)];case 2:return o=c.sent(),a=o.packages,l=o.error,a&&(r.current=a),l&&(r.current=[]),t.current=!1,[2]}}))}))).apply(this,arguments)}function c(){return(c=(0,M.Z)((function(t){return(0,W.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.fetchPackageInfo(t,n)];case 1:return[2,r.sent()]}}))}))).apply(this,arguments)}return{initialize:function(){return i.apply(this,arguments)},install:function(e){return a.apply(this,arguments)},uninstall:function(e){return l.apply(this,arguments)},search:function(e){return o.apply(this,arguments)},installedPackages:r,isInstalled:function(e){return He(e,r.current)},fetchPackageInfo:function(e){return c.apply(this,arguments)},isRunning:t}}(u,e.id);r({replId:t.replId,packageManagers:(0,F.Z)((0,O.Z)({},t.packageManagers),(0,i.Z)({},e.id,n))})}}),[c,t,null===e||void 0===e?void 0:e.id,u,r]),e&&t.packageManagers[e.id]||null}var Ve,je=t(47409),qe=t(76197);!function(e){e.INSTALL="Install",e.INSTALLED="Installed",e.REMOVE="Remove",e.ERROR="Failed to Install"}(Ve||(Ve={}));var $e=(0,b.X)({self:[g.l0.p(8),g.l0.borderRadius(8),g.l0.width("100%")],header:[g.l0.flex.row,g.l0.justify.spaceBetween],description:[g.l0.colWithGap(16),g.l0.mt(8)]});function Ye(e){var n=e.onActionClick,t=e.isAlreadyInstalled,i=e.isPackagerRunning,o=e.isIconLoading,l=e.statusMessage,c=e.itemName,u=e.itemDescription,s=e.itemVersion,d=e.itemHomepageURL,f=e.itemLicense,p=e.itemAuthor,h=e.itemDependencies,v=e.htmlItem,m=(0,a.useState)(!1),g=m[0],b=m[1],w=d||f||p||h&&h.length;return(0,r.BX)(J.T,{css:$e.self,elevated:!0,children:[(0,r.BX)(y.G,{css:$e.header,children:[(0,r.tZ)(Z.h4,{variant:"subheadDefault",level:3,children:c}),w?(0,r.tZ)(me.h,{alt:"Show more about package",tooltipHidden:!0,onClick:function(){return b((function(e){return!e}))},children:(0,r.tZ)(he.Z,{rotate:g?90:0})}):null]}),(0,r.BX)(y.G,{css:$e.description,children:[(0,r.tZ)(nn,{title:"Version ".concat(s),value:u||"This package has no description.",showMore:g}),d&&g?(0,r.tZ)(nn,{title:"Website",value:(0,r.tZ)("a",{href:d,rel:"noreferrer noopener",target:"_blank",children:d}),showMore:g}):null,f&&g?(0,r.tZ)(nn,{title:"License",value:f,showMore:g}):null,p&&g?(0,r.tZ)(nn,{title:"Author",value:p,showMore:g}):null,h&&h.length&&g?(0,r.tZ)(nn,{title:"Dependencies",value:(0,r.tZ)("ul",{css:{listStyle:"none"},children:null===h||void 0===h?void 0:h.map((function(e){return(0,r.tZ)("li",{children:e},e||"")}))}),showMore:g}):null,(0,r.tZ)(K.zx,(0,O.Z)({iconLeft:(0,r.tZ)(tn,{isAlreadyInstalled:t,isPackagerRunning:i,isIconLoading:o,htmlItem:!!v}),text:l,onClick:function(){return n()},disabled:i&&!o,loading:o},Je(l)))]})]})}var Ke=(0,b.X)({self:[$e.self,je.p.backgroundPulse(),g.l0.height(128)]});function Qe(){return(0,r.tZ)(r.HY,{children:new Array(3).fill(0).map((function(e,n){return(0,r.tZ)(J.T,{css:Ke.self,elevated:!0},"itemDetailSkeleton".concat(n))}))})}function Je(e){switch(e){case Ve.REMOVE:return{colorway:"negative",outlined:!0};case Ve.INSTALLED:return{colorway:"positive",outlined:!0};default:return{}}}var en=(0,b.X)({self:[g.l0.colWithGap(2)],title:[g.l0.color.foregroundDimmer]});function nn(e){var n=e.title,t=e.value,i=e.showMore;return(0,r.BX)(y.G,{css:en.self,children:[(0,r.tZ)(Z.xv,{css:en.title,children:n}),t?(0,r.tZ)(Z.xv,{multiline:!0,maxLines:i?void 0:2,children:t}):null]})}function tn(e){var n=e.isAlreadyInstalled,t=e.isIconLoading,i=e.htmlItem;return t?(0,r.tZ)(pe.Z,{}):n?i?(0,r.tZ)(re.Z,{}):(0,r.tZ)(we.Z,{}):(0,r.tZ)(qe.Z,{})}var rn=t(80198),on=(0,b.X)({self:[g.l0.color.foregroundDefault,g.l0.colWithGap(16)],installedHeader:[g.l0.fontSize(g.TV.fontSizeSubheadDefault)],searchUIOuter:[g.l0.flex.row,g.l0.align.center],searchUIInner:[g.l0.flex.grow(1),g.l0.pr(8)],searchResult:[g.l0.flex.column,{gap:g.TV.space8,listStyle:"none",webkitOverflowScrolling:"touch"}],packagerSection:[g.l0.flex.row,g.l0.align.center],packagerSectionExpandHandle:[g.l0.pr(8),{cursor:"pointer",userSelect:"none"}]}),an=t(7247),ln=t(31230),cn=t(11122),un={fadeIn:{animation:"".concat((0,cn.F4)("from{opacity:0}to{opacity:1}")," 100ms forwards ease-in-out alternate")}},sn=(0,b.X)({header:[g.l0.fontSize(g.TV.fontSizeSubheadDefault),g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween,{textTransform:"capitalize"}],loading:[g.l0.height(22),g.l0.width("100%"),g.l0.borderRadius(4),je.p.backgroundPulse()],container:[un.fadeIn,g.l0.flex.growAndShrink(1)]});function dn(e){var n=e.packagerTitle,t=e.error,i=e.loading,o=e.packagesCount,a=e.displayingInstalledPackages,l=e.affectedFile,c=(0,d.Z)().session,u=(0,an.Z)((function(){return a?0===o?"No packages installed.":"Installed ".concat(o," packages"):t?"We couldn't search for your packages. Try again.":0===o?"No packages found":o+" packages found"}),[t,o,a]);return(0,r.tZ)(y.G,{css:sn.container,children:i?(0,r.tZ)(y.G,{css:sn.loading}):(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:sn.header,children:[(0,r.tZ)(Z.h4,{variant:"subheadDefault",level:2,children:n}),(0,r.tZ)(Z.h4,{level:3,children:u}),o>0&&a&&l?(0,r.tZ)(me.h,{alt:"Open "+l,tooltipPlacement:"bottom-start",onClick:function(){return c.openFile(l)},children:(0,r.tZ)(ln.Z,{})}):null]}),0===o?(0,r.BX)(Z.xv,{multiline:!0,css:[g.l0.pt(4)],children:["You don\u2019t have any packages installed. Try searching for a package to install, or"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"learn more about packages here"}),"."]}):null]})},i?"packagerTitleLoading":"packagerTitleLoaded")}var fn=t(24403),pn=(0,b.X)({self:[g.l0.p(8),g.l0.borderRadius(8),g.l0.colWithGap(16)],header:[g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween],headerTitle:[g.l0.rowWithGap(4),g.l0.align.center]});function hn(e){var n=e.title,t=e.children,i=e.onClose,o=void 0===i?function(){}:i,l=(0,a.useState)(!0),c=l[0],u=l[1];return(0,r.BX)(J.T,{css:pn.self,elevated:!0,children:[(0,r.BX)(y.G,{css:pn.header,children:[(0,r.BX)(y.G,{css:pn.headerTitle,children:[(0,r.tZ)(Z.h4,{variant:"subheadDefault",level:2,children:n}),(0,r.tZ)(me.h,{alt:c?"Minimize tip information":"Expand tip information",tooltipHidden:!0,onClick:function(){return u((function(e){return!e}))},children:(0,r.tZ)(he.Z,{rotate:c?90:0})})]}),(0,r.tZ)(me.h,{alt:"Dismiss tip",tooltipHidden:!0,onClick:o,children:(0,r.tZ)(fn.Z,{})})]}),c?(0,r.tZ)(y.G,{children:t}):null]})}var vn=t(89263),mn=t(4536),gn=t(49615);function yn(e){var n=e.loading,t=e.children;return(0,r.tZ)(r.HY,{children:(0,r.tZ)("ul",{css:[on.searchResult,un.fadeIn],children:n?(0,r.tZ)(Qe,{}):t},n?"packagerLoading":"packagerLoaded")})}var Zn=t(30241),bn=y.K.li;function wn(){var e=(0,vn.I)(),n=(0,a.useState)(null),t=n[0],i=n[1],l=(0,d.Z)().packager,c=(0,Zn.Z)(),u=(0,o.Z)((0,Fe.KO)(We),2),s=u[0],f=u[1];(0,a.useEffect)((function(){c!==s.replId&&f({replId:c,packageManagers:{}})}),[c,s.replId]),(0,a.useEffect)((function(){!function(e,n){var t=e.map((function(e){return e.id})),r=n.getPackagerIds(),i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u&&-1===t.indexOf(u)&&n.clearPackager(u)}}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}(e,l)}),[e,l]),(0,a.useEffect)((function(){(null===t&&e.length>0||t&&!e.find((function(e){return e.id===t.id})))&&i(e[0])}),[e,t]);var p=(0,a.useState)(""),h=p[0],v=p[1],m=function(e){var n=e.query,t=e.packagerType,r=e.config,i=(0,a.useState)([]),o=i[0],l=i[1],c=(0,a.useState)(),u=c[0],s=c[1],d=(0,a.useState)(!1),f=d[0],p=d[1],h=ze(r),v=(0,a.useState)(null),m=v[0],g=v[1],y=(0,Xe.Z)(n,400);return(0,a.useEffect)((function(){if(s(null),""===y)return p(!1),void l([]);p(!0),(0,$.j)($.U3.PACKAGE_MANAGER_USED,{action:"searched",query:y,packagerType:t});var e=!1;return h?(h.search(y).then((function(n){e||(l(n.slice(0,50)),g(h))})).catch((function(n){ne.Tb(n),e||s(n)})).finally((function(){e||p(!1)})),function(){e=!0}):void 0}),[h,y,t]),{searchResults:o,isLoading:f,error:u,searchResultsPackageManager:m}}({query:h,packagerType:"upm",config:t}),g=m.searchResults,Z=m.isLoading,b=m.searchResultsPackageManager,w=""===h,x=(0,Le.Z)("packager","show_packager_about_tooltip"),C=x.shouldDisplay,k=x.register,S=x.dismiss;(0,a.useEffect)((function(){k()}),[k]);var T=(0,Le.Z)("packager","show_packager_import_tooltip"),E=T.shouldDisplay,R=T.register,I=T.dismiss;return(0,a.useEffect)((function(){R()}),[R]),(0,r.BX)(y.G,{css:on.self,children:[(0,r.BX)(y.G,{css:on.searchUIOuter,children:[(0,r.tZ)(y.G,{css:on.searchUIInner,children:(0,r.tZ)(rn.E,{value:h,placeholder:t?"Search ".concat(t.language," packages"):void 0,onClear:function(){return v("")},onChange:function(e){return v(e.target.value)},loading:Z})}),e.length>0&&(0,r.tZ)(Se.P,{items:e,selectedItem:t,onChange:function(e){i(e)},"aria-label":"Select packager configuration"})]}),w?null===e||void 0===e?void 0:e.map((function(e){return(0,r.tZ)(Cn,{config:e,displayingInstalledPackages:!0},e.id)})):t&&(0,r.tZ)(xn,{searchResults:g,packageManager:b,isLoading:Z,config:t}),C&&w?(0,r.BX)(hn,{title:"What are packages?",onClose:function(){return S()},children:["Packages are collections of code that can extend the functionality of your programs. For example, you could add a package to make adding image carousels easier on websites, or a package to manage currency comparisons."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"Learn more about packages"})]}):null,w&&E?(0,r.tZ)(hn,{title:"Tip\u2014Auto Import",onClose:function(){return I()},children:"If you know which packages you want to use, you can just import and use them in your files as if they were already installed, and they will be installed automatically the next time you run the Repl."}):null]})}function xn(e){var n=e.searchResults,t=e.packageManager,i=e.isLoading,o=e.config;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(dn,{loading:i,packagesCount:n.length,displayingInstalledPackages:!1,affectedFile:o.packagerFiles&&o.packagerFiles[0]}),(0,r.tZ)(y.G,{children:(0,r.tZ)(yn,{loading:i,children:n.map((function(e,n){return(0,r.tZ)(bn,{children:(0,r.tZ)(kn,{packageManager:t,pkg:e})},e.name||"Unknown"+n)}))})})]})}function Cn(e){var n=e.config,t=e.displayingInstalledPackages,i=ze(n),o=(0,P.Z)(null===i||void 0===i?void 0:i.installedPackages),l=(null===o||void 0===o?void 0:o.length)||0,c=(0,a.useState)(!1),u=c[0],s=c[1];return(0,a.useEffect)((function(){i&&i.initialize()}),[i]),i&&null!==o?(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:on.packagerSection,children:[l>0?(0,r.tZ)(y.G,{onClick:function(){return s((function(e){return!e}))},css:on.packagerSectionExpandHandle,children:u?(0,r.tZ)(mn.Z,{}):(0,r.tZ)(gn.Z,{})}):null,(0,r.tZ)(dn,{packagerTitle:"".concat(n.language," Packages"),loading:!1,packagesCount:o.length,displayingInstalledPackages:Boolean(t),affectedFile:n.packagerFiles&&n.packagerFiles[0]})]}),u?null:(0,r.tZ)(y.G,{children:(0,r.tZ)(yn,{loading:!1,children:o.map((function(e,n){return(0,r.tZ)(bn,{children:(0,r.tZ)(kn,{packageManager:i,pkg:e})},e.name||"Unknown"+n)}))})})]}):null}function kn(e){var n=e.packageManager,t=(0,Ne.Z)(e,["packageManager"]),i=function(e){var n=e.packageManager,t=e.pkg,r=(0,o.Z)(a.useState(!1),2),i=r[0],l=r[1],c=(0,o.Z)(a.useState(null),2),u=c[0],s=c[1];return a.useEffect((function(){if(n&&t.name){var e=!1;return n.fetchPackageInfo(t.name).then((function(n){e||(s(n||null),l(!1))})),function(){e=!0}}s(null)}),[n,t.name]),{isLoading:i,packageInfo:u}}({packageManager:n,pkg:t.pkg}).packageInfo,l=(0,P.Z)(null===n||void 0===n?void 0:n.isRunning)||!1,c=(0,a.useState)(!1),u=c[0],s=c[1],d=(0,z.Z)(),f=i||t.pkg,p="dependencies"in f&&f.dependencies&&f.dependencies.length>0?f.dependencies.map((function(e){return e.name})):null,h=(0,Ce.Z)().showNotice,v=(null===n||void 0===n?void 0:n.isInstalled(f))||!1;return(0,r.tZ)(Ye,{onActionClick:function(){n&&!l&&(s(!0),v?n.uninstall(f).then((function(){d.current&&s(!1)})):n.install(f).then((function(){d.current&&(h("Installed ".concat(f.name)),s(!1))})))},isAlreadyInstalled:v,isPackagerRunning:l,isIconLoading:u,statusMessage:v?Ve.REMOVE:Ve.INSTALL,itemName:f.name,itemDescription:f.description,itemVersion:f.version,itemHomepageURL:f.homepageURL,itemLicense:f.license,itemAuthor:f.author,itemDependencies:p})}var Sn=t(5559),Tn=t(20866),En=(0,b.X)({self:[g.l0.p(8),g.l0.colWithGap(8),Tn.F3],packagerWrapper:g.l0.mt(8)}),Rn={Content:function(){return(0,r.BX)(y.G,{css:En.self,children:[(0,r.tZ)(Z.h4,{level:2,variant:"subheadBig",children:"Packages"}),(0,r.tZ)(y.G,{css:En.packagerWrapper,children:(0,r.tZ)(wn,{})})]})},Icon:function(e){var n=e.size;return(0,r.tZ)(Sn.Z,{size:n})},getTitle:function(){return"Packages"}},In=t(91063),Gn=t(55749),Dn=t(6581),_n=t(37195),Pn=(0,b.X)({button:{width:"fit-content"}});function Bn(e){var n=e.code,t=e.activeFile,i=(0,Y.Z)(t),o=i?{text:"Insert",iconRight:(0,r.tZ)(Dn.Z,{}),onClick:function(){return i({code:n,insertAt:"end"})}}:{text:"Copy",iconLeft:(0,r.tZ)(ke.Z,{}),onClick:function(){return(0,_n.Z)(n)}};return(0,r.tZ)(J.T,{background:"default",children:(0,r.tZ)(K.zx,(0,O.Z)({small:!0,outlined:!0,css:Pn.button},o))})}var An=(0,b.X)({self:g.l0.colWithGap(4),content:[g.l0.rowWithGap(4),g.l0.backgroundColor.backgroundRoot,g.l0.borderRadius(4),g.l0.p(4),g.l0.align.center,{width:"fit-content"}]});function Un(e){var n=e.method,t=e.content,i=e.activeFile,o=(0,a.useState)(t),l=o[0],c=o[1];return(0,r.BX)(y.G,{css:An.self,children:[(0,r.tZ)(Wn,{title:n}),(0,r.tZ)(y.G,{css:An.content,children:l.map((function(e,t){var i="".concat(n,"-").concat(t);return"input"===e.type?(0,r.tZ)(Ln,{i:t,value:e.value,placeholder:e.placeholder,setContent:c},i):(0,r.tZ)(Mn,{value:e.value},i)}))}),(0,r.tZ)(Bn,{code:Hn(l),activeFile:i})]})}var Nn=(0,b.X)({self:[g.l0.width(64),g.l0.height(24),g.l0.zIndex(1)]});function Ln(e){var n=e.i,t=e.value,i=e.placeholder,o=e.setContent;return(0,r.tZ)(fe.II,{onChange:function(e){o((function(t){return t.map((function(t,r){return n===r?(0,F.Z)((0,O.Z)({},t),{value:e.target.value}):t}))}))},placeholder:i,value:t||"",css:Nn.self})}var Xn=(0,b.X)({self:[g.l0.borderRadius(0),g.l0.backgroundColor.backgroundRoot],code:[g.l0.font.code,g.l0.color.greyStronger,g.l0.p(4)]});function Mn(e){var n=e.value;return(0,r.tZ)(y.G,{css:Xn.self,children:(0,r.tZ)(Z.xv,{css:Xn.code,children:n})})}var On,Fn=(0,b.X)({self:g.l0.rowWithGap(4),bold:{fontWeight:g.TV.fontWeightMedium}});function Wn(e){var n=e.title,t=(0,o.Z)((0,an.Z)((function(){var e=(0,Gn.Z)(n.split(" "));return[e[0],e.slice(1).join(" ")]}),[n]),2),i=t[0],a=t[1];return(0,r.BX)(y.G,{css:Fn.self,children:[(0,r.tZ)(Z.xv,{css:Fn.bold,children:i}),(0,r.tZ)(Z.xv,{color:"dimmer",children:a})]})}function Hn(e){return e.reduce((function(e,n){return e+(n.value||("input"===n.type?n.placeholder:""))}),"")}!function(e){e.IMPORT="Import the database",e.CREATE="Create a new database",e.SET="Set a key to a value",e.GET="Get a key's value",e.DELETE="Delete a key",e.LIST="List all keys",e.LIST_PREFIX="List keys with a prefix"}(On||(On={}));var zn={language:"Bash",methods:[$n(On.SET,"curl $REPLIT_DB_URL -d '{{key}} = {{value}}'"),$n(On.GET,"curl $REPLIT_DB_URL/{{key}}"),$n(On.DELETE,"curl -XDELETE $REPLIT_DB_URL/{{key}}"),$n(On.LIST,'curl "$REPLIT_DB_URL?prefix={{key}}"')]},Vn={language:"Node",methods:[$n(On.IMPORT,'const Database = require("@replit/database")'),$n(On.CREATE,"const db = new Database()"),$n(On.SET,'db.set("{{key}}", "{{value}}").then(() => {})'),$n(On.GET,'db.get("{{key}}").then(value => {})'),$n(On.DELETE,'db.delete("{{key}}").then(() => {})'),$n(On.LIST,"db.list().then(keys => {})"),$n(On.LIST_PREFIX,'db.list("{{prefix}}").then(matches => {})')]},jn={language:"Go",methods:[$n(On.IMPORT,'import "github.com/replit/database-go"'),$n(On.SET,'db.Set("{{key}}", "{{value}}")'),$n(On.GET,'value, _ := database.Get("{{key}}")'),$n(On.DELETE,'database.Delete("{{key}}")'),$n(On.LIST,'keys, _ := database.ListKeys("")'),$n(On.LIST_PREFIX,'matches, _ := database.ListKeys("{{prefix}}")')]},qn={language:"Python",methods:[$n(On.IMPORT,"from replit import db"),$n(On.SET,'db["{{key}}"] = "{{value}}"'),$n(On.GET,'db["{{key}}"]'),$n(On.DELETE,'del db["{{key}}"]'),$n(On.LIST,"keys = db.keys()"),$n(On.LIST_PREFIX,'matches = db.prefix("{{prefix}}")')]};function $n(e,n){return{method:e,content:Yn(n)}}function Yn(e){for(var n=[],t=0;t<e.length;){var r=e.indexOf("{{",t),i=e.indexOf("}}",t);if(-1===r||-1===i){n.push({type:"code",value:e.substring(t)});break}n.push({type:"code",value:e.substring(t,r)}),n.push({type:"input",placeholder:e.substring(r+"{{".length,i)}),t=i+"}}".length}return n}var Kn=(0,b.X)({self:g.l0.colWithGap(24),code:[g.l0.font.code,g.l0.color.greyStronger,g.l0.backgroundColor.backgroundRoot,g.l0.p(4),g.l0.borderRadius(4)]});function Qn(e){var n=e.activeFile,t=(0,an.Z)((function(){return function(e){switch(e?(0,v.r6)(e):"bash"){case"js":case"ts":case"tsx":case"jsx":case"mjs":return Vn;case"go":return jn;case"py":return qn;default:return zn}}(n)}),[n]);return(0,r.BX)(y.G,{css:Kn.self,children:[(0,r.BX)(Z.xv,{color:"dimmer",multiline:!0,children:["You can use the Database from any Repl by making HTTP requests or a client library as outlined below. We\u2019ve set an environment variable called ",(0,r.tZ)("code",{css:Kn.code,children:"REPLIT_DB_URL"})," in your Repl if you'd like to interact with the database directly."]}),t.methods.map((function(e){return(0,r.tZ)(Un,{method:e.method,content:e.content,activeFile:n},"".concat(t.language).concat(e.method))}))]})}var Jn=t(96092),et=(0,b.X)({children:[g.l0.p(12),g.l0.colWithGap(8)]});function nt(e){var n=e.title,t=e.defaultExpanded,i=e.children;return(0,r.tZ)(Jn.Q,{defaultExpanded:t,headerContent:(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:n}),children:(0,r.tZ)(y.G,{css:et.children,children:i})})}var tt=t(35701),rt=t(64444),it=(0,cn.F4)("from{opacity:0}to{opacity:1}"),ot=(0,b.X)({self:[g.l0.colWithGap(8),{animation:"".concat(it," 100ms forwards ease-in-out alternate")}],selfLoadingText:[g.l0.height(16),g.l0.width(48),g.l0.borderRadius(4),je.p.backgroundPulse()],selfLoading:[g.l0.height(12),g.l0.borderRadius(16),je.p.backgroundPulse()],text:[g.l0.rowWithGap(4)],textSpan:[g.l0.width("fit-content"),g.l0.display.inlineFlex]});function at(e){var n=e.database,t=e.loading,i=(null===n||void 0===n?void 0:n.sizeMB)||0,o=function(e){return"".concat(e.toFixed(),"/50 MB")}(i),a=t||!n;return(0,r.tZ)(y.G,{css:ot.self,children:a?(0,r.BX)(r.HY,{children:[(0,r.tZ)(y.G,{css:ot.selfLoadingText}),(0,r.tZ)(y.G,{css:ot.selfLoading})]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(Z.xv,{color:"dimmer",css:ot.text,children:[(0,r.tZ)(y.K.span,{css:ot.textSpan,children:o}),(0,r.tZ)(y.K.span,{css:ot.textSpan,children:"|"}),(0,r.tZ)(y.K.span,{css:ot.textSpan,children:lt(null===n||void 0===n?void 0:n.keysCount)})]}),(0,r.tZ)(rt.J,{current:i,total:50,tooltip:o})]})},a?"databaseLoadingStats":"databaseLoadedStats")}function lt(e){return"".concat(e=e||0," ").concat((0,tt.Z)("key",e))}var ct=t(43119),ut=t(71440),st=t(67216);function dt(){var e=(0,ct.Z)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return dt=function(){return e},e}function ft(){var e=(0,ct.Z)(["\n  query Database($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return ft=function(){return e},e}var pt={},ht=(0,ut.Ps)(dt()),vt=(0,ut.Ps)(ft(),ht);function mt(){var e,n,t,r=function(e){var n=(0,O.Z)({},pt,e);return st.a(vt,n)}({variables:{replID:(0,Zn.Z)()},pollInterval:1e4}),i=r.data,o=r.error,a=r.loading;i&&("Repl"===i.repl.__typename?n=null===i||void 0===i||null===(t=i.repl)||void 0===t?void 0:t.database:e="Could not fetch Database info");return o&&("GraphQL error: You don't have access to this database"===o.message?n=null:e=o.message),{db:n,loading:a,error:e}}var gt=t(36501),yt=(0,b.X)({self:[g.l0.colWithGap(16),g.l0.p(8),g.l0.backgroundColor.backgroundDefault,Tn.F3],link:[g.l0.color.accentPrimaryStronger,g.l0.pr(4)],sectionWrapper:[g.l0.colWithGap(16),g.l0.overflowY("auto"),g.l0.width("100%"),{flex:"1"}]});function Zt(e){var n=e.performPaneOperation,t=mt(),i=t.db,o=t.error,a=t.loading,l=(0,ve.R3)();return(0,r.BX)(y.G,{css:yt.self,children:[(0,r.tZ)(Z.h4,{level:2,variant:"subheadBig",children:"Database"}),(0,r.BX)(y.G,{css:yt.sectionWrapper,children:[(0,r.BX)(y.G,{children:[(0,r.BX)(Z.xv,{multiline:!0,children:[(0,r.tZ)("a",{href:gt.TT.REPL_DATABASE,target:"_blank",rel:"noopener",onClick:function(e){e.preventDefault(),n({operation:"open",pane:{type:"docs",data:{url:gt.TT.REPL_DATABASE}}})},children:"Replit Database"})," ","is a free, easy to use key-value store. No configuration is necessary, so you can start using it right away."]}),o?(0,r.tZ)(Z.xv,{multiline:!0,css:[g.l0.color.accentNegativeStronger],children:o}):null]}),(0,r.tZ)(nt,{title:"Database Info",defaultExpanded:!0,children:(0,r.tZ)(at,{database:i,loading:a})}),(0,r.tZ)(nt,{title:"Using the database",defaultExpanded:!0,children:(0,r.tZ)(Qn,{activeFile:l})})]})]})}var bt={Content:function(e){var n=e.options.performPaneOperation;return(0,r.tZ)(Zt,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,r.tZ)(In.Z,{size:n})},getTitle:function(){return"Database"}},wt=t(59187);function xt(){var e=(0,ct.Z)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        databaseId\n        databaseName\n        projectId\n        connectionString\n        isFrozen\n      }\n    }\n  }\n"]);return xt=function(){return e},e}function Ct(){var e=(0,ct.Z)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return Ct=function(){return e},e}function kt(){var e=(0,ct.Z)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          databaseId\n          databaseName\n          projectId\n          connectionString\n          isFrozen\n        }\n      }\n    }\n  }\n"]);return kt=function(){return e},e}function St(){var e=(0,ct.Z)(["\n  mutation UnfreezeNeonDatabase($input: UnfreezeNeonDatabaseInput!) {\n    unfreezeNeonDatabase(input: $input) {\n      ... on UnfreezeNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return St=function(){return e},e}var Tt={},Et=(0,ut.Ps)(xt());var Rt=(0,ut.Ps)(Ct());var It=(0,ut.Ps)(kt());var Gt=(0,ut.Ps)(St());var Dt=t(73691),_t=t(10422),Pt=t(75030),Bt=t(7681),At=t(58084),Ut=t(14806),Nt=t(9970),Lt=t(30750),Xt=t(18988),Mt=t(34204),Ot=t(52132),Ft={"td,th":{border:"1px solid "+g.TV.outlineDefault}},Wt={"td,th":{paddingLeft:8,paddingTop:8,paddingBottom:8,paddingRight:8,whiteSpace:"nowrap"},"td:first-of-type,th:first-of-type":{paddingLeft:8}},Ht={outline:"2px solid ".concat(g.TV.accentPrimaryDefault),outlineOffset:"-2px"},zt=(0,cn.iv)({":focus:focus-visible":Ht}),Vt=(0,cn.iv)(Ht),jt=(0,cn.iv)([Wt,Ft,zt]),qt=(0,cn.iv)([g.l0.fontWeight.medium,Wt,Ft,zt]),$t=(0,cn.iv)({"tbody > tr:hover":{backgroundColor:g.TV.backgroundHigher,cursor:"pointer"}});function Yt(e){var n=e.type,t=e.style,i=e.children,o=(0,Lt.LA)().rowGroupProps;return(0,r.tZ)(n,(0,F.Z)((0,O.Z)({},o),{style:t,children:i}))}function Kt(e){var n=e.item,t=e.state,i=e.children,o=(0,a.useRef)(null),l=(0,Lt.Qm)({node:n},t,o).rowProps;return(0,r.tZ)("tr",(0,F.Z)((0,O.Z)({css:qt},l),{ref:o,children:i}))}function Qt(e){var n,t=e.column,i=e.state,o=(0,a.useRef)(null),l=(0,Lt.WY)({node:t},i,o).columnHeaderProps,c=(0,Xt.Fx)(),u=c.isFocusVisible,s=c.focusProps;return(0,r.tZ)("th",(0,F.Z)((0,O.Z)({},(0,Mt.dG)(l,s)),{css:[u&&Vt,zt],colSpan:t.colspan,style:{textAlign:(null!==(n=t.colspan)&&void 0!==n?n:1)>1?"center":"left"},ref:o,children:t.rendered}))}function Jt(e){var n=e.item,t=e.children,i=e.state,o=(0,a.useRef)(null),l=(0,Lt.U)({node:n},i,o).rowProps,c=(0,Xt.Fx)(),u=c.isFocusVisible,s=c.focusProps;return(0,r.tZ)("tr",(0,F.Z)((0,O.Z)({css:[u&&Vt,jt]},(0,Mt.dG)(l,s)),{ref:o,children:t}))}function er(e){var n=e.cell,t=e.state,i=(0,a.useRef)(null),o=(0,Lt.fs)({node:n},t,i).gridCellProps,l=(0,Xt.Fx)(),c=l.isFocusVisible,u=l.focusProps;return(0,r.tZ)("td",(0,F.Z)((0,O.Z)({},(0,Mt.dG)(o,u)),{css:[c&&Vt,zt],ref:i,children:n.rendered}))}function nr(e){var n=e.selectionMode,t=e.selectionBehavior,i=(0,Ot.oy)((0,F.Z)((0,O.Z)({},e),{showSelectionCheckboxes:"multiple"===n&&"replace"!==t})),o=(0,a.useRef)(null),l=i.collection,c=(0,Lt.x6)(e,i,o).gridProps;return(0,r.BX)("table",(0,F.Z)((0,O.Z)({},c),{ref:o,css:[(null===e||void 0===e?void 0:e.onRowAction)&&$t],style:{borderCollapse:"collapse"},children:[(0,r.tZ)(Yt,{type:"thead",children:l.headerRows.map((function(e){return(0,r.tZ)(Kt,{item:e,state:i,children:(0,Nt.Z)(e.childNodes).map((function(e){return(0,r.tZ)(Qt,{column:e,state:i},e.key)}))},e.key)}))}),(0,r.tZ)(Yt,{type:"tbody",children:(0,Nt.Z)(l.body.childNodes).map((function(e){return(0,r.tZ)(Jt,{item:e,state:i,children:(0,Nt.Z)(e.childNodes).map((function(e){return(0,r.tZ)(er,{cell:e,state:i},e.key)}))},e.key)}))})]}))}var tr=function(e){var n=e.ariaTableProps,t=e.rows,i=e.columns;return(0,r.BX)(nr,(0,F.Z)((0,O.Z)({},n),{children:[(0,r.tZ)(Ot.xD,{columns:i,children:function(e){return(0,r.tZ)(Ot.sg,{children:e.value})}}),(0,r.tZ)(Ot.RM,{items:t,children:function(e){return(0,r.tZ)(Ot.X2,{children:function(n){return(0,r.tZ)(Ot.bL,{children:e[n]})}})}})]}))};function rr(e){var n=e.headerColumns,t=e.bodyData,i=e.ariaLabel,o=void 0===i?"Database Table":i,a=e.scrollRef,l=e.onRowAction,c=n.map((function(e,n){return{key:"string"===typeof e?e:"".concat(n),value:e}})),u=t.map((function(e,t){for(var r={id:t},i=0;i<e.length;i++){var o=n[i];r["string"===typeof o?o:"".concat(i)]=e[i]}return r}));return(0,r.tZ)(tr,{ariaTableProps:{selectionMode:"none","aria-label":o,onRowAction:l,scrollRef:a},columns:c,rows:u})}var ir=function(e,n){var t=(0,d.Z)().psql,r=(0,o.Z)(a.useState(),2),i=r[0],l=r[1],c=(0,o.Z)(a.useState(!1),2),u=c[0],s=c[1],f=a.useCallback(function(){var r=(0,M.Z)((function(){var r;return(0,W.__generator)(this,(function(i){switch(i.label){case 0:if(!e)return[2];i.label=1;case 1:return i.trys.push([1,,3,4]),s(!0),[4,t.run({query:e,connectionString:n})];case 2:return r=i.sent(),l(r),[3,4];case 3:return s(!1),[7];case 4:return[2]}}))}));return function(){return r.apply(this,arguments)}}(),[n,t,e]);return a.useEffect((function(){f()}),[n,t,e,f]),{data:i,loading:u,refetch:f}},or=function(e){var n=e.rows,t=e.columns;return!Array.isArray(n)||n.length<1?null:{headerColumns:null!==t&&void 0!==t?t:[],bodyData:n.map((function(e){return Object.values(e)}))}},ar=function(e){var n=e.connectionString;return ir("SELECT n.nspname as \"Schema\",\n  c.relname as \"Name\",\n  CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'm' THEN 'materialized view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' WHEN 'f' THEN 'foreign table' WHEN 'p' THEN 'partitioned table' WHEN 'I' THEN 'partitioned index' END as \"Type\",\n  pg_catalog.pg_get_userbyid(c.relowner) as \"Owner\",\n  pg_catalog.pg_size_pretty(pg_catalog.pg_total_relation_size(c.oid)) as \"Size\",\n  pg_catalog.obj_description(c.oid, 'pg_class') as \"Description\"\nFROM pg_catalog.pg_class c\n     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\nWHERE c.relkind IN ('r','p','v','m','S','f','')\n      AND n.nspname <> 'pg_catalog'\n      AND n.nspname <> 'information_schema'\n      AND n.nspname !~ '^pg_toast'\n  AND pg_catalog.pg_table_is_visible(c.oid)\nORDER BY 1,2;",n)},lr=(0,Fe.cn)(void 0),cr=(0,Fe.cn)((function(e){var n=e(lr);return null===n||void 0===n?void 0:n.rows.reduce((function(e,n){var t=n.table_name,r=n.column_name;return e[t]||(e[t]=[]),e[t].push(r),e}),{})})),ur=t(19753),sr=t(39056),dr=function(e){var n=e.headerTitle,t=e.onGoBack,i=e.children;return(0,r.BX)(y.G,{css:[g.l0.flex.column,g.l0.height("100%")],children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.py(16),g.l0.px(8),g.l0.align.center],children:[(0,r.tZ)(me.h,{alt:"Go back",size:28,type:"button",onClick:t,children:(0,r.tZ)(sr.Z,{})}),(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(16),g.l0.ml(8)],children:n})]}),(0,r.tZ)(y.G,{css:[g.l0.overflow("auto"),g.l0.height("calc(100% - 60px)")],children:i})]})},fr=function(e){(0,$.j)($.U3.DATABASE_USED,(0,O.Z)({type:"PostgreSQL",provider:"neon"},e))},pr=(0,Fe.cn)(["databaseManager"]),hr=(0,Fe.cn)(null,(function(e,n,t){var r=e(pr);n(pr,(0,Nt.Z)(r).concat([t])),fr({action:"pageNav",databasePage:t})})),vr=(0,Fe.cn)(null,(function(e,n){var t=e(pr);n(pr,t.slice(0,t.length-1))})),mr=(0,Fe.cn)((function(e){var n=e(pr);return n[n.length-1]})),gr=function(){return(0,Fe.b9)(hr)},yr=function(){return(0,Fe.b9)(vr)},Zr=t(48005),br=t(27046),wr=(0,Fe.cn)(""),xr=(0,Fe.cn)(null),Cr=(0,Fe.cn)(null,(function(e,n,t){var r=t.query;r&&n(wr,r);var i=e(xr);i&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:r}})})),kr=t(85234),Sr=t.n(kr),Tr=t(92153),Er=t(14124),Rr=(0,Er.O4)("replDatabasesQueryHistory",[]),Ir=function(e,n){return!e.isPinned&&n.isPinned?1:e.isPinned&&!n.isPinned?-1:"number"===typeof e.pinnedTimestamp&&"number"===typeof n.pinnedTimestamp?e.pinnedTimestamp-n.pinnedTimestamp:n.timestamp-e.timestamp},Gr=function(){return(0,Er.lV)(a.useCallback((function(e,n,t){if(t){var r={id:Sr()(),data:t,timestamp:Date.now()},i=e(Rr),o=(0,Tr.ZP)(i,(function(e){!function(e,n){var t=e.findIndex((function(e){return!e.isPinned&&e.data===n.data}));-1!==t?e.splice(t,1,n):e.push(n),e.sort(Ir);var r=e.filter((function(e){return!e.isPinned})).length;if(r>=5){var i=r-5;e.splice(e.length-i,i)}}(e,r)}));n(Rr,o)}}),[]))},Dr=t(43064),_r=t(75242),Pr=t(85282),Br=function(e){var n=e.id,t=e.data,i=e.isPinned,o=function(e){return(0,Er.lV)(a.useCallback((function(n,t){var r=n(Rr).find((function(n){return n.id===e})),i=(null===r||void 0===r?void 0:r.data)||"";i&&(t(Cr,{query:i}),fr({action:"queryHistoryItemSelected"}))}),[e]))}(n),l=function(e){return(0,Er.lV)(a.useCallback((function(n,t){var r=n(Rr),i=(0,Tr.ZP)(r,(function(n){var t=n.find((function(n){return n.id===e}));t&&(t.isPinned=!t.isPinned,t.isPinned?t.pinnedTimestamp=Date.now():t.pinnedTimestamp=void 0),n.sort(Ir)}));t(Rr,i),fr({action:"queryHistoryItemPinned"})}),[e]))}(n);return(0,r.BX)(y.G,{css:[{borderTop:"1px solid ".concat(g.TV.outlineDefault),":hover":{background:g.TV.backgroundHigher}},g.l0.flex.row,g.l0.p(8),g.l0.color.foregroundDimmer,g.l0.align.center,g.l0.cursor.pointer],onClick:o,children:[(0,r.tZ)(Z.xv,{css:[g.l0.flex.growAndShrink(1)],children:t}),(0,r.tZ)(me.h,{alt:"Pin query",onClick:l,children:i?(0,r.tZ)(Pr.Z,{fill:g.TV.accentPrimaryDefault}):(0,r.tZ)(br.Z,{})})]})},Ar=function(e){var n=e.onExpand,t=(0,Fe.Dv)(Rr);return(0,r.tZ)(Jn.Q,{onClick:n,headerContent:(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center,g.l0.p(2)],children:[(0,r.tZ)(ur.Z,{}),(0,r.tZ)(Z.xv,{css:[g.l0.color.foregroundDimmest],children:"Query History"})]}),children:(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8),g.l0.height("100%")],children:0===t.length?(0,r.tZ)(y.G,{css:[g.l0.p(8)],children:(0,r.tZ)(Z.xv,{css:[g.l0.color.foregroundDimmer],children:"No query history"})}):(0,r.tZ)(y.G,{children:t.map((function(e){return(0,r.tZ)(Br,(0,O.Z)({},e),e.id)}))})})})},Ur=function(e){var n=e.queryResult,t=e.scrollRef;if(null===n||void 0===n?void 0:n.error)return(0,r.tZ)(y.G,{css:g.l0.px(8),children:(0,r.tZ)(Z.xv,{multiline:!0,css:[g.l0.color.accentNegativeDefault],children:null===n||void 0===n?void 0:n.error})});if(!(null===n||void 0===n?void 0:n.rows))return null;var i=or(n);if(!i)return(0,r.tZ)(y.G,{css:g.l0.px(8),children:(0,r.tZ)(Z.xv,{multiline:!0,css:[g.l0.color.accentPositiveDefault],children:"Query successful, no rows returned"})});var o=i.headerColumns,a=i.bodyData;return(0,r.tZ)(y.G,{css:g.l0.px(8),children:(0,r.tZ)(rr,{headerColumns:o,bodyData:a,scrollRef:t})})},Nr=(0,cn.iv)([g.l0.height("100%"),g.l0.position.relative,g.l0.overflow("auto")]),Lr=(0,cn.iv)([g.l0.position.sticky,g.l0.top(0),g.l0.left(0),g.l0.zIndex(1),g.l0.backgroundColor.backgroundDefault]),Xr=function(e){var n=e.connectionString,t=(0,o.Z)((0,Fe.KO)(wr),2),i=t[0],l=t[1],c=(0,ie.Z)({initialDoc:i}),u=c.view,s=c.ref,f=(0,o.Z)(a.useState(!1),2),p=f[0],h=f[1];a.useEffect((function(){return function(){var e;l(null!==(e=null===u||void 0===u?void 0:u.state.doc.toString())&&void 0!==e?e:"")}}),[l,null===u||void 0===u?void 0:u.state.doc]);var v=(0,Fe.b9)(xr);a.useEffect((function(){v(u)}),[v,u]);var m=function(e){var n=e.view,t=(0,Pt.Z)({view:n}),i=a.useRef(null);return a.useEffect((function(){if(n){var e=document.createElement("div");return i.current=_t.createPortal((0,r.tZ)("div",{css:[{fontFamily:g.TV.fontFamilyCode},g.l0.color.foregroundDimmest],children:"Type PostgreSQL queries here to use the database."}),e),n.dispatch({effects:t.reconfigure((0,Dt.W$)(e))}),function(){n.dispatch({effects:t.reconfigure([])}),i.current=null}}}),[n,t]),i.current}({view:u});(0,Bt.Z)({view:u}),function(e){var n=e.connectionString,t=ir("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public';",n).data,r=(0,Fe.b9)(lr);a.useEffect((function(){r(t)}),[t,r])}({connectionString:n});var Z=(0,Fe.Dv)(cr);!function(e){var n=e.view,t=e.config,r=(0,Pt.Z)({view:n});a.useEffect((function(){if(n)return n.dispatch({effects:r.reconfigure([Ut.Wl.high((0,At.sql)((0,O.Z)({dialect:At.PostgreSQL},t)))])}),function(){n.dispatch({effects:r.reconfigure([])})}}),[n,r,t])}({view:u,config:{schema:Z}});var b=(0,Dr.Lh)();(0,_r.Z)({view:u,filePath:"mark.sql",decorations:b});var w=(0,d.Z)().psql,x=(0,o.Z)(a.useState(),2),C=x[0],k=x[1],S=(0,o.Z)(a.useState(!1),2),T=S[0],E=S[1],R=Gr(),I=a.useCallback((function(){function e(){return(e=(0,M.Z)((function(){var e,t;return(0,W.__generator)(this,(function(r){switch(r.label){case 0:if(!u)return[2];r.label=1;case 1:return r.trys.push([1,,3,4]),E(!0),e=null===u||void 0===u?void 0:u.state.doc.toString(),R(e),[4,w.run({query:e,connectionString:n})];case 2:return t=r.sent(),k(t),fr({action:"queryRan"}),[3,4];case 3:return E(!1),[7];case 4:return[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,w,R,u]),G=gr(),D=a.useCallback((function(){G("databaseManager")}),[G]),_=a.useCallback((function(){G("tableSchemas")}),[G]),P=a.useRef(null);return(0,r.tZ)(dr,{headerTitle:"Database Contents",onGoBack:D,children:(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),Nr],innerRef:P,children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.px(8),g.l0.pb(8),p?null:Lr],children:[(0,r.BX)(y.G,{css:[{border:"1px solid ".concat(g.TV.outlineDefault)},g.l0.borderRadius(2)],children:[(0,r.tZ)(le.Z,{ref:s,view:u,css:[g.l0.viewStyle,g.l0.backgroundColor.backgroundDefault,g.l0.borderRadius(8),g.l0.overflow("auto"),g.l0.maxHeight(300),{".cm-panel":{zIndex:1}}]}),m,(0,r.tZ)(Ar,{expanded:p,onExpand:function(){h((function(e){return!e}))}})]}),(0,r.tZ)(K.zx,{text:"Run Query",iconLeft:T?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(re.Z,{}),onClick:I,disabled:T})]}),(0,r.tZ)(Ur,{queryResult:C,scrollRef:P}),(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8),g.l0.px(8),g.l0.py(8)],children:(0,r.tZ)(K.zx,{css:g.l0.backgroundColor.backgroundDefault,text:"Show All Contents",iconLeft:(0,r.tZ)(Zr.Z,{}),onClick:_})})]})})},Mr=t(34592),Or=t(73758),Fr=t(7579),Wr="DATABASE_URL",Hr="PGDATABASE",zr="PGHOST",Vr="PGPORT",jr="5432",qr="PGUSER",$r="PGPASSWORD",Yr=function(e){var n=e.envVarKey,t=e.envVarValue,i=e.isSecret,l=(0,Fr.H)()("db-env-var-".concat(n)),c=(0,o.Z)(a.useState(!1),2),s=c[0],d=c[1],f=!i||s?"text":"password";return(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.flex.wrap,g.l0.align.end,g.l0.pb(8),{gap:g.TV.space8}],children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),{flexBasis:250},g.l0.flex.grow(0),g.l0.flex.shrink(1)],children:[(0,r.tZ)("label",{css:g.l0.color.foregroundDimmer,htmlFor:l,children:n}),(0,r.tZ)(fe.II,{id:l,type:f,readOnly:!0,value:t})]}),(0,r.tZ)(K.zx,{text:"Copy",iconLeft:(0,r.tZ)(Mr.Z,{}),onClick:function(){(0,_n.Z)(t),fr({action:"envVarCopied",envVarKey:n,envVarType:"value"})}}),i?(0,r.tZ)(K.zx,{text:"View",iconLeft:(0,r.tZ)(u.Z,{}),onClick:function(){return d((function(e){return!e}))}}):null]})},Kr=function(e){var n,t=e.connectionString,r=e.databaseName,o=new URL(t.replace("postgres://","https://")),a=o.host,l=o.username,c=o.password;return n={},(0,i.Z)(n,Wr,t),(0,i.Z)(n,Hr,r),(0,i.Z)(n,zr,a),(0,i.Z)(n,Vr,jr),(0,i.Z)(n,qr,l),(0,i.Z)(n,$r,c),n},Qr=function(){var e=(0,d.Z)().fs;return a.useCallback((function(n){var t=n.connectionString,r=n.databaseName,i=Kr({connectionString:t,databaseName:r});function a(){return a=(0,M.Z)((function(){var n,t,r,a,l,c,u,s,d,f,p,h,v,m;return(0,W.__generator)(this,(function(g){switch(g.label){case 0:return[4,e.readFile(".env")];case 1:if(n=g.sent(),t="",n.error){if(n.error!==w.Df.NotFound)throw new Error("Error getting .env");t=""}else t=n.content;r=H.Z.parse(t.toString()),a=!1,l=(0,O.Z)({},r),c=!0,u=!1,s=void 0;try{for(d=Object.entries(i)[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)p=(0,o.Z)(f.value,2),h=p[0],v=p[1],l[h]!==v&&(a=!0,l[h]=v)}catch(y){u=!0,s=y}finally{try{c||null==d.return||d.return()}finally{if(u)throw s}}return a?(m=H.Z.serialize(l),[4,e.writeFile(".env",Or.Z.from(m))]):[2];case 2:return g.sent(),[2]}}))})),a.apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[e])},Jr=function(e){var n=e.connectionString,t=e.databaseName,i=(0,an.Z)((function(){return Kr({connectionString:n,databaseName:t})}),[n,t]),o=i.PGHOST,l=i.PGUSER,c=i.PGPASSWORD,u=Qr();return a.useEffect((function(){u({connectionString:n,databaseName:t})}),[n,t,u]),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)(Yr,{envVarKey:Wr,envVarValue:n,isSecret:!0}),(0,r.tZ)(Yr,{envVarKey:Hr,envVarValue:t}),(0,r.tZ)(Yr,{envVarKey:zr,envVarValue:o}),(0,r.tZ)(Yr,{envVarKey:Vr,envVarValue:jr}),(0,r.tZ)(Yr,{envVarKey:qr,envVarValue:l}),(0,r.tZ)(Yr,{envVarKey:$r,envVarValue:c,isSecret:!0})]})},ei=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],ni=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function ti(e,n){var t,r=n||{},i=r.signed,o=void 0!==i&&i,a=r.digitsNumber,l=void 0===a?2:a,c=r.isKib,u=void 0===c||c,s=r.isKibNotation,d=void 0!==s&&s;if(t=o?e<0?"-":"+":"",0===e)return"".concat(t,"0B");var f=u?1024:1e3,p=d?ei:ni,h=Math.floor(Math.log(Math.abs(e))/Math.log(f));return"".concat(t).concat(parseFloat(Math.abs(e/Math.pow(f,h)).toFixed(l))).concat(p[h])}var ri=t(92928),ii=t(22847),oi=function(e){var n=e.tableData,t=e.scrollRef,i=n.headerColumns,o=n.bodyData,l=gr(),c=a.useCallback((function(e){var n=parseInt(String(e),10);if(!isNaN(n)){var t=o[n][i.indexOf("Name")];l("table/".concat(t))}}),[l,i,o]);return(0,r.tZ)(rr,{headerColumns:i,bodyData:o,onRowAction:c,scrollRef:t})},ai=function(e){var n=e.psqlQueryResult,t=e.scrollRef,i=n.data;if(n.loading)return(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(pe.Z,{})});if(null===i||void 0===i?void 0:i.error)return(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(Z.xv,{multiline:!0,css:[g.l0.color.accentNegativeDefault,g.l0.maxWidth("100%")],children:null===i||void 0===i?void 0:i.error})});var o=i?or(i):null;return o?(0,r.tZ)(oi,{tableData:o,scrollRef:t}):(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(Z.xv,{multiline:!0,css:[g.l0.color.accentPositiveDefault,g.l0.maxWidth("100%")],children:"No tables found"})})},li=function(e){var n=e.connectionString,t=yr(),i=a.useRef(null),o=ar({connectionString:n}),l=o.refetch;return(0,r.BX)(y.G,{css:[g.l0.flex.column,g.l0.height("100%")],children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.py(16),g.l0.px(8),g.l0.align.center],children:[(0,r.tZ)(me.h,{alt:"Go back",size:28,type:"button",onClick:t,children:(0,r.tZ)(sr.Z,{})}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1)],children:(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(16),g.l0.ml(8)],children:"All tables"})}),(0,r.tZ)(me.h,{alt:"Refresh",size:24,type:"button",onClick:l,children:(0,r.tZ)(ii.Z,{})})]}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1),g.l0.overflow("auto"),g.l0.px(8)],innerRef:i,children:(0,r.tZ)(ai,{psqlQueryResult:o,scrollRef:i})})]})},ci="1px solid "+g.TV.outlineDefault,ui=(0,cn.iv)([g.l0.p(8),g.l0.backgroundColor.backgroundDefault,g.l0.align.center,g.l0.borderRadius(0),{borderLeft:ci,borderRight:ci,borderBottom:ci},{":not([disabled])":{":focus":{boxShadow:"none",outline:"2px solid ".concat(g.TV.accentPrimaryDefault),outlineOffset:"-2px"},":hover":{backgroundColor:g.TV.backgroundHigher}}}]),si=function(e){var n=e.connectionString,t=ar({connectionString:n}),i=t.data,l=t.loading,c=(0,o.Z)(a.useState(!1),2),u=c[0],s=c[1],d=a.useCallback((function(){s(!0)}),[]),f=i?or(i):null,p=a.useRef(null);if(!f||l)return null;var h=f.bodyData.length,v=f.headerColumns,m=f.bodyData,Z=h-5>0&&!u;return(0,r.tZ)(r.HY,{children:(0,r.BX)(y.G,{css:[g.l0.overflow("auto"),g.l0.display.grid],innerRef:p,children:[(0,r.tZ)(oi,{tableData:{headerColumns:v,bodyData:u?m:m.slice(0,5)},scrollRef:p}),Z?(0,r.tZ)(K.zx,{text:"".concat(h-5," more"),css:ui,onClick:d}):null]})})},di=t(5213),fi=10*Math.pow(1024,3),pi=di.z4["neon-database-preview"],hi=(0,di.qJ)(pi),vi="".concat(pi.toLocaleString()," Cycles (").concat(hi,") / day"),mi="https://docs.replit.com/hosting/databases/postgresql-on-replit",gi=function(e){var n=e.dbSize,t=e.totalSize,i=n,o=t,a=ti(n),l=ti(t),c=(0,an.Z)((function(){return(0,Fe.cn)(i)}),[i]),u=(0,an.Z)((function(){return(0,Fe.cn)(o)}),[o]);return(0,r.BX)(r.HY,{children:[(0,r.BX)(Z.xv,{css:g.l0.color.foregroundDimmer,children:[a,"/",l]}),(0,r.tZ)(ri.hF,{totalAtom:u,currentAtom:c,limitText:"".concat(a," / ").concat(l),inactive:!1,measure:"MB"})]})},yi=function(e){var n,t,i=e.connectionString,o=ir("SELECT sum(pg_database_size(datname)) FROM pg_database;",i),a=o.data,l=o.loading,c=ir("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' ORDER BY table_name;",i),u=c.data,s=c.loading,d=parseInt(null!==(t=null===(n=null===a||void 0===a?void 0:a.rows[0])||void 0===n?void 0:n.sum)&&void 0!==t?t:"0",10),f=null===u||void 0===u?void 0:u.rows.length;return(0,r.BX)(y.G,{css:g.l0.rowWithGap(8),children:[s?null:(0,r.BX)(Z.xv,{children:[f," ",1===f?"table":"tables"]}),l?null:(0,r.tZ)(gi,{dbSize:d,totalSize:fi})]})},Zi=function(e){var n=e.connectionString,t=e.onOpenDatabaseViewerClick;return(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)(yi,{connectionString:n}),(0,r.tZ)(si,{connectionString:n}),(0,r.tZ)(K.zx,{text:"See Database Contents",iconLeft:(0,r.tZ)(Zr.Z,{}),onClick:t})]})},bi=(t(3259),function(e){var n=e.size,t=void 0===n?16:n;return(0,r.BX)("svg",{viewBox:"0 0 128 36",preserveAspectRatio:"xMidYMin",height:t,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"#12FFF7"}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#a)"}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#b)"}),(0,r.tZ)("path",{d:"M29.793 0A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36a.62.62 0 0 0 .62-.62v-19.2c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V1.241C31.035.556 30.479 0 29.793 0Z",fill:"#B9FFB3"}),(0,r.tZ)("path",{d:"M60.686 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L61.082 26h3.938V10.6h-4.334ZM73.054 22.568V19.84h9.702v-3.278h-9.702v-2.53h11.77V10.6H68.632V26h16.434v-3.432H73.054ZM96.583 26.506c6.094 0 10.054-2.992 10.054-8.206 0-5.214-3.96-8.206-10.054-8.206S86.551 13.086 86.551 18.3c0 5.214 3.938 8.206 10.032 8.206Zm0-3.652c-3.388 0-5.478-1.65-5.478-4.554 0-2.904 2.112-4.554 5.478-4.554 3.388 0 5.478 1.65 5.478 4.554 0 2.904-2.09 4.554-5.478 4.554ZM123.249 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L123.645 26h3.938V10.6h-4.334Z",fill:"currentColor"}),(0,r.BX)("defs",{children:[(0,r.BX)("linearGradient",{id:"a",x1:"36",y1:"36",x2:"4.345",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#B9FFB3"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,r.BX)("linearGradient",{id:"b",x1:"36",y1:"36",x2:"14.617",y2:"27.683",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#1A1A1A",stopOpacity:".9"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})}),wi=(0,cn.iv)([g.l0.color.foregroundDimmest,{textDecoration:"underline"}]),xi=function(){return(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8),g.l0.py(8),g.l0.width("100%")],children:(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center,g.l0.justify.spaceBetween],children:[(0,r.tZ)("a",{target:"_blank",href:mi,css:wi,children:"Docs"}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(14)],children:"Powered by"}),(0,r.tZ)(bi,{})]})]})})},Ci=t(40306),ki=t(24793),Si=function(e){var n=e.psqlQueryResult,t=e.tableName,i=e.connectionString,o=e.scrollRef,a=n.data,l=n.loading,c=function(e){var n=e.tableName,t=e.connectionString,r=ir(function(e){return"SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public' AND table_name = '".concat(e.replace(/"/g,'""'),"';")}(n),t).data;return r}({tableName:t,connectionString:i});if(l)return(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(pe.Z,{})});if(null===a||void 0===a?void 0:a.error)return(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(Z.xv,{multiline:!0,css:[g.l0.color.accentNegativeDefault,g.l0.maxWidth("100%")],children:null===a||void 0===a?void 0:a.error})});var u=a?or(a):null;if(!u)return(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(Z.xv,{multiline:!0,css:[g.l0.color.accentPositiveDefault,g.l0.maxWidth("100%")],children:"No rows"})});var s=u.headerColumns,d=u.bodyData;return(0,r.tZ)(rr,{headerColumns:s.map((function(e,n){var t,i=null===c||void 0===c||null===(t=c.rows)||void 0===t?void 0:t.find((function(n){return n.column_name===e})),o=null===i||void 0===i?void 0:i.data_type,a=o?(0,r.tZ)(ki.D,{text:o}):null;return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.xv,{children:e}),a]},n)})),bodyData:d,scrollRef:o})},Ti=function(e){var n=e.tableName,t=e.connectionString,i=yr(),o=a.useRef(null),l=ir('SELECT * FROM "'.concat(n.replace(/"/g,'""'),'" LIMIT ').concat(500),t),c=l.refetch;return(0,r.BX)(y.G,{css:[g.l0.flex.column,g.l0.height("100%")],children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.py(16),g.l0.px(8),g.l0.align.center],children:[(0,r.tZ)(me.h,{alt:"Go back",size:28,type:"button",onClick:i,children:(0,r.tZ)(sr.Z,{})}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1)],children:(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(16),g.l0.ml(8)],children:n})}),(0,r.tZ)(me.h,{alt:"Refresh",size:24,type:"button",onClick:c,children:(0,r.tZ)(ii.Z,{})})]}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1),g.l0.overflow("auto"),g.l0.px(8)],innerRef:o,children:(0,r.tZ)(Si,{psqlQueryResult:l,tableName:n,connectionString:t,scrollRef:o})})]})},Ei=function(e){var n=e.cyclesLow;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Z.xv,{multiline:!0,css:[g.l0.fontSize(12),g.l0.color.foregroundDimmest],children:"You\u2019re paying ".concat(vi)}),n?(0,r.tZ)(y.G,{children:(0,r.tZ)(ee.E,{icon:(0,r.tZ)(Ci.Z,{}),colorway:"warning",text:"If your database use continues, you will be out of\n Cycles in [X] days and access to your database will be paused. \n Buy more Cycles or add a recurring Cycles subscription to prevent that from happening."})}):null]})},Ri=t(58975),Ii=t(20235),Gi=t(27396),Di=t(13040),_i=t(80567),Pi=t(99920);var Bi=t(56648),Ai=t(69526),Ui=(0,Fe.cn)(null),Ni=(0,Fe.cn)(null),Li=function(e){var n=e.title,t=e.children,i=e.isAccordion,o=e.sectionStyles;return(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8),g.l0.pt(8),{borderTopWidth:1,borderTopStyle:"solid",borderTopColor:g.TV.outlineDefault},o],children:i?(0,r.tZ)(Jn.Q,{headerContent:(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:n})}),children:(0,r.tZ)(y.G,{css:[g.l0.p(12),g.l0.colWithGap(8),g.l0.height("100%")],children:t})}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(g.TV.fontSizeSubheadDefault),g.l0.fontWeight.medium],children:n}),t]})})},Xi=function(e){var n,t=e.neonDatabases,i=e.onDatabaseDeleted,l=e.onDatabaseUnfreezed,c=t[0],u=(0,Ce.Z)().showError,s=(0,Zn.Z)(),d=function(){var e=a.useContext(Pi.Z);if(!e)throw new Error("Expected Repl info to be in context");return e.slug}(),f=(0,Fe.Dv)(mr),p=gr(),h=a.useCallback((function(){p("queryEditor")}),[p]),v=(0,o.Z)(function(e){var n=(0,O.Z)({},Tt,e);return wt.D(Rt,n)}(),2),m=v[0],b=v[1].loading,w=a.useCallback((function(){I(!0)}),[]),x=(0,Di.Z)({forceFetch:!1}),C=x.cycles,k=x.formattedBalanceValue,S="number"===typeof C&&C>pi,T=a.useCallback((0,M.Z)((function(){var e,n,t;return(0,W.__generator)(this,(function(r){switch(r.label){case 0:return[4,m({variables:{input:{replId:s,databaseId:c.databaseId}}})];case 1:return e=r.sent(),n=e.data,t=e.errors,I(!1),t&&t.length>0?(u("Error when deleting Neon database: ".concat(null===t||void 0===t?void 0:t.join())),fr({action:"removed",success:!1}),[2]):"DeleteNeonDatabaseResult"!==(null===n||void 0===n?void 0:n.deleteNeonDatabase.__typename)?(u("Error: ".concat(null===n||void 0===n?void 0:n.deleteNeonDatabase.message)),fr({action:"removed",success:!1}),[2]):((null===n||void 0===n?void 0:n.deleteNeonDatabase.success)?(i(),fr({action:"removed",success:!0})):(u("Error: Delete Neon Database failed."),fr({action:"removed",success:!1})),[2])}}))})),[m,c.databaseId,i,s,u]),E=(0,o.Z)(a.useState(!1),2),R=E[0],I=E[1],G=a.useCallback((function(){I(!1)}),[]),D=(0,o.Z)(a.useState(!1),2),_=D[0],P=D[1],B=a.useCallback((function(){P(!0)}),[]),A=(0,o.Z)(function(e){var n=(0,O.Z)({},Tt,e);return wt.D(Gt,n)}(),2),U=A[0],N=A[1].loading,L=a.useCallback((0,M.Z)((function(){var e,n,t;return(0,W.__generator)(this,(function(r){switch(r.label){case 0:return[4,U({variables:{input:{neonProjectId:c.projectId,replId:s}}})];case 1:return e=r.sent(),n=e.data,(t=e.errors)&&t.length>0?(u("Error when unfreezing Neon database: ".concat(null===t||void 0===t?void 0:t.join())),fr({action:"unfreeze",success:!1}),[2]):"UnfreezeNeonDatabaseResult"!==(null===n||void 0===n?void 0:n.unfreezeNeonDatabase.__typename)?(u("Error: Unfreezes Neon Database failed."),fr({action:"unfreeze",success:!1}),[2]):((null===n||void 0===n?void 0:n.unfreezeNeonDatabase.success)?(l(),fr({action:"unfreeze",success:!0})):(u("Error: Unfreezes Neon Database failed."),fr({action:"unfreeze",success:!1})),[2])}}))})),[c.projectId,l,s,u,U]),X=(0,Fe.Dv)(Ni),F=Kr({connectionString:c.connectionString,databaseName:c.databaseName}).PGHOST.split(".")[0],H=X||"".concat(c.connectionString,"/").concat(c.databaseName,"?sslmode=require&options=project%3D").concat(F);if("queryEditor"===f)return(0,r.tZ)(Xr,{connectionString:H});if("tableSchemas"===f)return(0,r.tZ)(li,{connectionString:H});if(f.startsWith("table/")){var z=f.slice(f.indexOf("/")+1);return(0,r.tZ)(Ti,{tableName:z,connectionString:H})}return n=c.isFrozen?(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(y.G,{css:[g.l0.width(8),g.l0.height(8),g.l0.backgroundColor.foregroundDimmer,g.l0.borderRadius("full")]}),(0,r.tZ)(Z.xv,{css:[g.l0.color.foregroundDimmest],children:"Database paused"})]}),(0,r.BX)(Z.xv,{multiline:!0,css:[g.l0.fontSize(12),g.l0.color.foregroundDimmest],children:["Databases cost ",vi]}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Be.Z,{size:32,fill:g.TV.foregroundDimmest,css:g.l0.mt(32)}),(0,r.BX)(Z.xv,{variant:"subheadDefault",css:[g.l0.my(16)],children:["Your Database is paused. You have ",k," cycles."]}),(0,r.BX)(Z.xv,{multiline:!0,children:["Access to your databases will be paused until you"," ",S?"use cycles to resume database":"refill your Cycles balance","."]}),S?(0,r.tZ)(K.zx,{css:g.l0.pt(8),iconLeft:(0,r.tZ)(_i.Z,{}),onClick:L,disabled:N,text:"Unpause Database",colorway:"primary"}):null,(0,r.tZ)(K.zx,{css:g.l0.pt(8),iconLeft:(0,r.tZ)(Ri.Z,{}),onClick:B,text:S?"Buy more cycles":"Buy Cycles"})]}),(0,r.tZ)(Gi.Z,{noPadding:!0,isOpen:_,maxWidth:Ii.W,onRequestClose:function(){return P(!1)},fitContent:!0,replTitle:d,uponPurchaseGoTo:"workspace",context:"workspace_postgresql_pane",initialTab:"cycles"})]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(y.G,{css:[g.l0.width(8),g.l0.height(8),g.l0.backgroundColor.accentPositiveStronger,g.l0.borderRadius("full"),{filter:"drop-shadow(0 0 6px ".concat(g.TV.accentPositiveStronger,")")}]}),(0,r.tZ)(Z.xv,{css:[g.l0.color.accentPositiveStronger],children:"Database connected"})]}),(0,r.tZ)(Ei,{}),(0,r.tZ)(Li,{title:"Database Info",children:(0,r.tZ)(Zi,{connectionString:H,onOpenDatabaseViewerClick:h})}),(0,r.tZ)(Li,{title:"Using the database",isAccordion:!0,children:(0,r.tZ)(Ai.ZP,{css:[Bi.Z,g.l0.maxWidth("100%")],children:"\nPostgreSQL is a powerful open source relational database system that is widely used in web applications and other software development projects. You can easily create a production-ready PostgreSQL database directly within Replit. For more information on PostgreSQL, visit the [official documentation](https://www.postgresql.org/docs/). Repls use PostgreSQL version 15.\n\nHere is some information to help you get started:\n\n1. Replit databases are backed by [Neon](https://neon.tech/). The [Neon documentation](https://neon.tech/docs/connect/connect-from-any-app#connection-examples) provides guides on how to connect various frameworks, such as Django, to your PostgreSQL database.\n\n1. Environment Variables: We provided environment variables `DATABASE_URL`, `PGDATABASE`, `PGHOST`, `PGHOST`, `PGPORT`, `PGUSER`, `PGPASSWORD`. Provide these values to your framework of choice to connect to your database.\n\n1. Connection pooling: If you need to enable connection pooling for any reason, contact us at support@repl.it.\n\n1. Compute lifecycle: Neon databases go to sleep after 5 minutes of inactivity. You may experience disconnects or reconnects depending on your client.\n"})}),(0,r.tZ)(Li,{title:"Environment variables",isAccordion:!0,children:(0,r.tZ)(Jr,{connectionString:H,databaseName:c.databaseName})})]}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(0),g.l0.height("100%"),g.l0.p(8)],children:[(0,r.tZ)(y.G,{css:[g.l0.colWithGap(16),g.l0.flex.grow(1),g.l0.flex.shrink(0)],children:n}),(0,r.tZ)(y.G,{css:[g.l0.pt(16)],children:R||b?(0,r.BX)(J.T,{css:[g.l0.p(8),g.l0.colWithGap(8)],elevated:!0,children:[(0,r.tZ)(Z.xv,{multiline:!0,children:"Removing this database will remove access to the data for this Repl, and remove the daily Cycles subscription of ".concat(vi,".")}),(0,r.tZ)(ee.E,{icon:(0,r.tZ)(Ci.Z,{}),colorway:"warning",text:"This action cannot be undone."}),(0,r.tZ)(K.zx,{text:"Yes, Remove Database",colorway:"negative",disabled:b,iconLeft:(0,r.tZ)(we.Z,{}),onClick:T}),(0,r.tZ)(K.zx,{text:"Cancel",disabled:b,onClick:G})]}):(0,r.tZ)(K.zx,{css:[g.l0.py(8)],text:"Remove Database",disabled:b,iconLeft:(0,r.tZ)(we.Z,{}),onClick:w})}),(0,r.tZ)(xi,{})]})},Mi=t(33405),Oi=t(51609),Fi=t(63202),Wi=t(25969),Hi="Buy Cycles & Create a DB",zi="Use Cycles to create a DB",Vi='Press "'.concat(Hi,'" to initiate a daily Cycles subscription and activate a Neon Database. You will be redirected to our payment processor.\n'),ji='Press "'.concat(zi,'" to initiate a daily Cycles subscription and activate a Neon Database.'),qi=function(e){var n=e.onDatabaseCreated,t=(0,Zn.Z)(),i=(0,Ce.Z)().showError,l=(0,o.Z)(function(e){var n=(0,O.Z)({},Tt,e);return wt.D(Et,n)}(),2),c=l[0],u=l[1].loading,s=(0,Di.Z)({forceFetch:!0}),d=s.cycles,f=s.loading,p=null!=d&&d>=pi,h=f?"Loading Cycles Balance":p?zi:Hi,v=p?ji:Vi,m=a.useCallback((0,M.Z)((function(){var e,r,o,a,l,u,s,d,f;return(0,W.__generator)(this,(function(p){switch(p.label){case 0:return[4,c({variables:{input:{replId:t}}})];case 1:return e=p.sent(),r=e.data,(o=e.errors)&&o.length>0?(i("Error when creating Neon database: ".concat(null===o||void 0===o?void 0:o.join())),fr({action:"created",success:!1}),[2]):"CreateNeonDatabaseResult"!==(null===r||void 0===r?void 0:r.createNeonDatabase.__typename)?(i("Error: ".concat(null===r||void 0===r?void 0:r.createNeonDatabase.message)),fr({action:"created",success:!1}),[2]):(a=r.createNeonDatabase,l=a.databaseId,u=a.databaseName,s=a.connectionString,d=a.projectId,f=a.isFrozen,n({__typename:"NeonDatabase",databaseId:l,databaseName:u,connectionString:s,projectId:d,isFrozen:f}),fr({action:"created",success:!0}),[2])}}))})),[c,t,i,n]),b=(0,o.Z)(a.useState(!1),2),w=b[0],x=b[1],C=a.useCallback((0,M.Z)((function(){return(0,W.__generator)(this,(function(e){return x(!0),[2]}))})),[]),k=a.useCallback((0,M.Z)((function(){return(0,W.__generator)(this,(function(e){return x(!1),[2]}))})),[]),S=a.useCallback((0,M.Z)((function(){return(0,W.__generator)(this,(function(e){switch(e.label){case 0:return[4,m()];case 1:return e.sent(),x(!1),[2]}}))})),[m]);return(0,r.BX)(y.G,{css:[g.l0.colWithGap(0),g.l0.height("100%"),g.l0.align.center,g.l0.p(8)],children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(16),g.l0.flex.grow(1),g.l0.flex.shrink(0),g.l0.maxWidth(600)],children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.align.center],children:[(0,r.tZ)(y.G,{css:[g.l0.p(16)],children:(0,r.tZ)(Fi.Z,{src:"/public/images/db_illustration.png",width:"144px",height:"144px",alt:"FPO visual"})}),(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(16),g.l0.fontWeight.bold],children:"Fully-managed PostgreSQL database"}),(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(14)],children:"10GB of fast read/write storage"}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(14)],children:vi}),(0,r.tZ)(me.h,{alt:v,size:24,children:(0,r.tZ)(Oi.Z,{})})]})]}),(0,r.BX)(J.T,{css:[g.l0.colWithGap(8),g.l0.mb(8)],background:"default",children:[(0,r.tZ)(K.zx,{text:h,colorway:"primary",iconLeft:(0,r.tZ)(In.Z,{}),disabled:f||u,onClick:C}),(0,r.tZ)(Ze.Z,{outlined:!0,href:mi,target:"_blank",text:"Learn More",iconRight:(0,r.tZ)(Wi.Z,{})})]}),(0,r.tZ)("hr",{css:[g.l0.my(16),{borderColor:g.TV.outlineDefault}]}),(0,r.tZ)(Z.xv,{multiline:!0,css:[g.l0.fontSize(12),g.l0.color.foregroundDimmest],children:v}),(0,r.tZ)(Mi.Z,{isOpen:w,onRequestClose:k,onRequestPowerUp:S,uponPurchaseGoTo:"workspace",context:"workspace_postgresql_pane",powerUp:"neon-database-preview"})]}),(0,r.tZ)(xi,{})]})},$i=(0,Fe.cn)([]),Yi=function(){var e=(0,Zn.Z)(),n=(0,Ce.Z)().showError,t=(0,d.Z)().psql,i=function(e){var n=(0,O.Z)({},Tt,e);return st.a(It,n)}({variables:{input:{replId:e}},fetchPolicy:"no-cache"}),l=i.data,c=i.loading,u=i.refetch,s=(0,o.Z)((0,Fe.KO)($i),2),f=s[0],p=s[1],h=Qr();a.useEffect((function(){"GetNeonDatabasesResult"===(null===l||void 0===l?void 0:l.getNeonDatabases.__typename)&&p(l.getNeonDatabases.databases),"UnauthorizedError"!==(null===l||void 0===l?void 0:l.getNeonDatabases.__typename)&&"UserError"!==(null===l||void 0===l?void 0:l.getNeonDatabases.__typename)||n("Error: ".concat(null===l||void 0===l?void 0:l.getNeonDatabases.message))}),[null===l||void 0===l?void 0:l.getNeonDatabases,p,n]);var v=a.useCallback(function(){var e=(0,M.Z)((function(e){var r,i,o;return(0,W.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,t.ensureNixPsqlPackageInstalled(!0)];case 1:return a.sent(),p([e]),r=e.connectionString,i=e.databaseName,h({connectionString:r,databaseName:i}),[3,3];case 2:return o=a.sent(),n("Error: ".concat(o.message)),[3,3];case 3:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[t,h,p,n]),m=a.useCallback((function(){p([])}),[p]),Z=a.useCallback((function(){u()}),[u]),b=(0,Fe.Dv)(Ui);return b?(0,r.tZ)(Xi,{neonDatabases:[b],onDatabaseDeleted:m,onDatabaseUnfreezed:Z}):c?(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(pe.Z,{})}):f.length>0?(0,r.tZ)(Xi,{neonDatabases:f,onDatabaseDeleted:m,onDatabaseUnfreezed:Z}):(0,r.tZ)(qi,{onDatabaseCreated:v})},Ki=t(33432),Qi={Content:function(){return(0,r.tZ)(Yi,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(Ki.Z,{size:n})},getTitle:function(){return"PostgreSQL"}},Ji=t(96733),eo=t(28650),no=t(3587),to={Content:function(){return(0,r.tZ)(ro,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(eo.Z,{size:n})},getTitle:function(){return"Output"}};function ro(){var e=(0,d.Z)(),n=e.fs,t=e.container;return(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1)],children:(0,r.tZ)(no.Z,{fs:n,container:t})})}var io=t(44807),oo=t(42209),ao={Content:function(e){var n=e.options.isActive;return(0,r.tZ)(lo,{isActive:n})},Icon:function(e){var n=e.size;return(0,r.tZ)(oo.Z,{size:n})},getTitle:function(){return"Shell"}};function lo(e){var n=(0,d.Z)().container,t=(0,o.Z)((0,io.St)({container:n}),2),i=t[0],l=t[1],c=(0,U.T3)(),u=(0,k.Z)(e.isActive);return(0,a.useEffect)((function(){c||i&&u.current&&(null===i||void 0===i||i.focus())}),[i,u,c]),(0,B.L5)((function(){if(i)return{focus:function(){return i.focus()}}}),[i]),(0,r.tZ)(io.N2,{shell:i,shellRef:l})}var co=t(86763),uo=t.n(co),so=t(28793);function fo(){var e=(0,ct.Z)(["\n  query WorkspaceDrawCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return fo=function(){return e},e}function po(){var e=(0,ct.Z)(["\n  mutation sawDrawCtaToursSeen($name: String!) {\n    toursSeen(name: $name) {\n      name\n      success\n    }\n  }\n"]);return po=function(){return e},e}var ho={},vo=(0,ut.Ps)(fo());po();var mo=t(31533),go=t(37380),yo=function(e,n,t){var r;if(!e)return[];var i=n(e.getSceneElementsIncludingDeleted()),o=e.getAppState();return(r=t.reduce((function(e,n){var t,r,a;return n.id===(null===(t=o.editingElement)||void 0===t?void 0:t.id)||n.id===(null===(r=o.resizingElement)||void 0===r?void 0:r.id)||n.id===(null===(a=o.draggingElement)||void 0===a?void 0:a.id)||(i[n.id]&&i[n.id].version>n.version?(e.push(i[n.id]),delete i[n.id]):i[n.id]&&i[n.id].version===n.version&&i[n.id].versionNonce!==n.versionNonce?(i[n.id].versionNonce<n.versionNonce?e.push(i[n.id]):e.push(n),delete i[n.id]):(e.push(n),delete i[n.id])),e}),[])).concat.apply(r,(0,Nt.Z)(Object.values(i)))},Zo=function(){var e,n,t=new Promise((function(t,r){e=t,n=r}));return t.resolve=e,t.reject=n,t},bo=function(e){return e.reduce((function(e,n){return e[n.id]=n,e}),{})},wo=t(92674),xo=t.n(wo);function Co(e){var n,i=e.fs,l=e.presence,c=e.broadcast,u=e.filePath,s=(0,a.useState)(void 0),d=s[0],f=s[1],p=(0,a.useRef)((function(e){return(0,Nt.Z)(e)})),h=(0,a.useRef)((function(e){return-1})),v=(0,a.useRef)({readyPromise:Zo()}),m=(0,a.useRef)({promise:null});(0,a.useEffect)((function(){Promise.all([t.e(2213),t.e(6949)]).then(t.t.bind(t,56949,23)).then((function(e){p.current=function(n){return n.filter((function(n){return n.isDeleted||!e.isInvisiblySmallElement(n)}))},h.current=e.getSceneVersion,f(e.Excalidraw)}))}),[]);var Z=function(){return v.current},b=function(e){var n=(0,O.Z)({},ho,e);return st.a(vo,n)}({ssr:!1}),w=b.data,x=b.loading,C=(null===w||void 0===w||null===(n=w.currentUser)||void 0===n?void 0:n.username)||"",k=(0,so.F)().isDarkColorScheme,S=(0,mo.Z)({presence:l}),T=(0,go.Z)(),E=null===T||void 0===T?void 0:T.color,R=(0,a.useState)(new Map),I=R[0],G=R[1],D=(0,a.useState)(-1),_=D[0],P=D[1],B=(0,a.useRef)(xo()()).current;(0,a.useEffect)((function(){function e(){return e=(0,M.Z)((function(){var e,n;return(0,W.__generator)(this,(function(t){switch(t.label){case 0:return w&&w.currentUser?[4,v.current.readyPromise]:[2];case 1:return t.sent(),e=Z().getAppState().collaborators,n=new Map,S.forEach((function(t){var r;if(t.username!==(null===w||void 0===w||null===(r=w.currentUser)||void 0===r?void 0:r.username)){var i=e.get(t.username)||{};n.set(t.username,(0,F.Z)((0,O.Z)({},i),{username:t.username,color:{background:t.color,foreground:t.color}}))}})),Z().updateScene({collaborators:n}),[2]}}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[w,S]);var A=function(){var e=(0,M.Z)((function(e,n){var t,r,i,o,a,l;return(0,W.__generator)(this,(function(s){n||(e=e.filter((function(e){return!I.has(e.id)||e.version>I.get(e.id)}))),t=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)l=a.value,I.set(l.id,l.version),G(new Map(I))}catch(d){r=!0,i=d}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}return c.broadcastMessage(B,{text:JSON.stringify({elements:e,path:u})}),[2]}))}));return function(n,t){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){if(c)return c.onBroadcastReceived(B,(function(e){var n=e.username,t=e.text,r=JSON.parse(t);if(r.path===u)if(r.collaborator&&v.current){var i=Z().getAppState().collaborators;i.set(n,(0,F.Z)((0,O.Z)({},i.get(n),r.collaborator),{username:n})),Z().updateScene({collaborators:i})}else if(r.elements){var o=yo(Z(),bo,r.elements);P(h.current(o)),Z().updateScene({elements:o})}else if(r.removePresence){var a=Z().getAppState().collaborators;a.delete(r.removePresence),Z().updateScene({collaborators:a})}}))}),[c,u,B]),(0,a.useEffect)((function(){function e(){return e=(0,M.Z)((function(){return(0,W.__generator)(this,(function(e){return u&&i?(m.current.promise=new Promise(function(){var e=(0,M.Z)((function(e){var n,t,r,a,l;return(0,W.__generator)(this,(function(c){switch(c.label){case 0:return[4,Promise.all([i.readFile(u),v.current.readyPromise])];case 1:return n=o.Z.apply(void 0,[c.sent(),1]),"content"in(t=n[0])&&(r=t.content.toString(),a=JSON.parse(r||"{}"),l=Z().getAppState(),a.appState=(0,O.Z)({},l),a.scrollToContent=!0,e(a)),[2]}}))}));return function(n){return e.apply(this,arguments)}}()),[2]):[2]}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[u,i]);var U=(0,a.useCallback)(uo()(function(){var e=(0,M.Z)((function(e,n){var t;return(0,W.__generator)(this,(function(r){switch(r.label){case 0:return t=e.filter((function(e){return!e.isDeleted})),u?[4,i.writeFile(u,Or.Z.from(JSON.stringify({elements:t,files:n})))]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),350),[u]);return(0,r.tZ)(y.G,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:E?"0 3px 0 3px ".concat(E):"none",backgroundColor:g.TV.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"}},onMouseLeave:function(){c.broadcastMessage(B,{text:JSON.stringify({removePresence:C,path:u})})},children:d&&!x?(0,r.tZ)(d,{ref:v,UIOptions:{canvasActions:{loadScene:!1}},isCollaborating:!0,theme:k?"dark":"light",initialData:m.current.promise,onPointerUpdate:function(e){var n=e.pointer,t=Z().getAppState().selectedElementIds||{};c.broadcastMessage(B,{text:JSON.stringify({collaborator:{pointer:n,selectedElementIds:t},path:u})})},onChange:function(e,n,t){!function(e){h.current(e)>_&&(_>-1&&A(p.current(e),!1),P(h.current(e)))}(e),P(h.current(e)),h.current(e)>_&&U(e,t)},user:{name:C}}):null})}function ko(e){var n=e.fs,t=e.presence,i=e.broadcast,o=e.filePath;return(0,r.tZ)(Co,{fs:n,presence:t,broadcast:i,filePath:o},o)}var So=t(9823),To=t(96009),Eo={Content:function(e){var n=e.pane,t=e.options.performPaneOperation;return(0,r.tZ)(Ro,{path:n.data.path,performPaneOperation:t})},Icon:function(e){var n=e.size;return(0,r.tZ)(So.Z,{size:n})},getTitle:function(e){return(0,v.UO)(e.data.path)}};function Ro(e){var n=e.path,t=e.performPaneOperation,i=(0,d.Z)(),o=i.fs,a=i.broadcast,l=i.presence,c=(0,To.Mp)({path:n,performPaneOperation:t});return(0,B.L5)((function(){if(c)return{commands:c}}),[c]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(To.HK,{path:n,performPaneOperation:t}),(0,r.tZ)(To.VY,{children:(0,r.tZ)(ko,{fs:o,broadcast:a,presence:l,filePath:n})})]})}var Io=t(35134),Go=t(42858),Do={Content:function(e){var n=e.pane,t=e.options;return(0,r.tZ)(_o,{path:n.data.path,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.pane,t=e.size;return(0,r.tZ)(Go.Z,{path:n.data.path,size:t})},getTitle:function(e){return(0,v.UO)(e.data.path)}};function _o(e){var n=e.path,t=e.performPaneOperation,i=(0,d.Z)().fs,o=(0,To.Mp)({path:n,performPaneOperation:t});return(0,B.L5)((function(){if(o)return{commands:o}}),[o]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(To.HK,{path:n,performPaneOperation:t}),(0,r.tZ)(To.VY,{centered:!0,children:(0,r.tZ)(Io.Z,{filePath:n,fs:i})})]})}var Po=t(11115),Bo=t(4808),Ao=t(34202),Uo=t(7380),No=t(91309),Lo=t(49134),Xo=t(81962),Mo=t(78065),Oo=t(86056);function Fo(e){return!!e&&("string"===typeof e?e.includes(Oo.Kd):e.fetch.includes(Oo.Kd))}function Wo(e){return e.endsWith(".git")?e.slice(0,-4):e}function Ho(e){if(!e)return null;var n="string"===typeof e?e:e.fetch;return Fo(n)?Wo(n):null}function zo(){var e=(0,Uo.Z)(function(){var e=(0,M.Z)((function(e){return(0,W.__generator)(this,(function(n){return[2,{connectedToGithub:Vo(e),error:null}]}))}));return function(n){return e.apply(this,arguments)}}());return null==e||e.error?null:e.connectedToGithub}function Vo(e){return e.hasProfile(Lo.rG.GITHUB)}var jo=t(11871),qo=t(31332),$o=t(61382);function Yo(e,n){(0,$.j)($o.U3.GIT_FEATURE_USED,(0,O.Z)({action:e,source:"git-pane"},n))}function Ko(e){var n=e.label,t=void 0===n?"Connect to GitHub":n,i=e.allowReconnect,o=void 0!==i&&i,l=e.callback,c=(0,a.useState)(!1),u=c[0],s=c[1],f=(0,d.Z)().git,p=zo(),h=(0,jo.v)({onAuth:function(){Yo("github-user-connected"),s(!1),f.refreshProfiles({preferredProvider:Lo.rG.GITHUB}),null===l||void 0===l||l()}});return p&&!o?(0,r.tZ)(K.zx,{text:"Connected to GitHub",colorway:"primary",iconLeft:(0,r.tZ)(re.Z,{}),disabled:!0}):(0,r.tZ)(K.zx,{text:u||null===p?"Connecting...":t,colorway:"primary",iconLeft:u?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(qo.Z,{}),loading:u,onClick:function(){s(!0),h()}})}var Qo=(0,cn.iv)(g.l0.p(4),g.l0.colWithGap(8),g.l0.borderRadius(0,0,8,8)),Jo=(0,cn.iv)(g.l0.rowWithGap(8),g.l0.align.center,g.l0.justify.end);function ea(e){var n=e.description,t=e.remedies,i=e.error;return(0,r.BX)(J.T,{css:Qo,elevated:!0,children:[(0,r.tZ)(Z.xv,{multiline:!0,children:n}),(0,r.BX)(y.G,{css:Jo,children:[t,(0,r.tZ)(K.zx,{text:"Dismiss",iconLeft:(0,r.tZ)(fn.Z,{}),onClick:i.dismiss})]})]})}function na(e){switch(e.type){case Lo.aq.UNKNOWN_NOT_GIT:return"Unknown Error";case Lo.aq.UNKNOWN:return"Unknown Git Error";case Lo.aq.NOT_INITIALIZED:case Lo.aq.UNAUTHENTICATED:case Lo.aq.INDEX_FILE_CORRUPT:case Lo.aq.UNKNOWN_REMOTE:case Lo.aq.INDEX_LOCKED:case Lo.aq.NO_COMMITS:case Lo.aq.PATH_MATCHED_NO_FILES:case Lo.aq.USER_NOT_CONFIGURED:case Lo.aq.INVALID_REFERENCE:case Lo.aq.BRANCH_ALREADY_EXISTS:case Lo.aq.MERGE_CONFLICT:case Lo.aq.HEAD_DETACHED:case Lo.aq.DIRTY_WORKTREE:case Lo.aq.PUSH_REJECTED:case Lo.aq.REMOTE_ALREADY_EXISTS:case Lo.aq.ALREADY_INITIALIZED:return"Git Error";default:return"Unknown Error"}}function ta(e){var n=e.error,t=(0,Uo.Z)(function(){var e=(0,M.Z)((function(e){var t,i,o,a,l,c,u,s,d;return(0,W.__generator)(this,(function(f){switch(f.label){case 0:switch(n.type){case Lo.aq.UNKNOWN_NOT_GIT:return[3,1];case Lo.aq.UNKNOWN:return[3,2];case Lo.aq.NOT_INITIALIZED:return[3,3];case Lo.aq.UNAUTHENTICATED:return[3,4];case Lo.aq.INDEX_FILE_CORRUPT:return[3,6];case Lo.aq.UNKNOWN_REMOTE:return[3,7];case Lo.aq.INDEX_LOCKED:return[3,8];case Lo.aq.NO_COMMITS:return[3,9];case Lo.aq.PATH_MATCHED_NO_FILES:return[3,10];case Lo.aq.USER_NOT_CONFIGURED:return[3,11];case Lo.aq.INVALID_REFERENCE:return[3,12];case Lo.aq.BRANCH_ALREADY_EXISTS:return[3,13];case Lo.aq.MERGE_CONFLICT:return[3,14];case Lo.aq.UPSTREAM_NOT_SET:return[3,15];case Lo.aq.HEAD_DETACHED:return[3,16];case Lo.aq.DIRTY_WORKTREE:return[3,17];case Lo.aq.PUSH_REJECTED:return[3,18];case Lo.aq.REMOTE_ALREADY_EXISTS:return[3,19];case Lo.aq.ALREADY_INITIALIZED:return[3,20]}return[3,21];case 1:return t="Unknown error from the Git service. This is probably a bug in the app.",i=null,[3,22];case 2:return t="There was an unrecognized fatal error with Git. This is probably a bug in the app.",i=null,[3,22];case 3:return t="There isn't a Git repository in the Repl's root directory.",i=null,[3,22];case 4:return[4,e.getRemotes()];case 5:if((o=f.sent()).error)return[2,o];if(0!==o.remotes.size){a=!1,l=!0,c=!1,u=void 0;try{for(s=o.remotes.values()[Symbol.iterator]();!(l=(d=s.next()).done);l=!0)if(Fo(d.value)){a=!0;break}}catch(p){c=!0,u=p}finally{try{l||null==s.return||s.return()}finally{if(c)throw u}}if(a)return Vo(e)?(t="Failed to authenticate with the remote. Please ensure that Replit has access to this repository on GitHub.",i=(0,r.tZ)(Ko,{label:"Update GitHub Repository Access",callback:n.dismiss,allowReconnect:!0}),[3,22]):(t="Failed to authenticate with the remote. You have not connected your Replit account to GitHub, so Replit may not have access to the remote repository. Please connect your account to GitHub and try again.",i=(0,r.tZ)(Ko,{label:"Connect to GitHub",callback:n.dismiss,allowReconnect:!0}),[3,22])}return t="Failed to authenticate with the remote.",i=null,[3,22];case 6:return t="The Git index file is corrupt. This can happen if the index file is manually edited, or if the Git repository is corrupted.",i=null,[3,22];case 7:return t="The remote specified isn't configured.",i=null,[3,22];case 8:return t="Git tried to perform an action but the index lockfile still exists. This means Git either crashed previously or is still running an action.",i=null,[3,22];case 9:return t="There are no commits in the repository.",i=null,[3,22];case 10:return t="The path specified didn't match any files.",i=null,[3,22];case 11:return t="There isn't any user information configured for Git.",i=null,[3,22];case 12:return t="An unknown/invalid reference was specified. This is usually a branch, but it could be something else, such as a tag.",i=null,[3,22];case 13:return t="The branch specified already exists.",i=null,[3,22];case 14:return t="There was an unexpected merge conflict.",i=null,[3,22];case 15:return t="The upstream branch isn't set.",i=null,[3,22];case 16:return t="The HEAD is detached. You have a commit checked out, not a branch.",i=null,[3,22];case 17:return t="There are uncommitted changes.",i=null,[3,22];case 18:return t="The push was rejected by the remote. This is usually because the remote has commits that aren't in the local repository.",i=null,[3,22];case 19:return t="The remote specified already exists.",i=null,[3,22];case 20:return t="There is already a Git repository in the Repl's root directory.",i=null,[3,22];case 21:return t="We ran into an unknown error that we don't have a description for. This is probably a bug with the app.",i=null,[3,22];case 22:return[2,{description:t,remedies:i,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}(),[n],{refresh:!1});if(!t)return(0,r.tZ)(ea,{description:null,remedies:null,error:n});if(t.error){return(0,r.tZ)(ea,{description:"Unknown error from the Git service. This is probably a bug in the app.",remedies:null,error:n})}var i=t.description,o=t.remedies;return(0,r.tZ)(ea,{description:i,remedies:o,error:n})}var ra=(0,cn.iv)({pointerEvents:"all"},g.l0.p(1),g.l0.backgroundColor.accentNegativeDimmer,g.l0.borderRadius(8),g.l0.shadow(3)),ia=(0,cn.iv)(g.l0.py(4),g.l0.px(8),g.l0.display.flex,g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween,g.l0.color.accentNegativeStrongest),oa=(0,cn.iv)(g.l0.rowWithGap(4),g.l0.align.center),aa=(0,cn.iv)({opacity:.75},g.l0.font.code),la=(0,cn.iv)(g.l0.pt(4),g.l0.pb(8),g.l0.px(8),g.l0.colWithGap(8),g.l0.backgroundColor.backgroundHigher,g.l0.borderRadius(0,0,8,8));function ca(e){var n=e.error;return(0,r.BX)(y.G,{css:ra,children:[(0,r.BX)(y.G,{css:ia,children:[(0,r.BX)(y.G,{css:oa,children:[(0,r.tZ)(Ci.Z,{}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:na(n)})]}),(0,r.tZ)(Z.xv,{css:aa,children:n.type})]}),(0,r.tZ)(y.G,{css:la,children:(0,r.tZ)(ta,{error:n})})]})}var ua=Symbol("GitPaneErrorAtomScope"),sa=(0,Fe.cn)([]),da=(0,Fe.cn)((function(e){return e(sa)}),(function(e,n,t){var r=e(sa),i=Math.random().toString(36).substring(7),o={id:i,type:t,dismiss:function(){var t=e(sa).filter((function(e){return e.id!==i}));n(sa,t)}};n(sa,[o].concat((0,Nt.Z)(r)))}));function fa(){return(0,Fe.b9)(da,ua)}var pa=(0,cn.iv)({pointerEvents:"none"},{transition:"background-color 100ms"},g.l0.position.absolute,g.l0.top(0),g.l0.bottom(0),g.l0.left(0),g.l0.right(0),g.l0.p(8),g.l0.colWithGap(16),g.l0.zIndex(10));function ha(){var e=(0,Fe.Dv)(da,ua);return(0,r.tZ)(y.G,{style:{backgroundColor:e.length>0?"rgba(0, 0, 0, 0.25)":"transparent"},css:pa,children:e.map((function(e){return(0,r.tZ)(ca,{error:e},e.id)}))})}var va=t(3778),ma=t(4080),ga=t(47274),ya=t(98836);function Za(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=(0,d.Z)().git,o=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1],r=(0,d.Z)().git;return(0,a.useEffect)((function(){return r.onBusyChange(t)}),[r]),n}(),l=fa(),c=(0,Uo.Z)(function(){var e=(0,M.Z)((function(e){var n;return(0,W.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.getRemotes()];case 1:return(n=t.sent()).error?(l(n.error),[2,n]):[2,{hasRemotes:n.remotes.size>0,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}(),[l]);if(null===c||void 0===c?void 0:c.error)return null;var u=!!c&&c.hasRemotes,s=o||n||null===c;function f(){return(f=(0,M.Z)((function(){var e;return(0,W.__generator)(this,(function(n){switch(n.label){case 0:return i.isBusy()||s?[2]:(t(!0),u?[4,i.fetch()]:[3,2]);case 1:(e=n.sent()).error?l(e.error):Yo("remote-fetched"),n.label=2;case 2:return[4,i.refreshProfiles()];case 3:return n.sent(),i.forceRefresh(),setTimeout((function(){return t(!1)}),500),[2]}}))}))).apply(this,arguments)}var p=u?"Refresh and Fetch":"Refresh";return(0,r.tZ)(me.h,{alt:p,size:24,onClick:function(){return f.apply(this,arguments)},disabled:s,children:s?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(ii.Z,{})})}var ba,wa=t(47287),xa=t(7289);!function(e){e.SUCCESS="SUCCESS",e.WARNING="WARNING",e.FAILED="FAILED",e.OFF="OFF"}(ba||(ba={}));var Ca=(0,b.X)({root:[g.l0.rowWithGap(8),g.l0.align.center,g.l0.py(4)],circle:[g.l0.width(8),g.l0.height(8),g.l0.borderRadius("full")]});var ka=function(e){var n,t,i,o=e.display,a=void 0===o?"inline":o,l=(0,Ne.Z)(e,["display"]);switch(l.status){case ba.SUCCESS:n=g.TV.accentPositiveStronger,t=g.TV.accentPositiveStronger;break;case ba.WARNING:n=g.TV.yellowStronger,t=g.TV.yellowStronger;break;case ba.FAILED:n=g.TV.accentNegativeStronger,t=g.TV.accentNegativeStronger;break;case ba.OFF:n=g.TV.greyStronger,t=g.TV.greyStronger}var c=(0,r.BX)(y.G,{onClick:null!==(i=l.onClick)&&void 0!==i?i:function(){},css:[Ca.root,l.onClick?{cursor:"pointer"}:{}],children:[(0,r.tZ)("div",{css:Ca.circle,style:{backgroundColor:n,boxShadow:"0px 0px 6px ".concat(t)}}),"inline"===a?(0,r.tZ)(Z.xv,{color:"dimmer",children:l.content}):null]});return"tooltip"===a&&(c=(0,r.tZ)(wa.u,{tooltip:l.content,children:c})),c},Sa=(0,cn.iv)(g.l0.color.orangeStronger,g.l0.fontWeight.medium);function Ta(e){var n=e.text,t=e.className;return(0,r.tZ)("span",{className:t,css:Sa,children:n})}var Ea=(0,cn.iv)(g.l0.color.purpleStronger,g.l0.fontWeight.medium);function Ra(e){var n=e.text,t=e.className;return(0,r.tZ)("span",{className:t,css:Ea,children:n})}var Ia=(0,cn.iv)(g.l0.fontWeight.medium);function Ga(e){var n,t=e.id,i=e.hash,o=void 0===i||i,a=e.className;return n=o?"string"===typeof t&&t.startsWith("#")?t:"#".concat(t):"string"===typeof t&&t.startsWith("#")?t.slice(1):"".concat(t),(0,r.tZ)("span",{className:a,css:Ia,children:n})}var Da=(0,cn.iv)(g.l0.fontWeight.medium);function _a(e){var n=e.hash,t=e.length,i=void 0===t?8:t,o=e.className;return(0,r.tZ)("span",{className:o,css:Da,children:n.slice(0,i+1)})}function Pa(e){var n=e.subject,t=e.quoted,i=void 0!==t&&t,o=e.className;return(0,r.tZ)("span",{className:o,children:i?'"'.concat(n,'"'):n})}var Ba=(0,cn.iv)({whiteSpace:"pre-wrap"},{fontSize:g.TV.fontSizeSmall},g.l0.font.code);function Aa(e){var n=e.body,t=e.className;return(0,r.tZ)("pre",{className:t,css:Ba,children:n})}var Ua=(0,b.X)({headingWrapper:[g.l0.display.inlineFlex,g.l0.rowWithGap(4),g.l0.align.center,g.l0.flex.shrink(1),g.l0.overflow("hidden")],headingRemote:[{verticalAlign:"text-bottom"},g.l0.mr(4),g.l0.color.foregroundDimmest],headingCurrent:[g.l0.px(4)],text:[g.l0.fontWeight.medium],remote:[{verticalAlign:"text-bottom"},{fontSize:g.TV.fontSizeSmall},g.l0.mr(4),g.l0.color.foregroundDimmest],current:[g.l0.position.relative,g.l0.top("-1px"),g.l0.display.inlineFlex,g.l0.pl(2),g.l0.pr(8)],icon:[{verticalAlign:"baseline !important"},g.l0.mr(4)]});function Na(e){var n=e.name,t=e.remote,i=e.current,o=void 0!==i&&i,a=e.heading,l=void 0!==a&&a,c=e.icon,u=void 0!==c&&c,s=e.onClick,d=e.className,f=null;return!0===u||!u&&o?f=o?(0,r.tZ)("span",{css:l?Ua.headingCurrent:Ua.current,children:(0,r.tZ)(ka,{display:"tooltip",content:"This is your current branch.",status:ba.SUCCESS})}):l?(0,r.tZ)(xa.Z,{size:16}):(0,r.tZ)(xa.Z,{css:Ua.icon,size:12}):u&&(f=u),l?(0,r.BX)("div",{css:Ua.headingWrapper,children:[f,(0,r.BX)(Z.xv,{variant:"subheadDefault",children:[t?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:Ua.headingRemote,children:t}),(0,r.tZ)("span",{css:Ua.headingRemote,children:"/"})]}):null,s?(0,r.tZ)(za,{label:"View branch",onClick:s,children:n}):(0,r.tZ)("span",{children:n})]})]}):(0,r.BX)("span",{className:d,css:Ua.text,children:[f,t?(0,r.tZ)("span",{css:Ua.remote,children:t}):null,s?(0,r.tZ)(za,{label:"View branch",onClick:s,children:n}):(0,r.tZ)("span",{children:n})]})}var La=(0,cn.iv)(g.l0.color.foregroundDimmest),Xa=(0,cn.iv)({"& > span":{display:"inline-block"}});function Ma(e){var n=e.path,t=e.prefix,i=e.onClick,o=e.className,a=(0,v.UO)(n),l=!i&&(a===n||null!==t&&t+a===n);return(0,r.tZ)("span",{css:Xa,children:(0,r.tZ)(wa.u,{maxWidth:"auto",tooltip:(0,r.tZ)(Fa,{path:n,openable:Boolean(i)}),isDisabled:l,children:i?(0,r.BX)(za,{label:"Open ".concat(a),onClick:i,className:o,children:[t?(0,r.tZ)("span",{css:La,children:t}):null,(0,r.tZ)("span",{children:a})]}):(0,r.BX)("span",{className:o,children:[t?(0,r.tZ)("span",{css:La,children:t}):null,(0,r.tZ)("span",{children:a})]})})})}var Oa=(0,b.X)({tooltip:[g.l0.display.inlineFlex,g.l0.rowWithGap(4),g.l0.align.center],path:[{fontSize:g.TV.fontSizeSmall},g.l0.font.code]});function Fa(e){var n=e.path,t=e.openable,i=void 0===t||t;return(0,r.BX)("span",{css:Oa.tooltip,children:[i?(0,r.tZ)("span",{children:"Open"}):null,(0,r.tZ)("span",{css:Oa.path,children:n})]})}var Wa,Ha=(0,cn.iv)({cursor:"pointer","&:hover":{textDecoration:"underline"}});function za(e){var n=e.label,t=e.onClick,i=e.className,o=e.children;return(0,r.tZ)("span",{className:i,css:Ha,role:"button",tabIndex:-1,"aria-label":n,onClick:t,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||null===t||void 0===t||t()},children:o})}!function(e){e.DASHBOARD="DASHBOARD",e.BRANCH="BRANCH",e.CURRENT_BRANCH="CURRENT_BRANCH",e.SETTINGS="SETTINGS"}(Wa||(Wa={}));var Va=(0,b.X)({container:[g.l0.height(36),g.l0.px(8),g.l0.py(4),g.l0.rowWithGap(8),g.l0.backgroundColor.backgroundDefault,g.l0.align.center,g.l0.justify.spaceBetween,g.l0.zIndex(1),{borderBottom:"1px solid ".concat(g.TV.outlineDimmer)}],left:[g.l0.rowWithGap(4),g.l0.align.center,g.l0.flex.growAndShrink(1)],right:[g.l0.rowWithGap(8),g.l0.align.center],back:{marginLeft:-4}});function ja(e){var n=e.mode,t=e.branch,i=e.switchMode,o=e.onBack,l=e.onSearchOpen,c=e.onSearchClose,u=e.onSearchChange,s=(0,a.useState)(!1),d=s[0],f=s[1],p=function(){return i({mode:Wa.SETTINGS})},h=n===Wa.DASHBOARD||n===Wa.BRANCH||n===Wa.CURRENT_BRANCH,v=(0,a.useCallback)((function(){if(!h)throw new Error("Cannot open search in this mode");Yo("search-started",{mode:n===Wa.DASHBOARD?"branches":"commits"}),f(!0),null===l||void 0===l||l()}),[h,n,l]),m=(0,a.useCallback)((function(){f(!1),null===c||void 0===c||c()}),[c]),g=null,b=null;if(d)g=(0,r.tZ)(Ja,{mode:n,onSearchChange:u,closeSearch:m}),b=(0,r.tZ)(Qa,{closeSearch:m});else switch(n){case Wa.DASHBOARD:g=(0,r.BX)(r.HY,{children:[(0,r.tZ)(ma.Z,{size:16}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Repository"})]}),b=(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ka,{openSettings:p}),(0,r.tZ)(Ya,{openSearch:v}),(0,r.tZ)(Za,{})]});break;case Wa.BRANCH:case Wa.CURRENT_BRANCH:if(null===t)throw new Error("Tried to show branch in header, but branch is null");g=(0,r.BX)(r.HY,{children:[(0,r.tZ)($a,{switchMode:i}),(0,r.tZ)(Na,{name:t.name,remote:t.type===Ao.HO.REMOTE?t.remote:null,current:n===Wa.CURRENT_BRANCH,heading:!0})]}),b=(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ka,{openSettings:p}),(0,r.tZ)(Ya,{openSearch:v}),(0,r.tZ)(Za,{})]});break;case Wa.SETTINGS:g=(0,r.BX)(r.HY,{children:[(0,r.tZ)(qa,{onBack:o,alt:"Back"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Settings"})]})}return(0,r.BX)(y.G,{css:Va.container,children:[(0,r.tZ)(y.G,{css:Va.left,children:g}),(0,r.tZ)(y.G,{css:Va.right,children:b})]})}function qa(e){var n=e.onBack,t=e.alt;return(0,r.tZ)(me.h,{css:Va.back,alt:t,size:28,onClick:n,children:(0,r.tZ)(va.Z,{})})}function $a(e){var n=e.switchMode;return(0,r.tZ)(qa,{css:Va.back,onBack:function(){return n({mode:Wa.DASHBOARD})},alt:"Back to dashboard"})}function Ya(e){var n=e.openSearch;return(0,r.tZ)(me.h,{alt:"Search (coming soon!)",size:24,onClick:n,disabled:!0,children:(0,r.tZ)(ga.Z,{})})}function Ka(e){var n=e.openSettings;return(0,r.tZ)(me.h,{alt:"Settings",size:24,onClick:n,children:(0,r.tZ)(ya.Z,{})})}function Qa(e){var n=e.closeSearch;return(0,r.tZ)(K.zx,{css:[g.l0.p(4),{background:"none"}],text:"Cancel",onClick:n})}function Ja(e){var n=e.mode,t=e.onSearchChange,i=e.closeSearch,o=n===Wa.DASHBOARD?"Search for branches...":"Search for commits...";return(0,r.BX)("div",{css:[g.l0.position.relative,g.l0.flex.grow(1)],children:[(0,r.tZ)(ga.Z,{css:[g.l0.position.absolute,g.l0.left(8),g.l0.top(8)],color:g.TV.foregroundDimmest}),(0,r.tZ)(fe.II,{css:[g.l0.width("100%"),g.l0.pl(32),g.l0.py(4),g.l0.borderRadius(4),{border:"none"}],autoFocus:!0,placeholder:o,onBlur:function(e){e.target.value.trim()||i()},onChange:function(e){return n=e.target.value,void(null===t||void 0===t||t(n));var n},onKeyDown:function(e){"Escape"===e.key&&i()}})]})}function el(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{children:"Unsupported state: you are applying a mailbox patch."}),(0,r.tZ)(Z.xv,{children:"Please finish the patch manually."})]})}function nl(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{children:"Unsupported state: you are in the middle of a bisect."}),(0,r.tZ)(Z.xv,{children:"Please finish the bisect manually."})]})}var tl=/\s\(#(\d+)\)$/,rl=/^Revert "(.+)"/,il=/^This reverts commit ([a-f0-9]+)(?:, reversing changes made to ([a-f0-9]+))?\./;function ol(e){var n=rl.exec(e.subject),t=il.exec(e.body);if(n&&t){var r,i=t[1],o=n[1],a=tl.exec(o);return a&&(r=parseInt(a[1],10)),{hash:i,subject:o,pr:r}}return null}var al=/\B#\d+\b/g,ll=/^Merged? pull request (#\d+\b)/,cl=/^Merge branch '(.+)'/,ul=/into (.+)$/;var sl=t(6403),dl=t(80466),fl=20,pl=(0,cn.iv)({minHeight:fl,minWidth:fl,display:"flex",alignItems:"center",justifyContent:"center"});function hl(e){var n=function(e){switch(e){case"none":default:return null;case"commit":return(0,r.tZ)(ml,{});case"revert":return(0,r.tZ)(yl,{});case"merge":return(0,r.tZ)(kl,{});case"boundary":return(0,r.tZ)(Tl,{});case"collapsed":return(0,r.tZ)(Gl,{})}}(e.type);return n?(0,r.tZ)("div",{css:pl,children:n}):null}var vl=(0,cn.iv)({height:4,width:4,backgroundColor:g.TV.foregroundDefault,borderRadius:"50%"});function ml(){return(0,r.tZ)("div",{css:vl})}var gl=(0,cn.iv)({display:"flex",height:fl,width:fl,backgroundColor:g.TV.orangeDimmest,borderRadius:"50%",alignItems:"center",justifyContent:"center"});function yl(){return(0,r.tZ)("div",{css:gl,children:(0,r.tZ)(dl.Z,{size:12,color:g.TV.orangeStrongest})})}var Zl=(0,cn.iv)({display:"flex",height:fl,width:fl,backgroundColor:g.TV.purpleDimmest,borderRadius:"50%",alignItems:"center",justifyContent:"center"}),bl=(0,cn.iv)({position:"relative",height:9,width:13}),wl={position:"absolute",top:0,height:9,width:9,border:"1px solid ".concat(g.TV.purpleStrongest),borderRadius:"50%"},xl=(0,cn.iv)((0,F.Z)((0,O.Z)({},wl),{left:0})),Cl=(0,cn.iv)((0,F.Z)((0,O.Z)({},wl),{right:0}));function kl(){return(0,r.tZ)("div",{css:Zl,children:(0,r.BX)("div",{css:bl,children:[(0,r.tZ)("div",{css:xl}),(0,r.tZ)("div",{css:Cl})]})})}var Sl=(0,cn.iv)({height:6,width:6,backgroundColor:g.TV.backgroundDefault,border:"1px solid ".concat(g.TV.backgroundHighest),borderRadius:"50%"});function Tl(){return(0,r.tZ)("div",{css:Sl})}var El=(0,cn.iv)({display:"flex",height:fl,width:fl,backgroundColor:g.TV.backgroundHighest,borderRadius:"50%",alignItems:"center",justifyContent:"center"}),Rl=(0,cn.iv)({display:"flex",alignItems:"center",justifyContent:"center","div + div":{marginLeft:1}}),Il=(0,cn.iv)({width:3,height:3,backgroundColor:g.TV.foregroundDimmer,borderRadius:"50%"});function Gl(){return(0,r.tZ)("div",{css:El,children:(0,r.BX)("div",{css:Rl,children:[(0,r.tZ)("div",{css:Il}),(0,r.tZ)("div",{css:Il}),(0,r.tZ)("div",{css:Il})]})})}function Dl(e){var n=e.boundaryTop,t=void 0!==n&&n,i=e.boundaryBottom,o=void 0!==i&&i,a=e.joint,l=void 0===a?"top":a,c=e.hideTop,u=void 0!==c&&c,s=e.hideBottom,d=void 0!==s&&s;if(u&&d)return null;if(t===o&&!u&&!d)return(0,r.tZ)(Ul,{top:0,bottom:0,dashed:t&&o});var f=u?null:(0,r.tZ)(_l,{start:"top",joint:l,dashed:t}),p=d?null:(0,r.tZ)(_l,{start:"bottom",joint:l,dashed:o});return(0,r.BX)(r.HY,{children:[f,p]})}function _l(e){var n,t,o=e.start,a=e.joint,l=e.dashed,c=void 0!==l&&l,u="center"===a?(n={},(0,i.Z)(n,o,0),(0,i.Z)(n,"height","50%"),n):(t={},(0,i.Z)(t,o,0),(0,i.Z)(t,o===a?"height":a,8),t);return(0,r.tZ)(Ul,(0,F.Z)((0,O.Z)({},u),{dashed:c}))}var Pl=(0,cn.iv)({position:"absolute",left:0,width:18}),Bl=(0,cn.iv)({borderRight:"1px solid ".concat(g.TV.outlineDimmest)}),Al=(0,cn.iv)({borderRight:"1px dashed ".concat(g.TV.outlineDimmest)});function Ul(e){var n=e.top,t=e.bottom,i=e.height,o=e.dashed,a=void 0!==o&&o;return(0,r.tZ)("div",{css:[Pl,a?Al:Bl,{top:n,bottom:t,height:i}]})}var Nl=t(38231),Ll=(0,b.X)({container:{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"},containerInteractive:[Nl.gU.nofill,{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"}],nodeFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1,opacity:0,"div:hover > &":{transition:"opacity 120ms ease-out",opacity:1}},nodeUnFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1},nodeContentContainer:[g.l0.colWithGap(4),{position:"relative",paddingTop:8,paddingBottom:8,paddingRight:8}],nodeHeader:{display:"block",height:fl},nodeUnfoldedContentSurface:[g.l0.mt(4),g.l0.mb(8),g.l0.p(8),g.l0.borderRadius(8),{marginLeft:36,marginRight:8,overflowX:"hidden"}],unfoldedContentContainer:[g.l0.position.relative]});function Xl(e){var n=e.boundaryTop,t=void 0!==n&&n,i=e.boundaryBottom,o=void 0!==i&&i,l=e.hideConnectorTop,c=void 0!==l&&l,u=e.hideConnectorBottom,s=void 0!==u&&u,d=e.joint,f=void 0===d?"top":d,p=e.marker,h=e.header,v=e.unfoldedContent,m=e.children,Z=e.className,b=(0,a.useState)(!0),w=b[0],x=b[1];return(0,r.BX)(y.G,{className:Z,css:g.l0.position.relative,children:[(0,r.tZ)(Dl,{boundaryTop:t,boundaryBottom:o,joint:f,hideTop:c,hideBottom:s}),p?(0,r.tZ)(Ol,{joint:f,children:p}):null,v?(0,r.BX)(y.G,{css:Ll.containerInteractive,role:"button",tabIndex:0,onClick:function(){x(!w)},onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||x(!w)},children:[w?(0,r.tZ)("div",{css:Ll.nodeFoldedIconContainer,children:(0,r.tZ)(gn.Z,{})}):(0,r.tZ)("div",{css:Ll.nodeUnFoldedIconContainer,children:(0,r.tZ)(mn.Z,{})}),(0,r.BX)(y.G,{css:Ll.nodeContentContainer,children:[h?(0,r.tZ)(y.G,{css:Ll.nodeHeader,children:h}):null,m?(0,r.tZ)(y.G,{children:m}):null]})]}):(0,r.tZ)(y.G,{css:Ll.container,children:(0,r.BX)(y.G,{css:Ll.nodeContentContainer,children:[h?(0,r.tZ)(y.G,{css:Ll.nodeHeader,children:h}):null,m?(0,r.tZ)(y.G,{children:m}):null]})}),!v||w?null:(0,r.BX)(y.G,{css:Ll.unfoldedContentContainer,children:[s?null:(0,r.tZ)(Ul,{top:0,bottom:0,dashed:o}),(0,r.tZ)(J.T,{css:Ll.nodeUnfoldedContentSurface,elevated:!0,children:v})]})]})}var Ml=(0,b.X)({top:{position:"absolute",top:8,left:18,transform:"translateX(-50%)"},bottom:{position:"absolute",bottom:8,left:18,transform:"translateX(-50%)"},center:{position:"absolute",top:"50%",left:18,transform:"translateX(-50%) translateY(-50%)"}});function Ol(e){var n=e.joint,t=void 0===n?"top":n,i=e.children;return(0,r.tZ)("div",{css:Ml[t],children:i})}var Fl=(0,cn.iv)(g.l0.rowWithGap(8),g.l0.align.center,g.l0.justify.spaceBetween,g.l0.height("100%")),Wl=(0,cn.iv)(g.l0.rowWithGap(4),g.l0.center),Hl=(0,cn.iv)(g.l0.flex.shrink(0));function zl(e){var n=e.text,t=(0,Ne.Z)(e,["text"]);return(0,r.tZ)(Xl,(0,O.Z)({marker:(0,r.tZ)(hl,{type:"boundary"}),joint:"center",header:(0,r.BX)(y.G,{css:Fl,children:[(0,r.tZ)(be.R,{}),(0,r.BX)(y.G,{css:Wl,children:[(0,r.tZ)(sl.Z,{size:12,color:g.TV.foregroundDimmest}),(0,r.tZ)(Z.xv,{css:Hl,variant:"small",color:"dimmest",children:n})]}),(0,r.tZ)(be.R,{})]})},t))}var Vl=t(97069),jl=t(89632),ql=t(79032),$l=t(18611),Yl=t(81429),Kl=t(31558);function Ql(){var e=(0,ct.Z)(["\n  query GitUserImageByUsername($username: String!) {\n    userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return Ql=function(){return e},e}var Jl={},ec=(0,ut.Ps)(Ql());var nc=t(88699);function tc(e){var n=e.name,t=e.email,i=e.allowPlaceholderAvatar,o=void 0!==i&&i,a=e.color,l=void 0===a?"default":a,c=e.small,u=void 0!==c&&c,s=e.flip,d=void 0!==s&&s;return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.align.baseline,d?g.l0.flex.rowReverse:g.l0.flex.row,g.l0.flex.shrink(1)],children:[(0,r.tZ)(rc,{email:t,name:n,enablePlaceholder:o,small:u}),(0,r.tZ)(Z.xv,{css:[g.l0.fontWeight.medium],color:l,variant:u?"small":"text",children:n})]})}function rc(e){var n=e.name,t=e.email,i=e.enablePlaceholder,l=void 0!==i&&i,c=e.small,u=void 0!==c&&c,s=(0,o.Z)(function(e){var n=(0,O.Z)({},Jl,e);return Kl.t(ec,n)}({initialFetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",ssr:!1}),1)[0],d=(0,a.useState)(null),f=d[0],p=d[1];return(0,a.useEffect)((function(){var e=function(){var e=(0,M.Z)((function(){var e,n,r,i,a,l,c,u,d,f,h,v,m;return(0,W.__generator)(this,(function(g){switch(g.label){case 0:return t.endsWith("@".concat($l.O))?(e=t.split("@")[0],n=(0,o.Z)(e.split("+"),2),n[0],r=n[1],i=(0,nc.vt)("https://github.com/".concat(r,".png")),p(i),[3,4]):[3,1];case 1:return t.endsWith("@".concat($l.J))?(c=t.split("@")[0],u=(0,o.Z)(c.split("-"),2),u[0],d=u[1],[4,s({variables:{username:d}})]):[3,3];case 2:return f=g.sent(),(h=null===(a=f.data)||void 0===a||null===(l=a.userByUsername)||void 0===l?void 0:l.image)&&p(h),[3,4];case 3:v=(0,ql.FB)(t),(m=new URL("https://gravatar.com/avatar/".concat(v))).searchParams.append("d","404"),p(m.toString()),g.label=4;case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[t,s]),(0,a.useMemo)((function(){var e=u?12:16;return null===f?l?(0,r.tZ)(Yl.Z,{css:{alignSelf:"center"},size:e}):null:(0,r.tZ)(jl.q,{css:{alignSelf:"center"},username:n,src:f,onError:function(){return p(null)},size:e})}),[f,l,u,n])}var ic=(0,b.X)({definitionList:{display:"grid",gridTemplateColumns:"auto 1fr",paddingLeft:g.TV.space4,"> dt":{display:"flex",alignItems:"center",paddingBottom:g.TV.space2},"> dd":{marginLeft:g.TV.space12,paddingBottom:g.TV.space2}},listHeader:[g.l0.fontWeight.medium],content:[g.l0.colWithGap(8)],description:[g.l0.colWithGap(8)],commitList:[g.l0.colWithGap(2),g.l0.pl(4)]});function oc(e){var n=e.commit,t=e.info,i=void 0===t?null:t,o=n.committer.name!==n.author.name&&n.committer.email!==n.author.email,a=Math.abs(n.author.date-n.committer.date)>6e4,l=!n.body,c=null,u=null;return i&&"type"in i?(c=i,"pull-request"===i.type&&(i.reverts&&(u=i.reverts),i.subject&&(l=!0))):i&&(u=i),(0,r.BX)(y.G,{css:ic.content,children:[l?null:(0,r.BX)(y.G,{css:ic.description,children:[(0,r.tZ)(Z.xv,{multiline:!0,children:(0,r.tZ)(Aa,{body:n.body})}),(0,r.tZ)(be.R,{css:g.l0.backgroundColor.outlineDimmer})]}),(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:ic.listHeader,children:"Author"}),(0,r.BX)("dl",{css:ic.definitionList,children:[(0,r.tZ)("dt",{children:"Name:"}),(0,r.tZ)("dd",{children:n.author.name}),(0,r.tZ)("dt",{children:"Email:"}),(0,r.tZ)("dd",{children:n.author.email})]})]}),o?(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:ic.listHeader,children:"Committer"}),(0,r.BX)("dl",{css:ic.definitionList,children:[(0,r.tZ)("dt",{children:"Name:"}),(0,r.tZ)("dd",{children:n.committer.name}),(0,r.tZ)("dt",{children:"Email:"}),(0,r.tZ)("dd",{children:n.committer.email})]})]}):null,(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:ic.listHeader,children:"Commit"}),(0,r.BX)("dl",{css:ic.definitionList,children:[a?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Authored:"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Vl.E,{date:n.author.date,dateFormat:"absolute"})}),(0,r.tZ)("dt",{children:"Committed:"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Vl.E,{date:n.committer.date,dateFormat:"absolute"})})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Date:"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Vl.E,{date:n.author.date,dateFormat:"absolute"})})]}),(0,r.tZ)("dt",{children:"Hash:"}),(0,r.tZ)("dd",{children:n.hash}),c&&"pull-request"===c.type?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"PR:"}),(0,r.BX)("dd",{children:["#",c.id]})]}):null,c&&"branch"===c.type?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Merged:"}),(0,r.tZ)("dd",{children:c.source}),c.target?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Into:"}),(0,r.tZ)("dd",{children:c.target})]}):null]}):null,u?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Reverted:"}),(0,r.tZ)("dd",{children:u.hash})]}):null]})]}),c&&"simple"===c.type?(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:ic.listHeader,children:"Merged"}),(0,r.BX)(y.G,{css:ic.commitList,children:[(0,r.tZ)(Z.xv,{children:c.a}),(0,r.tZ)(Z.xv,{children:c.b})]})]}):null,c&&"octopus"===c.type?(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:ic.listHeader,children:"Merged"}),(0,r.tZ)(y.G,{css:ic.commitList,children:c.parents.map((function(e,n){return(0,r.tZ)(Z.xv,{children:e},n)}))})]}):null]})}function ac(e){var n=e.commit,t=(0,Ne.Z)(e,["commit"]);return(0,r.tZ)(Xl,(0,F.Z)((0,O.Z)({marker:(0,r.tZ)(hl,{type:"commit"}),header:(0,r.tZ)(Z.xv,{css:g.l0.fontWeight.medium,children:(0,r.tZ)(Pa,{subject:n.subject})}),unfoldedContent:(0,r.tZ)(oc,{commit:n})},t),{children:(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.baseline],children:[(0,r.tZ)(tc,{name:n.author.name,email:n.author.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,r.tZ)(Vl.E,{date:n.author.date,textColor:"dimmest",textVariant:"small"})]})}))}var lc=t(54926);function cc(e){var n,t=e.commit,i=e.info,o=(0,Ne.Z)(e,["commit","info"]);return"branch"!==i.type&&(n="pull-request"===i.type&&i.subject?i.subject:t.subject),(0,r.tZ)(Xl,(0,F.Z)((0,O.Z)({marker:(0,r.tZ)(hl,{type:"merge"}),header:(0,r.BX)(Z.xv,{css:[g.l0.rowWithGap(4),g.l0.align.baseline],children:[(0,r.tZ)(Ra,{text:"merged"}),(0,r.tZ)(uc,{info:i,hash:t.hash,subject:t.subject})]}),unfoldedContent:(0,r.tZ)(oc,{commit:t,info:i})},o),{children:(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[n?(0,r.tZ)(Z.xv,{color:"dimmer",variant:"small",children:(0,r.tZ)(Pa,{subject:n})}):null,(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.baseline,g.l0.flex.shrink(1)],children:[(0,r.tZ)(tc,{name:t.author.name,email:t.author.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,r.tZ)(Vl.E,{date:t.author.date,textColor:"dimmest",textVariant:"small"})]})]})}))}function uc(e){var n=e.info,t=e.hash,i=e.subject,o=(0,r.tZ)("span",{css:g.l0.fontWeight.medium,children:i});switch(n.type){case"pull-request":return(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"pull request"}),(0,r.tZ)(Ga,{id:n.id}),n.reverts&&n.reverts.pr?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"-"}),(0,r.tZ)(Ta,{text:"reverts"}),(0,r.tZ)(Ga,{id:n.reverts.pr})]}):null]});case"branch":return n.target?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Na,{name:n.source}),(0,r.tZ)("span",{children:"into"}),(0,r.tZ)(Na,{name:n.target})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"branch"}),(0,r.tZ)(Na,{name:n.source})]});case"simple":return(0,r.BX)(r.HY,{children:[(0,r.tZ)(_a,{hash:n.a}),(0,r.tZ)(lc.Z,{css:{alignSelf:"center"},size:12}),(0,r.tZ)(_a,{hash:n.b})]});case"octopus":return(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"commit"}),(0,r.tZ)(_a,{hash:t}),(0,r.BX)("span",{children:["(",n.parents.length," parents)"]})]});default:return o}}function sc(e){var n=e.commit,t=e.info,i=(0,Ne.Z)(e,["commit","info"]);return(0,r.tZ)(Xl,(0,F.Z)((0,O.Z)({marker:(0,r.tZ)(hl,{type:"revert"}),header:(0,r.BX)(Z.xv,{css:[g.l0.rowWithGap(4),g.l0.align.baseline],children:[(0,r.tZ)(Ta,{text:"reverted"}),(0,r.tZ)(_a,{hash:t.hash}),(0,r.tZ)(Pa,{subject:t.subject,quoted:!0})]}),unfoldedContent:(0,r.tZ)(oc,{commit:n,info:t})},i),{children:(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.baseline],children:[(0,r.tZ)(tc,{name:n.author.name,email:n.author.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,r.tZ)(Vl.E,{date:n.author.date,textColor:"dimmest",textVariant:"small"})]})}))}function dc(e){var n=e.button,t=(0,Ne.Z)(e,["button"]);return(0,r.tZ)(Xl,(0,F.Z)((0,O.Z)({marker:(0,r.tZ)(hl,{type:"boundary"}),joint:"center"},t),{children:(0,r.tZ)(y.G,{children:n})}))}function fc(e){var n=e.items;return(0,r.tZ)(y.G,{children:n.map((function(e,t){return function(e,n){var t=e[n],i=0===n,o=n===e.length-1;if("boundary"===t.type)return(0,r.tZ)(zl,{text:t.text,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},t.text);if("button"===t.type)return(0,r.tZ)(dc,{button:t.button,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},t.key);var a=e[n-1]?e[n-1].type:null,l=e[n+1]?e[n+1].type:null,c="commit"!==a,u="commit"!==l;return(0,r.tZ)(pc,{commit:t.commit,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:c,boundaryBottom:u},t.commit.hash)}(n,t)}))})}function pc(e){var n=e.commit,t=(0,Ne.Z)(e,["commit"]),i=function(e){if("GitHub"===e.committer.name&&"noreply@github.com"===e.committer.email){var n=e.subject.match(al);if(n){var t,r=parseInt(n[n.length-1].slice(1),10);if(r)return tl.test(e.subject)&&(t=e.subject.replace(tl,"").trim()),!t&&ll.test(e.subject)&&e.body&&-1===e.body.indexOf("\n")&&(t=e.body),{type:"pull-request",id:r,subject:t,reverts:ol(e)}}}if(ll.test(e.subject)){var i,o=ll.exec(e.subject);if(o)return e.body&&-1===e.body.indexOf("\n")&&(i=e.body),{type:"pull-request",id:parseInt(o[1].slice(1),10),subject:i,reverts:ol(e)}}if(cl.test(e.subject)){var a=cl.exec(e.subject);if(a){var l=ul.exec(e.subject);return{type:"branch",source:a[1],target:l?l[1]:null}}}return e.parents&&e.parents.length>2?{type:"octopus",parents:e.parents}:e.parents&&e.parents.length>1?{type:"simple",a:e.parents[0],b:e.parents[1]}:null}(n);if(i)return(0,r.tZ)(cc,(0,O.Z)({info:i,commit:n},t));var o=ol(n);return o?(0,r.tZ)(sc,(0,O.Z)({info:o,commit:n},t)):(0,r.tZ)(ac,(0,O.Z)({commit:n},t))}var hc=(0,cn.F4)({from:{opacity:0},to:{opacity:1}}),vc=(0,cn.iv)({animation:"".concat(hc," 0.125s 0.25s linear backwards")},g.l0.flex.grow(1),g.l0.display.flex,g.l0.center);function mc(){return(0,r.tZ)(y.G,{css:vc,children:(0,r.tZ)(pe.Z,{size:48})})}var gc=t(44159);var yc=t(95032);function Zc(e){var n,t,i,o,l,c,u=e.status,s=e.gotoPendingState,f=(0,a.useState)(!1),p=f[0],h=f[1],v=fa(),m=(0,d.Z)().git,g=u.branch,y=null!==(o=null===(n=u.upstream)||void 0===n?void 0:n.branch)&&void 0!==o?o:null,Z=null!==(l=null===(t=u.upstream)||void 0===t?void 0:t.behind)&&void 0!==l?l:0,b=null!==(c=null===(i=u.upstream)||void 0===i?void 0:i.ahead)&&void 0!==c?c:0,w=u.changes.length>0,x=(0,Uo.Z)(function(){var e=(0,M.Z)((function(e){var n,t;return(0,W.__generator)(this,(function(r){switch(r.label){case 0:return g&&y&&Z&&!w?[4,e.canMergeBranches(g,y)]:[2,{canPull:!1,mode:yc.T.FF_ONLY,error:null}];case 1:return(n=r.sent()).error?(v(n.error),[2,n]):(t=yc.T.FF_ONLY,b>0&&(t=n.canMerge?yc.T.REBASE:yc.T.MERGE),[2,{canPull:!0,mode:t,error:null}])}}))}));return function(n){return e.apply(this,arguments)}}(),[v,g,y,Z,b,w],{keepStaleResult:!1});if(null===x||void 0===x?void 0:x.error)return null;var C,k,S,T=null===x,E=null!==(C=null===x||void 0===x?void 0:x.canPull)&&void 0!==C&&C,R=null!==(k=null===x||void 0===x?void 0:x.mode)&&void 0!==k?k:yc.T.FF_ONLY;function I(){return(I=(0,M.Z)((function(){var e;return(0,W.__generator)(this,(function(n){switch(n.label){case 0:return p?[2]:(h(!0),[4,m.pull({mode:R,allowConflicts:!0})]);case 1:return e=n.sent(),m.forceRefresh(),e.error?(v(e.error),h(!1)):(e.hasConflicts&&s(),Yo("upstream-pulled")),[2]}}))}))).apply(this,arguments)}return p?S="Pulling...":g?w?S="Cannot pull with uncommitted changes":0===Z?S="Nothing to pull":T?S="Checking for merge conflicts\u2026":E?(S="Pull ".concat(Z," ").concat((0,tt.Z)("commit",Z)),R===yc.T.REBASE?S+=" with rebase":R===yc.T.MERGE&&(S+=" with merge")):S="Cannot pull due to merge conflict":S="Cannot pull - the HEAD is detached",(0,r.tZ)(K.zx,{text:S,iconLeft:T||p?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(qe.Z,{}),onClick:function(){return I.apply(this,arguments)},loading:T||p,disabled:!E})}var bc=t(63067);function wc(e){var n,t,i,o,l,c=e.status,u=(0,a.useState)(!1),s=u[0],f=u[1],p=fa(),h=(0,d.Z)().git,v=null===c.branch,m=null!==(i=null===(n=c.upstream)||void 0===n?void 0:n.behind)&&void 0!==i?i:0,g=null!==(o=null===(t=c.upstream)||void 0===t?void 0:t.ahead)&&void 0!==o?o:0,y=v||m>0||0===g;function Z(){return(Z=(0,M.Z)((function(){var e;return(0,W.__generator)(this,(function(n){switch(n.label){case 0:return y||s?[2]:(f(!0),[4,h.push()]);case 1:return e=n.sent(),h.forceRefresh(),e.error?(p(e.error),f(!1)):Yo("upstream-pushed"),[2]}}))}))).apply(this,arguments)}return l=s?"Pushing...":v?"Cannot push - the HEAD is detached":0===g?"Nothing to push":m>0?"Cannot push due to unpulled changes":"Push ".concat(g," ").concat((0,tt.Z)("commit",g)),(0,r.tZ)(K.zx,{text:l,iconLeft:s?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(bc.Z,{}),onClick:function(){return Z.apply(this,arguments)},disabled:y,loading:s})}function xc(e){var n=e.branch,t=(0,a.useState)(!1),i=t[0],o=t[1],l=fa(),c=(0,d.Z)().git;function u(){return(u=(0,M.Z)((function(){var e;return(0,W.__generator)(this,(function(t){switch(t.label){case 0:return i?[2]:(o(!0),[4,c.switchBranch(n)]);case 1:return(e=t.sent()).error?(l(e.error),o(!1)):(c.forceRefresh(),Yo("branch-switched")),[2]}}))}))).apply(this,arguments)}(0,a.useEffect)((function(){return o(!1)}),[n]);var s=i?"Switching to branch...":"Switch to Branch";return(0,r.tZ)(K.zx,{text:s,colorway:"primary",onClick:function(){return u.apply(this,arguments)},iconLeft:i?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(xa.Z,{}),loading:i})}var Cc=t(74008);function kc(e){for(var n=e.split("/").slice(0,-1),t=[],r=0;r<n.length;r++){var i=n.slice(r).join("/")+"/";0!==r&&(i="\u2026/"+i),t.push(i)}return t.reverse()}function Sc(e){if(0===e.length)return new Map;if(1===e.length)return new Map([[e[0],null]]);var n=new Map,t=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=a.value,u=(0,v.UO)(c),s=n.get(u);s||(s=[],n.set(u,s)),s.push(c)}}catch(Z){r=!0,i=Z}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}var d=new Map,f=!0,p=!1,h=void 0;try{for(var m,g=function(){var e=function(e){var n=[],i=new Map,a=!0,l=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var f=(0,o.Z)(u.value,2),p=f[0],h=f[1];if(!r.has(p)){var v=h[e];v||(v=h[h.length-1]),n.push(v),i.set(v,p)}}}catch(Z){l=!0,c=Z}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}if(0===n.length)return"break";var m=!0,g=!1,y=void 0;try{for(var b,w=function(){var e=b.value,t=i.get(e);if(void 0===t)throw new Error("Unpopulated segment map");1===n.filter((function(n){return n===e})).length&&(r.add(t),d.set(t,e))},x=n[Symbol.iterator]();!(m=(b=x.next()).done);m=!0)w()}catch(Z){g=!0,y=Z}finally{try{m||null==x.return||x.return()}finally{if(g)throw y}}},n=(0,o.Z)(m.value,2)[1];if(1===n.length)return d.set(n[0],null),"continue";var t=new Map,r=new Set,i=0,a=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var f=u.value;if(-1!==f.indexOf("/")){var p=kc(f);t.set(f,p),p.length>i&&(i=p.length)}else d.set(f,null),r.add(f)}}catch(Z){l=!0,c=Z}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}for(var h=0;h<=i;h++){if("break"===e(h))break}if(r.size!==n.length){var v=!0,g=!1,y=void 0;try{for(var b,w=n[Symbol.iterator]();!(v=(b=w.next()).done);v=!0){var x=b.value;if(!r.has(x)){var C=x.split("/").slice(0,-1).join("/");d.set(x,C)}}}catch(Z){g=!0,y=Z}finally{try{v||null==w.return||w.return()}finally{if(g)throw y}}}},y=n[Symbol.iterator]();!(f=(m=y.next()).done);f=!0)g()}catch(Z){p=!0,h=Z}finally{try{f||null==y.return||y.return()}finally{if(p)throw h}}return d}var Tc=t(15092),Ec=(0,b.X)({actionsIndex:[g.l0.height(24),g.l0.align.center,g.l0.borderRadius(4)],actionsWorktree:[g.l0.height(24),g.l0.flex.row,g.l0.align.center,g.l0.borderRadius(4)],unstage:[g.l0.height(24),g.l0.width(24),g.l0.borderRadius(2)],stage:[g.l0.px(12),g.l0.height(24),g.l0.width(24),g.l0.borderRadius(2)],reset:[g.l0.pl(16),g.l0.pr(12),g.l0.height(24),g.l0.width(24),g.l0.borderRadius(2)],resetIcon:{transform:"scale(0.85)"},divider:[g.l0.height("75%"),g.l0.width(1),g.l0.backgroundColor.outlineStronger]});function Rc(e){var n=e.file,t=e.list,i=e.stageFiles,o=e.restoreFiles,l=e.disabled,c=void 0!==l&&l,u=(0,a.useState)(!1),s=u[0],d=u[1],f=(0,a.useState)(!1),p=f[0],h=f[1];function v(){return(v=(0,M.Z)((function(){return(0,W.__generator)(this,(function(e){switch(e.label){case 0:return c?[2]:(d(!0),[4,i({reset:[n.path]})]);case 1:return e.sent(),d(!1),[2]}}))}))).apply(this,arguments)}function m(){return(m=(0,M.Z)((function(){return(0,W.__generator)(this,(function(e){switch(e.label){case 0:return c?[2]:(d(!0),[4,i({add:[n.path]})]);case 1:return e.sent(),d(!1),[2]}}))}))).apply(this,arguments)}function g(){return(g=(0,M.Z)((function(){return(0,W.__generator)(this,(function(e){switch(e.label){case 0:return c||"worktree"!==t?[2]:(h(!0),[4,o(n.path)]);case 1:return e.sent(),h(!1),[2]}}))}))).apply(this,arguments)}return c=c||p||s,"index"===t?(0,r.tZ)(J.T,{elevated:!0,css:Ec.actionsIndex,children:(0,r.tZ)(me.h,{css:Ec.unstage,alt:"Unstage changes",size:18,tooltipDelay:"long",onClick:function(){return v.apply(this,arguments)},disabled:c,children:s?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(Tc.Z,{})})}):(0,r.BX)(J.T,{elevated:!0,css:Ec.actionsWorktree,children:[(0,r.tZ)(me.h,{css:Ec.reset,alt:"Reset changes",size:18,tooltipDelay:"long",onClick:function(){return g.apply(this,arguments)},disabled:c,children:p?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(dl.Z,{css:Ec.resetIcon})}),(0,r.tZ)("div",{css:Ec.divider}),(0,r.tZ)(me.h,{css:Ec.stage,alt:"Stage changes",size:18,tooltipDelay:"long",onClick:function(){return m.apply(this,arguments)},disabled:c,children:s?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(Ri.Z,{})})]})}var Ic=(0,b.X)({path:[g.l0.rowWithGap(8),g.l0.flex.growAndShrink(1),g.l0.align.center],source:[g.l0.color.foregroundDimmest],sourceArrow:[g.l0.mx(8)]});function Gc(e){var n=e.path,t=e.prefix,i=e.source,o=e.onClick;return(0,r.BX)(y.G,{css:Ic.path,children:[(0,r.tZ)(Go.Z,{path:n}),(0,r.BX)(Z.xv,{children:[(0,r.tZ)(Ma,{path:n,prefix:t,onClick:o}),i?(0,r.BX)("span",{css:Ic.source,children:[(0,r.tZ)("span",{css:Ic.sourceArrow,children:"\u2190"}),(0,r.tZ)(Ma,{path:i})]}):null]})]})}var Dc=(0,cn.iv)({width:60,height:24},g.l0.display.flex,g.l0.center,g.l0.borderRadius(4),g.l0.fontSize(g.TV.fontSizeSmall));function _c(e){var n,t,i;switch(e.type){case Cc.h.ADDED:case Cc.h.UNTRACKED:n="Added",t=g.TV.greenDimmest,i=g.TV.greenStrongest;break;case Cc.h.MODIFIED:n="Modified",t=g.TV.yellowDimmest,i=g.TV.yellowStrongest;break;case Cc.h.DELETED:n="Deleted",t=g.TV.redDimmest,i=g.TV.redStrongest;break;case Cc.h.RENAMED:n="Renamed",t=g.TV.tealDimmest,i=g.TV.tealStrongest;break;case Cc.h.COPIED:n="Copy",t=g.TV.limeDimmest,i=g.TV.limeStrongest;break;default:return null}return(0,r.tZ)(y.G,{style:{backgroundColor:t,color:i},css:Dc,children:(0,r.tZ)("span",{children:n})})}var Pc=(0,cn.iv)(g.l0.py(2),g.l0.rowWithGap(4),g.l0.align.center);function Bc(e){var n,t=e.file,i=e.list,o=e.stageFiles,a=e.restoreFiles,l=e.pathMap,c=e.disabled,u=void 0!==c&&c,s=e.onFilePathClick,d=null===l||void 0===l?void 0:l.get(t.path),f=null===(n=t.source)||void 0===n?void 0:n.path,p="index"===i?t.type.index:t.type.worktree,h=(0,an.Z)((function(){if(p!==Cc.h.DELETED)return function(){return s(t.path)}}),[t.path,s,p]);return(0,r.BX)(y.G,{css:Pc,children:[(0,r.tZ)(Gc,{path:t.path,prefix:d,source:f,onClick:h}),(0,r.tZ)(_c,{type:p}),(0,r.tZ)(Rc,{file:t,list:i,stageFiles:o,restoreFiles:a,disabled:u})]})}var Ac=(0,b.X)({actions:[g.l0.rowWithGap(2),g.l0.backgroundColor.backgroundHighest,g.l0.borderRadius(8)],buttonReset:[g.l0.borderRadius(8,0,0,8)],buttonStage:[g.l0.borderRadius(0,8,8,0)],divider:[g.l0.my(8),g.l0.width(1),g.l0.backgroundColor.outlineStronger]});function Uc(e){var n=e.type,t=e.stageFiles,i=e.restoreFiles,o=e.disabled,l=void 0!==o&&o,c=(0,a.useState)(!1),u=c[0],s=c[1],d=(0,a.useState)(!1),f=d[0],p=d[1];function h(){return v.apply(this,arguments)}function v(){return(v=(0,M.Z)((function(){return(0,W.__generator)(this,(function(e){switch(e.label){case 0:return l?[2]:(s(!0),[4,t({all:"index"!==n})]);case 1:return e.sent(),s(!1),[2]}}))}))).apply(this,arguments)}function m(){return(m=(0,M.Z)((function(){return(0,W.__generator)(this,(function(e){switch(e.label){case 0:return l||"worktree"!==n?[2]:(p(!0),[4,i(!0)]);case 1:return e.sent(),p(!1),[2]}}))}))).apply(this,arguments)}return l=l||f||u,"index"===n?(0,r.tZ)(K.zx,{text:"Unstage All",iconLeft:u?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(Tc.Z,{}),onClick:h,disabled:l,loading:u,small:!0}):(0,r.BX)(y.G,{css:Ac.actions,children:[(0,r.tZ)(K.zx,{css:Ac.buttonReset,text:"Reset All",iconLeft:f?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(dl.Z,{}),onClick:function(){return m.apply(this,arguments)},disabled:l,loading:f,small:!0}),(0,r.tZ)("div",{css:Ac.divider}),(0,r.tZ)(K.zx,{css:Ac.buttonStage,text:"Stage All",iconLeft:u?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(Ri.Z,{}),onClick:h,disabled:l,loading:u,small:!0})]})}var Nc=t(94629),Lc=(0,b.X)({list:[g.l0.pt(4),g.l0.pb(8),g.l0.colWithGap(4)],listFolded:[g.l0.py(4)],header:[g.l0.px(8),g.l0.rowWithGap(4),g.l0.align.center],headerFoldable:[g.l0.py(4),g.l0.pl(4),g.l0.pr(8),g.l0.rowWithGap(4),g.l0.align.center],headerText:[g.l0.flex.grow(1)],body:[g.l0.px(8),g.l0.maxHeight("50vh"),g.l0.overflowY("auto")]});function Xc(e){var n,t=e.files,i=e.type,o=e.stageFiles,l=e.restoreFiles,c=e.onFilePathClick,u=e.pathMap,s=e.foldable,d=void 0!==s&&s,f=e.disabled,p=void 0!==f&&f,h=(0,a.useState)(!1),v=h[0],m=h[1],g=(0,a.useRef)(null),Z=(0,a.useRef)(null),b=(0,Nc.MG)({count:t.length,getScrollElement:function(){return Z.current},getItemKey:function(e){return t[e].path},estimateSize:function(){return 28},overscan:20}),w=b.getVirtualItems();return d&&v?(0,r.tZ)(y.G,{css:Lc.listFolded,children:(0,r.BX)(y.G,{css:d?Lc.headerFoldable:Lc.header,children:[(0,r.tZ)(Mc,{files:t,type:i,setFolded:m,foldable:!0,folded:!0}),(0,r.tZ)(Uc,{type:i,stageFiles:o,restoreFiles:l,disabled:p})]})}):(0,r.BX)(y.G,{innerRef:g,css:Lc.list,children:[(0,r.BX)(y.G,{css:d?Lc.headerFoldable:Lc.header,children:[(0,r.tZ)(Mc,{files:t,type:i,setFolded:m,foldable:d}),(0,r.tZ)(Uc,{type:i,stageFiles:o,restoreFiles:l,disabled:p})]}),(0,r.tZ)(y.K.div,{ref:Z,css:Lc.body,children:(0,r.tZ)("div",{style:{minHeight:b.getTotalSize()},children:(0,r.tZ)("div",{style:{transform:"translateY(".concat(null===(n=w[0])||void 0===n?void 0:n.start,"px)"),willChange:"transform"},children:w.map((function(e){var n=t[e.index];return(0,r.tZ)("div",{"data-index":e.index,children:(0,r.tZ)(Bc,{file:n,list:i,stageFiles:o,restoreFiles:l,onFilePathClick:c,pathMap:u,disabled:p},n.path)},e.key)}))})})})]})}function Mc(e){var n=e.files,t=e.type,i=e.setFolded,o=e.foldable,a=void 0!==o&&o,l=e.folded,c=void 0!==l&&l,u="index"===t?"staged":"changed",s=(0,tt.Z)("file",n.length),d="".concat(n.length," ").concat(u," ").concat(s);return a&&c?(0,r.BX)(r.HY,{children:[(0,r.tZ)(me.h,{alt:"Show list",onClick:function(){return i(!1)},children:(0,r.tZ)(gn.Z,{})}),(0,r.tZ)(Z.xv,{css:Lc.headerText,children:d})]}):(0,r.BX)(r.HY,{children:[a?(0,r.tZ)(me.h,{alt:"Hide list",onClick:function(){return i(!0)},children:(0,r.tZ)(mn.Z,{color:g.TV.foregroundDimmest})}):null,(0,r.tZ)(Z.xv,{css:Lc.headerText,color:"dimmest",children:d})]})}var Oc=t(11926),Fc=(0,b.X)({container:[g.l0.colWithGap(8)],buttons:[g.l0.rowWithGap(8),g.l0.justify.end],restoringBoth:[g.l0.colWithGap(12)],listContainer:[g.l0.colWithGap(4)],list:[g.l0.px(4),g.l0.colWithGap(2)]});function Wc(e){var n=e.show,t=e.files,i=e.pathMap,o=e.callback,l=(0,k.Z)(o),c=(0,a.useCallback)((function(){var e;null===(e=l.current)||void 0===e||e.call(l,!0)}),[l]),u=(0,a.useCallback)((function(){var e;null===(e=l.current)||void 0===e||e.call(l,!1)}),[l]);return(0,r.tZ)(Q.u,{isOpen:n,onRequestClose:u,children:n?(0,r.BX)(y.G,{css:Fc.container,children:[(0,r.BX)(Z.h4,{level:2,children:["Restore ",(0,tt.Z)("File",t.length)]}),(0,r.tZ)(Hc,{files:t,pathMap:i}),(0,r.BX)(y.G,{css:Fc.buttons,children:[(0,r.tZ)(K.zx,{text:"Cancel",iconLeft:(0,r.tZ)(Oc.Z,{}),onClick:u}),(0,r.tZ)(K.zx,{text:"Restore",iconLeft:(0,r.tZ)(dl.Z,{}),colorway:"primary",onClick:c})]})]}):null})}function Hc(e){var n=e.files,t=e.pathMap,i=[],o=[],a=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;d.type.worktree===Cc.h.UNTRACKED?o.push(d):i.push(d)}}catch(f){l=!0,c=f}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return!i.length&&o.length?(0,r.BX)(y.G,{css:Fc.listContainer,children:[(0,r.tZ)(Z.xv,{multiline:!0,children:1===o.length?"Do you want to delete this file?":"Do you want to delete these files?"}),(0,r.tZ)(zc,{files:o,pathMap:t})]}):i.length&&!o.length?(0,r.BX)(y.G,{css:Fc.listContainer,children:[(0,r.tZ)(Z.xv,{multiline:!0,children:1===i.length?"Do you want to undo the changes to this file?":"Do you want to undo the changes to these files?"}),(0,r.tZ)(zc,{files:i,pathMap:t})]}):(0,r.BX)(y.G,{css:Fc.restoringBoth,children:[(0,r.tZ)(Z.xv,{multiline:!0,children:"You are restoring both tracked and untracked files. This will undo the changes to the tracked files and delete the untracked files. Do you want to continue?"}),i.length?(0,r.BX)(y.G,{css:Fc.listContainer,children:[(0,r.BX)(Z.h4,{level:3,children:["Tracked ",(0,tt.Z)("File",i.length)]}),(0,r.tZ)(zc,{files:i,pathMap:t})]}):null,o.length?(0,r.BX)(y.G,{css:Fc.listContainer,children:[(0,r.BX)(Z.h4,{level:3,children:["Untracked ",(0,tt.Z)("File",o.length)]}),(0,r.tZ)(zc,{files:o,pathMap:t})]}):null]})}function zc(e){var n=e.files,t=e.pathMap,i=(0,a.useMemo)((function(){return n.length>20?n.slice(0,20):n}),[n]);return(0,r.tZ)(y.G,{children:(0,r.BX)("ul",{css:Fc.list,children:[i.map((function(e){var n;return(0,r.tZ)("li",{children:(0,r.tZ)(Gc,{path:e.path,prefix:t.get(e.path),source:null===(n=e.source)||void 0===n?void 0:n.path})},e.path)})),n.length<=20?null:(0,r.tZ)("li",{children:(0,r.BX)(Z.xv,{multiline:!0,color:"dimmer",children:["... ",n.length-20," more"," ",(0,tt.Z)("file",n.length-20)]})})]})})}var Vc=[{"& > span:first-child":[g.l0.flex.grow(1),g.l0.textAlign.left]},{"& > span":[g.l0.flex.shrink(1)]}],jc=(0,b.X)({buttonFolded:[Vc,g.l0.height("auto"),g.l0.py(8),g.l0.fontWeight.medium],buttonUnfolded:[Vc,g.l0.height("auto"),g.l0.py(8),g.l0.fontWeight.medium,g.l0.border({color:g.TV.outlineDimmer,direction:"bottom"}),g.l0.borderRadius(8,8,0,0)],container:[g.l0.flex.grow(1),g.l0.borderRadius(8)],lists:[g.l0.borderRadius(0,0,8,8)],divider:[g.l0.height(1),g.l0.minHeight(1),g.l0.width("100%"),g.l0.backgroundColor.outlineDimmer],autoStageMessage:[g.l0.pt(4),g.l0.pb(8),g.l0.px(4),g.l0.center],noChangesMessage:[g.l0.py(16),g.l0.px(4),g.l0.center],buttonText:[g.l0.flex.grow(1)],details:[g.l0.rowWithGap(4),g.l0.fontWeight.normal,g.l0.color.foregroundDimmest]});function qc(e){var n=e.status,t=e.stageFiles,i=e.restoreFiles,o=e.onStagedFileClick,l=e.disabled,c=void 0!==l&&l,u=(0,a.useState)(!1),s=u[0],d=u[1],f=(0,a.useState)(!1),p=f[0],h=f[1],v=(0,a.useState)(!1),m=v[0],g=v[1],b=(0,a.useMemo)((function(){return Sc(n.changes.map((function(e){return e.path})))}),[n]),w=(0,a.useMemo)((function(){var e=[],t=[],r=!0,i=!1,o=void 0;try{for(var a,l=n.changes[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.staged&&e.push(c),c.type.worktree!==Cc.h.UNMODIFIED&&t.push(c)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return[e,t]}),[n.changes]),x=w[0],C=w[1],k=x.length>0&&C.length>0,S=function(e){var n=(0,a.useState)((function(){return{show:!1,files:[]}})),t=n[0],i=n[1],o=(0,a.useCallback)((function(e){return new Promise((function(n){0===e.length&&n(!1),i({show:!0,files:e,callback:function(e){i({show:!1,files:[],callback:void 0}),n(e)}})}))}),[]);return{openRestoreConfirmationModal:o,restoreConfirmationModal:(0,a.useMemo)((function(){return(0,r.tZ)(Wc,(0,F.Z)((0,O.Z)({},t),{pathMap:e}))}),[t,e])}}(b),T=S.openRestoreConfirmationModal,E=S.restoreConfirmationModal,R=(0,a.useCallback)(function(){var e=(0,M.Z)((function(e){return(0,W.__generator)(this,(function(n){switch(n.label){case 0:return"all"in e?(h(!0),[4,t(e)]):[3,2];case 1:return n.sent(),h(!1),[3,4];case 2:return[4,t(e)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[t]),I=(0,a.useCallback)(function(){var e=(0,M.Z)((function(e){var n,t;return(0,W.__generator)(this,(function(r){switch(r.label){case 0:return!0!==e?[3,4]:(g(!0),[4,T(C)]);case 1:return r.sent()?[4,i(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return g(!1),[3,8];case 4:if("string"===typeof e){if(!(t=C.find((function(n){return n.path===e}))))throw g(!1),new Error("Could not find file in worktree list");n=[t]}else n=C.filter((function(n){return e.includes(n.path)}));return[4,T(n)];case 5:return r.sent()?[4,i(e)]:[3,7];case 6:r.sent(),r.label=7;case 7:g(!1),r.label=8;case 8:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[T,i,C]);return s?(0,r.tZ)($c,{setFolded:d,changeCount:C.length,stagedCount:x.length,disabled:c,folded:!0}):0===x.length&&0===C.length?(0,r.BX)(y.G,{style:{opacity:c?.725:void 0},css:jc.container,children:[(0,r.tZ)($c,{setFolded:d,changeCount:C.length,stagedCount:x.length,disabled:c}),(0,r.tZ)(J.T,{css:jc.lists,elevated:!0,children:(0,r.tZ)(y.G,{css:jc.noChangesMessage,children:(0,r.tZ)(Z.xv,{color:"dimmest",children:"No changed or staged files."})})})]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{style:{opacity:c?.725:void 0},css:jc.container,children:[(0,r.tZ)($c,{setFolded:d,changeCount:C.length,stagedCount:x.length,disabled:c}),(0,r.BX)(J.T,{css:jc.lists,elevated:!0,children:[0===x.length?null:(0,r.tZ)(Xc,{type:"index",files:x,stageFiles:R,restoreFiles:I,onFilePathClick:o,pathMap:b,foldable:k,disabled:c||p||m}),k?(0,r.tZ)("div",{css:jc.divider}):null,0===C.length?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(Xc,{type:"worktree",files:C,stageFiles:R,restoreFiles:I,onFilePathClick:o,pathMap:b,foldable:k,disabled:c||p||m}),k?null:(0,r.tZ)(y.G,{css:jc.autoStageMessage,children:(0,r.tZ)(Z.xv,{variant:"small",color:"dimmest",children:"Committing will automatically stage your changes."})})]})]})]}),E]})}function $c(e){var n=e.folded,t=void 0!==n&&n,i=e.setFolded,o=e.changeCount,a=e.stagedCount,l=e.disabled,c=void 0!==l&&l;return(0,r.tZ)(K.zx,{css:t?jc.buttonFolded:jc.buttonUnfolded,text:"Staging Area",secondaryText:(0,r.tZ)(Yc,{folded:t,changeCount:o,stagedCount:a}),onClick:function(){return i(!t)},iconRight:t?(0,r.tZ)(gn.Z,{}):(0,r.tZ)(mn.Z,{}),disabled:c,small:!0})}function Yc(e){var n=e.folded,t=e.changeCount,i=e.stagedCount;if(!n)return null;var o=t>0,a=i>0;return o||a?(0,r.BX)("span",{css:jc.details,children:[o?(0,r.BX)("span",{children:[t," ",(0,tt.Z)("change",t)]}):null,o&&a?(0,r.tZ)("span",{children:"/"}):null,a?(0,r.BX)("span",{children:[i," staged"]}):null]}):(0,r.tZ)("span",{css:jc.details,children:(0,r.tZ)("span",{children:"no changes"})})}var Kc=t(74855),Qc=t(76530),Jc=t(92003),eu=t(20324),nu=t(47159),tu=t(92079),ru=(0,cn.iv)({height:32,width:"100%",resize:"none",border:"none"}),iu=(0,cn.iv)({width:"100%",resize:"none",border:"none"}),ou=(0,b.X)({surface:[g.l0.p(8),g.l0.colWithGap(12),g.l0.borderRadius(0,0,8,8)],button:[g.l0.height("auto"),g.l0.py(8),g.l0.fontWeight.medium,g.l0.borderRadius(8,8,0,0),g.l0.justify.start,g.l0.border({color:g.TV.outlineDimmer,direction:"bottom"}),{"> span:first-child":{flexGrow:1,textAlign:"start"}}],requiredText:[g.l0.display.inlineFlex,g.l0.rowWithGap(4)],subjectField:[g.l0.colWithGap(8)],bodyField:[g.l0.colWithGap(8)],subjectInput:ru,bodyInput:iu,subjectInputDisabled:[ru,{opacity:.5}],bodyInputDisabled:[iu,{opacity:.5}],required:[g.l0.color.accentNegativeStronger],keyCombo:[g.l0.display.inlineFlex,g.l0.rowWithGap(4),g.l0.flex.grow(1),g.l0.align.center],keyComboText:[g.l0.fontWeight.normal,g.l0.color.foregroundDimmest]});function au(e){var n=e.message,t=e.disabled,i=void 0!==t&&t,o=e.onMessageChange,l=e.onCommitShortcut,c=function(e,n){e=e.replaceAll("\n"," "),o(e+(n?"\n\n"+n:""))},u=(0,a.useState)(!0),s=u[0],d=u[1],f=(0,a.useState)(!1),p=f[0],h=f[1],v=(0,a.useState)(!1),m=v[0],g=v[1],Z=(0,a.useRef)(null),b=(0,a.useRef)(null),w=(0,Gn.Z)(n.split("\n\n")),x=w[0],C=void 0===x?"":x,k=w.slice(1).join("\n\n"),S=(0,tu.d)(),T=(0,Jc.gf)(nu.CN.gitCommit.id);return(0,eu.ow)(nu.CT,m),(0,Jc.Il)((function(){return[nu.CN.gitCommit.id,{run:function(){null===l||void 0===l||l()},scope:nu.CT,bubble:!1}]}),[l]),(0,r.BX)(y.G,{children:[(0,r.tZ)(K.zx,{css:ou.button,text:(0,r.BX)("span",{css:ou.requiredText,children:[(0,r.tZ)("span",{children:"Commit Message"}),s?(0,r.tZ)(du,{}):null]}),secondaryText:S||!T?void 0:(0,r.BX)("span",{css:ou.keyCombo,children:[(0,r.tZ)("span",{css:ou.keyComboText,children:"Commit:"}),(0,r.tZ)(Jc.bM,{keyCombo:T,small:!0})]}),iconRight:s?(0,r.tZ)(gn.Z,{}):(0,r.tZ)(mn.Z,{}),onClick:function(){return d((function(e){return!e}))},small:!0}),(0,r.BX)(J.T,{css:ou.surface,elevated:!0,children:[(0,r.tZ)(cu,{ref:Z,value:C,compact:s,disabled:i,onChange:function(e){c(e,k)},onNewline:function(){if(s)d(!1),h(!0);else{if(!b.current)return;b.current.focus(),b.current.setSelectionRange(0,0)}},onFocus:function(){g(!0)},onBlur:function(){g(!1)}}),s&&!k?null:(0,r.tZ)(su,{ref:b,value:k,compact:s,disabled:i,onChange:function(e){var n;(c(C,e),s&&!e)?null===(n=Z.current)||void 0===n||n.focus():s&&d(!1)},onBackspaceWhenEmpty:function(){Z.current&&Z.current.focus()},onFocus:function(){p&&h(!1),g(!0)},onBlur:function(){g(!1)},autoFocus:p})]})]})}function lu(e,n){var t=e.value,i=e.compact,o=void 0!==i&&i,a=e.disabled,l=void 0!==a&&a,c=e.onChange,u=e.onNewline,s=e.onFocus,d=e.onBlur;return(0,r.BX)(y.G,{css:ou.subjectField,children:[o?null:(0,r.tZ)(Z.xv,{variant:"small",color:"dimmer",children:(0,r.BX)("span",{css:ou.requiredText,children:[(0,r.tZ)("span",{children:"Summary"}),(0,r.tZ)(du,{})]})}),(0,r.tZ)(fe.B,{ref:n,css:l?ou.subjectInputDisabled:ou.subjectInput,placeholder:"Summary of your commit...",value:t,disabled:l,onChange:function(e){return null===c||void 0===c?void 0:c(e.currentTarget.value)},onKeyDown:function(e){"Enter"!==e.key||e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),null===u||void 0===u||u())},onFocus:s,onBlur:d})]})}var cu=(0,a.forwardRef)(lu);function uu(e,n){var t=e.value,i=e.compact,o=void 0!==i&&i,a=e.disabled,l=void 0!==a&&a,c=e.autoFocus,u=void 0!==c&&c,s=e.onChange,d=e.onBackspaceWhenEmpty,f=e.onFocus,p=e.onBlur,h=(0,Kc.Z)().ref;return(0,r.BX)(y.G,{css:ou.bodyField,children:[o?null:(0,r.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Description"}),(0,r.tZ)(fe.B,{ref:o?n:(0,Qc.l)(n,h),css:l?ou.bodyInputDisabled:ou.bodyInput,placeholder:"Description of your commit...",value:t,disabled:l,onChange:function(e){return null===s||void 0===s?void 0:s(e.currentTarget.value)},onKeyDown:function(e){"Backspace"===e.key&&""===t&&(e.preventDefault(),e.stopPropagation(),null===d||void 0===d||d())},onFocus:f,onBlur:p,autoFocus:u})]})}var su=(0,a.forwardRef)(uu);function du(){return(0,r.tZ)(wa.u,{tooltip:"This field is required.",placement:"top",children:(0,r.tZ)("span",{css:ou.required,children:"*"})})}var fu=(0,cn.iv)(g.l0.colWithGap(8));function pu(e){var n=e.status,t=e.onStagedFileClick,i=(0,a.useState)(n),o=i[0],l=i[1],c=(0,a.useState)(""),u=c[0],s=c[1],f=(0,a.useState)(0),p=f[0],h=f[1],v=(0,a.useState)(!1),m=v[0],g=v[1],b=fa();(0,a.useEffect)((function(){return l(n)}),[n]);var w=(0,d.Z)().git;if(!o||!o.changes.length)return(0,r.tZ)(y.G,{css:fu,children:(0,r.tZ)(Z.xv,{color:"dimmest",children:"There are no changes to commit."})});var x=o.changes.length,C=o.changes.filter((function(e){return e.staged})).length;function k(){return(k=(0,M.Z)((function(e){var n,t;return(0,W.__generator)(this,(function(r){switch(r.label){case 0:return m?[2]:(h((function(e){return e+1})),[4,w.stageFiles(e)]);case 1:return(n=r.sent()).error?[3,3]:[4,w.status()];case 2:return(t=r.sent()).error?b(t.error):l(t),w.forceRefresh(),[3,4];case 3:b(n.error),r.label=4;case 4:return h((function(e){return e-1})),[2]}}))}))).apply(this,arguments)}function S(){return S=(0,M.Z)((function(e){var n,t;return(0,W.__generator)(this,(function(r){switch(r.label){case 0:return m?[2]:(h((function(e){return e+1})),[4,w.restoreFiles(e)]);case 1:return(n=r.sent()).error?[3,3]:[4,w.status()];case 2:return(t=r.sent()).error?b(t.error):l(t),w.forceRefresh(),[3,4];case 3:b(n.error),r.label=4;case 4:return h((function(e){return e-1})),[2]}}))})),S.apply(this,arguments)}function T(){return E.apply(this,arguments)}function E(){return(E=(0,M.Z)((function(){var e,n;return(0,W.__generator)(this,(function(t){switch(t.label){case 0:return m||0===x||p>0?[2]:(g(!0),0!==C?[3,2]:[4,w.stageFiles({all:!0})]);case 1:t.sent(),t.label=2;case 2:return[4,w.commit({message:u})];case 3:return(e=t.sent()).error?(g(!1),b(e.error),[3,6]):[3,4];case 4:return Yo("commit-created",{hasDescription:-1!==u.trim().indexOf("\n\n")}),[4,w.status()];case 5:n=t.sent(),g(!1),n.error?b(n.error):(s(""),l(n)),w.forceRefresh(),t.label=6;case 6:return[2]}}))}))).apply(this,arguments)}var R="Nothing to commit";if(m)R="Committing...";else if(C>0){var I=(0,tt.Z)("change",C);R="Commit ".concat(C," staged ").concat(I)}else x>0&&0===C&&(R="Stage and commit all changes");var G=!u||0===x||p>0||m;return(0,r.BX)(y.G,{css:fu,children:[(0,r.tZ)(au,{message:u,disabled:m,onMessageChange:s,onCommitShortcut:T}),(0,r.tZ)(qc,{status:o,stageFiles:function(e){return k.apply(this,arguments)},restoreFiles:function(e){return S.apply(this,arguments)},onStagedFileClick:t,disabled:m}),(0,r.tZ)(K.zx,{text:R,onClick:T,disabled:G,loading:m,colorway:"primary",iconLeft:(0,r.tZ)(re.Z,{}),stretch:!0})]})}var hu=t(12018),vu=(0,b.X)({warning:[g.l0.align.start],header:[g.l0.fontWeight.bold]});function mu(){var e=(0,hu.P5)({controlName:"flag-disable-github-import"});return(0,r.BX)(r.HY,{children:[(0,r.tZ)(ee.E,{css:vu.warning,icon:(0,r.tZ)(Ci.Z,{}),colorway:"warning",text:(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:vu.header,children:"Can't push or pull from GitHub"}),(0,r.tZ)("br",{}),(0,r.tZ)("span",{children:"This Repl has a GitHub repository as a remote, but you are not connected to GitHub."})]})}),e?null:(0,r.tZ)(Ko,{})]})}var gu=t(2447),yu=(0,cn.iv)(g.l0.flex.shrink(1));function Zu(e){var n=e.date,t=(0,a.useState)(null),i=t[0],o=t[1];return(0,a.useEffect)((function(){if(n){var e=function(){var e=new Date,t="just now";e.getTime()-n.getTime()>6e4&&(t=(0,gu.Z)(n,e,{addSuffix:!0})),t=t.replace(/minutes?/,"min"),o(t)};e();var t=setInterval(e,6e4);return function(){clearInterval(t),o(null)}}}),[n]),i?(0,r.BX)(Z.xv,{css:yu,color:"dimmest",variant:"small",children:["last fetched ",i]}):null}function bu(e){var n=e.hasRemoteMergeConflict,t=e.hasUnpulledCommits,i=e.hasUnpushedCommits,o=e.workTreeDirty,a=[];return o&&t&&a.push("Can't pull: you have uncommitted changes"),n&&(t||i)&&(t&&i?(o||a.push("Warning: pulling will start a merge with conflicts"),a.push("Can't push: unpulled changes must be merged first")):t?o||a.push("Warning: pulling will start a merge with conflicts"):i&&a.push("Can't push: merge conflict with remote")),(0,r.tZ)(r.HY,{children:a.map((function(e){return(0,r.tZ)(ee.E,{text:e,colorway:"warning",icon:(0,r.tZ)(Ci.Z,{})},e)}))})}var wu=(0,cn.iv)(g.l0.mx(8));function xu(e){var n=e.ahead,t=e.behind;if(!n&&!t)return(0,r.tZ)(Z.xv,{color:"dimmest",children:"Nothing to pull or push"});var i=null,o=null;if(t){var a=(0,tt.Z)("commit",t);i="".concat(t," ").concat(a," to pull")}if(n){var l=(0,tt.Z)("commit",n);o="".concat(n," ").concat(l," to push")}return(0,r.BX)(Z.xv,{color:"dimmer",variant:"small",children:[i?(0,r.tZ)("span",{children:i}):null,i&&o?(0,r.tZ)("span",{css:wu,children:"\u2022"}):null,o?(0,r.tZ)("span",{children:o}):null]})}var Cu=(0,b.X)({container:[g.l0.flex.grow(1)],branch:[g.l0.mr(4),g.l0.color.foregroundDefault,g.l0.fontWeight.medium,{"&:hover":{textDecoration:"underline"}}],divider:[g.l0.color.foregroundDimmest],text:[g.l0.ml(4),g.l0.color.foregroundDimmest]});function ku(e){var n=e.upstream,t=e.remotes,i=(0,a.useMemo)((function(){return function(e,n){var t=null,r=null;if((0,Xo.Z)(e,Map)){var i=(0,Mo.Tg)(n),o=i[0];if(t=i[1],!o||!t)return null;var a=e.get(o);if(!a)return null;r=Ho(a)}else t=n,r=Ho(e);return r&&Fo(r)?"".concat(r,"/tree/").concat(t):null}(t,n)}),[n,t]);return(0,r.BX)(Z.xv,{css:Cu.container,variant:"small",children:[i?(0,r.tZ)("a",{css:Cu.branch,href:i,target:"_blank",children:n}):(0,r.tZ)("span",{css:Cu.branch,children:n}),(0,r.tZ)("span",{css:Cu.divider,children:"\u2022"}),(0,r.tZ)("span",{css:Cu.text,children:"upstream"})]})}var Su=(0,b.X)({container:[g.l0.borderRadius(8)],loading:[g.l0.height(64),je.p.backgroundPulse(),g.l0.borderRadius(8)],header:[g.l0.py(4),g.l0.px(8),g.l0.rowWithGap(8),g.l0.align.center,g.l0.flex.shrink(1),g.l0.border({color:g.TV.outlineDimmer,direction:"bottom"})],fetch:{border:"none"},body:[g.l0.px(8),g.l0.pt(8),g.l0.pb(12),g.l0.colWithGap(8)],buttons:[g.l0.rowWithGap(8),g.l0.flex.grow(1)],sync:[g.l0.flex.grow(1)],pullPush:[g.l0.flex.row],pull:[g.l0.pr(12),g.l0.borderRadius(8,0,0,8),g.l0.border({color:g.TV.outlineDefault,direction:"right"})],push:[g.l0.borderRadius(0,8,8,0)]});function Tu(e){var n=e.remotes,t=e.gotoPendingState,i=(0,a.useState)(!1),o=i[0],l=i[1],c=(0,a.useState)(!1),u=c[0],s=c[1],f=(0,a.useState)(!1),p=f[0],h=f[1],v=(0,a.useState)(!1),m=v[0],g=v[1],Z=(0,d.Z)().git,b=(0,Uo.Z)(function(){var e=(0,M.Z)((function(e){var n,t,r,i,o,a,l,c,u,s,d,f,p,h,v,m,g,y;return(0,W.__generator)(this,(function(Z){switch(Z.label){case 0:return i={upstream:null,hasUnpulledCommits:!1,hasUnpushedCommits:!1,hasRemoteMergeConflict:!1,pullMode:yc.T.FF_ONLY,canPull:!1,canPush:!1,workTreeDirty:!1,needGitHubConnection:!1,ahead:0,behind:0,lastFetched:null},[4,e.getRepositoryState()];case 1:return(o=Z.sent()).error?[2,o]:(a=o.state,o.type!==Bo.y5.NORMAL?[2,{error:Lo.aq.INVALID_STATE}]:(a!==Bo.yG.DIRTY_WORKTREE&&a!==Bo.yG.DIRTY_INDEX||(i.workTreeDirty=!0),[4,e.status()]));case 2:return(l=Z.sent()).error?[2,l]:(c=l.branch,u=null===(n=l.upstream)||void 0===n?void 0:n.branch,d=null!==(s=null===(t=l.upstream)||void 0===t?void 0:t.ahead)&&void 0!==s?s:0,p=null!==(f=null===(r=l.upstream)||void 0===r?void 0:r.behind)&&void 0!==f?f:0,c?(i.ahead=d,i.behind=p,u?(i.upstream=u,i.hasUnpulledCommits=p>0,i.hasUnpushedCommits=d>0,[4,e.lastFetched()]):[3,7]):[2,{error:Lo.aq.HEAD_DETACHED}]);case 3:return(h=Z.sent()).error?[2,h]:(i.lastFetched=h.lastFetched,[4,e.canMergeBranches(c,u)]);case 4:return(v=Z.sent()).error?[2,v]:(v.canMerge||(i.hasRemoteMergeConflict=!0),e.hasProfile(Lo.rG.GITHUB)?[3,6]:(m=(0,gc.CH)(u))?[4,e.getRemotes()]:[2,{error:Lo.aq.INVALID_REFERENCE}]);case 5:if((g=Z.sent()).error)return[2,g];if(!(y=g.remotes.get(m)))return[2,{error:Lo.aq.INVALID_REFERENCE}];Fo(y)&&(i.needGitHubConnection=!0),Z.label=6;case 6:!i.hasUnpulledCommits||i.workTreeDirty||i.needGitHubConnection||(i.canPull=!0),!i.hasUnpushedCommits||i.hasUnpulledCommits||i.needGitHubConnection||(i.canPush=!0),d>0&&(i.pullMode=i.hasRemoteMergeConflict?yc.T.MERGE:yc.T.REBASE),Z.label=7;case 7:return[2,(0,F.Z)((0,O.Z)({},i),{error:null})]}}))}));return function(n){return e.apply(this,arguments)}}()),w=fa();if((0,a.useEffect)((function(){(null===b||void 0===b?void 0:b.error)&&w(b.error)}),[null===b||void 0===b?void 0:b.error,w]),!b)return(0,r.tZ)(J.T,{css:Su.loading,elevated:!0});if(b.error||!b.upstream)return null;var x=b.upstream,C=b.hasUnpulledCommits,k=b.hasUnpushedCommits,S=b.hasRemoteMergeConflict,T=b.pullMode,E=b.canPull,R=b.canPush,I=b.workTreeDirty,G=b.needGitHubConnection,D=b.ahead,_=b.behind,P=b.lastFetched;if(G)return(0,r.BX)(J.T,{css:Su.container,elevated:!0,children:[(0,r.BX)(y.G,{css:Su.header,children:[(0,r.tZ)(ku,{upstream:x,remotes:n}),(0,r.tZ)(K.zx,{css:Su.fetch,text:"Fetch",iconLeft:(0,r.tZ)(ii.Z,{}),disabled:!0,outlined:!0,small:!0})]}),(0,r.tZ)(y.G,{css:Su.body,children:(0,r.tZ)(mu,{})})]});var B=o||u||p||m,A=!x||G||B,U=!E||B,N=!R||B,L=!E&&!R||S||B;function X(){return(X=(0,M.Z)((function(){var e;return(0,W.__generator)(this,(function(n){switch(n.label){case 0:return A?[2]:(l(!0),[4,Z.fetch()]);case 1:return e=n.sent(),Z.forceRefresh(),l(!1),e.error?w(e.error):Yo("remote-fetched"),[2]}}))}))).apply(this,arguments)}function H(){return(H=(0,M.Z)((function(){var e;return(0,W.__generator)(this,(function(n){switch(n.label){case 0:return U?[2]:(s(!0),[4,Z.pull({mode:T,allowConflicts:!0})]);case 1:return e=n.sent(),s(!1),e.error?w(e.error):(e.hasConflicts&&t(),Z.forceRefresh(),Yo("upstream-pulled")),[2]}}))}))).apply(this,arguments)}function z(){return(z=(0,M.Z)((function(){var e;return(0,W.__generator)(this,(function(n){switch(n.label){case 0:return N?[2]:(h(!0),[4,Z.push()]);case 1:return e=n.sent(),Z.forceRefresh(),h(!1),e.error?w(e.error):Yo("upstream-pushed"),[2]}}))}))).apply(this,arguments)}function V(){return(V=(0,M.Z)((function(){var e,n;return(0,W.__generator)(this,(function(t){switch(t.label){case 0:return L?[2]:(g(!0),E?[4,Z.pull({mode:T})]:[3,2]);case 1:if((e=t.sent()).error)return w(e.error),g(!1),[2];Yo("upstream-pulled"),t.label=2;case 2:return R?[4,Z.push()]:[3,4];case 3:if((n=t.sent()).error)return w(n.error),g(!1),[2];Yo("upstream-pushed"),t.label=4;case 4:return Z.forceRefresh(),g(!1),[2]}}))}))).apply(this,arguments)}return(0,r.BX)(J.T,{css:Su.container,elevated:!0,children:[(0,r.BX)(y.G,{css:Su.header,children:[(0,r.tZ)(ku,{upstream:x,remotes:n}),(0,r.tZ)(Zu,{date:P}),(0,r.tZ)(K.zx,{css:Su.fetch,text:"Fetch",iconLeft:o?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(ii.Z,{}),onClick:function(){return X.apply(this,arguments)},loading:o,disabled:A,outlined:!0,small:!0})]}),(0,r.BX)(y.G,{css:Su.body,children:[(0,r.tZ)(bu,{hasRemoteMergeConflict:S,hasUnpulledCommits:C,hasUnpushedCommits:k,workTreeDirty:I}),(0,r.tZ)(xu,{ahead:D,behind:_}),(0,r.BX)(y.G,{css:Su.buttons,children:[(0,r.tZ)(K.zx,{css:Su.sync,text:"Synchronize",iconLeft:m?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(lc.Z,{rotate:90}),onClick:function(){return V.apply(this,arguments)},loading:m,disabled:L,small:!0}),(0,r.BX)(y.G,{css:Su.pullPush,children:[(0,r.tZ)(K.zx,{css:Su.pull,text:"Pull",iconLeft:u?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(qe.Z,{}),onClick:function(){return H.apply(this,arguments)},loading:u,disabled:U,small:!0}),(0,r.tZ)(K.zx,{css:Su.push,text:"Push",iconLeft:p?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(bc.Z,{}),onClick:function(){return z.apply(this,arguments)},loading:p,disabled:N,small:!0})]})]})]})]})}var Eu=t(72251);function Ru(e){var n=e.branch,t=(0,a.useState)(!1),i=t[0],o=t[1],l=fa(),c=(0,d.Z)().git,u=(0,Uo.Z)(function(){var e=(0,M.Z)((function(e){var n,t,r;return(0,W.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.getRemotes()];case 1:return(n=i.sent()).error?(l(n.error),[2,n]):(t=n.remotes,r="",(null===t||void 0===t?void 0:t.size)&&(r=t.has("origin")?"origin":t.keys().next().value),[2,{remote:r,error:null}])}}))}));return function(n){return e.apply(this,arguments)}}(),[l],{keepStaleResult:!1});if(null===u||void 0===u?void 0:u.error)return null;var s,f=u?u.remote:null,p=null===f,h=n.type!==Ao.HO.LOCAL||!f;function v(){return(v=(0,M.Z)((function(){return(0,W.__generator)(this,(function(e){switch(e.label){case 0:return!f||i?[2]:(o(!0),[4,c.push({publish:{remote:f}})]);case 1:return e.sent().error?o(!1):(c.forceRefresh(),Yo("branch-published-to-remote")),[2]}}))}))).apply(this,arguments)}return s=i?"Publishing...":n.type!==Ao.HO.LOCAL?"Branch has already been published":p?"Checking if branch can be published...":f?"Publish branch as '".concat(f,"/").concat(n.name,"'"):"No remotes to publish to",(0,r.tZ)(K.zx,{text:s,iconLeft:p||i?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(Eu.Z,{}),onClick:function(){return v.apply(this,arguments)},loading:p||i,disabled:h})}var Iu=(0,cn.iv)({border:"none"},g.l0.height("auto"),g.l0.py(4),g.l0.px(8));function Gu(e){var n=e.branch,t=e.remotes,i=(0,a.useMemo)((function(){if(n.type===Ao.HO.LOCAL)return[null,null,null];var e=t.get(n.remote);if(!e)return[null,null,null];var r=Ho(e),i=function(e){var n="string"===typeof e?e:e.fetch;if(Fo(n)){var t=(n=Wo(n)).split("/");if(t.length<2)return null;var r=t[t.length-2],i=t[t.length-1];return"".concat(r,"/").concat(i)}return null}(e);return[r,i,Fo(r)]}),[n,t]),o=i[0],l=i[1],c=i[2];return o&&l?(0,r.tZ)(Ze.Z,{css:Iu,text:l,href:o,target:"_blank",iconLeft:c?(0,r.tZ)(qo.Z,{}):void 0,iconRight:(0,r.tZ)(Wi.Z,{}),outlined:!0,small:!0}):null}var Du=(0,b.X)({view:[g.l0.pt(4),g.l0.pb(8),g.l0.px(4),g.l0.colWithGap(8),g.l0.flex.grow(1)],sectionContainer:[g.l0.colWithGap(8)],section:[g.l0.pt(8),g.l0.pb(16),g.l0.px(8),g.l0.colWithGap(8),g.l0.border({color:g.TV.outlineDimmest,direction:"bottom"})],remoteUpdatesHeader:[g.l0.rowWithGap(8),g.l0.align.center,g.l0.justify.spaceBetween],reviewChangesHeader:[g.l0.rowWithGap(8),g.l0.align.center],changesPill:[g.l0.fontWeight.bold],headerText:[g.l0.fontWeight.medium]});function _u(e){var n,t,i=e.status,l=e.remotes,c=e.branch,u=e.onStagedFileClick,s=e.gotoPendingState,d=e.current,f=void 0!==d&&d,p=function(e,n,t){var r=fa(),i=(0,Uo.Z)(function(){var r=(0,M.Z)((function(r){var i,a,l,c,u,s,d,f,p;return(0,W.__generator)(this,(function(h){switch(h.label){case 0:return e?!e.tracking||0===n&&0===t?(i=(0,gc.bF)(e,!0),[4,r.log({max:100,revRange:i})]):[3,2]:[2,{error:null}];case 1:return(a=h.sent()).error?[2,a]:[2,{log:a.commits,error:null}];case 2:return l=(0,gc.bF)(e),[4,Promise.all([r.log({max:100,revRange:e.name}),r.log({max:100,revRange:"".concat(e.name,"..").concat(l)}),r.log({max:100,revRange:"".concat(l,"..").concat(e.name)})])];case 3:return c=h.sent(),u=(0,o.Z)(c,3),s=u[0],d=u[1],f=u[2],(p=s.error||d.error||f.error)?[2,{error:p}]:[2,{log:s.commits,onlyRemote:d.commits,onlyLocal:f.commits,error:null}]}}))}));return function(e){return r.apply(this,arguments)}}(),[e,n,t]);return(0,a.useMemo)((function(){if(!i)return null;if(i.error)return r(i.error),{error:i.error};var e=i.log,n=i.onlyRemote,t=i.onlyLocal;if(!n&&!t)return{log:e,error:null};if(e){var o=new Set;if(n){var a=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;o.add(d.hash)}}catch(y){l=!0,c=y}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}if(t){var f=!0,p=!1,h=void 0;try{for(var v,m=t[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var g=v.value;o.add(g.hash)}}catch(y){p=!0,h=y}finally{try{f||null==m.return||m.return()}finally{if(p)throw h}}}e=e.filter((function(e){return!o.has(e.hash)}))}return{log:e,onlyRemote:n,onlyLocal:t,error:null}}),[r,i])}(c,f?null===i||void 0===i||null===(n=i.upstream)||void 0===n?void 0:n.behind:void 0,f?null===i||void 0===i||null===(t=i.upstream)||void 0===t?void 0:t.ahead:void 0),h=!!l&&l.size>0,v=(null===c||void 0===c?void 0:c.type)===Ao.HO.LOCAL,m=(0,a.useMemo)((function(){if(!p||p.error)return[];var e,n,t,o=[],a=p.log,l=void 0===a?[]:a,c=p.onlyRemote,u=void 0===c?[]:c,d=p.onlyLocal,h=void 0===d?[]:d,v=l.length>0,m=u.length>0,g=h.length>0;m&&(o.push({type:"boundary",text:"Not pulled from remote"}),f&&i&&o.push({type:"button",key:"pull-button",button:(0,r.tZ)(Zc,{status:i,gotoPendingState:s})}),(e=o).push.apply(e,(0,Nt.Z)(Pu(u))));g&&(o.push({type:"boundary",text:"Not pushed to remote"}),f&&i&&o.push({type:"button",key:"push-button",button:(0,r.tZ)(wc,{status:i})}),(n=o).push.apply(n,(0,Nt.Z)(Pu(h))));v&&((m||g)&&o.push({type:"boundary",text:"Up to date with remote"}),(t=o).push.apply(t,(0,Nt.Z)(Pu(l))));return o}),[p,i,f,s]);return c?(0,r.BX)(y.G,{css:Du.view,children:[(0,r.BX)(y.G,{css:Du.sectionContainer,children:[f?null:(0,r.tZ)(y.G,{css:Du.section,children:(0,r.tZ)(xc,{branch:c})}),v&&h?(0,r.tZ)(y.G,{css:Du.section,children:(0,r.tZ)(Ru,{branch:c})}):null,f&&!v&&l&&h?(0,r.BX)(y.G,{css:Du.section,children:[(0,r.BX)(y.G,{css:Du.remoteUpdatesHeader,children:[(0,r.tZ)(Z.xv,{css:Du.headerText,children:"Remote Updates"}),(0,r.tZ)(Gu,{branch:c,remotes:l})]}),(0,r.tZ)(Tu,{remotes:l,gotoPendingState:s})]}):null,f&&i?(0,r.BX)(y.G,{css:Du.section,children:[(0,r.BX)(y.G,{css:Du.reviewChangesHeader,children:[(0,r.tZ)(ki.D,{css:Du.changesPill,colorway:i.changes.length<=0?"grey":"primary",text:i.changes.length.toString()}),(0,r.tZ)(Z.xv,{css:Du.headerText,children:"Review Changes"})]}),(0,r.tZ)(pu,{status:i,onStagedFileClick:u})]}):null]}),p?(0,r.tZ)(fc,{items:m}):(0,r.tZ)(mc,{})]}):(0,r.tZ)("div",{children:"No branch"})}function Pu(e){return e.map((function(e){return{type:"commit",commit:e}}))}function Bu(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{children:"Unsupported state: you are in the middle of a cherry-pick."}),(0,r.tZ)(Z.xv,{children:"Please finish the cherry-pick manually."})]})}var Au=(0,cn.iv)(Nl.gU.nofill,g.l0.py(12),g.l0.px(8),g.l0.colWithGap(2),g.l0.justify.center,g.l0.borderRadius(8),g.l0.flex.shrink(1));function Uu(e){var n=e.branch,t=e.current,i=void 0!==t&&t,o=e.onPreview;return(0,r.BX)(y.G,{css:Au,tabIndex:0,role:"button","aria-label":"Preview branch ".concat((0,gc.bF)(n,!0)),onClick:o,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||null===o||void 0===o||o()},children:[(0,r.tZ)(Z.xv,{children:(0,r.tZ)(Na,{name:n.name,remote:n.type===Ao.HO.REMOTE?n.remote:null,current:i,onClick:o,icon:!0})}),(0,r.tZ)(Lu,{branch:n})]})}var Nu=(0,cn.iv)(g.l0.rowWithGap(8),g.l0.align.baseline,g.l0.flex.shrink(1));function Lu(e){var n=e.branch;return(0,r.BX)(y.G,{css:Nu,children:[(0,r.tZ)(tc,{name:n.commit.author.name,email:n.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0}),(0,r.tZ)(Vl.E,{date:n.commit.author.date,textColor:"dimmest",textVariant:"small"})]})}var Xu=(0,cn.iv)({verticalAlign:"middle"},g.l0.justify.spaceBetween),Mu=(0,cn.iv)(g.l0.display.flex),Ou=(0,cn.iv)(g.l0.p(4),g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween),Fu=(0,cn.iv)({verticalAlign:"middle"},g.l0.justify.spaceBetween,g.l0.borderRadius(8,8,0,0)),Wu=(0,cn.iv)(g.l0.borderRadius(8)),Hu=(0,cn.iv)(g.l0.borderRadius(0,0,8,8));function zu(e){var n=e.name,t=e.branches,i=e.current,o=void 0===i?null:i,l=e.switchMode,c=e.foldable,u=void 0!==c&&c,s=e.folded,d=void 0!==s&&s,f=(0,a.useState)(!!u&&d),p=f[0],h=f[1],v=(0,a.useMemo)((function(){return t.map((function(e){return(0,r.tZ)(Uu,{branch:e,current:(0,Ao.p3)(e,o),onPreview:function(){return l({mode:Wa.BRANCH,branch:e})}},(0,gc.Qj)(e))}))}),[t,o,l]);return p?(0,r.tZ)(K.zx,{css:Xu,text:n,iconRight:(0,r.tZ)(gn.Z,{}),onClick:function(){return h(!1)},big:!0}):u?(0,r.BX)(y.G,{css:Mu,children:[(0,r.tZ)(K.zx,{css:Fu,text:n,iconRight:(0,r.tZ)(mn.Z,{}),onClick:function(){return h(!0)},big:!0}),(0,r.tZ)(J.T,{css:Hu,elevated:!0,children:v})]}):(0,r.BX)(y.G,{css:Mu,children:[(0,r.tZ)(y.G,{css:Ou,children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:n})}),(0,r.tZ)(J.T,{css:Wu,elevated:!0,children:v})]})}var Vu=(0,cn.iv)(g.l0.p(8),g.l0.colWithGap(8),g.l0.borderRadius(8)),ju=(0,cn.iv)(g.l0.rowWithGap(4)),qu=(0,cn.iv)(g.l0.flex.grow(1));function $u(){var e=function(){i(!0),c("")},n=(0,a.useState)(!0),t=n[0],i=n[1],o=(0,a.useState)(""),l=o[0],c=o[1],u=(0,a.useState)(!1),s=u[0],f=u[1],p=fa(),h=(0,d.Z)().git;function v(){return m.apply(this,arguments)}function m(){return(m=(0,M.Z)((function(){var e;return(0,W.__generator)(this,(function(n){switch(n.label){case 0:return t||!l||s?[2]:(f(!0),[4,h.createBranch({name:l,checkout:!0})]);case 1:return(e=n.sent()).error?(p(e.error),f(!1)):(h.forceRefresh(),f(!1),c(""),i(!0),Yo("branch-created")),[2]}}))}))).apply(this,arguments)}if(t)return(0,r.tZ)(K.zx,{text:"Create Branch",iconLeft:(0,r.tZ)(Ri.Z,{}),onClick:function(){return i(!1)}});var g=!l||!(0,gc.Dc)(l);return(0,r.BX)(J.T,{css:Vu,elevated:!0,children:[(0,r.tZ)(Ku,{value:l,onChange:c,onSubmit:v,onCancel:e,disabled:s}),(0,r.BX)(y.G,{css:ju,children:[(0,r.tZ)(K.zx,{css:qu,text:"Cancel",onClick:e,disabled:s}),(0,r.tZ)(K.zx,{css:qu,text:"Create Branch",colorway:"primary",iconLeft:(0,r.tZ)(Ri.Z,{}),onClick:v,loading:s,disabled:g})]})]})}var Yu=(0,cn.iv)({opacity:.75});function Ku(e){var n=e.value,t=e.disabled,i=e.onChange,o=e.onSubmit,a=e.onCancel,l=function(e){(0,gc.dC)(e)&&(null===i||void 0===i||i(e))};return(0,r.tZ)(fe.II,{value:n,css:t?Yu:void 0,disabled:t,placeholder:"Enter a name for your new branch",onChange:function(e){return l(e.currentTarget.value)},onKeyDown:function(e){return function(e,t){switch(e){case"Enter":null===o||void 0===o||o(),t();break;case"Escape":null===a||void 0===a||a(),t();break;case" ":if(""===n){t();break}l(n+"-"),t()}}(e.key,(function(){return e.preventDefault()}))},onBlur:function(){""===n&&(null===a||void 0===a||a())},autoFocus:!0})}function Qu(e){var n=e.currentBranch,t=e.switchMode,i=fa(),o=(0,Uo.Z)(function(){var e=(0,M.Z)((function(e){var n,t,r,o,a,l,c,u,s,d,f,p,h,v,m,g,y,Z,b,w;return(0,W.__generator)(this,(function(x){switch(x.label){case 0:return[4,e.listBranches()];case 1:return(n=x.sent()).error?(i(n.error),[2,n]):[4,e.findDefaultBranches()];case 2:if((t=x.sent()).error)return i(t.error),[2,t];r=n.branches,o=new Set,a=!0,l=!1,c=void 0;try{for(u=function(){var e=d.value,n=r.find((function(n){return(0,gc.Pi)(n,e)}));n&&o.add(n)},s=t.refs[Symbol.iterator]();!(a=(d=s.next()).done);a=!0)u()}catch(C){l=!0,c=C}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}f=Date.now()-5184e6,p=[],h=[],v=!0,m=!1,g=void 0;try{for(y=r[Symbol.iterator]();!(v=(Z=y.next()).done);v=!0)b=Z.value,o.has(b)||(b.commit.author.date>f?p.push(b):h.push(b))}catch(C){m=!0,g=C}finally{try{v||null==y.return||y.return()}finally{if(m)throw g}}return w=Array.from(o),[2,{active:p,stale:h,important:w,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}(),[i]);if(!o)return(0,r.tZ)(mc,{});if(o.error)return(0,r.tZ)("div",{children:o.error});var a=o.active,l=o.stale,c=o.important;return(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8)],children:(0,r.BX)(y.G,{css:[g.l0.pb(8),g.l0.px(8),g.l0.colWithGap(16)],children:[n?(0,r.BX)(y.G,{css:g.l0.colWithGap(8),children:[(0,r.tZ)(zu,{branches:[n],current:n,name:"Current",switchMode:t}),(0,r.tZ)($u,{})]}):null,0===c.length?null:(0,r.tZ)(zu,{branches:c,current:n,name:"Important",switchMode:t}),0===a.length?null:(0,r.tZ)(zu,{branches:a,current:n,name:"Active",switchMode:t,foldable:!0}),0===l.length?null:(0,r.tZ)(zu,{branches:l,current:n,name:"Stale",switchMode:t,foldable:!0,folded:!0})]})})}function Ju(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{children:"Unsupported state: your HEAD is currently detached."}),(0,r.tZ)(Z.xv,{children:"Please checkout a branch."})]})}var es=t(66466),ns=t(80157),ts=(0,b.X)({container:[g.l0.colWithGap(4)],file:[g.l0.rowWithGap(8),g.l0.align.center],fileLeft:[g.l0.rowWithGap(8),g.l0.flex.grow(1),g.l0.align.center],filePrefix:[g.l0.color.foregroundDimmest]});function rs(e){var n=e.files,t=e.uniquePathMap,i=e.onFileClick,a=[];if((0,Xo.Z)(n,Map)){var l=!0,c=!1,u=void 0;try{for(var s,d=n[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=(0,o.Z)(s.value,2),p=f[0],h=f[1],v=t.get(p);a.push({path:p,prefix:v,resolved:h})}}catch(T){c=!0,u=T}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}else{var m=!0,b=!1,w=void 0;try{for(var x,C=n[Symbol.iterator]();!(m=(x=C.next()).done);m=!0){var k=x.value,S=t.get(k);a.push({path:k,prefix:S,resolved:!0})}}catch(T){b=!0,w=T}finally{try{m||null==C.return||C.return()}finally{if(b)throw w}}}return(0,r.tZ)(y.G,{css:ts.container,children:a.map((function(e){var n=e.path,t=e.prefix,o=e.resolved;return(0,r.BX)(y.G,{css:ts.file,children:[(0,r.BX)(y.G,{css:ts.fileLeft,children:[(0,r.tZ)(Go.Z,{path:n}),(0,r.tZ)(Z.xv,{children:(0,r.tZ)(Ma,{path:n,prefix:t,onClick:function(){return i(n)}})})]}),o?(0,r.tZ)(re.Z,{color:g.TV.greenStronger}):(0,r.tZ)(Ci.Z,{color:g.TV.orangeStronger})]},n)}))})}function is(e){var n=e.hasConflicts?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:g.l0.fontWeight.medium,children:"Resolve all conflicts to complete merge."}),(0,r.tZ)("br",{}),(0,r.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted."})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:g.l0.fontWeight.medium,children:"You are in the middle of a merge."}),(0,r.tZ)("br",{}),(0,r.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted. You have no conflicts to resolve, so the merge can be completed without any further action."})]});return(0,r.tZ)(ee.E,{colorway:"warning",icon:(0,r.tZ)(Ci.Z,{}),text:n})}var os=t(20247),as=(0,b.X)({container:[g.l0.rowWithGap(4),g.l0.align.center,g.l0.justify.spaceBetween],left:[{flexBasis:0,flexGrow:1},g.l0.colWithGap(8)],right:{flexBasis:0,flexGrow:1},branch:[g.l0.p(8),g.l0.rowWithGap(4),g.l0.flex.grow(1),g.l0.center,g.l0.borderRadius(8)]});function ls(e){var n,t=e.branch,i=e.refs,a=e.refsAreBranches,l=e.isUpstreamPull;if(!i.length)return null;if(l){var c=(0,o.Z)((0,Mo.Tg)(i[0]),2),u=c[0],s=c[1];u&&s&&(n=(0,r.tZ)(J.T,{css:as.branch,elevated:!0,children:(0,r.tZ)(Na,{remote:u,name:s,icon:!0,heading:!0})}))}return n||(n=i.map((function(e){return(0,r.tZ)(J.T,{css:as.branch,elevated:!0,children:(0,r.tZ)(Na,{name:e,icon:!!a||(0,r.tZ)(os.Z,{size:16}),heading:!0})},e)}))),(0,r.BX)(y.G,{css:as.container,children:[(0,r.tZ)(y.G,{css:as.left,children:n}),(0,r.tZ)(Dn.Z,{size:24,color:g.TV.foregroundDimmest}),(0,r.tZ)(y.G,{css:as.right,children:(0,r.tZ)(J.T,{css:as.branch,elevated:!0,children:(0,r.tZ)(Na,{name:t,icon:!0,current:!0,heading:!0})})})]})}var cs=(0,b.X)({container:[g.l0.colWithGap(12),g.l0.pt(16),g.l0.pb(8),g.l0.px(8)],fakePaneHeader:[g.l0.p(8),g.l0.rowWithGap(8),g.l0.backgroundColor.backgroundDefault,g.l0.align.center,{borderBottom:"1px solid ".concat(g.TV.outlineDimmer)}],conflictResolution:[g.l0.colWithGap(16)],listContainer:[g.l0.p(8),g.l0.colWithGap(8),g.l0.borderRadius(8)],list:[g.l0.pb(8),g.l0.colWithGap(8)],listDisabled:[{opacity:.5},g.l0.pb(8),g.l0.colWithGap(8)],listHeader:[g.l0.pb(4),g.l0.flex.grow(1),g.l0.border({color:g.TV.outlineDimmer,direction:"bottom"})],listFiles:[g.l0.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},g.l0.rowWithGap(8)],buttons:[g.l0.colWithGap(8)]});function us(e){var n=e.onFileClick,t=e.gotoPendingState,i=(0,a.useState)(!0),l=i[0],c=i[1],u=(0,a.useState)(!1),s=u[0],f=u[1],p=(0,a.useState)(!1),h=p[0],v=p[1],m=s||h,b=fa(),w=(0,d.Z)().git,x=(0,Fr.D)(),C=function(){var e=(0,Uo.Z)(function(){var e=(0,M.Z)((function(e){var n,t,r,i,a,l,c,u,s,d,f,p,h,v,m,g,y,Z,b,w;return(0,W.__generator)(this,(function(x){switch(x.label){case 0:return[4,e.status()];case 1:return(n=x.sent()).error?[2,n]:(t=n.branch)?[4,e.getConflictingFiles()]:[2,{error:Lo.aq.HEAD_DETACHED}];case 2:return(r=x.sent()).error?[2,r]:(i=r.files,[4,e.getMergingRefs()]);case 3:if((a=x.sent()).error)return[2,a];l=a.commits,c=a.branches,u=c.length>0,s=u?c:l,d=n.changes.filter((function(e){return!e.unmerged})).map((function(e){return e.path})),f=!0,p=!0,h=!1,v=void 0;try{for(m=i[Symbol.iterator]();!(p=(g=m.next()).done);p=!0)if(!(0,o.Z)(g.value,2)[1]){f=!1;break}}catch(C){h=!0,v=C}finally{try{p||null==m.return||m.return()}finally{if(h)throw v}}return y=Sc(n.changes.map((function(e){return e.path}))),Z=i.size>0,b=d.length>0,w=null!==n.upstream&&1===c.length&&c[0]===n.upstream.branch,[2,{refs:s,branch:t,conflictingFiles:i,otherChangedFiles:d,refsAreBranches:u,allIsResolved:f,uniquePathMap:y,hasConflicts:Z,hasOtherChanges:b,isUpstreamPull:w,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}());return e}();if((0,a.useEffect)((function(){(null===C||void 0===C?void 0:C.error)&&b(C.error)}),[null===C||void 0===C?void 0:C.error,b]),!C)return(0,r.tZ)(mc,{});if(C.error)return null;var k=C.refs,S=C.branch,T=C.conflictingFiles,E=C.otherChangedFiles,R=C.refsAreBranches,I=C.allIsResolved,G=C.uniquePathMap,D=C.hasConflicts,_=C.hasOtherChanges,P=C.isUpstreamPull;function B(){return B=(0,M.Z)((function(){var e,n,r,i,o,a,c,u,s,d,p;return(0,W.__generator)(this,(function(h){switch(h.label){case 0:if(!I||m)return[2];f(!0),e=[],n=!0,r=!1,i=void 0;try{for(o=T.keys()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)c=a.value,e.push(c)}catch(v){r=!0,i=v}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return l&&(u=e).push.apply(u,(0,Nt.Z)(E)),[4,w.stageFiles({all:!1})];case 1:return(s=h.sent()).error?(b(s.error),f(!1),[2]):[4,w.stageFiles({add:e})];case 2:return(d=h.sent()).error?(b(d.error),f(!1),[2]):[4,w.mergeContinue()];case 3:return(p=h.sent()).error?[4,w.stageFiles({all:!1})]:[3,5];case 4:return h.sent(),b(p.error),f(!1),[3,6];case 5:t(),w.forceRefresh(),h.label=6;case 6:return[2]}}))})),B.apply(this,arguments)}function A(){return(A=(0,M.Z)((function(){var e;return(0,W.__generator)(this,(function(n){switch(n.label){case 0:return m?[2]:(v(!0),[4,w.mergeAbort()]);case 1:return(e=n.sent()).error?(b(e.error),v(!1)):(t(),w.forceRefresh()),[2]}}))}))).apply(this,arguments)}var U=P?"Complete in-progress pull":"Complete in-progress merge";return D&&(U=P?"Resolve pull conflicts":"Resolve merge conflicts"),(0,r.BX)(y.G,{children:[(0,r.BX)(y.G,{css:cs.fakePaneHeader,children:[(0,r.tZ)(ns.Z,{}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:U})]}),(0,r.BX)(y.G,{css:cs.container,children:[(0,r.tZ)(ls,{branch:S,refs:k,refsAreBranches:R,isUpstreamPull:P}),(0,r.tZ)(is,{hasConflicts:D}),(0,r.BX)(J.T,{css:cs.listContainer,elevated:!0,children:[(0,r.BX)(y.G,{css:cs.list,children:[(0,r.tZ)(y.G,{css:cs.listHeader,children:(0,r.tZ)(Z.xv,{css:g.l0.fontWeight.medium,children:"Conflicting Files"})}),(0,r.tZ)(y.G,{css:cs.listFiles,children:D?(0,r.tZ)(rs,{files:T,uniquePathMap:G,onFileClick:n}):(0,r.tZ)(Z.xv,{variant:"small",color:"dimmest",children:"There are no conflicting files in this merge."})})]}),_?(0,r.BX)(y.G,{css:l?cs.list:cs.listDisabled,children:[(0,r.tZ)(y.G,{css:cs.listHeader,children:(0,r.tZ)(Z.xv,{css:g.l0.fontWeight.medium,children:"Other Changed Files"})}),(0,r.tZ)(y.G,{css:cs.listFiles,children:(0,r.tZ)(rs,{files:E,uniquePathMap:G,onFileClick:n})})]}):null]}),(0,r.BX)(y.G,{css:cs.includeOtherFiles,tag:"label",children:[(0,r.tZ)(es.X,{id:x,checked:l,onChange:function(e){return c(e.target.checked)}}),(0,r.tZ)(Z.xv,{children:"Include other changed files in commit"})]}),(0,r.BX)(y.G,{css:cs.buttons,children:[(0,r.tZ)(K.zx,{text:P?"Complete pull":"Complete merge and commit",colorway:"primary",iconLeft:s?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(ns.Z,{}),disabled:!I||m,loading:s,onClick:function(){return B.apply(this,arguments)}}),(0,r.tZ)(K.zx,{text:P?"Abort pull":"Abort merge",colorway:"negative",iconLeft:h?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(Oc.Z,{}),disabled:m,loading:h,onClick:function(){return A.apply(this,arguments)}})]})]})]})}function ss(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=fa(),o=(0,d.Z)().git;function l(){return(l=(0,M.Z)((function(){var e;return(0,W.__generator)(this,(function(r){switch(r.label){case 0:return n?[2]:(t(!0),[4,o.init()]);case 1:return(e=r.sent()).error?(t(!1),i(e.error)):(o.forceRefresh(),Yo("repository-initialized")),[2]}}))}))).apply(this,arguments)}var c=n?"Initializing...":"Initialize Git Repository";return(0,r.tZ)(K.zx,{text:c,iconLeft:n?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(Po.Z,{}),colorway:"primary",loading:n,onClick:function(){return l.apply(this,arguments)}})}var ds=(0,cn.iv)(g.l0.height("100%"),g.l0.p(16),g.l0.colWithGap(16),g.l0.center),fs=(0,cn.iv)(g.l0.colWithGap(16),g.l0.center,g.l0.flex.shrink(1));function ps(){return(0,r.BX)(y.G,{css:ds,children:[(0,r.BX)(y.G,{css:fs,children:[(0,r.tZ)(Fi.Z,{alt:"A potted plant morphing into a branching graph like structure",src:"/public/images/git/git_uninitialized_art.svg",height:300,width:280,objectFit:"contain"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Version control for your Repl."})]}),(0,r.tZ)(ss,{})]})}function hs(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{children:"Unsupported state: you are in the middle of a rebase."}),(0,r.tZ)(Z.xv,{children:"Please finish the rebase manually."})]})}function vs(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{children:"Unsupported state: you are in the middle of a revert."}),(0,r.tZ)(Z.xv,{children:"Please finish the revert manually."})]})}var ms=t(81671),gs=t(15404),ys=t(1235),Zs=(0,cn.iv)(g.l0.rowWithGap(8),g.l0.align.center);function bs(e){var n=e.username,t=e.avatar;return(0,r.BX)(y.G,{css:Zs,children:[(0,r.tZ)(ys.Z,{url:null!==t&&void 0!==t?t:"/images/evalbot/evalbot_24"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:n})]})}var ws=t(94370),xs=(0,b.X)({list:{"> div:first-child":g.l0.borderRadius(8,8,0,0),"> div:last-child":[g.l0.borderRadius(0,0,8,8),{border:"none"}]},profile:[Nl.gU.filled,g.l0.flex.row,g.l0.justify.spaceBetween,g.l0.p(12),g.l0.borderRadius(0),g.l0.border({color:g.TV.outlineDefault,direction:"bottom"})],information:[g.l0.colWithGap(4),g.l0.flex.shrink(1)],informationRow:[g.l0.rowWithGap(8),g.l0.align.center],email:[g.l0.flex.shrink(1)],connectToGithubContainer:[g.l0.colWithGap(4),g.l0.p(12),g.l0.backgroundColor.backgroundHigher],divider:[g.l0.backgroundColor.outlineDefault],connectToGitHubTitle:[g.l0.rowWithGap(4),g.l0.align.center],notConnectedText:[g.l0.pb(4)],settingsButton:{background:"transparent",border:"none","&:hover":{textDecoration:"underline"}},radio:{pointerEvents:"none"}});function Cs(e){var n=e.profiles,t=e.current,i=e.showConnectToGithub,o=e.onSelectProvider,a=(0,hu.P5)({controlName:"flag-disable-github-import"}),l=(0,ws.useRouter)(),c=(0,U.Vg)(l),u=(0,Fr.D)();return(0,r.BX)(gs.E,{name:u,css:xs.list,value:null!==t&&void 0!==t?t:"",children:[n.map((function(e){var n;n=e.provider===Lo.rG.GITHUB?"GitHub":"Default Profile";var i=void 0;return e.provider===Lo.rG.GITHUB&&(i=c?"/mobile/auth/github/app_permissions":"/auth/github/app_permissions?close=1"),(0,r.tZ)(ks,{profile:e,providerName:n,current:e.provider===t,onSelectProvider:o,settingsURL:i},e.provider)})),i?(0,r.BX)(y.G,{css:xs.connectToGithubContainer,children:[(0,r.tZ)(y.G,{css:xs.connectToGitHubTitle,children:(0,r.tZ)(bs,{username:"GitHub Account"})}),(0,r.tZ)(Z.xv,{color:"dimmest",css:xs.notConnectedText,children:"Your GitHub account is not connected."}),a?null:(0,r.tZ)(Ko,{})]}):null]})}function ks(e){var n=e.profile,t=e.current,i=e.providerName,o=e.settingsURL,a=e.onSelectProvider,l=n.provider,c=n.username,u=n.email,s=n.avatar,d=(0,Fr.D)();return(0,r.BX)(y.G,{onClick:function(){return a(l)},css:xs.profile,children:[(0,r.BX)(y.G,{css:xs.information,children:[(0,r.BX)(y.G,{css:xs.informationRow,children:[(0,r.tZ)(bs,{username:c,avatar:s}),o?(0,r.tZ)(Ze.Z,{css:xs.settingsButton,text:"".concat(i," Settings"),iconRight:(0,r.tZ)(Wi.Z,{}),href:o,target:"_blank",outlined:!0,small:!0}):(0,r.tZ)(Z.xv,{color:"dimmest",variant:"small",children:i})]}),(0,r.tZ)(Z.xv,{color:"dimmest",css:xs.email,children:u})]}),(0,r.tZ)(gs.Y,{css:xs.radio,id:d,checked:t,value:l})]})}var Ss=(0,cn.iv)(g.l0.flex.column);function Ts(){var e=(0,d.Z)().git,n=(0,Uo.Z)(function(){var e=(0,M.Z)((function(e){var n,t,r,i,o;return(0,W.__generator)(this,(function(a){return n=e.getCurrentProfile(),t=e.getProfiles(),i=null!==(r=null===n||void 0===n?void 0:n.provider)&&void 0!==r?r:null,o=!e.hasProfile(Lo.rG.GITHUB),[2,{profiles:t,current:i,hasGitHub:o,error:null}]}))}));return function(n){return e.apply(this,arguments)}}());if(!n||n.error)return null;var t=n.profiles,i=n.current,o=n.hasGitHub;return(0,r.tZ)(y.G,{css:Ss,children:(0,r.tZ)(Cs,{profiles:t,current:i,showConnectToGithub:o,onSelectProvider:function(n){e.setCurrentProfile(n),n===Lo.rG.REPLIT_DEFAULT?Yo("profile-changed",{profile:"replit"}):n===Lo.rG.GITHUB&&Yo("profile-changed",{profile:"github"})}})})}var Es=t(54907),Rs=t(62374),Is=t(62830);function Gs(){var e=(0,ct.Z)(["\n  query GithubRemoteConfigRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        description\n        isPrivate\n        slug\n        url\n      }\n    }\n  }\n"]);return Gs=function(){return e},e}function Ds(){var e=(0,ct.Z)(['\n  query GithubRemoteConfigUser {\n    currentUser {\n      ... on CurrentUser {\n        id\n        gitHubInfo {\n          accessToken\n        }\n        repositories(count: 1, after: "0") {\n          ... on RepositoryConnection {\n            items {\n              id\n            }\n          }\n        }\n      }\n    }\n  }\n']);return Ds=function(){return e},e}function _s(){var e=(0,ct.Z)(["\n  mutation GithubRemoteConfigCreateGithubRepo($input: CreateGithubRepoInput!) {\n    createGithubRepo(input: $input) {\n      ... on CreateGithubRepoResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return _s=function(){return e},e}var Ps={},Bs=(0,ut.Ps)(Gs());Ds();var As=(0,ut.Ps)(_s());var Us=(0,cn.iv)(g.l0.color.accentNegativeStronger,g.l0.pl(4));function Ns(e){var n=e.remoteName,t=e.updateRemote,i=(0,d.Z)().git,l=zo(),c=(0,Fr.H)(),u=(0,Zn.Z)(),s=(0,a.useRef)(null),f=(0,a.useRef)(null),p=(0,a.useState)(),h=p[0],v=p[1],m=function(e){var n=(0,O.Z)({},Ps,e);return st.a(Bs,n)}({variables:{replId:u}}).data,b="Repl"===(null===m||void 0===m?void 0:m.repl.__typename)?m.repl:{slug:void 0,description:void 0,isPrivate:void 0,url:void 0},w=b.slug,x=b.description,C=b.isPrivate,k=b.url,S=(0,o.Z)(function(e){var n=(0,O.Z)({},Ps,e);return wt.D(As,n)}(),2),T=S[0],E=S[1].loading,R=(0,jo.v)({onAuth:function(){Yo("github-user-connected")}}),I=(0,a.useState)(null===C||void 0===C||C),G=I[0],D=I[1],_=(0,a.useState)(w),P=_[0],B=_[1],A=(0,a.useState)(),U=A[0],N=A[1],L=(0,a.useState)(null!==x&&void 0!==x?x:k&&"Repository for https://replit.com".concat(k)),X=L[0],F=L[1],H=(0,a.useState)(),z=H[0],V=H[1],j=function(){var e=(0,M.Z)((function(e){var r,o,a;return(0,W.__generator)(this,(function(l){switch(l.label){case 0:return[4,i.getRemotes()];case 1:return(r=l.sent()).error?(v("Error finding current remotes, ".concat(r.error)),[2]):r.remotes.has(n)?[4,i.setRemoteURL({remote:n,url:e})]:[3,3];case 2:return(o=l.sent()).error?(v("Error (".concat(o.error,") setting ").concat(n," to use ").concat(e," as a remote.")),[2]):(t(e),Yo("remote-edited"),[2]);case 3:return[4,i.addRemote({name:n,url:e})];case 4:return(a=l.sent()).error?(v("Error (".concat(a.error,") adding ").concat(n," ").concat(e," as a remote.")),[2]):(t(e),Yo("remote-added"),[2])}}))}));return function(n){return e.apply(this,arguments)}}(),q=function(){var e=(0,M.Z)((function(){var e,n,t,r;return(0,W.__generator)(this,(function(i){switch(i.label){case 0:return N(void 0),V(void 0),v(void 0),P?(0,gc.GE)(P)?[4,T({variables:{input:{name:P,description:null!==x&&void 0!==x?x:null,homepage:"replit.com".concat(k),isPrivate:G,ownerType:Is.xJ.User}}})]:(N("Invalid remote name."),[2]):[2];case 1:return r=i.sent(),"UnauthorizedError"===(null===(e=r.data)||void 0===e?void 0:e.createGithubRepo.__typename)||"UserError"===(null===(n=r.data)||void 0===n?void 0:n.createGithubRepo.__typename)?(v(r.data.createGithubRepo.message),[2]):("CreateGithubRepoResult"===(null===(t=r.data)||void 0===t?void 0:t.createGithubRepo.__typename)&&(j(r.data.createGithubRepo.remoteUrl),Yo("github-repository-published")),[2])}}))}));return function(){return e.apply(this,arguments)}}();return l?(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{color:"dimmest",children:"Repository name"}),(0,r.tZ)(fe.II,{ref:s,label:"Repository name",name:"Repository name",placeholder:"Enter repository name",value:P,onChange:function(e){N(void 0),B(e.target.value)},"aria-label":"Enter a name for the GitHub repository to be created for this Repl.",onKeyDown:function(e){var n;"Enter"===e.key&&(e.preventDefault(),null===(n=f.current)||void 0===n||n.focus())}}),(0,r.tZ)(Z.xv,{css:Us,children:U}),(0,r.tZ)(ms.Z,{height:1}),(0,r.tZ)(Z.xv,{color:"dimmest",children:"Repository description"}),(0,r.tZ)(fe.B,{ref:f,maxLength:350,label:"Repository description",name:"Repository description",placeholder:"Enter repository description",value:null!==X&&void 0!==X?X:void 0,onChange:function(e){V(void 0),F(e.target.value)},"aria-label":"Enter a description for the GitHub repository to be created for this Repl."}),(0,r.tZ)(Z.xv,{css:Us,children:z}),(0,r.tZ)(ms.Z,{height:1}),(0,r.tZ)(Z.xv,{color:"dimmest",children:"Privacy"}),(0,r.BX)(Es.hE,{tag:"fieldset",id:c("privacy"),name:c("privacy"),value:G,onChange:function(e){return D(e)},row:!0,css:[g.l0.width("100%")],children:[(0,r.tZ)(Es.rK,{id:c("false"),value:!1,text:"Public",icon:(0,r.tZ)(Rs.Z,{})}),(0,r.tZ)(Es.rK,{id:c("true"),value:!0,text:"Private",icon:(0,r.tZ)(Be.Z,{})})]}),(0,r.tZ)(ms.Z,{height:2}),(0,r.tZ)(K.zx,{text:E?"Creating Repository on GitHub\u2026":"Create Repository on GitHub",colorway:"primary",iconLeft:(0,r.tZ)(qo.Z,{}),onClick:q,loading:E}),h?(0,r.tZ)(Z.xv,{css:Us,maxLines:2,children:h}):null]}):(0,r.tZ)(y.G,{children:(0,r.tZ)(K.zx,{colorway:"primary",iconLeft:(0,r.tZ)(qo.Z,{}),text:"Connect to GitHub",onClick:R})})}var Ls=(0,cn.iv)(g.l0.rowWithGap(4)),Xs=(0,cn.iv)(g.l0.flex.growAndShrink(1)),Ms=(0,cn.iv)(g.l0.color.accentNegativeStronger,g.l0.pl(4));function Os(e){var n=e.initialRemoteUrl,t=e.remoteName,i=e.updateRemote,o=(0,d.Z)().git,l=(0,a.useState)(),c=l[0],u=l[1];(0,a.useEffect)((function(){u(void 0)}),[n]);var s=(0,a.useState)(),f=s[0],p=s[1],h=(0,a.useState)(!1),v=h[0],m=h[1],g=function(){var e=(0,M.Z)((function(){var e,n,r,a;return(0,W.__generator)(this,(function(l){switch(l.label){case 0:if(l.trys.push([0,5,6,7]),!c)return[2];if(m(!0),!(0,gc.LY)(c))throw Error("Invalid remote url.");return[4,o.getRemotes()];case 1:if((e=l.sent()).error)throw Error("Error finding current remotes, ".concat(e.error));return e.remotes.has(t)?[4,o.setRemoteURL({remote:t,url:c})]:[3,3];case 2:if((n=l.sent()).error)throw Error("Error (".concat(n.error,") setting ").concat(t," to use ").concat(c," as a remote."));return Yo("remote-edited"),i(c),[2];case 3:return[4,o.addRemote({name:t,url:c})];case 4:if((r=l.sent()).error)throw Error("Error (".concat(r.error,") adding ").concat(t," ").concat(c," as a remote."));return Yo("remote-added"),[3,7];case 5:return a=l.sent(),p(a.message),[3,7];case 6:return m(!1),[7];case 7:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,r.BX)(y.G,{children:[(0,r.tZ)(fe.II,{label:"Remote URL",name:"Remote URL",placeholder:"Enter Remote URL",value:null!==c&&void 0!==c?c:n,autoComplete:"off",autoCorrect:"off",onChange:function(e){p(void 0),u(e.target.value)},inputMode:"url","aria-label":"Set remote URL to ".concat(c),onKeyDown:function(e){"Enter"===e.key&&g()}}),f?(0,r.tZ)(Z.xv,{variant:"small",css:Ms,children:f}):null,c&&c!==n?(0,r.BX)(r.HY,{children:[(0,r.tZ)(ms.Z,{height:1}),(0,r.BX)(y.G,{css:Ls,children:[(0,r.tZ)(K.zx,{css:Xs,text:"Cancel",iconLeft:(0,r.tZ)(fn.Z,{}),onClick:function(){return u(void 0)}}),(0,r.tZ)(K.zx,{css:Xs,text:v?"Saving\u2026":"Save",loading:v,colorway:"primary",iconLeft:(0,r.tZ)(re.Z,{}),onClick:g})]})]}):null]})}var Fs=(0,cn.iv)(g.l0.border({width:1,color:g.TV.outlineDimmer}),g.l0.borderRadius(8)),Ws=(0,cn.iv)(Nl.gU.filled,g.l0.flex.row,g.l0.justify.spaceBetween,g.l0.align.center,g.l0.px(8),g.l0.py(4),g.l0.borderRadius(8,8,0,0)),Hs=(0,cn.iv)(g.l0.borderRadius(8,8,0,0)),zs=(0,cn.iv)(g.l0.borderRadius(8)),Vs=(0,cn.iv)(g.l0.p(8)),js=(0,cn.iv)(g.l0.flex.growAndShrink(1));function qs(e){var n=e.title,t=e.expanded,i=e.content,o=e.onClick;return(0,r.BX)(y.G,{css:Fs,children:[(0,r.BX)(y.G,{css:[Ws,t?Hs:zs],onClick:o,children:[(0,r.tZ)(y.G,{css:js,children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:n})}),t?(0,r.tZ)(mn.Z,{size:20}):(0,r.tZ)(gn.Z,{size:20})]}),t?(0,r.tZ)(y.G,{css:Vs,children:i}):null]})}var $s,Ys="origin";function Ks(){var e=(0,Uo.Z)(function(){var e=(0,M.Z)((function(e){var n,t,r,i,a;return(0,W.__generator)(this,(function(l){switch(l.label){case 0:return[4,e.getRemotes()];case 1:return(n=l.sent()).error?[2,{url:void 0,name:Ys,error:n.error}]:(r=(0,o.Z)(null!==(t=n.remotes.values())&&void 0!==t?t:void 0,1),(i=r[0])?[2,{url:i.push||i.fetch,name:null!==(a=i.name)&&void 0!==a?a:Ys,error:null}]:[2,{url:void 0,name:Ys,error:null}])}}))}));return function(n){return e.apply(this,arguments)}}());return null==e?(0,r.BX)(y.G,{css:g.l0.center,children:[(0,r.tZ)(Z.xv,{color:"dimmest",children:"Loading remote information."}),(0,r.tZ)(mc,{})]}):(null===e||void 0===e?void 0:e.error)?null:(0,r.tZ)(Qs,{initialRemoteUrl:null===e||void 0===e?void 0:e.url,remoteName:null===e||void 0===e?void 0:e.name})}function Qs(e){var n=e.initialRemoteUrl,t=e.remoteName,i=(0,a.useState)(n),o=i[0],l=i[1],c=(0,a.useState)(),u=c[0],s=c[1],d=function(e){l(e)};return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Remote"}),(0,r.tZ)(ms.Z,{height:1}),(0,r.tZ)(Os,{remoteName:t,initialRemoteUrl:o,updateRemote:d}),(0,r.tZ)(ms.Z,{height:2}),(0,r.tZ)(qs,{title:"GitHub",expanded:u===$s.GitHub,onClick:function(){return s((function(e){return e===$s.GitHub?void 0:$s.GitHub}))},content:(0,r.tZ)(Ns,{remoteName:t,updateRemote:d})})]})}!function(e){e[e.GitHub=0]="GitHub"}($s||($s={}));var Js=(0,cn.iv)(g.l0.px(16));function ed(){return(0,r.BX)(y.G,{css:Js,children:[(0,r.tZ)(ms.Z,{height:2}),(0,r.tZ)(Ks,{}),(0,r.tZ)(ms.Z,{height:2}),(0,r.tZ)(nd,{})]})}function nd(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Commit author"}),(0,r.tZ)(ms.Z,{height:1}),(0,r.tZ)(Ts,{})]})}var td=(0,cn.iv)(g.l0.colWithGap(16),g.l0.p(8),g.l0.pt(16)),rd=(0,cn.iv)(g.l0.colWithGap(16)),id=(0,cn.iv)(g.l0.rowWithGap(8));function od(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=(0,a.useState)("Initial Commit"),o=i[0],l=i[1],c=(0,a.useState)(!0),u=c[0],s=c[1],f=fa(),p=(0,d.Z)().git,h=(0,Fr.D)();function v(){return(v=(0,M.Z)((function(){var e,r,i;return(0,W.__generator)(this,(function(a){switch(a.label){case 0:return n?[2]:(t(!0),u?[4,p.stageFiles({all:!0})]:[3,2]);case 1:return r=a.sent(),[3,4];case 2:return[4,p.stageFiles({all:!1})];case 3:r=a.sent(),a.label=4;case 4:return(e=r).error?(f(e.error),t(!1),[3,7]):[3,5];case 5:return[4,p.commit({message:o})];case 6:(i=a.sent()).error?(f(i.error),t(!1)):p.forceRefresh(),a.label=7;case 7:return[2]}}))}))).apply(this,arguments)}return(0,r.BX)(y.G,{children:[(0,r.tZ)(ld,{}),(0,r.BX)(y.G,{css:td,children:[(0,r.tZ)(ee.E,{colorway:"orange",icon:(0,r.tZ)(Ci.Z,{}),text:"Your current branch doesn't have any commits. You need to make an initial commit before continuing."}),(0,r.BX)(y.G,{css:rd,children:[(0,r.tZ)(au,{message:o,onMessageChange:l,disabled:n}),(0,r.BX)(y.G,{css:id,tag:"label",children:[(0,r.tZ)(es.X,{id:h,checked:u,onChange:function(e){return s(e.target.checked)}}),(0,r.tZ)(Z.xv,{children:"Include all files in commit"})]}),(0,r.tZ)(K.zx,{text:n?"Committing...":"Create initial commit",iconLeft:n?(0,r.tZ)(pe.Z,{}):(0,r.tZ)(re.Z,{}),colorway:"primary",disabled:!o,loading:n,onClick:function(){return v.apply(this,arguments)}})]})]})]})}var ad=(0,cn.iv)(g.l0.px(8),g.l0.py(4),g.l0.rowWithGap(8),g.l0.backgroundColor.backgroundDefault,g.l0.align.center,{borderBottom:"1px solid ".concat(g.TV.outlineDimmer)});function ld(){var e=fa(),n=(0,Uo.Z)(function(){var n=(0,M.Z)((function(n){var t;return(0,W.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.status()];case 1:return(t=r.sent()).error&&e(t.error),[2,t]}}))}));return function(e){return n.apply(this,arguments)}}(),[e]);return(null===n||void 0===n?void 0:n.error)?null:(0,r.BX)(y.G,{css:ad,children:[(0,r.tZ)(me.h,{alt:"Back to dashboard",size:18,disabled:!0,children:(0,r.tZ)(va.Z,{})}),(null===n||void 0===n?void 0:n.branch)?(0,r.tZ)(Na,{name:n.branch,current:!0,heading:!0}):null]})}function cd(e){var n=e.error;return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{children:"Failed to start the Git2 pane."}),(0,r.BX)(Z.xv,{children:["Error: ",n]})]})}var ud=(0,cn.iv)(g.l0.position.relative,g.l0.display.flex,g.l0.height("100%")),sd=(0,cn.iv)(g.l0.flex.growAndShrink(1),g.l0.overflow("auto"));function dd(e){var n=e.isActive,t=void 0!==n&&n,i=e.performPaneOperation,o=(0,a.useRef)(),l=(0,a.useState)(Wa.CURRENT_BRANCH),c=l[0],u=l[1],s=(0,a.useState)(null),f=s[0],p=s[1],h=(0,a.useState)(!1),v=h[0],m=h[1];!function(e){var n=(0,d.Z)().git;(0,a.useEffect)((function(){e&&n.forceRefresh()}),[e,n])}(t);var g=(0,Uo.Z)(function(){var e=(0,M.Z)((function(e){var n,t,r,i,o,a,l,c,u;return(0,W.__generator)(this,(function(s){switch(s.label){case 0:return[4,e.getRepositoryState()];case 1:return(n=s.sent()).error?[2,n]:(t=n.state,r=n.type,i=null,o=null,a=null,r===Bo.y5.INITIALIZING?[3,5]:[4,e.status()]);case 2:return(l=s.sent()).error?[2,l]:(i=l,[4,e.getRemotes()]);case 3:return(c=s.sent()).error?[2,c]:(o=c.remotes,i.branch?[4,e.getBranch(i.branch)]:[3,5]);case 4:if((u=s.sent()).error)return[2,u];a=u.branch,s.label=5;case 5:return[2,{state:t,type:r,status:i,remotes:o,currentBranch:a,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}()),y=!g||g.error?null:g.currentBranch,Z=(0,a.useCallback)((function(e){switch(u(e),e){case Wa.DASHBOARD:Yo("pane-mode-changed",{mode:"dashboard"});break;case Wa.BRANCH:Yo("pane-mode-changed",{mode:"branch"});break;case Wa.CURRENT_BRANCH:Yo("pane-mode-changed",{mode:"current-branch"});break;case Wa.SETTINGS:Yo("pane-mode-changed",{mode:"settings"})}}),[]),b=(0,a.useCallback)((function(){o.current?(Z(o.current),o.current=void 0):Z(Wa.DASHBOARD)}),[Z]),w=(0,a.useCallback)((function(e){var n=function(e){o.current=c,Z(e)};switch(e.mode){case Wa.DASHBOARD:n(Wa.DASHBOARD);break;case Wa.BRANCH:if((0,Ao.p3)(e.branch,y)){n(Wa.CURRENT_BRANCH);break}p(e.branch),n(Wa.BRANCH);break;case Wa.CURRENT_BRANCH:n(Wa.CURRENT_BRANCH);break;case Wa.SETTINGS:n(Wa.SETTINGS)}}),[Z,c,y]),x=(0,a.useCallback)((function(e){var n=(0,Tn.Dp)({path:e});i({operation:"open",pane:{type:n,data:{path:e}}})}),[i]),C=(0,a.useCallback)((function(){m(!0)}),[]);if(c===Wa.BRANCH&&(0,Ao.p3)(f,y)&&Z(Wa.CURRENT_BRANCH),(0,a.useEffect)((function(){return m(!1)}),[g]),v||!g||g.error)return(0,r.tZ)(fd,{children:(null===g||void 0===g?void 0:g.error)?(0,r.tZ)(cd,{error:g.error}):(0,r.tZ)(mc,{})});var k=g.status,S=g.remotes,T=g.state;switch(g.type){case Bo.y5.INITIALIZING:case Bo.y5.INTERMEDIATE:case Bo.y5.DETACHED_HEAD:return(0,r.tZ)(fd,{children:(0,r.tZ)(pd,{state:T,onFileClick:x,gotoPendingState:C})});case Bo.y5.NORMAL:return c===Wa.BRANCH&&!f||c===Wa.CURRENT_BRANCH&&!y?(0,r.tZ)(fd,{header:(0,r.tZ)(ja,{mode:Wa.DASHBOARD,branch:null,switchMode:w,onBack:b}),children:(0,r.tZ)(Qu,{currentBranch:null,switchMode:w})}):(0,r.tZ)(fd,{header:(0,r.tZ)(ja,{mode:c,branch:c===Wa.CURRENT_BRANCH?y:f,switchMode:w,onBack:b}),children:(0,r.tZ)(hd,{mode:c,status:k,remotes:S,previewBranch:f,currentBranch:y,switchMode:w,onStagedFileClick:x,gotoPendingState:C})})}}function fd(e){var n=e.header,t=e.children;return(0,r.tZ)(Fe.zt,{scope:ua,children:(0,r.BX)(y.G,{css:ud,children:[(0,r.tZ)(ha,{}),n,(0,r.tZ)(y.G,{css:sd,children:t})]})})}function pd(e){var n=e.state,t=e.onFileClick,i=e.gotoPendingState;switch(n){case Bo.yG.NOT_INITIALIZED:return(0,r.tZ)(ps,{});case Bo.yG.ON_UNBORN_BRANCH:return(0,r.tZ)(od,{});case Bo.yG.MERGING:return(0,r.tZ)(us,{onFileClick:t,gotoPendingState:i});case Bo.yG.REBASING:return(0,r.tZ)(hs,{});case Bo.yG.REVERTING:return(0,r.tZ)(vs,{});case Bo.yG.CHERRY_PICKING:return(0,r.tZ)(Bu,{});case Bo.yG.APPLYING_MAILBOX:return(0,r.tZ)(el,{});case Bo.yG.BISECTING:return(0,r.tZ)(nl,{});case Bo.yG.DETACHED_HEAD:return(0,r.tZ)(Ju,{});default:return null}}function hd(e){var n=e.mode,t=e.status,i=e.remotes,o=e.previewBranch,a=e.currentBranch,l=e.switchMode,c=e.onStagedFileClick,u=e.gotoPendingState;switch(n){case Wa.DASHBOARD:return(0,r.tZ)(Qu,{currentBranch:a,switchMode:l});case Wa.BRANCH:return(0,r.tZ)(_u,{status:t,branch:o,remotes:i,onStagedFileClick:c,gotoPendingState:u});case Wa.CURRENT_BRANCH:return(0,r.tZ)(_u,{status:t,remotes:i,branch:a,onStagedFileClick:c,gotoPendingState:u,current:!0});case Wa.SETTINGS:return(0,r.tZ)(ed,{});default:(0,No.Z)(n)}}var vd={Content:function(e){var n=e.options,t=n.isActive,i=n.performPaneOperation;return(0,r.tZ)(dd,{isActive:t,performPaneOperation:i})},Icon:function(e){var n=e.size;return(0,r.tZ)(Po.Z,{size:n})},getTitle:function(){return"Git"}},md=t(66834),gd=t(60175);function yd(e){var n=e.reversed,t=void 0!==n&&n,i=e.hideName,l=void 0!==i&&i,c=e.color,u=void 0===c?"default":c,s=(0,o.Z)((0,md.bA)(),1)[0],d=(0,a.useMemo)((function(){return[t?g.l0.rowReverseWithGap(4):g.l0.rowWithGap(4),g.l0.align.center]}),[t]);if(!s)return null;if(0===s.count)return(0,r.BX)(y.G,{css:d,children:[(0,r.tZ)(gd.Z,{size:24}),(0,r.tZ)(Z.xv,{color:u,children:"Server Authored"})]});var f=s.changes[s.version];if(!s.users)return(0,r.BX)(y.G,{css:d,children:[(0,r.tZ)(jl.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),l?null:(0,r.tZ)(Z.xv,{color:u,children:"Unknown"})]});var p=s.users[f.userId];return p?(0,r.BX)(y.G,{css:d,children:[(0,r.tZ)(jl.q,{size:24,src:p.image,username:p.username}),l?null:(0,r.tZ)(Z.xv,{color:u,children:p.username})]}):f.timestamp>16546464e5?(0,r.BX)(y.G,{css:d,children:[(0,r.tZ)(gd.Z,{size:24}),l?null:(0,r.tZ)(Z.xv,{color:u,children:"Server Authored"})]}):(0,r.BX)(y.G,{css:d,children:[(0,r.tZ)(jl.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),l?null:(0,r.tZ)(Z.xv,{color:u,children:"Unknown"})]})}function Zd(){var e=(0,ct.Z)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return Zd=function(){return e},e}function bd(){var e=(0,ct.Z)(["\n  query WorkspaceHistory2CurrentUserDate {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return bd=function(){return e},e}var wd=(0,ut.Ps)(Zd());bd();var xd=t(66091),Cd=t(5683),kd=t(83451),Sd=t(45347),Td=function(e){(0,Cd.Z)(t,e);var n=(0,Sd.Z)(t);function t(e){var r;return(0,xd.Z)(this,t),(r=n.call(this,e)).name="UserError",r}return t}((0,kd.Z)(Error));function Ed(e,n,t){return new Promise((function(r,i){try{var o=e.watchTextFile(n,{onReady:function(){var e=(0,M.Z)((function(e){var n,a;return(0,W.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,t(e)];case 1:return n=l.sent(),r(n),[3,3];case 2:return a=l.sent(),i(a),[3,3];case 3:return o(),[2]}}))}));return function(n){return e.apply(this,arguments)}}()})}catch(a){i(a)}}))}var Rd,Id=t(14948).I;function Gd(e,n){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,M.Z)((function(e,n){var t,r,i,o,a,l,c,u,s,d,f,p,h,v,m,g,y,Z;return(0,W.__generator)(this,(function(b){switch(b.label){case 0:t=new Set,r=!0,i=!1,o=void 0;try{for(a=n[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)(c=l.value).userId&&t.add(c.userId)}catch(w){i=!0,o=w}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return 0===t.size?[2,{}]:t.size>=Id?[2,Rd.TooManyUsersRequestedError]:[4,e.query({query:wd,variables:{ids:Array.from(t)}})];case 1:if(u=b.sent(),s=u.data,d=u.error)throw d;f=s.currentUser?[s.currentUser].concat((0,Nt.Z)(s.usersByIds)):s.usersByIds,p={},h=!0,v=!1,m=void 0;try{for(g=f[Symbol.iterator]();!(h=(y=g.next()).done);h=!0)Z=y.value,p[Z.id]={id:Z.id,username:Z.username,image:Z.image}}catch(w){v=!0,m=w}finally{try{h||null==g.return||g.return()}finally{if(v)throw m}}return[2,p]}}))})),Dd.apply(this,arguments)}function _d(){return _d=(0,M.Z)((function(e,n,t){var r,i,o;return(0,W.__generator)(this,(function(a){switch(a.label){case 0:return[4,Ed(e,t,function(){var e=(0,M.Z)((function(e){var n,t;return(0,W.__generator)(this,(function(r){return n=e.fetchChanges,0===(t=e.version)?[2,{isDisposed:!1,result:[]}]:[2,n(1,t,"")]}))}));return function(n){return e.apply(this,arguments)}}())];case 1:return(r=a.sent()).isDisposed?[2,{data:null,handledError:"File deleted or removed."}]:(i=r.result,[4,Gd(n,i)]);case 2:return(o=a.sent())===Rd.TooManyUsersRequestedError?[2,{data:{changes:i,users:null},handledError:null}]:[2,{data:{changes:i,users:o},handledError:null}]}}))})),_d.apply(this,arguments)}function Pd(e,n,t){return Ed(e,n,function(){var n=(0,M.Z)((function(n){var r,i,o,a,l,c,u,s,d;return(0,W.__generator)(this,(function(f){switch(f.label){case 0:if(r=n.fetchChanges,i=n.writeChange,o=n.version,t>o)throw new Error("Cannot restore to a version that does not exist");if(t===o)return[2];a=null,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,r(1,o,"")];case 2:if((l=f.sent()).isDisposed)throw new Td("File deleted or removed.");return a=l.result,[3,4];case 3:throw f.sent(),new Td("Something went wrong while restoring the file. It is possible that a bad connection is to blame. Please try again.");case 4:c=(0,Gn.Z)(a.slice(t,a.length).reverse()),u=c[0],s=c.slice(1),d=s.reduce((function(e,n){return e.compose(n.invertedChanges)}),u.invertedChanges);try{i(d)}catch(p){throw ne.Tb(p),new Td("Something went wrong while restoring the file. Maybe the file changed while you were restoring it? Please try again.")}return[4,e.flush()];case 5:return f.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}())}!function(e){e.TooManyUsersRequestedError="too_many_users"}(Rd||(Rd={}));var Bd=t(76286),Ad=(0,cn.iv)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function Ud(){var e=(0,Ce.Z)().showError,n=(0,a.useState)(!1),t=n[0],i=n[1],l=(0,a.useState)(!1),c=l[0],u=l[1],s=(0,a.useContext)(md.ox).closeHistory,f=(0,d.Z)().fs,p=(0,o.Z)((0,md.bA)(),1)[0],h=(0,Bd.j)(),v="Restore",m=!0;function b(){return(b=(0,M.Z)((function(){var n,t,r;return(0,W.__generator)(this,(function(o){switch(o.label){case 0:if(!p||!f||c)return[2];o.label=1;case 1:return o.trys.push([1,3,4,5]),u(!0),(0,Bd.p)("versionRestored"),n=p.filePath,t=p.version,[4,Pd(f,n,t+1)];case 2:return o.sent(),null===s||void 0===s||s(),[3,5];case 3:return r=o.sent(),(0,Xo.Z)(r,Td)?(e(r.message),[2]):(h(r,"restore"),[3,5]);case 4:return i(!1),u(!1),[7];case 5:return[2]}}))}))).apply(this,arguments)}return p?0===p.count?(v="No history",m=!0):c||t?(v="Restoring...",m=!0):p.playing?(v="Playing...",m=!0):p.version===p.count-1?(v="Viewing latest",m=!0):(v="Restore to here",m=!1):(v="Loading...",m=!0),(0,r.BX)(r.HY,{children:[(0,r.tZ)(K.zx,{text:v,disabled:m,onClick:function(){return i(!0)},colorway:"primary",iconLeft:(0,r.tZ)(ur.Z,{})}),p&&0!==p.count&&(0,r.tZ)(Q.u,{isOpen:t,onRequestClose:function(){c||i(!1)},children:(0,r.BX)(y.G,{css:g.l0.colWithGap(24),children:[(0,r.tZ)(Z.h4,{variant:"headerDefault",level:2,children:"Restore file version"}),(0,r.tZ)(J.T,{elevated:!0,css:[g.l0.px(16),g.l0.py(12),g.l0.borderRadius(8)],children:(0,r.BX)("dl",{css:Ad,children:[(0,r.tZ)("dt",{children:"File"}),(0,r.tZ)("dd",{children:p.filePath}),(0,r.tZ)("dt",{children:"Version"}),(0,r.BX)("dd",{children:[p.version+1,(0,r.BX)("span",{css:[g.l0.color.foregroundDimmest],children:[(0,r.tZ)("span",{css:g.l0.mx(8),children:"/"}),p.count]})]}),(0,r.tZ)("dt",{children:"Date"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Vl.E,{date:p.changes[p.version].timestamp,dateFormat:"absolute"})}),(0,r.tZ)("dt",{children:"Author"}),(0,r.tZ)("dd",{children:(0,r.tZ)(yd,{})})]})}),(0,r.tZ)(ee.E,{icon:(0,r.tZ)(Oi.Z,{}),colorway:"positive",text:"Restoring is non-destructive. The restored content will become a new version at the end of history. You can always go back to the version you just had."}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.justify.end],children:[(0,r.tZ)(K.zx,{text:"Cancel",disabled:c,onClick:function(){return i(!1)}}),(0,r.tZ)(K.zx,{text:c?"Restoring Version...":"Restore Version",disabled:c,colorway:"primary",onClick:function(){return b.apply(this,arguments)},iconLeft:(0,r.tZ)(ur.Z,{})})]})]})})]})}var Nd=t(35652);function Ld(e,n){var t=(0,o.Z)((0,md.bA)(),1)[0],i=(0,a.useRef)(null);(0,a.useImperativeHandle)(n,(function(){return i.current})),t&&i.current&&(i.current.setAttribute("aria-valuemin","1"),i.current.setAttribute("aria-valuemax",String(t.count)),i.current.setAttribute("aria-valuenow",String(t.version+1)));var l=(0,a.useMemo)((function(){return(0,r.tZ)("div",{ref:i,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:g.TV.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat(g.TV.foregroundDefault," inset")}}})}),[]);return t&&t.count>1?l:null}var Xd=(0,a.forwardRef)(Ld);function Md(e,n){var t=(0,o.Z)((0,md.bA)(),1)[0],i=(0,a.useMemo)((function(){return(0,r.BX)(r.HY,{children:[(0,r.tZ)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,r.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:g.TV.backgroundHighest,borderRadius:"2px"},children:(0,r.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:g.TV.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})}),[n]),l=(0,a.useMemo)((function(){return(0,r.tZ)("div",{ref:n,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,r.tZ)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:g.TV.backgroundHighest,borderRadius:"2px"}})})}),[n]);return t&&t.count>1?i:l}var Od,Fd=(0,a.forwardRef)(Md),Wd=["ArrowLeft","ArrowRight","Home","End"];function Hd(){var e=(0,o.Z)((0,md.bA)(),2),n=e[0],t=e[1],i=(0,a.useState)(!1),l=i[0],c=i[1],u=(0,a.useRef)(null),s=(0,a.useRef)(null),d=(0,a.useRef)(null),f=function(e){(0,Nd.A)(u,"--scrubber-transition-time",e)},p=function(e){(0,Nd.A)(u,"--scrubber-progress",e.toString())};if(n&&!l){var h=n.version/(n.count-1);p(h),n.playing?f("50ms"):f("100ms")}return(0,a.useEffect)((function(){if(n&&s.current&&d.current&&!l){var e=s.current,r=d.current,i=function(i){if(0===i.button){c(!0),r.focus();var o=e.getBoundingClientRect(),a=r.getBoundingClientRect(),l=o.width,u=a.width,s=i.target===e?u/2:i.clientX-a.left,d=null,h=function(e){var r=e-o.left-s,i=Math.max(0,Math.min(1,r/(l-u)));i!==d&&(d=i,p(i),t({version:Math.round(i*(n.count-1)),playing:!1}))};h(i.clientX);var v=function(e){f("0ms"),h(e.clientX),e.preventDefault(),e.stopPropagation()},m=function(){window.removeEventListener("pointermove",v),window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",m),f("100ms"),c(!1)};window.addEventListener("pointermove",v),window.addEventListener("pointerup",m),window.addEventListener("pointercancel",m),i.preventDefault(),i.stopPropagation()}};return e.addEventListener("pointerdown",i),r.addEventListener("pointerdown",i),function(){e.removeEventListener("pointerdown",i),r.removeEventListener("pointerdown",i)}}}),[n,t,l]),(0,a.useEffect)((function(){if(n&&d.current&&!l){var e=d.current,r=function(e){if(n&&Wd.includes(e.key)){var r=e.shiftKey?10:1,i=n.version,o=n.count-1,a=Math.max(0,i-r),l=Math.min(o,i+r),c=null;switch(e.key){case"ArrowLeft":c=a;break;case"ArrowRight":c=l;break;case"Home":c=0;break;case"End":c=o}null!==c&&(t({version:c,playing:!1}),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",r),function(){e.removeEventListener("keydown",r)}}}),[n,t,l]),(0,a.useMemo)((function(){return(0,r.BX)(y.G,{innerRef:u,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,r.tZ)(Fd,{ref:s}),(0,r.tZ)(Xd,{ref:d})]})}),[])}!function(e){e.None="0ms",e.Normal="100ms",e.Fast="50ms"}(Od||(Od={}));var zd=t(67590);function Vd(e){var n=(0,a.useState)({data:null,loading:!0,error:null,handledError:null}),t=n[0],r=n[1],i=(0,d.Z)().fs,o=(0,zd.x)();return(0,a.useEffect)((function(){if(e){r({data:null,loading:!0,error:null,handledError:null});var n=!1;return function(e,n,t){return _d.apply(this,arguments)}(i,o,e).then((function(e){var t=e.data,i=e.handledError;n||r(i?{data:null,loading:!1,error:null,handledError:i}:{data:t,loading:!1,error:null,handledError:null})})).catch((function(e){n||((0,Xo.Z)(e,Error)||(e=new Error(e)),r({data:null,loading:!1,error:e,handledError:null}))})),function(){n=!0}}r({data:null,loading:!1,error:null,handledError:null})}),[e,i,o]),t}function jd(){var e=(0,a.useContext)(md.ox).closeHistory;if(!e)throw new Error("history pane context not found");return(0,r.tZ)(K.zx,{text:"Cancel",onClick:function(){(0,Bd.p)("historyExplicitlyClosed"),e()}})}var qd=t(84404),$d=(0,cn.iv)({filter:"grayscale(100%) opacity(0.5)",pointerEvents:"none"});function Yd(){var e,n="/replEnvironmentMobile"===(0,ws.useRouter)().pathname,t=(0,o.Z)((0,md.bA)(),2),i=t[0],a=t[1],l=(0,Fr.H)(),c=!i||0===i.count;return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center,c?$d:null],children:[(0,r.tZ)(qd.Z,{id:l("diffButton"),isOn:null!==(e=null===i||void 0===i?void 0:i.comparing)&&void 0!==e&&e,onChange:function(e){if(!c){var n=e.target.checked;a({comparing:n})}}}),(0,r.tZ)("label",{css:[{cursor:"pointer",userSelect:"none"},g.l0.flex.column,g.l0.align.center],htmlFor:l("diffButton"),children:(0,r.tZ)(Z.xv,{children:n?"Compare":"Compare Latest"})})]})}function Kd(){var e=(0,o.Z)((0,md.bA)(),1)[0],n=0,t=0;e&&0!==e.count&&(n=e.version+1,t=e.count);var i=e?"default":"dimmer";return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.justify.spaceBetween],children:[(0,r.tZ)(Z.xv,{css:{minWidth:"2ch",textAlign:"right"},color:i,children:n}),(0,r.tZ)(Z.xv,{css:{width:"1ch",textAlign:"center"},color:"dimmer",children:"/"}),(0,r.tZ)(Z.xv,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",children:t})]})}var Qd=t(80877),Jd=t(32670);function ef(e){if(e<0)throw new Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}function nf(){var e,n,t,i,l=(0,o.Z)((0,md.bA)(),2),c=l[0],u=l[1],s=(null!==(n=null===c||void 0===c||null===(e=c.changes)||void 0===e?void 0:e.length)&&void 0!==n?n:1)-1,d=null!==(t=null===c||void 0===c?void 0:c.version)&&void 0!==t?t:0,f=null!==(i=null===c||void 0===c?void 0:c.playing)&&void 0!==i&&i,p=!c||0===c.count,h=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ef,i=(0,a.useState)(!1),o=i[0],l=i[1],c=(0,a.useCallback)((function(){n(1)}),[n]),u=(0,a.useCallback)((function(){e+1>t?l(!1):n(e+1)}),[n,e,t]),s=function(){l(!0)},d=function(){l(!1)};return(0,a.useEffect)((function(){if(o){var e=setTimeout((function(){u()}),r(t));return function(){return clearTimeout(e)}}}),[o,u,r,t]),{isPlaying:o,start:s,stop:d,reset:c}}(d,(function(e){return u({version:e})}),s),v=h.isPlaying,m=h.start,g=h.stop;(0,a.useEffect)((function(){v&&!f?g():!v&&f&&m()}),[f,v,m,g]);var y="Loading...";return c&&(v?y="Pause":c.version===c.count-1?y="Play file history from beginning":0===c.version?y="Play file history":c.version>0&&(y="Play file history from here")),(0,r.tZ)(me.h,{alt:y,size:24,disabled:p,onClick:function(){u(d===s?{version:0,playing:!0}:{playing:!f})},children:v?(0,r.tZ)(Jd.Z,{}):(0,r.tZ)(Qd.Z,{})})}function tf(){return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.align.center],children:[(0,r.tZ)(nf,{}),(0,r.tZ)(rf,{}),(0,r.tZ)(Kd,{}),(0,r.tZ)(of,{})]})}function rf(){var e=(0,o.Z)((0,md.bA)(),2),n=e[0],t=e[1],i=!n||0===n.version||0===n.count;return(0,r.tZ)(me.h,{alt:"Move backwards one version",size:24,disabled:i,onClick:function(){n&&n.version>0&&t({version:n.version-1})},children:(0,r.tZ)(va.Z,{})})}function of(){var e=(0,o.Z)((0,md.bA)(),2),n=e[0],t=e[1],i=!n||n.version===n.count-1||0===n.count;return(0,r.tZ)(me.h,{alt:"Move forwards one version",size:24,disabled:i,onClick:function(){n&&n.version<n.count-1&&t({version:n.version+1})},children:(0,r.tZ)(he.Z,{})})}function af(){var e=(0,o.Z)((0,md.bA)(),1)[0];if(!e||0===e.count)return null;var n=e.changes[e.version].timestamp;return(0,r.tZ)(Vl.E,{textColor:"dimmer",dateFormat:"switch",date:n})}function lf(e){var n=e.filePath,t="/replEnvironmentMobile"===(0,ws.useRouter)().pathname,i=t?g.l0.borderRadius(0):g.l0.borderRadius(0,0,8,8),l=(0,o.Z)((0,md.bA)(),2),c=l[0],u=l[1],s=(0,Bd.j)(),d=Vd(n),f=d.data,p=d.loading,h=d.error;return(0,a.useEffect)((function(){if(h)s(h,"history2-index",{filePath:n});else if(f&&!p)return u({filePath:n,changes:f.changes,users:f.users}),(0,Bd.p)("historyLoaded"),function(){u(null)}}),[n,f,p,h,u,s]),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.p(8),g.l0.zIndex(3),g.l0.overflow("hidden"),i,g.l0.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat(g.TV.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],children:[(0,r.BX)(J.T,{css:[g.l0.position.relative,g.l0.colWithGap(4),g.l0.px(12),g.l0.pt(8),g.l0.pb(8),g.l0.align.center,g.l0.borderRadius(8),g.l0.overflow("hidden")],elevated:!0,children:[(0,r.tZ)(Hd,{}),(0,r.BX)(y.G,{css:[g.l0.display.flex,g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween,g.l0.width("100%")],children:[(0,r.tZ)(tf,{}),c&&c.count>0?(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.align.center],children:[(0,r.tZ)(af,{}),p||t?null:(0,r.tZ)(Z.xv,{color:"dimmer",children:"\u2022"}),(0,r.tZ)(yd,{color:"dimmer",hideName:t,reversed:!0})]}):null]})]}),(0,r.BX)(y.G,{css:[g.l0.display.flex,g.l0.flex.row],children:[(0,r.tZ)(cf,{justify:"flex-start",children:(0,r.tZ)(Yd,{})}),(0,r.BX)(cf,{justify:"flex-end",children:[(0,r.tZ)(jd,{}),(0,r.tZ)(Ud,{})]})]})]})}function cf(e){var n=e.children,t=e.justify;return(0,r.tZ)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:t,columnGap:g.TV.space8,minWidth:0},children:n})}var uf=t(12417),sf=t(52682),df=t(52934),ff=t(59660),pf=(0,df.B)();function hf(e){if((0,Xo.Z)(e,Ut.YW)){var n=e.state.field(pf.state,!1);return{compareTo:n,changed:e.startState.field(pf.state,!1)!==n}}return{compareTo:e.field(pf.state,!1),changed:!1}}function vf(e,n){e.state.field(pf.state,!1)!==n&&e.dispatch({effects:pf.effect.of(n)})}var mf,gf,yf=Ut.QQ.define({create:function(){return null},update:function(e,n){var t=hf(n),r=t.compareTo,i=t.changed;if(!r)return null;if(!n.docChanged&&!i)return e;var o=n.state.doc.toString();return new ff.PO(o,r)}}),Zf=null!==(mf=globalThis.requestIdleCallback)&&void 0!==mf?mf:globalThis.requestAnimationFrame,bf=null!==(gf=globalThis.cancelIdleCallback)&&void 0!==gf?gf:globalThis.cancelAnimationFrame,wf=Dt.p.line({class:"cm-diff-deleted"}),xf=function(e){(0,Cd.Z)(t,e);var n=(0,Sd.Z)(t);function t(e,r){var i;return(0,xd.Z)(this,t),(i=n.call(this)).insertion=e,i.highlight=r,i}var r=t.prototype;return r.destroy=function(){this.pendingHighlight&&bf(this.pendingHighlight)},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e},r.eq=function(e){return!e.pendingHighlight&&this.insertion===e.insertion},r.updateDOM=function(e){var n=this;return this.pendingHighlight&&(bf(this.pendingHighlight),this.pendingHighlight=null),this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",this.highlight&&this.insertion.length&&(this.pendingHighlight=Zf((function(){if(n.highlight){n.pendingHighlight=null;try{var t=n.highlight();e.innerHTML="",e.append(t)}catch(r){}}}))),!0},t}(Dt.l9),Cf=Ut.QQ.define({create:function(){return Dt.p.none},update:function(e,n){var t=n.state.field(yf,!1);if(!t)return Dt.p.none;var r=hf(n).changed;if(!n.docChanged&&!r)return e.map(n.changes);var i=[],o=function(e,n){i.push({from:e,to:e,value:n})},a=t.startInsertions();if(a){var l=!0,c=!1,u=void 0;try{for(var s,d=function(){var e=s.value,t=new xf(e.content,(function(){return kf(n.state,e.content)}));o(0,Dt.p.widget({widget:t,side:-1,block:!0}))},f=a[Symbol.iterator]();!(l=(s=f.next()).done);l=!0)d()}catch(Z){c=!0,u=Z}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}}var p=!0,h=!1,v=void 0;try{for(var m,g=function(){var e=m.value;if(e.isDeleted&&o(e.from,wf),e.insertions){var t=!0,r=!1,i=void 0;try{for(var a,l=function(){var t=a.value,r=new xf(t.content,(function(){return kf(n.state,t.content)}));o(e.to,Dt.p.widget({widget:r,side:1,block:!0}))},c=e.insertions[Symbol.iterator]();!(t=(a=c.next()).done);t=!0)l()}catch(Z){r=!0,i=Z}finally{try{t||null==c.return||c.return()}finally{if(r)throw i}}}},y=t.lines()[Symbol.iterator]();!(p=(m=y.next()).done);p=!0)g()}catch(Z){h=!0,v=Z}finally{try{p||null==y.return||y.return()}finally{if(h)throw v}}return Dt.p.set(i,!0)},provide:function(e){return Dt.tk.decorations.from(e)}});function kf(e,n){var t,r=document.createDocumentFragment(),i=null===(t=e.facet(uf.dK))||void 0===t?void 0:t.parser;if(!i){var o=document.createElement("span");return o.textContent=n,r.append(o),r}var a=i.parse(n),l={style:function(n){return(0,uf.QN)(e,n)}},c=0;if((0,sf.bW)(a,l,(function(e,t,i){if(e>c){var o=document.createElement("span");o.textContent=n.slice(c,e),r.append(o)}var a=document.createElement("span");a.className=i,a.textContent=n.slice(e,t),r.append(a),c=t})),c<n.length){var u=document.createElement("span");u.textContent=n.slice(c),r.append(u)}return r}var Sf,Tf=function(e){(0,Cd.Z)(t,e);var n=(0,Sd.Z)(t);function t(e){var r;return(0,xd.Z)(this,t),(r=n.call(this)).line=e,r}var r=t.prototype;return r.eq=function(e){return this.line===e.line},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e},t}(Dt.SJ),Ef=function(e){(0,Cd.Z)(t,e);var n=(0,Sd.Z)(t);function t(e,r){var i;return(0,xd.Z)(this,t),(i=n.call(this)).elementClass="cm-diff-gutter-block",i.lines=e,r&&(i.preceding=r),i}var r=t.prototype;return r.eq=function(e){var n,t,r,i;if((null===(n=this.lines)||void 0===n?void 0:n.length)!==(null===e||void 0===e||null===(t=e.lines)||void 0===t?void 0:t.length))return!1;if((null===(r=this.preceding)||void 0===r?void 0:r.length)!==(null===e||void 0===e||null===(i=e.preceding)||void 0===i?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var o=0;o<this.preceding.length;o++){var a=this.preceding[o],l=e.preceding[o];if(a.height!==l.height||a.left!==l.left||a.right!==l.right)return!1}if(this.lines&&e.lines)for(var c=0;c<this.lines.length;c++){var u=this.lines[c],s=e.lines[c];if(u.height!==s.height||u.left!==s.left||u.right!==s.right)return!1}return!0},r.toDOM=function(){var e,n=this,t=document.createElement("div");if(this.preceding){var r=this.preceding.slice().reverse(),i=0,o=!0,a=!1,l=void 0;try{for(var c,u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;i+=s.height;var d=this.piece(s);d.style.position="absolute",d.style.top="-".concat(i,"px"),t.prepend(d)}}catch(p){a=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}var f=this.lines.map((function(e){return n.piece(e)}));return(e=t).append.apply(e,(0,Nt.Z)(f)),t},r.piece=function(e){var n=e.height,t=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==t&&(i.innerText=t.toString());var o=document.createElement("span");o.className="cm-diff-gutter-part",null!==r&&(o.innerText=r.toString());var a=document.createElement("div");return a.className="cm-diff-gutter-element",a.style.height="".concat(n,"px"),a.append(i,o),null!==t&&null!==r||(null===r&&a.classList.add("cm-diff-gutter-deleted"),null===t&&a.classList.add("cm-diff-gutter-inserted")),a},t}(Dt.SJ),Rf=(0,Dt.v5)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var n=e.viewportLineBlocks,t=[],r=hf(e.state).compareTo,i=e.state.field(yf,!1),o=function(e,n){t.push({from:e,to:e,value:n})};if(!r||!i){var a=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value,f=e.state.doc.lineAt(d.from).number;if(d.type===Dt.kH.Text)o(d.from,new Tf(f));else if(Array.isArray(d.type)){var p=!0,h=!1,v=void 0;try{for(var m,g=d.type[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var y=m.value;if(y.type===Dt.kH.Text){o(y.from,new Tf(f));break}}}catch(ie){h=!0,v=ie}finally{try{p||null==g.return||g.return()}finally{if(h)throw v}}}}}catch(ie){l=!0,c=ie}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return Ut.Xs.of(t,!0)}var Z=!0,b=!1,w=void 0;try{for(var x,C=n[Symbol.iterator]();!(Z=(x=C.next()).done);Z=!0){var k=x.value,S=[],T=e.state.doc.lineAt(k.from).number,E=i.line(T);if(E){var R,I=e.defaultLineHeight,G=E.offset,D=E.isDeleted,_=E.insertions,P=1===T?i.startInsertions():null,B=P?P.length:0,A=P?[]:null;if(Array.isArray(k.type)&&k.type.length>=B+(null!==(R=null===_||void 0===_?void 0:_.length)&&void 0!==R?R:0)+1){for(var U=0;U<k.type.length;U++){var N=k.type[U];if((null===N||void 0===N?void 0:N.type)===Dt.kH.Text){if(P&&A)for(var L=0;L<P.length;L++){var X,M=P[L],O=k.type[U-L-1];A.push({height:null!==(X=null===O||void 0===O?void 0:O.height)&&void 0!==X?X:I,left:null,right:M.number})}if(S.push({height:N.height,left:T,right:D?null:T+G}),_)for(var F=0;F<_.length;F++){var W,H=_[F],z=k.type[U+F+1];S.push({height:null!==(W=null===z||void 0===z?void 0:z.height)&&void 0!==W?W:I,left:null,right:H.number})}break}}o(k.from,new Ef(S,A))}else{if(P&&A){var V=!0,j=!1,q=void 0;try{for(var $,Y=P[Symbol.iterator]();!(V=($=Y.next()).done);V=!0){var K=$.value;A.push({height:I,left:null,right:K.number})}}catch(ie){j=!0,q=ie}finally{try{V||null==Y.return||Y.return()}finally{if(j)throw q}}}if(S.push({height:k.height,left:T,right:D?null:T+G}),_){var Q=!0,J=!1,ee=void 0;try{for(var ne,te=_[Symbol.iterator]();!(Q=(ne=te.next()).done);Q=!0){var re=ne.value;S.push({height:I,left:null,right:re.number})}}catch(ie){J=!0,ee=ie}finally{try{Q||null==te.return||te.return()}finally{if(J)throw ee}}}o(k.from,new Ef(S,A))}}}}catch(ie){b=!0,w=ie}finally{try{Z||null==C.return||C.return()}finally{if(b)throw w}}return Ut.Xs.of(t,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var n=!0,t=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){if(hf(i.value).changed)return!0}}catch(a){t=!0,r=a}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!1},initialSpacer:function(e){return new Tf(e.state.doc.lines)},updateSpacer:function(e,n){var t=n.state.doc.lines;return hf(n.state).compareTo?new Ef([{height:0,left:t,right:t}]):new Tf(t)}}),If="#0053A644",Gf="#c93c3733",Df=[Dt.tk.baseTheme({".cm-diff-inserted":{backgroundColor:If},".cm-diff-deleted":{backgroundColor:Gf},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:If,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:Gf,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),pf.state,yf,Cf,Rf,(0,uf.mi)({openText:"\u25bc",closedText:"\u25b6\ufe0e"})],_f=t(57988),Pf=function(){function e(n){var t=this;(0,xd.Z)(this,e),this.view=n,this.overlay=document.createElement("div"),this.overlay.className="cm-overlay-generic",this.overlay.style.pointerEvents="none",this.overlay.style.contain="size style",this.overlay.setAttribute("aria-hidden","true"),this.view.scrollDOM.appendChild(this.overlay),this.elements=new Map,this.measureRequest={key:this,read:function(){var e=[],n=t.view.scrollDOM.getBoundingClientRect(),r=t.view.scrollDOM.scrollTop,i=t.view.scrollDOM.scrollLeft,o=!0,a=!1,l=void 0;try{for(var c,u=t.elements.values()[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,d=s.dom,f=s.pos,p=s.offsetX,h=s.offsetY,v=t.view.coordsAtPos(f),m=t.view.lineBlockAt(f);if(v){var g=m.top-r+n.top+t.view.documentPadding.top,y=Math.round((v.top-g)/t.view.defaultLineHeight)*t.view.defaultLineHeight+g,Z=i+v.left-n.left+p,b=r+y-n.top+h;e.push({dom:d,x:Z,y:b})}else e.push({dom:d,x:null,y:null})}}catch(w){a=!0,l=w}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return e},write:function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=function(){var e=i.value,n=e.dom,t=e.x,r=e.y;if(null===t||null===r)return n.style.visibility="hidden",n.style.transition="none","continue";n.style.visibility="",n.style.transform="translate(".concat(t,"px, ").concat(r,"px)"),n.style.transition.startsWith("none")&&requestAnimationFrame((function(){n.style.transition=""}))},a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0)o()}catch(l){t=!0,r=l}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}}}}var n=e.prototype;return n.destroy=function(){this.view.scrollDOM.removeChild(this.overlay)},n.map=function(e){if(e.geometryChanged||e.viewportChanged){if(e.docChanged){var n=Array.from(this.elements.values()),t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=e.changes.mapPos(l.pos,-1,Ut.gc.TrackDel);c?l.pos=c:this.removeElement(l.dom)}}catch(u){r=!0,i=u}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}}this.view.requestMeasure(this.measureRequest)}},n.addElement=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.elements.has(e)){var i={dom:e,pos:n,offsetX:t,offsetY:r};return this.elements.set(e,i),this.overlay.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.willChange="transform",e.style.transition="none",this.view.requestMeasure(this.measureRequest),i}},n.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),e.parentNode===this.overlay&&this.overlay.removeChild(e))},n.updateElement=function(e,n){var t=n.pos,r=n.offsetX,i=n.offsetY,o=this.elements.get(e);o&&(void 0!==t&&(o.pos=t),void 0!==r&&(o.offsetX=r),void 0!==i&&(o.offsetY=i),this.view.requestMeasure(this.measureRequest))},n.clear=function(){this.elements.clear(),this.overlay.innerHTML=""},e}();!function(e){e[e.Insertion=0]="Insertion",e[e.Deletion=1]="Deletion"}(Sf||(Sf={}));var Bf=Symbol.iterator,Af=function(){function e(n){(0,xd.Z)(this,e),this.map=new Map,this.duration=n}var n=e.prototype;return n.set=function(e,n,t,r,i){var o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),o.set(n,{from:e,to:n,time:t,type:r,cursor:i})},n.get=function(e,n){var t=this.map.get(e);if(t)return t.get(n)},n.update=function(n){var t=Date.now(),r=new e(this.duration),i=!0,o=!1,a=void 0;try{for(var l,c=this[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;if(!(t-u.time>this.duration)){var s=n.changes.mapPos(u.from,-1,Ut.gc.TrackDel),d=n.changes.mapPos(u.to,-1,Ut.gc.TrackDel);if(null!==s&&null!==d){var f=u.cursor;n.docChanged&&(f=!1),r.set(s,d,u.time,u.type,f)}}}}catch(p){o=!0,a=p}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n.changes.iterChangedRanges((function(e,n,i,o){var a=i!==o?Sf.Insertion:Sf.Deletion;r.set(i,o,t,a,!0)}),!0),r},n.cursors=function(){var e,n,t,r,i,o,a;return(0,W.__generator)(this,(function(l){switch(l.label){case 0:e=!0,n=!1,t=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),r=this[Symbol.iterator](),l.label=2;case 2:return(e=(i=r.next()).done)?[3,5]:(o=i.value).cursor?[4,{type:o.type,pos:o.to}]:[3,4];case 3:l.sent(),l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),n=!0,t=a,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 8:return[2]}}))},n[Bf]=function(){var e=[],n=!0,t=!1,r=void 0;try{for(var i,o=this.map.values()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=!0,c=!1,u=void 0;try{for(var s,d=a.values()[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;e.push(f)}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}}catch(p){t=!0,r=p}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e[Symbol.iterator]()},e}(),Uf=1e3,Nf="cm-flash-insertion",Lf="cm-flash-deletion",Xf="cm-flash-element",Mf=Dt.tk.theme((0,i.Z)({},".".concat(Nf,", .").concat(Lf),{display:"inline-block"}));function Of(e){return Dt.p.mark({class:Lf,tagName:Xf,attributes:{"data-time":e.toString()}})}function Ff(e,n){var t=e===Sf.Insertion?"rgba(0, 100, 255, 1)":"rgba(255, 32, 32, 1)",r=document.createElement("div");return r.style.width="3px",r.style.height=n,r.style.borderRadius="1px",r.style.backgroundColor=t,r.animate&&r.animate({opacity:[1,0]},{duration:500,delay:400,fill:"forwards"}),r}var Wf=function(e){(0,Cd.Z)(t,e);var n=(0,Sd.Z)(t);function t(){return(0,xd.Z)(this,t),n.apply(this,arguments)}var r=t.prototype;return r.isNested=function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if((0,Xo.Z)(e,t)&&e.type===this.type)return!0;e=e.parentElement}return!1},r.stop=function(){var e,n;null===(e=this.animation)||void 0===e||null===(n=e.cancel)||void 0===n||n.call(e)},r.play=function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var n=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(n>Uf)){var t=this.type===Sf.Insertion?"rgba(100, 255, 0, 0.3)":"rgba(255, 32, 32, 0.25)",r={backgroundColor:e?[t,t,"transparent"]:["transparent",t,"transparent"],offset:[0,.05,1]},i={id:"cm-flash-anim",duration:Uf,easing:"ease-in-out",delay:-n};this.animate&&(this.animation=this.animate(r,i))}}},r.connectedCallback=function(){this.play()},r.attributeChangedCallback=function(e,n,t){"data-time"===e&&t&&this.play()},(0,_f.Z)(t,[{key:"type",get:function(){return this.classList.contains(Nf)?Sf.Insertion:Sf.Deletion}},{key:"isPlaying",get:function(){var e;return"running"===(null===(e=this.animation)||void 0===e?void 0:e.playState)}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),t}((0,kd.Z)(HTMLElement));customElements.get(Xf)||customElements.define(Xf,Wf);var Hf=function(){function e(n){(0,xd.Z)(this,e),this.view=n,this.prevFlashes=new Af(Uf),this.decorations=Dt.p.set([]),this.hasRenderedOnce=!1,this.overlay=new Pf(n)}var n=e.prototype;return n.destroy=function(){this.overlay.destroy()},n.update=function(e){if(this.hasRenderedOnce){var n,t=this.prevFlashes.update(e),r=[],i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;switch(u.type){case Sf.Insertion:r.push({from:u.from,to:u.to,value:(n=u.time,Dt.p.mark({class:Nf,tagName:Xf,attributes:{"data-time":n.toString()}}))});break;case Sf.Deletion:var s=e.state.wordAt(u.from);s&&r.push({from:s.from,to:u.to,value:Of(u.time)})}}}catch(w){o=!0,a=w}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}this.overlay.clear();var d=this.view.defaultLineHeight.toString()+"px",f=!0,p=!1,h=void 0;try{for(var v,m=t.cursors()[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var g=v.value,y=g.type,Z=g.pos,b=Ff(y,d);this.overlay.addElement(b,Z)}}catch(w){p=!0,h=w}finally{try{f||null==m.return||m.return()}finally{if(p)throw h}}this.prevFlashes=t,this.decorations=Dt.p.set(r,!0)}else e.docChanged&&(this.hasRenderedOnce=!0)},e}(),zf=Dt.lg.fromClass(Hf,{decorations:function(e){return e.decorations}}),Vf=Ut.Wl.lowest([Mf,zf]),jf=t(47799),qf=t(28021),$f=t(12824),Yf=t(47019),Kf=t(51729),Qf=function(){function e(n){(0,xd.Z)(this,e),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var t=!0,r=!1,i=void 0;try{for(var o,a=this,l=function(){var e=o.value,n=e.changes,t=e.invertedChanges,r=null,i=!1;n.iterChangedRanges((function(e,n,t,o){i||(r||(r=o),t!==o&&(i=!0))})),a.forward.push(n),a.inverted.push(t),a.locations.push(r)},c=n[Symbol.iterator]();!(t=(o=c.next()).done);t=!0)l()}catch(u){r=!0,i=u}finally{try{t||null==c.return||c.return()}finally{if(r)throw i}}}var n=e.prototype;return n.slice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(e>this.length||n>this.length||e<0||n<0)throw new Error("Invalid version range");if(e===n){if(0===this.length)return[Ut.as.empty(0),null];var t=this.forward[e].newLength;return[Ut.as.empty(t),null]}var r,i=Jf(e<n?this.forward.slice(e,n):this.inverted.slice(n,e).reverse()),o=e<n?e:n-1,a=null!==(r=this.locations[o])&&void 0!==r?r:null;return null!==a&&a>i.newLength&&(a=i.newLength),[i,a]},n.get=function(e){if(e>this.length||e<0)throw new Error("Invalid version");return this.changes[e]},n.documentFor=function(e){if(e>this.length||e<0)throw new Error("Invalid version");if(0===this.length)return"";var n=(0,o.Z)(this.slice(0,e),1)[0],t=Ut.xv.of([""]);return n.apply(t).sliceString(0)},(0,_f.Z)(e,[{key:"length",get:function(){return this.forward.length}}]),e}();function Jf(e){if(0===e.length)return Ut.as.empty(0);if(1===e.length)return e[0];var n=(0,Gn.Z)(e),t=n[0],r=n.slice(1),i=t,o=!0,a=!1,l=void 0;try{for(var c,u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;i=i.compose(s)}}catch(d){a=!0,l=d}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return i}function ep(e,n){var t=(0,a.useMemo)((function(){return(null===n||void 0===n?void 0:n.changes)?new Qf(n.changes):null}),[null===n||void 0===n?void 0:n.changes]),r=(0,a.useMemo)((function(){return t?t.documentFor(t.length):null}),[t]),i=(0,a.useRef)({current:-1,next:0,pending:!1});(0,a.useEffect)((function(){if(e)return function(){i.current.pending=!1,i.current={current:-1,next:0,pending:!1}}}),[e]),(0,a.useEffect)((function(){if(e&&n&&t){n.comparing?vf(e,r):vf(e,null);var a=i.current;a.next=n.version,a.pending||a.current===a.next||(a.pending=!0,requestAnimationFrame((function(){!1!==a.pending&&(a.pending=!1,e&&t&&a.current!==a.next&&(!function(e,n,t,r){var i=(0,o.Z)(n.slice(t+1,r+1),2),a=i[0],l=i[1];if(a.length!==e.state.doc.length){var c=(0,o.Z)(n.slice(0,r+1),1)[0];if(c.length!==e.state.doc.length)throw new Error("Unresolvable mismatch between changes and document");return e.dispatch({changes:{from:0,to:e.state.doc.length}}),void e.dispatch({changes:c})}e.dispatch({changes:a,effects:l?Dt.tk.scrollIntoView(l,{yMargin:10}):void 0})}(e,t,a.current,a.next),a.current=a.next))})))}}),[e,n,t,r])}var np=[Vf,Df];function tp(e){var n=e.filePath,t=(0,o.Z)((0,md.bA)(),1)[0],i=(0,Bd.j)(),a=(0,ie.Z)({filePath:n,noHistory:!0,readOnly:!0,hideGutter:!0,extensions:np,onException:function(e){i(e,"viewer-codemirror")}}),l=a.view,c=a.ref;return(0,jf.VD)(l),(0,md._H)(l),(0,$f.ZP)({view:l}),(0,qf.Y)({view:l}),ep(l,t),(0,r.tZ)("div",{css:Yf.ev,children:(0,r.BX)("div",{css:Yf.ac,children:[!t&&(0,r.tZ)("div",{css:Yf.ov,children:(0,r.tZ)(Kf.Z,{})}),t&&0!==t.count?(0,r.tZ)("div",{css:Yf.ac,children:(0,r.tZ)(le.Z,{ref:c,view:l,css:Yf.Mp})}):(0,r.tZ)(rp,{})]})})}function rp(){return(0,r.tZ)("div",{css:[Yf.ac,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,r.tZ)("span",{children:"This file has no history."})})}var ip={Content:function(e){var n=e.pane,t=e.options;return(0,r.tZ)(op,(0,F.Z)((0,O.Z)({},n.data),{performPaneOperation:t.performPaneOperation}))},Icon:function(e){var n=e.size;return(0,r.tZ)(ur.Z,{size:n})},getTitle:function(e){return e.data.path?"History - ".concat((0,v.UO)(e.data.path)):"History - no file open"}};function op(e){var n=e.path,t=e.performPaneOperation,i=(0,md.EI)(n,t),o=(0,To.Mp)({path:n,performPaneOperation:t});return(0,B.L5)((function(){if(o)return{commands:o}}),[o]),n?(0,r.tZ)(Fe.zt,{scope:jf.d8,children:(0,r.tZ)(md.ox.Provider,{value:i,children:(0,r.BX)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,r.tZ)(To.HK,{path:n,performPaneOperation:t}),(0,r.tZ)(tp,{filePath:n}),(0,r.tZ)(lf,{filePath:n})]})})}):null}var ap=t(91715),lp=t.n(ap),cp=t(10941),up=t(7e3),sp=(0,b.X)({create:[g.l0.colWithGap(8),g.l0.p(8)],pedit:{width:"100%",height:"100%"},canvas:{width:"100%",height:"100%",outline:"none",position:"absolute",top:0,left:0},upgradeButton:[g.l0.position.absolute,g.l0.top(8),g.l0.left("50%"),{transform:"translateX(-50%)"}]});function dp(e){var n=e.data,t=e.onSave,i=a.useRef(null),l=a.useRef(null),c=(0,d.Z)().fs,u=(0,Ce.Z)(),s=u.showError,p=u.showConfirm,h=(0,o.Z)(a.useState(!1),2),v=h[0],m=h[1],g=(0,f.Z)((function(){var e=i.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var n=e.getContext("2d");n&&(n.imageSmoothingEnabled=!1)}),{type:"debounce",wait:100});return a.useEffect((function(){var e=i.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var r=lp()({canvas:e,data:n}),o=function(){return t(r.save())};return r.on("change",o),r.on("save",o),r.on("export",(function(){return m(!0)})),l.current=r,e.focus(),function(){r&&r.cleanUp(),l.current&&(l.current=null)}}}),[n,t,i]),(0,r.BX)(r.HY,{children:[(0,r.tZ)("canvas",{css:sp.canvas,ref:function(e){i.current=e,g(e)},tabIndex:0}),(0,r.tZ)(Q.u,{isOpen:v,onRequestClose:function(){return m(!1)},children:(0,r.tZ)(cp.Z,{prompt:"Export",desc:"What name to give to the exported file?",placeholder:"filename",type:"text",onCancel:function(){return m(!1)},onConfirm:function(e){if(l.current){var n="".concat(e,".png"),t=l.current.curFrame().toPNG();c.writeFile(n,Or.Z.from(t)).then((function(e){e.error?s("Failed to write to file ".concat(n)):(p("Successfully exported to ".concat(n)),m(!1))}))}else m(!1)}})})]})}function fp(e){var n=e.activeFile,t=(0,d.Z)().fs,i=(0,o.Z)(a.useState(!0),2),l=i[0],c=i[1],u=(0,o.Z)(a.useState(null),2),s=u[0],f=u[1],p=(0,Ce.Z)().showError,h=n.endsWith(".kbmsprite");a.useEffect((function(){var e=!1;function r(){return(r=(0,M.Z)((function(){var r,i,o;return(0,W.__generator)(this,(function(a){switch(a.label){case 0:return[4,t.readFile(n)];case 1:return r=a.sent(),c(!1),e?[2]:r.error?(p("failed to read ".concat(n)),[2]):(i=r.content.toString(),o=i&&JSON.parse(i),f(h?(0,up.C)(o):o),[2])}}))}))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),function(){e=!0}}),[t,n,p,h]);var v=a.useCallback(function(){var e=(0,M.Z)((function(e){return(0,W.__generator)(this,(function(r){switch(r.label){case 0:return h?[4,(0,up.u)(e)]:[3,2];case 1:e=r.sent(),r.label=2;case 2:return[4,t.writeFile(n,Or.Z.from(JSON.stringify(e)))];case 3:return r.sent().error&&p("Failed to save ".concat(n,", please try again")),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[t,n,p,h]);return l?(0,r.tZ)(pe.Z,{}):s?(0,r.tZ)(dp,{data:s,onSave:v}):(0,r.tZ)(pp,{onCreate:function(e){return f(e)}})}function pp(e){var n=e.onCreate,t=(0,o.Z)(a.useState(""),2),i=t[0],l=t[1],c=(0,o.Z)(a.useState(""),2),u=c[0],s=c[1],d=Number(i),f=Number(u),p=d>0&&f>0;return(0,r.BX)(y.G,{css:sp.create,children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Create a Pedit file"}),(0,r.tZ)(fe.II,{placeholder:"width",value:i,onChange:function(e){return l(e.target.value)}}),(0,r.tZ)(fe.II,{placeholder:"height",value:u,onChange:function(e){return s(e.target.value)}}),(0,r.tZ)(K.zx,{text:"Create",disabled:!p,onClick:function(){n({width:Math.ceil(d),height:Math.ceil(f)})}})]})}var hp={Content:function(e){var n=e.pane,t=e.options.performPaneOperation;return(0,r.tZ)(vp,{path:n.data.path,performPaneOperation:t})},Icon:function(e){var n=e.size;return(0,r.tZ)(V.Z,{size:n})},getTitle:function(e){return(0,v.UO)(e.data.path)}};function vp(e){var n=e.path,t=e.performPaneOperation,i=(0,To.Mp)({path:n,performPaneOperation:t});return(0,B.L5)((function(){if(i)return{commands:i}}),[i]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(To.HK,{path:n,performPaneOperation:t}),(0,r.tZ)(To.VY,{children:(0,r.tZ)(fp,{activeFile:n})})]})}var mp=t(44794),gp={Content:function(){return(0,r.tZ)(y.G,{css:[g.l0.p(8),Tn.F3],children:(0,r.tZ)(mp.Z,{})})},Icon:function(e){var n=e.size;return(0,r.tZ)(re.Z,{size:n})},getTitle:function(){return"Unit Tests"}},yp=t(68779),Zp=t(72840),bp=t(65972),wp=t(84561),xp=t(16829),Cp=t(81007),kp=t(29233),Sp=t(76562),Tp=function(e){var n=e.title,t=e.json,i=e.initialExpanded,o=void 0===i||i,l=(0,a.useState)(o),c=l[0],u=l[1];return(0,r.tZ)(Jn.Q,{expanded:c,onClick:function(){return u((function(e){return!e}))},headerContent:(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:n})}),children:(0,r.tZ)(y.G,{css:[g.l0.p(12),g.l0.colWithGap(8),g.l0.height("100%")],children:(0,r.tZ)(Cp.Z,{json:t})})})},Ep=function(e){var n=e.title,t=e.text,i=(0,a.useState)(!0),o=i[0],l=i[1];return(0,r.tZ)(Jn.Q,{expanded:o,onClick:function(){return l((function(e){return!e}))},headerContent:(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:n})}),children:(0,r.tZ)(y.G,{css:[g.l0.p(12),g.l0.colWithGap(8),g.l0.height("100%")],children:(0,r.tZ)(Z.xv,{multiline:!0,css:[g.l0.fontSize(16),{whiteSpace:"pre-wrap"}],children:t})})})},Rp=t(56139),Ip=t(30202),Gp=t(93955),Dp=t(84918);function _p(){var e=(0,ct.Z)(["\n  query AdminPanelGitView {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n        installations {\n          id\n          type\n          avatarUrl\n          name\n        }\n        userInfo {\n          name\n          email\n          avatarUrl\n        }\n      }\n    }\n  }\n"]);return _p=function(){return e},e}var Pp={},Bp=(0,ut.Ps)(_p());function Ap(e){var n=e.event,t=n.input,i=n.output,o=n.error,l=n.start,c=n.end,u=n.cached,s=(0,a.useState)(!0),d=s[0],f=s[1],p=(0,a.useCallback)((function(){return f((function(e){return!e}))}),[]),h="bash"===t[0]&&"-c"===t[1]?t.slice(2).join(" "):t.join(" "),v=i.trimEnd();return(0,r.BX)(y.G,{css:[(0,Gp.ec)(o?"negative":"positive"),u?{opacity:.75}:void 0,g.l0.borderRadius(8)],children:[(0,r.BX)(y.G,{onClick:p,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||p()},tabIndex:0,css:[g.l0.rowWithGap(4),g.l0.justify.spaceBetween,g.l0.py(4),g.l0.px(8),g.l0.font.code,g.l0.cursor.pointer],children:[(0,r.BX)("span",{css:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:["$ ",h]}),(0,r.BX)("span",{css:[g.l0.color.foregroundDimmer,g.l0.flex.shrink(0)],children:[o?(0,r.tZ)("span",{css:[g.l0.mr(16)],children:o}):null,u?(0,r.tZ)("span",{children:"CACHED"}):(0,r.BX)("span",{children:[c-l," ms"]})]})]}),d?null:(0,r.tZ)(y.G,{css:[g.l0.px(2),g.l0.pb(2),g.l0.borderRadius(0,0,8,8)],children:(0,r.tZ)(J.T,{elevated:!0,css:[g.l0.p(8),g.l0.borderRadius(8)],children:(0,r.tZ)(Ip.Z,{code:v})})})]})}var Up=t(84139),Np=t(86950),Lp=t(27662);function Xp(e){var n=e.t,t=e.children;return(0,r.BX)("span",{css:{display:"flex",alignItems:"flex-start",columnGap:"0.5rem"},children:[(0,r.BX)(Z.xv,{css:{minWidth:"8em"},children:[n,": "]}),(0,r.tZ)("span",{children:t})]})}var Mp=t(95980),Op=t.n(Mp),Fp=t(66261);var Wp=a.memo((function(e){var n=e.log,t=e.timeRef,i=e.setTimeRef,o=JSON.stringify(n.cmd,null,2),a=t?n.timestamp-t:n.timestamp;return(0,r.BX)("div",{className:"jsx-c576d52646a14c5f "+("log "+(n.highlighted?"highlighted ":"")+("in"===n.dir?"in":"")||0),children:[(0,r.BX)("div",{className:"jsx-c576d52646a14c5f direction",children:[(0,r.tZ)("div",{className:"jsx-c576d52646a14c5f",children:n.dir}),(0,r.tZ)("div",{className:"jsx-c576d52646a14c5f",children:"in"===n.dir?"\u25b6\ufe0f":"\u2b05\ufe0f"}),(0,r.tZ)("div",{className:"jsx-c576d52646a14c5f",children:(0,r.tZ)(K.zx,{small:!0,colorway:"positive",onClick:function(){return i(n.timestamp)},text:a.toFixed(0)+"ms"})})]}),(0,r.BX)("div",{className:"jsx-c576d52646a14c5f message",children:[n.channel.service||n.channel.name?(0,r.BX)("div",{className:"jsx-c576d52646a14c5f channel",children:[(0,r.tZ)("div",{className:"jsx-c576d52646a14c5f service",children:n.channel.service}),(0,r.tZ)("div",{className:"jsx-c576d52646a14c5f name",children:n.channel.name})]}):null,(0,r.tZ)("pre",{className:"jsx-c576d52646a14c5f",children:o})]}),(0,r.tZ)(Op(),{id:"c576d52646a14c5f",children:".log.jsx-c576d52646a14c5f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:deepskyblue;border:1px solid;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.in.jsx-c576d52646a14c5f{color:red}.highlighted.jsx-c576d52646a14c5f{background:yellow}.direction.jsx-c576d52646a14c5f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-moz-box-pack:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;text-align:center;min-width:30px;border-right:1px solid}.direction.jsx-c576d52646a14c5f>div.jsx-c576d52646a14c5f:not(:last-child){border-bottom:1px solid;width:100%}.message.jsx-c576d52646a14c5f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.channel.jsx-c576d52646a14c5f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;border-bottom:1px solid}.channel.jsx-c576d52646a14c5f>div.jsx-c576d52646a14c5f{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.channel.jsx-c576d52646a14c5f>div.jsx-c576d52646a14c5f:not(:last-child){border-right:1px solid}.message.jsx-c576d52646a14c5f>pre.jsx-c576d52646a14c5f{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}"})]},n.index)}),(function(e,n){return e.log.index===n.log.index&&e.log.highlighted===n.log.highlighted&&e.timeRef===n.timeRef})),Hp=function(e){var n=e.logs,t=e.timeRef,i=e.setTimeRef;return(0,r.BX)("div",{className:"jsx-ded4128a88e9355f log-list",children:[n.map((function(e){return(0,r.tZ)(Wp,{log:e,timeRef:t,setTimeRef:i},e.index)})),(0,r.tZ)("div",{className:"jsx-ded4128a88e9355f bottom-anchor"}),(0,r.tZ)(Op(),{id:"ded4128a88e9355f",children:".log-list.jsx-ded4128a88e9355f{overflow:auto;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.log-list.jsx-ded4128a88e9355f *.jsx-ded4128a88e9355f{overflow-anchor:none}.bottom-anchor.jsx-ded4128a88e9355f{overflow-anchor:auto!important;min-height:1px}"})]})};function zp(e){return"in"===e||"out"===e||""===e}var Vp=function(e){var n=e.filters,t=e.updateFilters;return(0,r.BX)(y.G,{css:g.l0.colWithGap(4),children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Regex (regex,flags):"}),(0,r.tZ)(fe.II,{id:"regex",onChange:function(e){var n=null;if(e.currentTarget.value){var r=(0,o.Z)(e.currentTarget.value.split(","),2),i=r[0],a=r[1];try{n=new RegExp(i,a)}catch(l){}}t({regexp:n})},placeholder:"\\w+,gi"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Directions:"}),(0,r.tZ)(gs.E,{css:g.l0.rowWithGap(16),name:"direction",value:n.direction,onChange:function(e){var n=e.target.value;t({direction:zp(n)?n:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map((function(e){return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8)],children:[(0,r.tZ)(gs.Y,{id:e.val,value:e.val}),(0,r.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",children:"Filter style:"}),(0,r.tZ)(gs.E,{css:g.l0.rowWithGap(16),name:"filter-style",value:n.highlightOnly?"highlight":"filter",onChange:function(e){return t({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map((function(e){return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8)],children:[(0,r.tZ)(gs.Y,{id:e.val,value:e.val}),(0,r.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))})]})},jp=t(89166),qp=t(28840),$p=t(91184),Yp=t(59645),Kp=t(26568),Qp=t(5343);function Jp(){var e=(0,ct.Z)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isProject\n    isPrivate\n    timeCreated\n    timeUpdated\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n    }\n    isRenamed\n    isProjectFork\n    folderId\n    isOwner\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n          url\n          templateLabel\n        }\n      }\n    }\n  }\n"]);return Jp=function(){return e},e}function eh(){var e=(0,ct.Z)(["\n  query AdminPanelReplView($replId: String!) {\n    repl(id: $replId) {\n      ...AdminPanelRepl\n    }\n  }\n  ","\n"]);return eh=function(){return e},e}var nh={},th=(0,ut.Ps)(Jp()),rh=(0,ut.Ps)(eh(),th);var ih=t(80565),oh=t(3600),ah=t(47843);function lh(e){var n=e.sessionId,t=(0,a.useState)(!1),i=t[0],o=t[1],l=(0,a.useState)(""),c=l[0],u=l[1],s=(0,a.useState)(!1),d=s[0],f=s[1],p=(0,Ce.Z)().showConfirm,h=(0,Fr.H)();return null==n?(0,r.tZ)(y.G,{children:(0,r.tZ)(Z.xv,{children:"Something went wrong... no RUM session found... Try refreshing the page"})}):(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.BX)(Z.xv,{variant:"small",children:["RUM Session ID: ",n]}),(0,r.tZ)(Z.xv,{variant:"headerDefault",children:"Submit an Issue"}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(16)],children:[(0,r.tZ)(fe.B,{id:h("message"),placeholder:"What can we do better?",value:c,onChange:function(e){return u(e.target.value)},disabled:i}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8)],children:[(0,r.tZ)(es.X,{id:h("issueInRecording"),checked:d,onChange:function(e){return f(e.target.checked)}}),(0,r.tZ)("label",{htmlFor:h("issueInRecording"),children:(0,r.tZ)(Z.xv,{children:"Issue is demoed in recording"})})]}),(0,r.tZ)(K.zx,{onClick:function(){var e=Sr()();o(!0),(0,ah.fc)({name:"replitOnReplit:issue",context:{message:c,issueInRecording:d,customEventId:e}}),p("Issue submitted! Have a cookie \ud83c\udf6a",5e3),setTimeout((function(){o(!1),u(""),f(!1)}),5e3)},text:"Submit",disabled:i||0===c.trim().length,colorway:"primary"})]})]})}var ch,uh;!function(e){e.Repl="repl",e.Logs="logs",e.LSP="lsp",e.AI="ai",e.GhostwriterChat="aiChat",e.AST="ast",e.Git="git",e.History2="history2",e.Metadata="metadata",e.Override="override",e.DDRum="rum"}(ch||(ch={}));var sh=(uh={},(0,i.Z)(uh,ch.Repl,(function(){var e,n,t,i,o,a,l,c,u=(0,Zn.Z)(),s=function(e){var n=(0,O.Z)({},nh,e);return st.a(rh,n)}({variables:{replId:u}}).data,d="Repl"===(null===s||void 0===s?void 0:s.repl.__typename)?JSON.parse(JSON.stringify(s.repl)):void 0;d&&(delete d.__typename,null===(e=d.user)||void 0===e||delete e.__typename,null===(n=d.origin)||void 0===n||delete n.__typename,delete d.config.__typename,null===(t=d.source)||void 0===t||delete t.__typename,null===(i=d.source)||void 0===i||null===(o=i.release)||void 0===o||delete o.__typename,null===(a=d.source)||void 0===a||null===(l=a.release)||void 0===l||null===(c=l.repl)||void 0===c||delete c.__typename);return(0,r.BX)(y.G,{css:[g.l0.colWithGap(16),g.l0.p(4)],children:[(0,r.tZ)(ih.Z,{replId:u}),(0,r.tZ)("div",{className:"jsx-3187c500f6b377b0",children:d?(0,r.tZ)(Cp.Z,{json:d}):null}),(0,r.tZ)(Op(),{id:"3187c500f6b377b0",children:"pre.jsx-3187c500f6b377b0{white-space:pre-wrap;word-wrap:break-word}"})]})})),(0,i.Z)(uh,ch.Logs,(function(){var e=(0,o.Z)((0,Lp.Z)(!1),2),n=e[0],t=e[1],i=(0,a.useState)(null),l=i[0],c=i[1],u=(0,Fe.Dv)(Fp.Sj),s=(0,o.Z)((0,Fe.KO)(Fp.a0),2),d=s[0],f=s[1],p=(0,o.Z)((0,Fe.KO)(Fp.ot),2),h=p[0],v=p[1],m=(0,Fe.b9)(Fp.UB);return(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.position.sticky,g.l0.top(0),g.l0.px(4),g.l0.pb(8),g.l0.backgroundColor.backgroundDefault],children:[(0,r.tZ)(K.zx,{colorway:d?void 0:"positive",onClick:function(){f((function(e){return!e}))},text:d?"Stop logging goval":"Start logging goval"}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.justify.spaceBetween],children:[(0,r.tZ)(K.zx,{onClick:t,text:n?"Hide filters":"Show filters"}),l?(0,r.tZ)(K.zx,{onClick:function(){return c(null)},text:"Reset Time Ref"}):null,(0,r.tZ)(me.h,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(u)),n=document.createElement("a");n.setAttribute("href",e);var t=(new Date).toISOString();n.setAttribute("download","logs-".concat(t.slice(0,t.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),n.click()},size:32,children:(0,r.tZ)(qe.Z,{})}),(0,r.tZ)(K.zx,{colorway:"negative",onClick:function(){return m()},text:"Clear logs"})]}),n?(0,r.tZ)(Vp,{filters:h,updateFilters:function(e){v((0,O.Z)({},h,e))}}):null]}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1),g.l0.overflow("auto"),g.l0.height("100%")],children:(0,r.tZ)(Hp,{logs:u,timeRef:l,setTimeRef:c})})]})})),(0,i.Z)(uh,ch.LSP,jp.L),(0,i.Z)(uh,ch.AI,Rp.ho),(0,i.Z)(uh,ch.GhostwriterChat,(function(){var e=(0,xp.v)(),n=(0,Zn.Z)(),t=(0,Sp.a)(),i=(0,ve.R3)(),l=(0,Zp.Og)(),c=(0,Zp.Cd)(),u=(0,o.Z)((0,kp.Kz)(),1)[0],s=(0,o.Z)((0,kp.u0)(),1)[0],f="chat-".concat(t,".json"),p=(0,a.useState)(".ghostwriter/".concat(f)),h=p[0],v=p[1],m=(0,d.Z)().fs,b=(0,Ce.Z)().showError,w=(0,o.Z)((0,Zp.zu)(),2),x=w[0],C=w[1],k=(0,a.useCallback)((function(){return JSON.stringify({chatModel:e,chatId:t,replId:n,messages:x},null,2)}),[e,t,n,x]),S=(0,a.useCallback)((0,M.Z)((function(){var e,n,t;return(0,W.__generator)(this,(function(r){switch(r.label){case 0:e=k(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,m.writeFile(h,Or.Z.from(e))];case 2:if((n=r.sent()).error)throw new Error("fs error: ".concat(n.error));return[3,4];case 3:return t=r.sent(),b(t.message),[3,4];case 4:return[2]}}))})),[k,m,h,b]),T=(0,a.useCallback)((0,M.Z)((function(){var e,n,t;return(0,W.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,m.readFile(h)];case 1:if((e=r.sent()).error)throw new Error("fs error: ".concat(e.error));if(n=JSON.parse(e.content.toString()),!Array.isArray(n.messages))throw new Error("invalid chat JSON");return C(n.messages),[3,3];case 2:return t=r.sent(),b(t.message),[3,3];case 3:return[2]}}))})),[h,m,C,b]);return(0,r.tZ)(y.G,{css:g.l0.height("100%"),children:(0,r.BX)(yp.mQ,{css:[{width:"100%"}],children:[(0,r.BX)(yp.td,{withDividers:!1,children:[(0,r.tZ)(yp.OK,{iconLeft:(0,r.tZ)(bp.Z,{}),children:"File Context"}),(0,r.tZ)(yp.OK,{iconLeft:(0,r.tZ)(bp.Z,{}),children:"Debugger"}),(0,r.tZ)(yp.OK,{iconLeft:(0,r.tZ)(wp.Z,{}),children:"Messages"})]}),(0,r.BX)(yp.nP,{children:[(0,r.BX)(yp.x4,{children:[(0,r.tZ)(Tp,{title:"active file",json:i}),(0,r.tZ)(Tp,{title:"last stop reason",json:c}),(0,r.tZ)(Ep,{title:"last prompt",text:l})]}),(0,r.BX)(yp.x4,{children:[(0,r.tZ)(Tp,{title:"buffered output",json:u}),(0,r.tZ)(Tp,{title:"debug error context",json:s})]}),(0,r.tZ)(yp.x4,{children:(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.m(8)],children:[(0,r.BX)(J.T,{background:"higher",css:[g.l0.borderRadius(8),g.l0.colWithGap(8),g.l0.p(8)],children:[(0,r.tZ)(Z.xv,{children:"Chat History"}),(0,r.tZ)(fe.II,{type:"text",value:h,onChange:function(e){v(e.target.value)}}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.flex.wrap],children:[(0,r.tZ)(K.zx,{text:"Download",colorway:"primary",iconLeft:(0,r.tZ)(qe.Z,{}),onClick:function(){var e=k(),n="data:text/json;charset=utf-8,"+encodeURIComponent(e),t=document.createElement("a");t.setAttribute("href",n),t.setAttribute("download","".concat(f)),t.click()}}),(0,r.tZ)(K.zx,{text:"Save to Repl",onClick:S,iconLeft:(0,r.tZ)(qe.Z,{})}),(0,r.tZ)(K.zx,{text:"Load from Repl",onClick:T,iconLeft:(0,r.tZ)(bc.Z,{})})]})]}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)("label",{css:g.l0.color.foregroundDimmer,htmlFor:"gw-debug-chatModel",children:"Chat Model"}),(0,r.tZ)(fe.II,{id:"gw-debug-chatModel",type:"text",readOnly:!0,value:e})]}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)("label",{css:g.l0.color.foregroundDimmer,htmlFor:"gw-debug-replId",children:"Repl Id"}),(0,r.tZ)(fe.II,{id:"gw-debug-replId",type:"text",readOnly:!0,value:n})]}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)("label",{css:g.l0.color.foregroundDimmer,htmlFor:"gw-debug-chatId",children:"Chat Id"}),(0,r.tZ)(fe.II,{id:"gw-debug-chatId",type:"text",readOnly:!0,value:t})]})]})})]})]})})})),(0,i.Z)(uh,ch.AST,qf.Z),(0,i.Z)(uh,ch.Git,(function(){var e=(0,a.useState)([]),n=e[0],t=e[1],i=function(e){var n=(0,O.Z)({},Pp,e);return st.a(Bp,n)}().data,o=(0,P.Z)(Dp.e);return(0,a.useEffect)((function(){o&&t((function(e){return e.length&&e[0].key===o.key?e:[o].concat((0,Nt.Z)(e)).slice(0,100)}))}),[o]),(0,r.BX)(y.G,{css:[g.l0.p(8)],children:[(0,r.BX)(J.T,{elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.mb(8)],children:[(0,r.tZ)("span",{children:"Git Service Connection Info"}),(0,r.tZ)("pre",{children:(null===i||void 0===i?void 0:i.currentUser)?JSON.stringify(i,(function(e,n){return"accessToken"===e?"censored":n}),2):"No gitHubInfo"})]}),(0,r.tZ)(y.G,{css:[g.l0.colWithGap(4)],children:n.length?n.map((function(e){return(0,r.tZ)(Ap,{event:e},e.key)})):"No events yet..."})]})})),(0,i.Z)(uh,ch.History2,(function(){var e=(0,P.Z)(md.BI)(),n=(0,P.Z)(md.Jp)(),t=(0,o.Z)((0,Lp.Z)(!1),2),i=t[0],a=t[1];if(!e)return null;var l=e.filePath,c=e.changes,u=e.users,s=e.version,d=e.playing,f=e.count,p=c[s],h=null===u||void 0===u?void 0:u[p.userId],v=p.timestamp,m=i&&n?function(e,n){try{return(0,Np.ed)(e,n).op}catch(t){return t}}(p.changes,n.state.doc.sliceString(0)):null;return(0,r.BX)(y.G,{css:[g.l0.colWithGap(16),g.l0.p(4)],children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(4)],children:[(0,r.tZ)(Xp,{t:"File",children:(0,r.tZ)("pre",{children:l})}),(0,r.BX)(Xp,{t:"Version",children:[s," / ",f-1]}),(0,r.tZ)(Xp,{t:"Playing",children:(0,r.tZ)(Up.Z,{children:d?"true":"false"})}),(0,r.tZ)(Xp,{t:"Date",children:(0,r.tZ)(Vl.E,{date:v})})]}),h?(0,r.BX)(y.G,{children:[(0,r.tZ)(Xp,{t:"Author",children:h.username}),(0,r.BX)(y.G,{css:[g.l0.pl(8),g.l0.colWithGap(4)],children:[(0,r.tZ)(Xp,{t:"ID",children:h.id}),(0,r.tZ)(Xp,{t:"Name",children:h.username}),(0,r.tZ)(Xp,{t:"Image",children:(0,r.tZ)("a",{href:h.image,children:h.image})})]})]}):null,(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,r.tZ)(qd.Z,{id:"toggleIsShowingChanges",isOn:i,onChange:a}),(0,r.tZ)("label",{children:"Changes"})]}),p?null:"No changes",i&&p?(0,r.tZ)(r.HY,{children:(0,r.BX)(y.G,{children:[(0,r.tZ)(Xp,{t:"Changeset",children:(0,r.tZ)("pre",{children:JSON.stringify(p,null,2)})}),n?(0,r.tZ)(r.HY,{children:(0,r.BX)(y.G,{css:[g.l0.mt(4)],children:[(0,r.tZ)(Xp,{t:"OT",children:(0,r.tZ)("pre",{children:JSON.stringify(m,null,2)})}),(0,r.tZ)("p",{children:(0,r.BX)("small",{children:["Note that the OT value is translated ",(0,r.tZ)("em",{children:"back"})," to an operational transformation from the CodeMirror changeset."]})})]})}):null]})}):null]})})),(0,i.Z)(uh,ch.Metadata,(function(){var e=(0,d.Z)().container;(0,$p.Z)();var n=e.getConnectionMetadata();if(!n)return(0,r.tZ)("div",{children:"no token yet, wait for connection"});var t=n.token,i=new URL(n.conmanURL).host,o='./conman-repl -t "'.concat(t,'" -u ').concat(i);return(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317 token-viewer",children:[(0,r.BX)(y.G,{css:g.l0.rowWithGap(2),children:[(0,r.BX)(Z.xv,{css:g.l0.flex.shrink(1),children:["conman Repl command: ",(0,r.tZ)(Up.Z,{children:o})]}),(0,r.tZ)(me.h,{alt:"Copy to clipboard",onClick:function(){return(0,_n.Z)(o)},children:(0,r.tZ)(Mr.Z,{})})]}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["metadata:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify(n,null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["parsed token:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify((0,qp.h)(n.token),null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)(Op(),{id:"2e9ac5ab034fc317",children:".token-viewer.jsx-2e9ac5ab034fc317{height:100%;overflow:auto;padding:10px}pre.jsx-2e9ac5ab034fc317{white-space:pre-wrap;word-wrap:break-word}"})]})})),(0,i.Z)(uh,ch.Override,(function(){var e=(0,o.Z)(a.useState(j.Z.get("gurl","string")||""),2),n=e[0],t=e[1],i=(0,o.Z)(a.useState(""),2),l=i[0],c=i[1],u=function(){var e=(0,Fe.b9)(Ui),n=(0,Fe.b9)(Ni);return(0,a.useCallback)((function(t){if(!t)return e(null),void n(null);e({connectionString:t,databaseId:-1,databaseName:"Admin Override",isFrozen:!1,projectId:"mock-project-id-does-not-exist",__typename:"NeonDatabase"}),n(t)}),[n,e])}();return(0,r.BX)("div",{style:{height:"100%",overflow:"auto"},children:[(0,r.tZ)(Yp.ZP,{label:"Custom gurl",placeholder:"ws://localhost:8080",value:n,onChange:function(e){return t(e.currentTarget.value)}}),(0,r.BX)("pre",{children:["metadata override preview:",JSON.stringify((0,Qp.t)(n),null,2)]}),(0,r.tZ)("br",{}),(0,r.BX)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.tZ)(Kp.Z,{color:"positive",onClick:function(){j.Z.set("gurl",n),window.location.reload()},children:"Set gurl and reload"}),(0,r.tZ)(Kp.Z,{color:"orange",onClick:function(){j.Z.remove("gurl"),window.location.reload()},children:"Unset gurl and reload"})]}),(0,r.tZ)("br",{}),(0,r.tZ)("br",{}),(0,r.tZ)("div",{children:j.Z.get("gurl","string")?"currently in localStorage: ".concat(j.Z.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,r.tZ)("br",{}),(0,r.tZ)("br",{}),"Gurl order of precedence:",(0,r.BX)("ol",{style:{margin:20},children:[(0,r.tZ)("li",{children:"\u2018gurl\u2019 in localStorage (set above)"}),(0,r.BX)("li",{children:["If in development webapp and a there\u2019s a response from",(0,r.tZ)("code",{children:"https://currenthost:4563"})," or",(0,r.tZ)("code",{children:"http://currenthost:4560"}),", then it will use that."]}),(0,r.BX)("li",{children:["default is ",(0,r.tZ)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]}),(0,r.BX)(y.G,{css:[g.l0.pt(16),g.l0.border({direction:"top"})],children:[(0,r.tZ)(Z.xv,{children:"Override Database"}),(0,r.tZ)(Yp.ZP,{type:"text",value:l,onChange:function(e){c(e.target.value)}}),(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8)],children:(0,r.tZ)(Kp.Z,{color:"positive",onClick:function(){u(l)},children:"Override Postgres connection string"})})]})]})})),(0,i.Z)(uh,ch.DDRum,(function(){var e,n=null===(e=oh.v.getInternalContext())||void 0===e?void 0:e.session_id,t=oh.v.getInitConfiguration(),i=null!=t&&100===t.sampleRate,o=(0,a.useState)(null!=n),l=o[0],c=o[1];return(0,r.tZ)(y.G,{css:[g.l0.colWithGap(16),g.l0.p(4)],children:i?(0,r.BX)(r.HY,{children:[(0,r.tZ)(K.zx,{onClick:l?function(){oh.v.stopSessionReplayRecording(),document.cookie="_dd_s=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href=window.location.href.split("?")[0]}:function(){(0,ah.Oo)({name:"replitOnReplit"}),setTimeout((function(){c(!0)}),1e3)},text:l?"\ud83d\udd34 Recording... Click to stop and reload page":"Start Recording",colorway:l?void 0:"primary",css:(0,O.Z)({},l&&je.p.backgroundPulse(g.TV.redDimmest,g.TV.redDimmer))}),l?(0,r.tZ)(lh,{sessionId:n}):null]}):(0,r.tZ)(K.zx,{onClick:function(){window.location.href=window.location.href.split("?")[0].split("#")[0]+"?rum=1"},text:"Click to reload and start recording",colorway:"primary"})})})),uh),dh=Object.values(ch);function fh(){var e=(0,a.useState)(ch.Repl),n=e[0],t=e[1],i=dh.map((function(e){return(0,r.tZ)(K.zx,{colorway:e===n?"primary":void 0,onClick:function(){return t(e)},text:e},e)}));return(0,r.BX)(J.T,{background:"default",css:[g.l0.colWithGap(8),g.l0.p(4),g.l0.height("100%")],children:[(0,r.tZ)(y.G,{css:{flexWrap:"wrap",flexDirection:"row",gap:"4px"},children:i}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1),g.l0.overflow("auto")],children:Object.entries(sh).map((function(e){var t=(0,o.Z)(e,2),i=t[0],a=t[1];return(0,r.tZ)(y.G,{css:i!==n&&g.l0.display.none,children:i===ch.Override&&n!==ch.Override?null:(0,r.tZ)(a,{})},i)}))})]})}var ph=t(75149),hh={Content:function(){return(0,r.tZ)(fh,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(ph.Z,{size:n})},getTitle:function(){return"Debug"}},vh=t(72851),mh=t(98057),gh=t(61939);function yh(){var e=(0,ct.Z)(["\n  query SshConfigurator($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        slug\n        user {\n          id\n          username\n        }\n      }\n    }\n  }\n"]);return yh=function(){return e},e}var Zh={},bh=(0,ut.Ps)(yh());var wh=t(31296),xh=["ssh-dsa","ssh-ecdsa","ssh-ed25519","ssh-rsa"];function Ch(e){return function(n){n.stopPropagation(),e(n)}}function kh(e,n){if(!e)return"Please add a key for this secret";if(!e.trim())return"The key must include a non-space character";if(n.includes(e))return"You already have this key";var t=e.split(" ");return 3!==t.length?"This seems to be an invalid key.":xh.includes(t[0])?null:"Key type is not valid."}function Sh(e){return(0,r.BX)(y.G,{css:[g.l0.colWithGap(4)],children:[(0,r.tZ)("label",{htmlFor:e.id,children:(0,r.tZ)(Z.xv,{variant:"small",color:"dimmer",children:e.label})}),e.children,e.error?(0,r.BX)(y.G,{css:[g.l0.rowWithGap(2),g.l0.align.center],children:[(0,r.tZ)(te.Z,{}),(0,r.tZ)(Z.xv,{variant:"small",css:g.l0.color.accentNegativeStrongest,children:e.error})]}):null]})}function Th(e){var n=e.authorizedKey,t=e.otherKeys,i=e.onUpdateKey,l=e.onSave,c=(0,o.Z)(a.useState(),2),u=c[0],s=c[1],d=a.useRef(null),f=function(){var e=kh(n.key,t);if(e)return s(e),void(d.current&&d.current.focus());l()};a.useEffect((function(){u&&(kh(n.key,t)||s(null))}),[n.key,u,t]);var p=Ch((function(e){"Enter"===e.key&&(e.preventDefault(),f())})),h=(0,tu.d)(),v=(0,Fr.H)()("key"),m='ssh-keygen -t ed25519 -f ~/.ssh/replit -q -N "" && cat ~/.ssh/replit.pub';return(0,r.BX)(J.T,{elevated:!0,css:[g.l0.p(16),g.l0.borderRadius(8),g.l0.colWithGap(16)],children:[t&&0!==t.length?null:(0,r.tZ)(Z.xv,{multiline:!0,children:"Before you can SSH to your Repl, you need to add an SSH key."}),(0,r.tZ)(Sh,{id:v,label:"Key (in OpenSSH Public Key format)",error:u,children:(0,r.tZ)(fe.II,{id:v,ref:d,name:"key",value:n.key,spellCheck:!1,onChange:function(e){i(e.currentTarget.value)},onKeyDown:p})}),wh.ED||h?(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8)],children:(0,r.BX)(Z.xv,{multiline:!0,children:["Need a hand? The"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"SSH documentation"})," ","provides information about generating SSH keys."]})}):(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)(Z.xv,{multiline:!0,children:"Need a hand? Generate a key:"}),(0,r.BX)(J.T,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.align.center],children:[(0,r.tZ)(Z.xv,{css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],maxLines:1,children:m}),(0,r.tZ)(me.h,{onClick:function(){return(0,_n.Z)(m)},alt:"Copy",children:(0,r.tZ)(ke.Z,{})})]}),(0,r.tZ)(Z.xv,{multiline:!0,children:"Paste the result in the form above."})]}),(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8),g.l0.justify.spaceBetween],children:(0,r.tZ)(y.G,{css:g.l0.rowWithGap(8),children:(0,r.tZ)(K.zx,{colorway:"primary",onClick:Ch(f),text:"Add SSH Key"})})})]})}function Eh(e){var n=e.onAdd,t=e.otherKeys,i=(0,o.Z)(a.useState({key:""}),2),l=i[0],c=i[1];return(0,r.tZ)(Th,{authorizedKey:l,otherKeys:t,onUpdateKey:function(e){c((function(n){return n?(0,F.Z)((0,O.Z)({},n),{key:e}):n}))},onSave:function(){c({key:""}),l.key&&n(l)}})}function Rh(e){var n=e.authorizedKey,t=e.onDelete;return(0,r.BX)(y.G,{css:[Nl.gU.filled,g.l0.p(8),g.l0.rowWithGap(8),g.l0.align.center,g.l0.justify.spaceBetween,g.l0.borderRadius(8)],children:[(0,r.tZ)(mh.Z,{size:24}),(0,r.BX)(Z.xv,{css:[g.l0.flex.growAndShrink(1)],maxLines:1,children:[n.keytype," ",n.key.substring(0,8),"...",n.key.substring(n.key.length-8)," ",n.comment]}),(0,r.tZ)(me.h,{onClick:function(){return t(n)},alt:"Delete",size:28,children:(0,r.tZ)(gh.Z,{})})]})}function Ih(e){if(!e.length)return null;var n=e.split(" ");return n.length<3?null:{keytype:n[0],key:n[1],comment:n[2]}}function Gh(e){var n=e.sshUser,t=e.sshHostname;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Z.xv,{multiline:!0,children:"When configuring your SSH client to connect to this Repl, you will need the following configuration values:"}),(0,r.BX)(y.G,{css:g.l0.colWithGap(2),children:[(0,r.tZ)(Z.xv,{children:"Hostname"}),(0,r.BX)(J.T,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],maxLines:1,children:t}),(0,r.tZ)(me.h,{onClick:function(){return(0,_n.Z)(t)},alt:"Copy",children:(0,r.tZ)(ke.Z,{})})]})]}),(0,r.BX)(y.G,{css:g.l0.colWithGap(2),children:[(0,r.tZ)(Z.xv,{children:"Username"}),(0,r.BX)(J.T,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],maxLines:1,children:n}),(0,r.tZ)(me.h,{onClick:function(){return(0,_n.Z)(n)},alt:"Copy",children:(0,r.tZ)(ke.Z,{})})]})]})]})}function Dh(e){var n,t=e.repl,i=e.onlyCommand,o=void 0===i||i,a=(0,tu.d)();if("Repl"!==t.__typename)return null;var l=t.id,c="".concat(t.slug,".").concat(null===(n=t.user)||void 0===n?void 0:n.username,".repl.co"),u="ssh -i ~/.ssh/replit ".concat(l,"@").concat(c),s="Host ".concat(c,"\n  User ").concat(l,"\n  IdentityFile ~/.ssh/replit"),d="ssh ".concat(c);return wh.ED||a?o?null:(0,r.BX)(y.G,{css:g.l0.colWithGap(16),children:[(0,r.tZ)(vh.Z,{level:4,children:"Client Configuration"}),(0,r.tZ)(Gh,{sshUser:l,sshHostname:c}),(0,r.BX)(Z.xv,{multiline:!0,children:["For more detailed configuration instructions",wh.ED?" on Windows":null,", check the"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"SSH Power-Up documentation"}),"."]})]}):(0,r.tZ)(y.G,{css:g.l0.colWithGap(16),children:o?(0,r.BX)(r.HY,{children:[(0,r.tZ)(vh.Z,{level:4,children:"Quick-Start SSH Command"}),(0,r.BX)(J.T,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],maxLines:1,children:u}),(0,r.tZ)(me.h,{onClick:function(){return(0,_n.Z)(u)},alt:"Copy",children:(0,r.tZ)(ke.Z,{})})]})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(vh.Z,{level:4,children:"Client Configuration"}),(0,r.tZ)(Gh,{sshUser:l,sshHostname:c}),(0,r.tZ)(vh.Z,{level:5,children:"SSH Configuration File"}),(0,r.BX)(Z.xv,{multiline:!0,children:["You can add this snippet to your SSH configuration file (typically"," ",(0,r.tZ)(Z.xv,{css:[g.l0.font.code,g.l0.display.inline,g.l0.align.baseline],multiline:!0,children:"~/.ssh/config"}),"):"]}),(0,r.BX)(J.T,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],multiline:!0,children:s}),(0,r.tZ)(me.h,{onClick:function(){return(0,_n.Z)(s)},alt:"Copy",children:(0,r.tZ)(ke.Z,{})})]}),(0,r.tZ)(Z.xv,{multiline:!0,children:"Then, to connect to your Repl you can simply run:"}),(0,r.BX)(J.T,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],maxLines:1,children:d}),(0,r.tZ)(me.h,{onClick:function(){return(0,_n.Z)(d)},alt:"Copy",children:(0,r.tZ)(ke.Z,{})})]})]})})}function _h(e){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,M.Z)((function(e){return(0,W.__generator)(this,(function(n){switch(n.label){case 0:return[4,e.createDir(".config")];case 1:return n.sent(),[4,e.createDir(".config/ssh")];case 2:return n.sent(),[2]}}))}))).apply(this,arguments)}function Bh(e){var n=e.fs,t=(0,z.Z)(),i=(0,o.Z)(a.useState(null),2),l=i[0],c=i[1],u=function(e){var n=(0,O.Z)({},Zh,e);return st.a(bh,n)}({variables:{replId:(0,Zn.Z)()}}).data,s="Repl"===(null===u||void 0===u?void 0:u.repl.__typename)?u.repl:null;a.useEffect((function(){function e(){return(e=(0,M.Z)((function(){var e,r;return(0,W.__generator)(this,(function(i){switch(i.label){case 0:return[4,_h(n)];case 1:return i.sent(),[4,n.readFile(".config/ssh/.authorized_keys")];case 2:if((e=i.sent()).error===w.Df.NotFound)return t.current&&c({}),[2];if(e.error)throw new Error("Error getting .authorized_keys");return t.current?(r={},e.content.toString().split("\n").forEach((function(e){if(!e.startsWith("#")){var n=Ih(e);null!==n&&(r[n.key]=n)}})),c(r),[2]):[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,c,t]);var d=function(){var e=(0,M.Z)((function(e){var t,r;return(0,W.__generator)(this,(function(i){switch(i.label){case 0:if(!l)throw new Error("trying to write authorized keys before loading");return t=function(e,n){var t=(0,O.Z)({},e);if("add"===n.type){var r=Ih(n.key);r&&(t[r.key]=r)}else delete t[n.key];return t}(l,e),c(t),r="# generated file, use the SSH tool instead of editing\n"+Object.values(t).map((function(e){return"".concat((n=e).keytype," ").concat(n.key," ").concat(n.comment);var n})).join("\n"),[4,n.writeFile(".config/ssh/.authorized_keys",Or.Z.from(r))];case 1:return i.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=(0,M.Z)((function(e){return(0,W.__generator)(this,(function(n){switch(n.label){case 0:return[4,d((0,O.Z)({type:"add"},e))];case 1:return n.sent(),(0,$.j)($.U3.SSH_CONFIGURATOR_USED,{action:"added"}),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=(0,M.Z)((function(e){return(0,W.__generator)(this,(function(n){switch(n.label){case 0:return[4,d({type:"delete",key:e.key})];case 1:return n.sent(),(0,$.j)($.U3.SSH_CONFIGURATOR_USED,{action:"deleted"}),[2]}}))}));return function(n){return e.apply(this,arguments)}}();return l&&s?(0,r.tZ)(y.G,{css:g.l0.colWithGap(32),children:(0,r.BX)(y.G,{css:g.l0.colWithGap(16),children:[Object.keys(l).length>0?(0,r.tZ)(Dh,{repl:s,onlyCommand:!0}):null,(0,r.tZ)(vh.Z,{level:4,children:"Manage SSH Keys"}),Object.values(l).map((function(e){return(0,r.tZ)(Rh,{authorizedKey:e,onDelete:p},e.key)})),(0,r.tZ)(Eh,{onAdd:f,otherKeys:Object.keys(l)}),Object.keys(l).length>0?(0,r.tZ)(Dh,{repl:s,onlyCommand:!1}):null]})}):(0,r.tZ)(y.G,{css:[g.l0.center,g.l0.coverContainer],children:(0,r.tZ)(pe.Z,{size:24})})}function Ah(e){var n=e.children;return(0,r.tZ)(y.G,{css:[g.l0.height("100%"),g.l0.overflowY("auto"),Tn.F3],children:(0,r.BX)(y.G,{css:[g.l0.p(8),g.l0.colWithGap(8),g.l0.flex.grow(1)],children:[(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8)],children:(0,r.tZ)(vh.Z,{truncate:!0,level:4,children:"SSH Configuration"})}),(0,r.BX)(Z.xv,{variant:"small",color:"dimmer",multiline:!0,children:["Add authorized keys to configure SSH access to this Repl."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"Learn more here"}),"."]}),(0,r.tZ)(y.G,{css:[g.l0.flex.grow(1),g.l0.py(8),g.l0.position.relative],children:n})]})})}var Uh=t(97413),Nh={Content:function(){return(0,r.tZ)(Lh,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(Uh.Z,{size:n})},getTitle:function(){return"SSH"}};function Lh(){var e=(0,d.Z)().fs;return(0,r.tZ)(Ah,{children:(0,r.tZ)(Bh,{fs:e})})}var Xh=t(8126),Mh=t(22011),Oh=t(13617),Fh=t(68608),Wh=t(20165),Hh=t(56770),zh=(0,b.X)({container:[g.l0.center,g.l0.backgroundColor.blurpleDimmest,g.l0.py(4),g.l0.border({color:g.TV.outlineDimmer,style:"solid",width:1,direction:"bottom"})],textContainer:[g.l0.rowWithGap(4),g.l0.align.center],text:[g.l0.fontSize(g.TV.fontSizeSmall),g.l0.color.foregroundDimmer],containerWithUpgrade:[g.l0.backgroundColor.backgroundHigher,g.l0.rowWithGap(8),g.l0.py(8),g.l0.borderRadius(0,0,8,8)]}),Vh=function(e){var n=e.isVerified,t=(0,Hh.q)(),i=t.hasAccessToMeteredTrial,o=t.messagesSentInPeriod,a=t.cap,l="You used all your free messages.";if(n){if(i){var c=a-o;l="You have ".concat(c," free ").concat((0,tt.Z)("message",c)," remaining")}}else l="Verify your email and try Ghostwriter Chat for free!";return(0,r.tZ)(y.G,{css:[zh.container,i?null:zh.containerWithUpgrade],children:(0,r.BX)(y.G,{css:zh.textContainer,children:[(0,r.tZ)(Z.xv,{css:zh.text,children:l}),(0,r.tZ)(wa.u,{tooltip:"After ".concat(a," free messages, you can upgrade to continue to use Ghostwriter Chat. You won't be charged until you choose to upgrade."),children:(0,r.tZ)(Oi.Z,{})})]})})},jh=t(10275),qh=t(52993),$h=t(40058),Yh=t(69381);var Kh=(0,b.X)({surface:[g.l0.flex.growAndShrink(0),g.l0.borderRadius(0,0,8,8),{borderTop:"1px solid ".concat(g.TV.outlineDimmer)}],feedback:[g.l0.flex.rowReverse,g.l0.pb(4)],messageBoxContainer:[g.l0.p(8)],messageBoxSubContainer:[g.l0.rowWithGap(8),g.l0.align.center],messageBoxInputContainer:[g.l0.flex.growAndShrink(1),g.l0.maxHeight(300)],messageBoxInput:[g.l0.height(32),g.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1}],inputCharacterCount:[g.l0.flex.row,g.l0.align.center,g.l0.rowWithGap(4),g.l0.color.foregroundDimmer],inputCharacterCountMax:[g.l0.flex.row,g.l0.align.center,g.l0.rowWithGap(4),g.l0.color.accentNegativeStronger],inputButton:[g.l0.backgroundColor.blueDefault,g.l0.borderRadius(8),{"@media (hover: hover)":{":not([disabled]):hover":{backgroundColor:g.TV.blueDefault}}}]}),Qh=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1];return(0,r.BX)(r.HY,{children:[(0,r.tZ)(K.zx,{colorway:"primary",onClick:function(e){e.preventDefault(),t(!0)},text:"Upgrade now"}),(0,r.tZ)(Mi.Z,{context:"ghostwriter_chat_metered_trial",isOpen:n,onRequestClose:function(){t(!1)},uponPurchaseGoTo:"workspace",powerUp:"ghostwriter"})]})},Jh=function(e){var n=e.currentUser,t=e.inputRef,i=e.model,l=Boolean((0,ws.useRouter)().query.hideChatInput),c=(0,Kc.Z)(),u=c.ref,s=c.update,d=(0,o.Z)((0,Zp.Jc)(),2),f=d[0],p=d[1],h=(0,Zp.gp)(),v=(0,Zp.ql)(),m=(0,jh.d)(),g=(0,Hh.q)(),Z=g.hasAccessToMeteredTrial,b=g.cap,w=(0,U.Vg)((0,ws.useRouter)()),x=(0,Zp.J)(),C=(0,qh.yL)(i).messageCharacters,k=!m&&b>0,S=function(e){if(e.preventDefault(),!f)return null;p(""),requestAnimationFrame((function(){s()})),v({chatMessage:{type:"chat",text:f}})},T=function(){(0,$.j)($.U3.GHOSTWRITER_CHAT_INPUT_FOCUSED)},E=m||Z,R=function(e){var n=e.enableBridge,t=e.model,r=e.sendChatMessage,i=e.abortResponse,l=(0,o.Z)((0,Zp.Jc)(),2),c=l[0],u=(l[1],(0,Zp.J)()),s=(0,Zp.gp)(),d=(0,hu.P5)({controlName:"flag-mb-gw-chat-bridge"});(0,a.useEffect)((function(){if(n&&d){var e=function(e){return(0,$h.I6)(e,(function(e){var n=e.type;switch(n){case Yh.cF.GHOSTWRITER_CHAT_SEND:r(e.chatMessage),(0,$h.gU)(e.id);break;case Yh.cF.GHOSTWRITER_CHAT_ABORT_RESPONSE:i(),(0,$h.gU)(e.id);break;default:(0,No.Z)(n)}}))};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}}),[i,r,n,d]);var f=(0,a.useCallback)((function(){var e={messageType:Yh.cF.GHOSTWRITER_CHAT_FOCUS_INPUT};(0,$h.bG)(e,xo()())}),[]);return(0,a.useEffect)((function(){var e=(0,qh.yL)(t).messageCharacters,n={messageType:Yh.cF.GHOSTWRITER_CHAT_STATE,chatInputText:c,isSending:s,showStopGenerating:u,characterLimit:e};(0,$h.bG)(n,xo()())}),[c,t,u,d,s]),{focusNativeMobileInput:f}}({enableBridge:E&&w,model:i,sendChatMessage:function(e){v({chatMessage:{type:"chat",text:e}})},abortResponse:function(){G&&_()}}).focusNativeMobileInput,I=(0,a.useCallback)((function(){var e;(T(),w)?R():null===(e=t.current)||void 0===e||e.focus()}),[t,R,w]);(0,a.useEffect)((function(){E&&I()}),[t,E,R,I]),(0,a.useEffect)((function(){p((function(e){return e.slice(0,C)}))}),[p,C]);var G=(0,Wh.j3)(),D=(0,Wh.em)(),_=(0,a.useCallback)((function(){D(),I()}),[D,I]),P=f.length===C;return(0,r.BX)(J.T,{elevated:!0,css:Kh.surface,children:[k?(0,r.tZ)(Vh,{isVerified:Boolean(n.isVerified)}):null,!m&&!Z||l?(0,r.tZ)(Qh,{}):(0,r.BX)(y.G,{css:Kh.messageBoxContainer,children:[(0,r.tZ)(y.G,{css:Kh.feedback,children:(0,r.BX)(y.G,{css:P?Kh.inputCharacterCountMax:Kh.inputCharacterCount,children:[P?(0,r.tZ)(Ci.Z,{}):void 0,(0,r.tZ)(Mh.Z,{maxLength:C,value:f,hideLabel:!0,fontSize:"inherit"})]})}),(0,r.BX)(y.G,{css:Kh.messageBoxSubContainer,tag:"form",disabled:h,onSubmit:S,children:[(0,r.tZ)(jl.q,{src:n.image,username:n.username,size:24}),(0,r.tZ)(y.G,{css:Kh.messageBoxInputContainer,children:(0,r.tZ)(fe.B,{readOnly:h,type:"text",inputMode:"text",maxLength:C,placeholder:"Ask a question about your code\u2026",ref:(0,Qc.l)(u,t),css:Kh.messageBoxInput,onChange:function(e){p(e.target.value)},value:f,onFocus:function(){T()},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.shiftKey?(p((function(e){var n,r;return e.slice(0,null===t||void 0===t||null===(n=t.current)||void 0===n?void 0:n.selectionStart)+"\n"+e.slice(null===t||void 0===t||null===(r=t.current)||void 0===r?void 0:r.selectionEnd,e.length)})),requestAnimationFrame((function(){s()}))):S(e))}})}),x?(0,r.tZ)(me.h,{size:28,alt:"Stop generating",onClick:_,children:(0,r.tZ)(Fh.Z,{})}):(0,r.tZ)(me.h,{alt:"Send message",size:28,type:"submit",disabled:h,css:Kh.inputButton,children:(0,r.tZ)(Oh.Z,{})})]})]})]})},ev=t(35742),nv=t(46699),tv=t(81202),rv=t.n(tv),iv=t(72532),ov=t(18853),av=t(48743),lv=t(35238),cv=t(96395),uv=t(36730),sv=t(89130),dv={performPaneOperation:function(){}},fv=(0,uv.cn)(dv),pv=(0,uv.cn)((function(e){return e(fv).performPaneOperation})),hv=(0,uv.cn)(null,(function(e,n,t){var r=t.path,i=t.line,o=t.col,a=e(pv);a&&a({operation:"open",pane:{type:"codeEditor",data:{path:r,line:i,col:o}}})}));var vv=t(93413),mv=function(){(0,$.j)($.U3.GHOSTWRITER_CHAT_CODE_COPIED)},gv=function(e){var n=e.title;return(0,r.tZ)(y.G,{css:[g.l0.backgroundColor.backgroundDefault,g.l0.px(4),{borderTopLeftRadius:4,borderTopRightRadius:4}],children:(0,r.tZ)(Z.xv,{variant:"small",children:n})})},yv=function(e){var n=e.originalCode,t=e.transformedCode,i=e.filePath,o=e.showDiffDecorations,a=(0,iv.J)({left:{code:n,filePath:i},right:{code:t,filePath:i},showDiffDecorations:o}),l=a.left,u=a.right,s=(0,d.Z)().fs,f=(0,sv.$X)(hv);return(0,r.BX)(y.G,{css:[g.l0.width("100%")],children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.flex.wrap],children:[l.ref?(0,r.BX)(y.G,{css:[{flex:"1 1 50%",minWidth:c.j.mobileMin}],children:[(0,r.tZ)(gv,{title:"original"}),(0,r.tZ)(y.G,{css:[g.l0.backgroundColor.backgroundHigher,g.l0.overflow("auto"),g.l0.maxHeight(300)],innerRef:l.ref})]}):null,u.ref?(0,r.BX)(y.G,{css:[{flex:"1 1 50%",minWidth:c.j.mobileMin}],children:[(0,r.tZ)(gv,{title:"transformed"}),(0,r.tZ)(y.G,{css:[g.l0.backgroundColor.backgroundHigher,g.l0.overflow("auto"),g.l0.maxHeight(300)],innerRef:u.ref})]}):null]}),(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(4),g.l0.pt(8)],children:(0,r.tZ)(K.zx,{small:!0,outlined:!0,iconLeft:(0,r.tZ)(lv.Z,{}),text:i,onClick:function(){f({path:i})}})}),(0,r.tZ)(y.G,{css:[g.l0.rowReverseWithGap(4),g.l0.py(8)],children:(0,r.tZ)(K.zx,{text:"Replace original",colorway:"primary",stretch:!0,css:[g.l0.px(16)],onClick:(0,M.Z)((function(){var e;return(0,W.__generator)(this,(function(n){return e=s.watchTextFile(i,{onReady:function(n){var r=n.initialContent;(0,n.writeChange)({from:0,to:r.toString().length,insert:t}),s.flush().finally((function(){e()}))}}),[2]}))}))})})]})},Zv=t(42824),bv=t(70041),wv=t.n(bv),xv=t(92642),Cv=t(63555),kv=t(71253),Sv=t(66164),Tv=[t(25462).Z,Sv.Z,kv.Z],Ev=[],Rv=function(e){return(0,r.tZ)(y.G,{children:(0,r.tZ)(Z.xv,{multiline:!0,children:e.children})})},Iv=(0,a.memo)((function(e){var n=e.text,t=e.textColor,i=e.codeComponent;return(0,r.tZ)(Ai.ZP,{remarkPlugins:Tv,rehypePlugins:Ev,components:{h1:Rv,h2:Rv,h3:Rv,h4:Rv,h5:Rv,h6:Rv,code:i},css:[Bi.Z,{p:{color:t,lineHeight:1.875}},g.l0.px(16),g.l0.width("100%"),g.l0.maxWidth("100%")],lineBreaks:!0,children:n})})),Gv=t(71058),Dv=t(86430);var _v=function(e){var n=(0,vv.G6)();if(e.inline)return(0,r.tZ)(ov.Z,(0,O.Z)({},e));var t=(0,ov.F)(e.className),i=t&&function(e){switch(e){case"crystal":return"main.cr";case"python":case"py":return"main.py";case"sh":case"fish":case"zsh":case"bash":return"main.sh";case"javascript":case"js":return"index.js";case"typescript":case"ts":return"index.ts";case"csharp":case"cs":return"main.cs";case"java":return"Main.java";case"go":return"main.go";case"ruby":case"rb":return"main.rb";case"php":return"main.php";case"rust":return"main.rs";case"swift":return"main.swift";case"kotlin":return"main.kt";case"scala":return"main.scala";case"c":return"main.c";case"cpp":case"c++":return"main.cpp";case"dart":return"main.dart";case"elixir":return"main.ex";case"haskell":return"Main.hs";case"lua":return"main.lua";case"perl":return"main.pl";case"r":return"main.r";case"sql":return"main.sql";case"ocaml":return"main.ml";case"html":return"index.html";case"json":return"main.json";case"css":return"main.css";default:return}}(t),o=i?Gv.$R.from(i):void 0,a=null===o||void 0===o?void 0:o.name,l=String(e.children);return(0,r.tZ)(y.G,{css:[g.l0.colWithGap(12)],children:(0,r.BX)(y.G,{children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.align.center,g.l0.p(8),g.l0.backgroundColor.backgroundDefault,{borderTopLeftRadius:4,borderTopRightRadius:4}],children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.align.center,{flexGrow:1}],children:[i?(0,r.tZ)(Go.Z,{size:12,path:i}):null,a?(0,r.tZ)(Z.xv,{css:[g.l0.pl(4),g.l0.fontSize(12),g.l0.color.foregroundDimmer],children:a}):null]}),(0,r.tZ)(Dv.f,{code:l}),(0,r.tZ)(n,{code:l})]}),(0,r.tZ)(ov.Z,(0,O.Z)({disableCopy:!0,blockStyles:[g.l0.p(8),{borderBottomLeftRadius:4,borderBottomRightRadius:4}]},e))]})})},Pv=wv()((function(){return t.e(766).then(t.bind(t,90766))}),{loadableGenerated:{webpack:function(){return[90766]}}}),Bv=function(e){var n=e.author,t=e.intent,i=t&&"NONE"!==t;return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.align.center],children:[(0,r.tZ)(ev.n,{src:n.image,username:n.username}),i?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Z.xv,{children:"used"}),(0,r.tZ)(Uv,{intent:t})]}):null]})},Av=function(){return(0,r.BX)(y.G,{css:[g.l0.color.accentNegativeStronger,g.l0.flex.row,g.l0.rowWithGap(4),g.l0.align.center],children:[(0,r.tZ)(Ci.Z,{}),(0,r.tZ)(Z.xv,{multiline:!0,children:"Response reached maximum output length"})]})},Uv=function(e){var n,t,i=e.intent;if("GENERATE"===i)n="Generate Code",t=(0,r.tZ)(av.Sparkle,{});else if("TRANSFORM"===i)n="Transform Code",t=(0,r.tZ)(Cv.Z,{});else if("EXPLAIN"===i)n="Explain Code",t=(0,r.tZ)(av.BookClosed,{});else{if("REPLIT_DOCS"!==i)return null;n="Replit Docs",t=(0,r.tZ)("div",{children:(0,r.BX)("div",{css:[g.l0.position.relative,g.l0.width(16),g.l0.height(16)],children:[(0,r.tZ)(av.BookClosed,{}),(0,r.tZ)(av.Logo,{css:[g.l0.position.absolute],style:{transform:"scale(0.5)",top:0,left:.3}})]})})}return(0,r.tZ)(ki.D,{colorway:"blurple",text:n,iconLeft:t})},Nv=(0,a.memo)((function(e){var n,t,i=e.message,o=e.autoScroll,c=e.shouldShowRegenerateButton,u=e.postMessageComponent,s=i.text,d=i.author,f=i.loading,p=i.error,h=i.attribution,v=i.inferenceId,m=i.stopReason,b=(0,Zp.Gd)(),w=(0,cv.d$)(),x="Assistant"===h,C=m===qh.tD.MaxTokens,k=(0,cv.wK)({messageId:i.id}),S=(0,a.useRef)(null),T=(0,xv.rM)();(0,a.useLayoutEffect)((function(){o&&S.current&&requestAnimationFrame((function(){o&&S.current&&((0,l.Z)(S.current,{behavior:"auto",scrollMode:"always"}),T(!0))}))}),[s,o,T]);var E=g.TV.foregroundDefault;x&&f&&(E=g.TV.foregroundDimmer);var R,I=Boolean(i.stopReason),G=(0,an.Z)((function(){var e,n,t,i,o=null===k||void 0===k||null===(e=k.workspaceContext)||void 0===e?void 0:e.mostRecentFile,a=null!==(i=null===k||void 0===k||null===(n=k.workspaceContext)||void 0===n?void 0:n.fileContext.find((function(e){return e.filePath===o})))&&void 0!==i?i:null===k||void 0===k||null===(t=k.workspaceContext)||void 0===t?void 0:t.fileContext[0],l=null===a||void 0===a?void 0:a.code;return o&&l?function(e){var n=e.originalCode,t=e.filePath,i=e.showDiffDecorations;return function(e){var o=String(e.children);return(0,an.Z)((function(){return e.inline?(0,r.tZ)(ov.Z,(0,O.Z)({onCodeCopied:mv},e)):(0,r.tZ)(yv,{originalCode:n,transformedCode:o,filePath:t,showDiffDecorations:i})}),[e,o])}}({originalCode:l,filePath:o,showDiffDecorations:I}):_v}),[null===k||void 0===k||null===(n=k.workspaceContext)||void 0===n?void 0:n.fileContext,null===k||void 0===k||null===(t=k.workspaceContext)||void 0===t?void 0:t.mostRecentFile,I]);return R="GENERATE"===i.intent?_v:"TRANSFORM"===i.intent?G:_v,(0,r.BX)(y.G,{css:[g.l0.px(8),g.l0.py(12),g.l0.colWithGap(8),"Assistant"===h?{background:"linear-gradient(90.7deg, rgba(82, 57, 204, 0.1) 0.6%, rgba(166, 148, 255, 0.1) 137.79%)",borderWidth:"1px 0px",borderStyle:"solid",borderColor:"rgba(121, 94, 255, 0.5)"}:null],children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.justify.spaceBetween,g.l0.align.center],children:[(0,r.tZ)(Bv,{author:d,intent:i.intent}),x&&c?(0,r.tZ)(me.h,{alt:"Regenerate",css:{"&:not(:hover)":[g.l0.color.foregroundDimmer]},onClick:function(){b(i.id)},children:(0,r.tZ)(nv.Z,{})}):null,v?(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:(0,r.tZ)(Zv.Z,{inferenceClass:Is.Sg.Chat,inferenceId:v,language:""})}):null]}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[x&&f?(0,r.tZ)(pe.Z,{}):null,(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8),g.l0.flex.growAndShrink(1)],children:(0,r.tZ)(Iv,{text:s,textColor:E,codeComponent:R})})]}),u||null,x&&"string"===typeof p?(0,r.tZ)(y.G,{children:(0,r.tZ)(Z.xv,{css:[g.l0.color.accentNegativeStronger,g.l0.fontSize(16)],multiline:!0,children:p})}):null,C?(0,r.tZ)(Av,{}):null,w?(0,r.tZ)(Pv,{message:i}):null,o?(0,r.tZ)(y.G,{css:{marginTop:-8,marginBottom:0},innerRef:S}):null]})}),(function(e,n){return n.autoScroll===e.autoScroll&&n.shouldShowRegenerateButton===e.shouldShowRegenerateButton&&rv()(n.message,e.message)})),Lv=t(13469),Xv=function(e){var n=e.inputRef,t=e.text,i=e.promptToFill,a=(0,o.Z)((0,Zp.Jc)(),2)[1];return(0,r.tZ)(K.zx,{iconLeft:(0,r.tZ)(Oh.Z,{}),text:t,onClick:function(){!function(){var e;a(i),(0,$.j)($.U3.GHOSTWRITER_CHAT_EXAMPLE_CLICKED,{prompt:i}),null===n||void 0===n||null===(e=n.current)||void 0===e||e.focus()}()}})},Mv=[{text:'"How do I scrape a website for <a> tags?"',promptToFill:"How do I scrape a website for <a> tags?"},{text:'"Write a login page in HTML and CSS"',promptToFill:"Write a login page in HTML and CSS"},{text:(0,r.BX)(r.HY,{children:['"How can I improve the code in ',(0,r.tZ)("em",{children:"filename.js"}),'?"']}),promptToFill:"How can I improve the code in "},{text:'"How do I use the pandas apply function?"',promptToFill:"How do I use the pandas apply function?"}],Ov=function(e){var n=e.inputRef,t=e.samplesNumber,i=(0,an.Z)((function(){return Mv.sort((function(){return Math.random()-.5}))}),[]);return(0,r.tZ)(r.HY,{children:i.map((function(e,t){return(0,r.tZ)(Xv,{inputRef:n,text:e.text,promptToFill:e.promptToFill},t)})).slice(0,t)})},Fv=(0,b.X)({messageEmptyStateSamplePrompts:[g.l0.rowWithGap(8),g.l0.flex.wrap,g.l0.px(16),g.l0.align.center,{gap:Lv.TV.space8}],messageEmptyState:[g.l0.colWithGap(16),g.l0.overflow("auto"),g.l0.flex.growAndShrink(1),g.l0.pt(12)]}),Wv=function(e){var n=e.inputRef,t=e.username,i=(0,r.tZ)(y.G,{css:Fv.messageEmptyStateSamplePrompts,children:(0,r.tZ)(Ov,{inputRef:n,samplesNumber:3})});return(0,r.tZ)(y.G,{css:Fv.messageEmptyState,role:"log",children:(0,r.tZ)(Nv,{message:{id:"empty-state",type:"chat",loading:!1,text:"Hey @".concat(t,", I\u2019m Ghostwriter, Replit\u2019s AI pair programmer. I\u2019m here to answer questions about your code and assist your thinking!"),author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},attribution:"Assistant"},postMessageComponent:i})})};function Hv(){var e=(0,ct.Z)(["\n  query GhostwriterChatCurrentUserQuery {\n    currentUser {\n      username\n      id\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isVerified\n      userPowerUpsByType {\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            meteredTrial {\n              messagesSentInPeriod\n              cap\n              hasAccessToMeteredTrial\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return Hv=function(){return e},e}var zv={},Vv=(0,ut.Ps)(Hv());var jv=function(){return(0,r.BX)(y.G,{css:[g.l0.colWithGap(16),g.l0.align.center,g.l0.p(24),g.l0.height("100%"),g.l0.justify.center],children:[(0,r.tZ)(y.G,{css:[g.l0.maxWidth(200)],children:(0,r.tZ)(Fi.Z,{src:"/public/images/ghostwriter/orb.jpg",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(g.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1})}),(0,r.tZ)(Z.xv,{variant:"subheadBig",children:"Chat with Ghostwriter"}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(pe.Z,{}),(0,r.tZ)(Z.xv,{color:"dimmer",children:"Loading\u2026"})]})]})},qv=t(64920),$v=t(81974),Yv=t(13172),Kv=t(58401),Qv=t(68730),Jv=function(){return(0,r.BX)(y.G,{css:[g.l0.center,g.l0.textAlign.center,g.l0.px(16),g.l0.colWithGap(8),g.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(Z.xv,{variant:"headerBig",multiline:!0,children:"Ghostwriter is currently unavailable. Please try again later."}),(0,r.tZ)(Fi.Z,{src:"/public/images/ghostwriter/orb.jpg",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(g.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1})]})};function em(e){var n,t=(0,U.T3)(),i=(0,o.Z)((0,Zp.zu)(),1)[0],l=(0,xp.v)(),c=function(e){var n=(0,O.Z)({},zv,e);return st.a(Vv,n)}(),u=c.data,s=c.loading,d=c.error,f=(0,Zn.Z)(),p=(0,qv.v3)();(0,a.useEffect)((function(){(null===u||void 0===u?void 0:u.currentUser)&&p({chatModel:l,replId:f,currentUser:null===u||void 0===u?void 0:u.currentUser})}),[l,null===u||void 0===u?void 0:u.currentUser,f,p]);var h=(0,a.useState)(!1),v=h[0],m=h[1],Z=null===u||void 0===u||null===(n=u.currentUser)||void 0===n?void 0:n.isStaff,b=(0,o.Z)((0,cv.RN)(),2),w=b[0],x=b[1],C=(0,Zp.ZT)(),k=(0,an.Z)((function(){return[{type:"action",label:"Clear chat history",icon:(0,r.tZ)(we.Z,{}),run:function(){(0,$.j)($.U3.GHOSTWRITER_CHAT_CLEARED),C()}}]}),[C]),S=(0,an.Z)((function(){var e=[{match:$v.pl,data:{type:"action",icon:(0,r.tZ)(Qv.Z,{}),label:"Share feedback",run:function(){return m(!0)}}}];if(Z){var n={match:$v.pl,data:{type:"action",icon:(0,r.tZ)(ph.Z,{fill:w?g.TV.accentPrimaryDefault:g.TV.foregroundDefault}),label:"Toggle debug mode",run:function(){x((function(e){return!e}))}}};e.push(n)}return e}),[w,x,Z]),T=(0,a.useRef)(null);(0,B.L5)((function(){return{actions:k,commands:S,focus:function(){var e;null===T||void 0===T||null===(e=T.current)||void 0===e||e.focus()}}}),[k,S]);var E=(0,a.useRef)(null),R=(0,o.Z)((0,xv.Z_)(),2),I=R[0],G=R[1],D=(0,o.Z)((0,xv.Z9)(),2),_=D[0],P=D[1],A=(0,a.useCallback)((function(){_?P(!1):null==E.current||E.current.scrollHeight-E.current.scrollTop!==E.current.clientHeight?G(!1):G(!0)}),[_,G,P]);return s?(0,r.tZ)(jv,{}):d||!(null===u||void 0===u?void 0:u.currentUser)?(0,r.BX)(y.G,{children:["error:"," ",(null===d||void 0===d?void 0:d.message)||"User not found, please log in or reload"]}):(0,r.BX)(y.G,{css:[g.l0.flex.column,g.l0.maxHeight("100%"),g.l0.maxWidth("100%"),g.l0.flex.grow(1),!t&&g.l0.overflow("hidden")],dataCy:"ghostwriter-chat",children:[(0,r.tZ)(Kv.Z,{isOpen:v,setOpen:m,feature:Yv.l.GhostWriter}),i.length?(0,r.tZ)(y.G,{innerRef:E,css:[g.l0.colWithGap(16),g.l0.overflow("auto"),g.l0.flex.growAndShrink(1),g.l0.pt(12)],onScroll:A,role:"log",children:i.map((function(n,o){return(0,r.tZ)(Nv,{message:n,autoScroll:I&&o===i.length-1&&(e.paneIsActive||!t),shouldShowRegenerateButton:o===i.length-1&&"string"===typeof n.error},o)}))}):(0,r.tZ)(Wv,{inputRef:T,username:u.currentUser.username}),(0,r.tZ)(Jh,{currentUser:u.currentUser,inputRef:T,model:l})]})}var nm=function(e){var n=(0,hu.P5)({controlName:"flag-killswitch-ghostwriter-chat"});return function(e){var n=e.debugMode,t=void 0!==n&&n,r=e.performPaneOperation,i=(0,sv.Uu)(),o=(0,an.Z)((function(){return{performPaneOperation:r}}),[r]);(0,a.useEffect)((function(){return i.set(cv.nE,t),i.set(fv,o),function(){i.set(cv.nE,!1),i.set(fv,dv)}}),[t,o,i])}({performPaneOperation:e.performPaneOperation}),(0,r.tZ)(r.HY,{children:n?(0,r.tZ)(Jv,{}):(0,r.tZ)(em,{paneIsActive:e.paneIsActive})})},tm={Content:function(e){var n=e.options;return(0,r.tZ)(nm,{paneIsActive:n.isActive,performPaneOperation:n.performPaneOperation})},Icon:function(e){var n=e.size;return(0,r.tZ)(Xh.Z,{size:n})},getTitle:function(){return"Ghostwriter"}},rm=t(51814);function im(){return{filetree:rm.Z,codeEditor:G.D,webview:Ji.R,media:Do,pedit:hp,vnc:to,unitTests:gp,adminPanel:hh,runnerOutput:N,shell:ao,packager:Rn,envEditor:Ae,draw:Eo,git:vd,history:ip,database:bt,neon:Qi,markdown:I,sshConfigurator:Nh,ghostwriterChat:tm}}},20866:function(e,n,t){t.d(n,{kz:function(){return b},F3:function(){return d},fK:function(){return g},DQ:function(){return s},Dp:function(){return l},Ur:function(){return u},RX:function(){return c},b:function(){return p},v:function(){return r},Se:function(){return Z}});var r={filetree:!0,codeEditor:!0,database:!0,neon:!0,replAuth:!0,webview:!0,media:!0,vnc:!0,pedit:!0,education:!0,runnerOutput:!0,unitTests:!0,autograder:!0,markdown:!0,shell:!0,packager:!0,envEditor:!0,commands:!0,draw:!0,preferences:!0,adminPanel:!0,git:!0,history:!0,kaboombar:!0,instructions:!0,debugger:!0,tutorial:!0,config:!0,threadInbox:!0,extension:!0,extensionStore:!0,docs:!0,videoPlayer:!0,chat:!0,deployments:!0,modules:!0,sshConfigurator:!0,multiplayer:!0,ghostwriterChat:!0,submitEduRepl:!0,searchReplace:!0,extensionDevtools:!0},i=t(11122),o=t(22167),a=t(37248);function l(e){var n=e.path;return n?(0,a.T3)(n)?"media":(0,a.sL)(n)?"draw":(0,a.IQ)(n)?"pedit":"codeEditor":"codeEditor"}function c(e){return"codeEditor"===e||"media"===e||"pedit"===e||"draw"===e||"history"===e}function u(e){return c(e.type)}function s(e){return u(e)?e.data.path:null}var d=(0,i.iv)([o.l0.width("100%"),o.l0.maxWidth(600),{marginLeft:"auto",marginRight:"auto"}]),f=["autograder","education","instructions","markdown","threadInbox","extensionStore","chat","docs","webview","vnc","runnerOutput","git","packager","envEditor","debugger","tutorial","kaboombar","database","neon","replAuth","autograder","unitTests","education","preferences","deployments","ghostwriterChat","extensionDevtools"];function p(e){return f.includes(e)}var h=t(4541),v=t(50959),m={type:"commands",data:{autoFocus:!1}};function g(e){var n=e.config;return{Icon:function(e){var t=e.pane,r=e.size,i=void 0===r?16:r,o=n[t.type]?t:m,a=n[o.type].Icon;return(0,h.tZ)(a,{pane:o,size:i})},Content:function(e){var t=e.pane,r=e.options,i=n[t.type]?t:m,o=n[i.type].Content;return(0,h.tZ)(o,{pane:i,options:r})},getTitle:function(e){var t=n[e.type]?e:m;return n[t.type].getTitle(t)}}}var y=(0,v.createContext)(null);function Z(){var e=(0,v.useContext)(y);if(!e)throw new Error("Expected PaneUI in context");return e}var b=y.Provider},31743:function(e,n,t){t.d(n,{L5:function(){return v},Xq:function(){return Z},Y6:function(){return m},bS:function(){return g}});var r=t(57135),i=t(9970),o=t(96583),a=t(50959),l=t(36730),c=t(92153),u=t(7247),s=t(10161),d=t(98689),f=t(10782),p=(0,l.cn)({}),h=(0,l.cn)(null,(function(e,n,t){n(p,(function(e){return(0,c.ZP)(e,(function(e){null===t.actions?delete e[t.paneId]:e[t.paneId]=t.actions}))}))}));function v(e,n){var t=function(){var e=(0,a.useContext)(y);if(!e)throw new Error("Expected pane id in context");return e}(),r=(0,f.$X)(h),o=(0,d.Z)(e);(0,a.useEffect)((function(){var e;return r({paneId:t,actions:null!==(e=o.current())&&void 0!==e?e:null}),function(){r({paneId:t,actions:null})}}),[r,t,o].concat((0,i.Z)(n)))}function m(e){var n=(0,u.Z)((function(){return(0,s.kv)(p,(function(n){return e?n[e]:{}}))}),[e]);return(0,f.Hg)(n)}function g(){var e=(0,f.XD)(p);return(0,u.Z)((function(){return function(){var n=(0,r.Z)((function(n){var t,r;return(0,o.__generator)(this,(function(i){return null===(r=e()[n])||void 0===r||null===(t=r.focus)||void 0===t||t.call(r),[2]}))}));return function(e){return n.apply(this,arguments)}}()}),[e])}var y=(0,a.createContext)(null);var Z=y.Provider},85647:function(e,n,t){t.d(n,{Np:function(){return E},Xo:function(){return I},fg:function(){return D},gv:function(){return R},jY:function(){return G}});var r=t(2272),i=t(9970),o=t(20866),a=t(81202),l=t.n(a),c=t(92153),u=t(50959),s=t(36730),d=t(10782),f=t(7247),p=(0,s.cn)(null),h=(0,s.cn)(new Map),v=(0,s.cn)([]),m=(0,s.cn)(null,(function(e,n,t){n(h,(function(e){return(0,c.ZP)(e,(function(e){var n=e.get(t.paneId),r=Date.now();if(n){var i=n.panes.at(-1);n.lastActiveAt=r,l()(t.pane,i)||n.panes.push(t.pane)}else e.set(t.paneId,{panes:[t.pane],lastActiveAt:r})}))})),n(p,t.paneId)})),g=(0,s.cn)(null,(function(e,n,t){var r=e(p),i=e(h).get(t);i&&n(v,(function(e){return(0,c.ZP)(e,(function(e){e.push(i.panes)}))})),n(h,(function(e){return(0,c.ZP)(e,(function(e){e.delete(t)}))})),r===t&&n(p,null)})),y=(0,s.cn)(null,(function(e,n,t){n(h,(function(e){return(0,c.ZP)(e,(function(e){var n=e.get(t);n&&(n.lastActiveAt=Date.now())}))})),n(p,t)})),Z=(0,s.cn)(null,(function(e,n){n(p,null)})),b=(0,s.cn)((function(e){return(0,i.Z)(e(h).values()).sort((function(e,n){return n.lastActiveAt-e.lastActiveAt})).map((function(e){return e.panes}))})),w=(0,s.cn)((function(e){var n=e(h),t=[];return n.forEach((function(e,n){var r=e.panes.at(-1);r&&t.push([n,r,e.lastActiveAt])})),t.sort((function(e,n){return e[2]-n[2]}))})),x=(0,s.cn)((function(e){var n=[],t=!0,i=!1,a=void 0;try{for(var l,c=e(w)[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var u=(0,r.Z)(l.value,2),s=(u[0],u[1]),d=(0,o.Ur)(s)?s.data.path:null;d&&n.push(d)}}catch(f){i=!0,a=f}finally{try{t||null==c.return||c.return()}finally{if(i)throw a}}return n})),C=(0,s.cn)((function(e){var n=[],t=!0,r=!1,o=void 0;try{for(var a,l=e(b)[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c,u=a.value;u.length<=1||(c=n).push.apply(c,(0,i.Z)(u.slice(0,-1)))}}catch(y){r=!0,o=y}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}var s=!0,d=!1,f=void 0;try{for(var p,h=e(v)[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var m,g=p.value;(m=n).push.apply(m,(0,i.Z)(g))}}catch(y){d=!0,f=y}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}return n})),k=(0,s.cn)(null,(function(e,n){var t=e(v).flat().pop();return n(v,(function(e){return(0,c.ZP)(e,(function(e){var n=e.pop();n&&n.pop()}))})),t})),S=(0,s.cn)((function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var a,l=e(C)[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=a.value,u=(0,o.Ur)(c)?c.data.path:null;u&&n.push(u)}}catch(s){r=!0,i=s}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}return n})),T=((0,s.cn)((function(e){return(0,i.Z)(e(x)).concat((0,i.Z)(e(S)))})),(0,s.cn)((function(e){var n=e(p);if(!n)return null;var t=e(h).get(n);return(null===t||void 0===t?void 0:t.panes.at(-1))||null})));(0,s.cn)((function(e){var n=e(T);return n&&(0,o.Ur)(n)&&n.data.path||null}));function E(e,n){var t=(0,d.$X)(m),r=(0,d.$X)(g);(0,u.useEffect)((function(){t({paneId:e,pane:n})}),[t,e,n]),(0,u.useEffect)((function(){return function(){r(e)}}),[r,e])}function R(){return(0,d.$X)(k)}function I(){return(0,d.$X)(y)}function G(){return(0,d.$X)(Z)}function D(){var e=(0,d.yL)(x);return(0,f.Z)((function(){return function(n){return new Promise((function(t,r){var i=e.subscribe((function(e){e.includes(n)||(i(),t())}))}))}}),[e])}},85599:function(e,n,t){t.d(n,{OO:function(){return r},Uw:function(){return i},vw:function(){return o}});var r="replit-code-v1-3b",i={"replit-code-v1-3b":{},"replit-repltuned-v1-3b":{},"self-hosted-santa-1b":{infill:!0},"gwtraining-test1":{},"gwtraining-test2":{},"gwtraining-test3":{},"language-dependent":{},"gpt-3.5-turbo":{implementation:"chat-as-completion",implementationSettings:{model:"gpt-3.5-turbo"}},"google-augdev-001":{implementation:"google-model-as-completion",infill:!0},"code-gecko@001":{implementation:"google-vertex-model-as-completion",implementationSettings:{model:"code-gecko@001"},infill:!0}},o=new Set(Object.keys(i))},86056:function(e,n,t){t.d(n,{F5:function(){return d},Hk:function(){return u},Kd:function(){return s},N$:function(){return c},Ob:function(){return l},Vl:function(){return a},Vt:function(){return r},ig:function(){return i},lF:function(){return o}});var r=/^([A-Za-z0-9_]{1,15})\/?$/,i=/^([%A-Za-z0-9]+|-)*\/?$/,o=/^([A-Za-z\d](?:[A-Za-z\d]|-){0,38})\/?$/,a=/^https:\/\/(www\.)?youtube\.com(\/(c|channel|user|@(\w)+))*(\/([A-Za-z0-9_-]+))*(\/?)$/,l=/^(.{2,32}#[0-9]{4})$|^([a-zA-Z0-9_.]{2,32})$/,c="https://twitter.com/",u="https://www.linkedin.com/in/",s="https://github.com/",d=/\/$/}}]);
//# sourceMappingURL=8937-9a6f3d713f71ad63.js.map